"use strict";var za=Object.defineProperty;var Ha=(fe,e,ye)=>e in fe?za(fe,e,{enumerable:!0,configurable:!0,writable:!0,value:ye}):fe[e]=ye;var Ai=(fe,e,ye)=>(Ha(fe,typeof e!="symbol"?e+"":e,ye),ye);const c$4=require("events"),require$$1=require("crypto"),t=Symbol(),s=Object.getPrototypeOf,c$3=new WeakMap,l$3=fe=>fe&&(c$3.has(fe)?c$3.get(fe):s(fe)===Object.prototype||s(fe)===Array.prototype),y$6=fe=>l$3(fe)&&fe[t]||null,h$9=(fe,e=!0)=>{c$3.set(fe,e)},isObject=fe=>typeof fe=="object"&&fe!==null,proxyStateMap=new WeakMap,refSet=new WeakSet,buildProxyFunction=(fe=Object.is,e=(gr,we)=>new Proxy(gr,we),ye=gr=>isObject(gr)&&!refSet.has(gr)&&(Array.isArray(gr)||!(Symbol.iterator in gr))&&!(gr instanceof WeakMap)&&!(gr instanceof WeakSet)&&!(gr instanceof Error)&&!(gr instanceof Number)&&!(gr instanceof Date)&&!(gr instanceof String)&&!(gr instanceof RegExp)&&!(gr instanceof ArrayBuffer),me=gr=>{switch(gr.status){case"fulfilled":return gr.value;case"rejected":throw gr.reason;default:throw gr}},be=new WeakMap,ve=(gr,we,Se=me)=>{const $r=be.get(gr);if(($r==null?void 0:$r[0])===we)return $r[1];const Fr=Array.isArray(gr)?[]:Object.create(Object.getPrototypeOf(gr));return h$9(Fr,!0),be.set(gr,[we,Fr]),Reflect.ownKeys(gr).forEach(Br=>{if(Object.getOwnPropertyDescriptor(Fr,Br))return;const Vr=Reflect.get(gr,Br),oo={value:Vr,enumerable:!0,configurable:!0};if(refSet.has(Vr))h$9(Vr,!1);else if(Vr instanceof Promise)delete oo.value,oo.get=()=>Se(Vr);else if(proxyStateMap.has(Vr)){const[so,kr]=proxyStateMap.get(Vr);oo.value=ve(so,kr(),Se)}Object.defineProperty(Fr,Br,oo)}),Object.preventExtensions(Fr)},Ee=new WeakMap,Oe=[1,1],xe=gr=>{if(!isObject(gr))throw new Error("object required");const we=Ee.get(gr);if(we)return we;let Se=Oe[0];const $r=new Set,Fr=(no,Xr=++Oe[0])=>{Se!==Xr&&(Se=Xr,$r.forEach(to=>to(no,Xr)))};let Br=Oe[1];const Vr=(no=++Oe[1])=>(Br!==no&&!$r.size&&(Br=no,so.forEach(([Xr])=>{const to=Xr[1](no);to>Se&&(Se=to)})),Se),oo=no=>(Xr,to)=>{const ao=[...Xr];ao[1]=[no,...ao[1]],Fr(ao,to)},so=new Map,kr=(no,Xr)=>{if($r.size){const to=Xr[3](oo(no));so.set(no,[Xr,to])}else so.set(no,[Xr])},qr=no=>{var Xr;const to=so.get(no);to&&(so.delete(no),(Xr=to[1])==null||Xr.call(to))},Hr=no=>($r.add(no),$r.size===1&&so.forEach(([to,ao],bo)=>{const Wr=to[3](oo(bo));so.set(bo,[to,Wr])}),()=>{$r.delete(no),$r.size===0&&so.forEach(([to,ao],bo)=>{ao&&(ao(),so.set(bo,[to]))})}),Yr=Array.isArray(gr)?[]:Object.create(Object.getPrototypeOf(gr)),Mr=e(Yr,{deleteProperty(no,Xr){const to=Reflect.get(no,Xr);qr(Xr);const ao=Reflect.deleteProperty(no,Xr);return ao&&Fr(["delete",[Xr],to]),ao},set(no,Xr,to,ao){const bo=Reflect.has(no,Xr),Wr=Reflect.get(no,Xr,ao);if(bo&&(fe(Wr,to)||Ee.has(to)&&fe(Wr,Ee.get(to))))return!0;qr(Xr),isObject(to)&&(to=y$6(to)||to);let Jr=to;if(to instanceof Promise)to.then(fo=>{to.status="fulfilled",to.value=fo,Fr(["resolve",[Xr],fo])}).catch(fo=>{to.status="rejected",to.reason=fo,Fr(["reject",[Xr],fo])});else{!proxyStateMap.has(to)&&ye(to)&&(Jr=xe(to));const fo=!refSet.has(Jr)&&proxyStateMap.get(Jr);fo&&kr(Xr,fo)}return Reflect.set(no,Xr,Jr,ao),Fr(["set",[Xr],to,Wr]),!0}});Ee.set(gr,Mr);const Lr=[Yr,Vr,ve,Hr];return proxyStateMap.set(Mr,Lr),Reflect.ownKeys(gr).forEach(no=>{const Xr=Object.getOwnPropertyDescriptor(gr,no);"value"in Xr&&(Mr[no]=gr[no],delete Xr.value,delete Xr.writable),Object.defineProperty(Yr,no,Xr)}),Mr})=>[xe,proxyStateMap,refSet,fe,e,ye,me,be,ve,Ee,Oe],[defaultProxyFunction]=buildProxyFunction();function proxy(fe={}){return defaultProxyFunction(fe)}function subscribe(fe,e,ye){const me=proxyStateMap.get(fe);let be;const ve=[],Ee=me[3];let Oe=!1;const gr=Ee(we=>{if(ve.push(we),ye){e(ve.splice(0));return}be||(be=Promise.resolve().then(()=>{be=void 0,Oe&&e(ve.splice(0))}))});return Oe=!0,()=>{Oe=!1,gr()}}function snapshot(fe,e){const ye=proxyStateMap.get(fe),[me,be,ve]=ye;return ve(me,be(),e)}const o$1=proxy({history:["ConnectWallet"],view:"ConnectWallet",data:void 0}),T$3={state:o$1,subscribe(fe){return subscribe(o$1,()=>fe(o$1))},push(fe,e){fe!==o$1.view&&(o$1.view=fe,e&&(o$1.data=e),o$1.history.push(fe))},reset(fe){o$1.view=fe,o$1.history=[fe]},replace(fe){o$1.history.length>1&&(o$1.history[o$1.history.length-1]=fe,o$1.view=fe)},goBack(){if(o$1.history.length>1){o$1.history.pop();const[fe]=o$1.history.slice(-1);o$1.view=fe}},setData(fe){o$1.data=fe}},a$4={WALLETCONNECT_DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",WCM_VERSION:"WCM_VERSION",RECOMMENDED_WALLET_AMOUNT:9,isMobile(){return typeof window<"u"?!!(window.matchMedia("(pointer:coarse)").matches||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},isAndroid(){return a$4.isMobile()&&navigator.userAgent.toLowerCase().includes("android")},isIos(){const fe=navigator.userAgent.toLowerCase();return a$4.isMobile()&&(fe.includes("iphone")||fe.includes("ipad"))},isHttpUrl(fe){return fe.startsWith("http://")||fe.startsWith("https://")},isArray(fe){return Array.isArray(fe)&&fe.length>0},formatNativeUrl(fe,e,ye){if(a$4.isHttpUrl(fe))return this.formatUniversalUrl(fe,e,ye);let me=fe;me.includes("://")||(me=fe.replaceAll("/","").replaceAll(":",""),me=`${me}://`),me.endsWith("/")||(me=`${me}/`),this.setWalletConnectDeepLink(me,ye);const be=encodeURIComponent(e);return`${me}wc?uri=${be}`},formatUniversalUrl(fe,e,ye){if(!a$4.isHttpUrl(fe))return this.formatNativeUrl(fe,e,ye);let me=fe;me.endsWith("/")||(me=`${me}/`),this.setWalletConnectDeepLink(me,ye);const be=encodeURIComponent(e);return`${me}wc?uri=${be}`},async wait(fe){return new Promise(e=>{setTimeout(e,fe)})},openHref(fe,e){window.open(fe,e,"noreferrer noopener")},setWalletConnectDeepLink(fe,e){try{localStorage.setItem(a$4.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:fe,name:e}))}catch{console.info("Unable to set WalletConnect deep link")}},setWalletConnectAndroidDeepLink(fe){try{const[e]=fe.split("?");localStorage.setItem(a$4.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:e,name:"Android"}))}catch{console.info("Unable to set WalletConnect android deep link")}},removeWalletConnectDeepLink(){try{localStorage.removeItem(a$4.WALLETCONNECT_DEEPLINK_CHOICE)}catch{console.info("Unable to remove WalletConnect deep link")}},setModalVersionInStorage(){try{typeof localStorage<"u"&&localStorage.setItem(a$4.WCM_VERSION,"2.6.2")}catch{console.info("Unable to set Web3Modal version in storage")}},getWalletRouterData(){var fe;const e=(fe=T$3.state.data)==null?void 0:fe.Wallet;if(!e)throw new Error('Missing "Wallet" view data');return e}},_$6=typeof location<"u"&&(location.hostname.includes("localhost")||location.protocol.includes("https")),r$1=proxy({enabled:_$6,userSessionId:"",events:[],connectedWalletId:void 0}),R$3={state:r$1,subscribe(fe){return subscribe(r$1.events,()=>fe(snapshot(r$1.events[r$1.events.length-1])))},initialize(){r$1.enabled&&typeof(crypto==null?void 0:crypto.randomUUID)<"u"&&(r$1.userSessionId=crypto.randomUUID())},setConnectedWalletId(fe){r$1.connectedWalletId=fe},click(fe){if(r$1.enabled){const e={type:"CLICK",name:fe.name,userSessionId:r$1.userSessionId,timestamp:Date.now(),data:fe};r$1.events.push(e)}},track(fe){if(r$1.enabled){const e={type:"TRACK",name:fe.name,userSessionId:r$1.userSessionId,timestamp:Date.now(),data:fe};r$1.events.push(e)}},view(fe){if(r$1.enabled){const e={type:"VIEW",name:fe.name,userSessionId:r$1.userSessionId,timestamp:Date.now(),data:fe};r$1.events.push(e)}}},c$2=proxy({chains:void 0,walletConnectUri:void 0,isAuth:!1,isCustomDesktop:!1,isCustomMobile:!1,isDataLoaded:!1,isUiLoaded:!1}),p$6={state:c$2,subscribe(fe){return subscribe(c$2,()=>fe(c$2))},setChains(fe){c$2.chains=fe},setWalletConnectUri(fe){c$2.walletConnectUri=fe},setIsCustomDesktop(fe){c$2.isCustomDesktop=fe},setIsCustomMobile(fe){c$2.isCustomMobile=fe},setIsDataLoaded(fe){c$2.isDataLoaded=fe},setIsUiLoaded(fe){c$2.isUiLoaded=fe},setIsAuth(fe){c$2.isAuth=fe}},W$3=proxy({projectId:"",mobileWallets:void 0,desktopWallets:void 0,walletImages:void 0,chains:void 0,enableAuthMode:!1,enableExplorer:!0,explorerExcludedWalletIds:void 0,explorerRecommendedWalletIds:void 0,termsOfServiceUrl:void 0,privacyPolicyUrl:void 0}),y$5={state:W$3,subscribe(fe){return subscribe(W$3,()=>fe(W$3))},setConfig(fe){var e,ye;R$3.initialize(),p$6.setChains(fe.chains),p$6.setIsAuth(!!fe.enableAuthMode),p$6.setIsCustomMobile(!!((e=fe.mobileWallets)!=null&&e.length)),p$6.setIsCustomDesktop(!!((ye=fe.desktopWallets)!=null&&ye.length)),a$4.setModalVersionInStorage(),Object.assign(W$3,fe)}};var V$4=Object.defineProperty,D$7=Object.getOwnPropertySymbols,H$5=Object.prototype.hasOwnProperty,B$4=Object.prototype.propertyIsEnumerable,M$3=(fe,e,ye)=>e in fe?V$4(fe,e,{enumerable:!0,configurable:!0,writable:!0,value:ye}):fe[e]=ye,K$3=(fe,e)=>{for(var ye in e||(e={}))H$5.call(e,ye)&&M$3(fe,ye,e[ye]);if(D$7)for(var ye of D$7(e))B$4.call(e,ye)&&M$3(fe,ye,e[ye]);return fe};const L$2="https://explorer-api.walletconnect.com",E$5="wcm",O$5="js-2.6.2";async function w$7(fe,e){const ye=K$3({sdkType:E$5,sdkVersion:O$5},e),me=new URL(fe,L$2);return me.searchParams.append("projectId",y$5.state.projectId),Object.entries(ye).forEach(([be,ve])=>{ve&&me.searchParams.append(be,String(ve))}),(await fetch(me)).json()}const m$4={async getDesktopListings(fe){return w$7("/w3m/v1/getDesktopListings",fe)},async getMobileListings(fe){return w$7("/w3m/v1/getMobileListings",fe)},async getInjectedListings(fe){return w$7("/w3m/v1/getInjectedListings",fe)},async getAllListings(fe){return w$7("/w3m/v1/getAllListings",fe)},getWalletImageUrl(fe){return`${L$2}/w3m/v1/getWalletImage/${fe}?projectId=${y$5.state.projectId}&sdkType=${E$5}&sdkVersion=${O$5}`},getAssetImageUrl(fe){return`${L$2}/w3m/v1/getAssetImage/${fe}?projectId=${y$5.state.projectId}&sdkType=${E$5}&sdkVersion=${O$5}`}};var z$3=Object.defineProperty,j$4=Object.getOwnPropertySymbols,J$4=Object.prototype.hasOwnProperty,q$3=Object.prototype.propertyIsEnumerable,k$4=(fe,e,ye)=>e in fe?z$3(fe,e,{enumerable:!0,configurable:!0,writable:!0,value:ye}):fe[e]=ye,F$5=(fe,e)=>{for(var ye in e||(e={}))J$4.call(e,ye)&&k$4(fe,ye,e[ye]);if(j$4)for(var ye of j$4(e))q$3.call(e,ye)&&k$4(fe,ye,e[ye]);return fe};const N$6=a$4.isMobile(),d$3=proxy({wallets:{listings:[],total:0,page:1},search:{listings:[],total:0,page:1},recomendedWallets:[]}),te$4={state:d$3,async getRecomendedWallets(){const{explorerRecommendedWalletIds:fe,explorerExcludedWalletIds:e}=y$5.state;if(fe==="NONE"||e==="ALL"&&!fe)return d$3.recomendedWallets;if(a$4.isArray(fe)){const ye={recommendedIds:fe.join(",")},{listings:me}=await m$4.getAllListings(ye),be=Object.values(me);be.sort((ve,Ee)=>{const Oe=fe.indexOf(ve.id),xe=fe.indexOf(Ee.id);return Oe-xe}),d$3.recomendedWallets=be}else{const{chains:ye,isAuth:me}=p$6.state,be=ye==null?void 0:ye.join(","),ve=a$4.isArray(e),Ee={page:1,sdks:me?"auth_v1":void 0,entries:a$4.RECOMMENDED_WALLET_AMOUNT,chains:be,version:2,excludedIds:ve?e.join(","):void 0},{listings:Oe}=N$6?await m$4.getMobileListings(Ee):await m$4.getDesktopListings(Ee);d$3.recomendedWallets=Object.values(Oe)}return d$3.recomendedWallets},async getWallets(fe){const e=F$5({},fe),{explorerRecommendedWalletIds:ye,explorerExcludedWalletIds:me}=y$5.state,{recomendedWallets:be}=d$3;if(me==="ALL")return d$3.wallets;be.length?e.excludedIds=be.map(Se=>Se.id).join(","):a$4.isArray(ye)&&(e.excludedIds=ye.join(",")),a$4.isArray(me)&&(e.excludedIds=[e.excludedIds,me].filter(Boolean).join(",")),p$6.state.isAuth&&(e.sdks="auth_v1");const{page:ve,search:Ee}=fe,{listings:Oe,total:xe}=N$6?await m$4.getMobileListings(e):await m$4.getDesktopListings(e),gr=Object.values(Oe),we=Ee?"search":"wallets";return d$3[we]={listings:[...d$3[we].listings,...gr],total:xe,page:ve??1},{listings:gr,total:xe}},getWalletImageUrl(fe){return m$4.getWalletImageUrl(fe)},getAssetImageUrl(fe){return m$4.getAssetImageUrl(fe)},resetSearch(){d$3.search={listings:[],total:0,page:1}}},I$1=proxy({open:!1}),se={state:I$1,subscribe(fe){return subscribe(I$1,()=>fe(I$1))},async open(fe){return new Promise(e=>{const{isUiLoaded:ye,isDataLoaded:me}=p$6.state;if(a$4.removeWalletConnectDeepLink(),p$6.setWalletConnectUri(fe==null?void 0:fe.uri),p$6.setChains(fe==null?void 0:fe.chains),T$3.reset("ConnectWallet"),ye&&me)I$1.open=!0,e();else{const be=setInterval(()=>{const ve=p$6.state;ve.isUiLoaded&&ve.isDataLoaded&&(clearInterval(be),I$1.open=!0,e())},200)}})},close(){I$1.open=!1}};var G$4=Object.defineProperty,$$3=Object.getOwnPropertySymbols,Q$6=Object.prototype.hasOwnProperty,X$6=Object.prototype.propertyIsEnumerable,S$4=(fe,e,ye)=>e in fe?G$4(fe,e,{enumerable:!0,configurable:!0,writable:!0,value:ye}):fe[e]=ye,Y=(fe,e)=>{for(var ye in e||(e={}))Q$6.call(e,ye)&&S$4(fe,ye,e[ye]);if($$3)for(var ye of $$3(e))X$6.call(e,ye)&&S$4(fe,ye,e[ye]);return fe};function Z$4(){return typeof matchMedia<"u"&&matchMedia("(prefers-color-scheme: dark)").matches}const C$4=proxy({themeMode:Z$4()?"dark":"light"}),ne$2={state:C$4,subscribe(fe){return subscribe(C$4,()=>fe(C$4))},setThemeConfig(fe){const{themeMode:e,themeVariables:ye}=fe;e&&(C$4.themeMode=e),ye&&(C$4.themeVariables=Y({},ye))}},g$7=proxy({open:!1,message:"",variant:"success"}),oe$3={state:g$7,subscribe(fe){return subscribe(g$7,()=>fe(g$7))},openToast(fe,e){g$7.open=!0,g$7.message=fe,g$7.variant=e},closeToast(){g$7.open=!1}};let d$2=class{constructor(e){this.openModal=se.open,this.closeModal=se.close,this.subscribeModal=se.subscribe,this.setTheme=ne$2.setThemeConfig,ne$2.setThemeConfig(e),y$5.setConfig(e),this.initUi()}async initUi(){if(typeof window<"u"){await Promise.resolve().then(()=>require("./index-2531167a.js"));const e=document.createElement("wcm-modal");document.body.insertAdjacentElement("beforeend",e),p$6.setIsUiLoaded(!0)}}};const suspectProtoRx=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,suspectConstructorRx=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,JsonSigRx=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function jsonParseTransform(fe,e){if(fe==="__proto__"||fe==="constructor"&&e&&typeof e=="object"&&"prototype"in e){warnKeyDropped(fe);return}return e}function warnKeyDropped(fe){console.warn(`[destr] Dropping "${fe}" key to prevent prototype pollution.`)}function destr(fe,e={}){if(typeof fe!="string")return fe;const ye=fe.trim();if(fe[0]==='"'&&fe.at(-1)==='"'&&!fe.includes("\\"))return ye.slice(1,-1);if(ye.length<=9){const me=ye.toLowerCase();if(me==="true")return!0;if(me==="false")return!1;if(me==="undefined")return;if(me==="null")return null;if(me==="nan")return Number.NaN;if(me==="infinity")return Number.POSITIVE_INFINITY;if(me==="-infinity")return Number.NEGATIVE_INFINITY}if(!JsonSigRx.test(fe)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return fe}try{if(suspectProtoRx.test(fe)||suspectConstructorRx.test(fe)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(fe,jsonParseTransform)}return JSON.parse(fe)}catch(me){if(e.strict)throw me;return fe}}function wrapToPromise(fe){return!fe||typeof fe.then!="function"?Promise.resolve(fe):fe}function asyncCall(fe,...e){try{return wrapToPromise(fe(...e))}catch(ye){return Promise.reject(ye)}}function isPrimitive(fe){const e=typeof fe;return fe===null||e!=="object"&&e!=="function"}function isPureObject(fe){const e=Object.getPrototypeOf(fe);return!e||e.isPrototypeOf(Object)}function stringify(fe){if(isPrimitive(fe))return String(fe);if(isPureObject(fe)||Array.isArray(fe))return JSON.stringify(fe);if(typeof fe.toJSON=="function")return stringify(fe.toJSON());throw new Error("[unstorage] Cannot stringify value!")}function checkBufferSupport(){if(typeof Buffer===void 0)throw new TypeError("[unstorage] Buffer is not supported!")}const BASE64_PREFIX="base64:";function serializeRaw(fe){if(typeof fe=="string")return fe;checkBufferSupport();const e=Buffer.from(fe).toString("base64");return BASE64_PREFIX+e}function deserializeRaw(fe){return typeof fe!="string"||!fe.startsWith(BASE64_PREFIX)?fe:(checkBufferSupport(),Buffer.from(fe.slice(BASE64_PREFIX.length),"base64"))}function normalizeKey(fe){return fe?fe.split("?")[0].replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""):""}function joinKeys(...fe){return normalizeKey(fe.join(":"))}function normalizeBaseKey(fe){return fe=normalizeKey(fe),fe?fe+":":""}function defineDriver(fe){return fe}const DRIVER_NAME="memory",memory=()=>{const fe=new Map;return{name:DRIVER_NAME,options:{},hasItem(e){return fe.has(e)},getItem(e){return fe.get(e)||null},getItemRaw(e){return fe.get(e)||null},setItem(e,ye){fe.set(e,ye)},setItemRaw(e,ye){fe.set(e,ye)},removeItem(e){fe.delete(e)},getKeys(){return Array.from(fe.keys())},clear(){fe.clear()},dispose(){fe.clear()}}};function createStorage(fe={}){const e={mounts:{"":fe.driver||memory()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},ye=gr=>{for(const we of e.mountpoints)if(gr.startsWith(we))return{base:we,relativeKey:gr.slice(we.length),driver:e.mounts[we]};return{base:"",relativeKey:gr,driver:e.mounts[""]}},me=(gr,we)=>e.mountpoints.filter(Se=>Se.startsWith(gr)||we&&gr.startsWith(Se)).map(Se=>({relativeBase:gr.length>Se.length?gr.slice(Se.length):void 0,mountpoint:Se,driver:e.mounts[Se]})),be=(gr,we)=>{if(e.watching){we=normalizeKey(we);for(const Se of e.watchListeners)Se(gr,we)}},ve=async()=>{if(!e.watching){e.watching=!0;for(const gr in e.mounts)e.unwatch[gr]=await watch$2(e.mounts[gr],be,gr)}},Ee=async()=>{if(e.watching){for(const gr in e.unwatch)await e.unwatch[gr]();e.unwatch={},e.watching=!1}},Oe=(gr,we,Se)=>{const $r=new Map,Fr=Br=>{let Vr=$r.get(Br.base);return Vr||(Vr={driver:Br.driver,base:Br.base,items:[]},$r.set(Br.base,Vr)),Vr};for(const Br of gr){const Vr=typeof Br=="string",oo=normalizeKey(Vr?Br:Br.key),so=Vr?void 0:Br.value,kr=Vr||!Br.options?we:{...we,...Br.options},qr=ye(oo);Fr(qr).items.push({key:oo,value:so,relativeKey:qr.relativeKey,options:kr})}return Promise.all([...$r.values()].map(Br=>Se(Br))).then(Br=>Br.flat())},xe={hasItem(gr,we={}){gr=normalizeKey(gr);const{relativeKey:Se,driver:$r}=ye(gr);return asyncCall($r.hasItem,Se,we)},getItem(gr,we={}){gr=normalizeKey(gr);const{relativeKey:Se,driver:$r}=ye(gr);return asyncCall($r.getItem,Se,we).then(Fr=>destr(Fr))},getItems(gr,we){return Oe(gr,we,Se=>Se.driver.getItems?asyncCall(Se.driver.getItems,Se.items.map($r=>({key:$r.relativeKey,options:$r.options})),we).then($r=>$r.map(Fr=>({key:joinKeys(Se.base,Fr.key),value:destr(Fr.value)}))):Promise.all(Se.items.map($r=>asyncCall(Se.driver.getItem,$r.relativeKey,$r.options).then(Fr=>({key:$r.key,value:destr(Fr)})))))},getItemRaw(gr,we={}){gr=normalizeKey(gr);const{relativeKey:Se,driver:$r}=ye(gr);return $r.getItemRaw?asyncCall($r.getItemRaw,Se,we):asyncCall($r.getItem,Se,we).then(Fr=>deserializeRaw(Fr))},async setItem(gr,we,Se={}){if(we===void 0)return xe.removeItem(gr);gr=normalizeKey(gr);const{relativeKey:$r,driver:Fr}=ye(gr);Fr.setItem&&(await asyncCall(Fr.setItem,$r,stringify(we),Se),Fr.watch||be("update",gr))},async setItems(gr,we){await Oe(gr,we,async Se=>{Se.driver.setItems&&await asyncCall(Se.driver.setItems,Se.items.map($r=>({key:$r.relativeKey,value:stringify($r.value),options:$r.options})),we),Se.driver.setItem&&await Promise.all(Se.items.map($r=>asyncCall(Se.driver.setItem,$r.relativeKey,stringify($r.value),$r.options)))})},async setItemRaw(gr,we,Se={}){if(we===void 0)return xe.removeItem(gr,Se);gr=normalizeKey(gr);const{relativeKey:$r,driver:Fr}=ye(gr);if(Fr.setItemRaw)await asyncCall(Fr.setItemRaw,$r,we,Se);else if(Fr.setItem)await asyncCall(Fr.setItem,$r,serializeRaw(we),Se);else return;Fr.watch||be("update",gr)},async removeItem(gr,we={}){typeof we=="boolean"&&(we={removeMeta:we}),gr=normalizeKey(gr);const{relativeKey:Se,driver:$r}=ye(gr);$r.removeItem&&(await asyncCall($r.removeItem,Se,we),(we.removeMeta||we.removeMata)&&await asyncCall($r.removeItem,Se+"$",we),$r.watch||be("remove",gr))},async getMeta(gr,we={}){typeof we=="boolean"&&(we={nativeOnly:we}),gr=normalizeKey(gr);const{relativeKey:Se,driver:$r}=ye(gr),Fr=Object.create(null);if($r.getMeta&&Object.assign(Fr,await asyncCall($r.getMeta,Se,we)),!we.nativeOnly){const Br=await asyncCall($r.getItem,Se+"$",we).then(Vr=>destr(Vr));Br&&typeof Br=="object"&&(typeof Br.atime=="string"&&(Br.atime=new Date(Br.atime)),typeof Br.mtime=="string"&&(Br.mtime=new Date(Br.mtime)),Object.assign(Fr,Br))}return Fr},setMeta(gr,we,Se={}){return this.setItem(gr+"$",we,Se)},removeMeta(gr,we={}){return this.removeItem(gr+"$",we)},async getKeys(gr,we={}){gr=normalizeBaseKey(gr);const Se=me(gr,!0);let $r=[];const Fr=[];for(const Br of Se){const oo=(await asyncCall(Br.driver.getKeys,Br.relativeBase,we)).map(so=>Br.mountpoint+normalizeKey(so)).filter(so=>!$r.some(kr=>so.startsWith(kr)));Fr.push(...oo),$r=[Br.mountpoint,...$r.filter(so=>!so.startsWith(Br.mountpoint))]}return gr?Fr.filter(Br=>Br.startsWith(gr)&&!Br.endsWith("$")):Fr.filter(Br=>!Br.endsWith("$"))},async clear(gr,we={}){gr=normalizeBaseKey(gr),await Promise.all(me(gr,!1).map(async Se=>{if(Se.driver.clear)return asyncCall(Se.driver.clear,Se.relativeBase,we);if(Se.driver.removeItem){const $r=await Se.driver.getKeys(Se.relativeBase||"",we);return Promise.all($r.map(Fr=>Se.driver.removeItem(Fr,we)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(gr=>dispose(gr)))},async watch(gr){return await ve(),e.watchListeners.push(gr),async()=>{e.watchListeners=e.watchListeners.filter(we=>we!==gr),e.watchListeners.length===0&&await Ee()}},async unwatch(){e.watchListeners=[],await Ee()},mount(gr,we){if(gr=normalizeBaseKey(gr),gr&&e.mounts[gr])throw new Error(`already mounted at ${gr}`);return gr&&(e.mountpoints.push(gr),e.mountpoints.sort((Se,$r)=>$r.length-Se.length)),e.mounts[gr]=we,e.watching&&Promise.resolve(watch$2(we,be,gr)).then(Se=>{e.unwatch[gr]=Se}).catch(console.error),xe},async unmount(gr,we=!0){gr=normalizeBaseKey(gr),!(!gr||!e.mounts[gr])&&(e.watching&&gr in e.unwatch&&(e.unwatch[gr](),delete e.unwatch[gr]),we&&await dispose(e.mounts[gr]),e.mountpoints=e.mountpoints.filter(Se=>Se!==gr),delete e.mounts[gr])},getMount(gr=""){gr=normalizeKey(gr)+":";const we=ye(gr);return{driver:we.driver,base:we.base}},getMounts(gr="",we={}){return gr=normalizeKey(gr),me(gr,we.parents).map($r=>({driver:$r.driver,base:$r.mountpoint}))}};return xe}function watch$2(fe,e,ye){return fe.watch?fe.watch((me,be)=>e(me,ye+be)):()=>{}}async function dispose(fe){typeof fe.dispose=="function"&&await asyncCall(fe.dispose)}function promisifyRequest(fe){return new Promise((e,ye)=>{fe.oncomplete=fe.onsuccess=()=>e(fe.result),fe.onabort=fe.onerror=()=>ye(fe.error)})}function createStore(fe,e){const ye=indexedDB.open(fe);ye.onupgradeneeded=()=>ye.result.createObjectStore(e);const me=promisifyRequest(ye);return(be,ve)=>me.then(Ee=>ve(Ee.transaction(e,be).objectStore(e)))}let defaultGetStoreFunc;function defaultGetStore(){return defaultGetStoreFunc||(defaultGetStoreFunc=createStore("keyval-store","keyval")),defaultGetStoreFunc}function get(fe,e=defaultGetStore()){return e("readonly",ye=>promisifyRequest(ye.get(fe)))}function set(fe,e,ye=defaultGetStore()){return ye("readwrite",me=>(me.put(e,fe),promisifyRequest(me.transaction)))}function del(fe,e=defaultGetStore()){return e("readwrite",ye=>(ye.delete(fe),promisifyRequest(ye.transaction)))}function clear(fe=defaultGetStore()){return fe("readwrite",e=>(e.clear(),promisifyRequest(e.transaction)))}function eachCursor(fe,e){return fe.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},promisifyRequest(fe.transaction)}function keys(fe=defaultGetStore()){return fe("readonly",e=>{if(e.getAllKeys)return promisifyRequest(e.getAllKeys());const ye=[];return eachCursor(e,me=>ye.push(me.key)).then(()=>ye)})}const JSONStringify=fe=>JSON.stringify(fe,(e,ye)=>typeof ye=="bigint"?ye.toString()+"n":ye),JSONParse=fe=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,ye=fe.replace(e,'$1"$2n"$3');return JSON.parse(ye,(me,be)=>typeof be=="string"&&be.match(/^\d+n$/)?BigInt(be.substring(0,be.length-1)):be)};function safeJsonParse(fe){if(typeof fe!="string")throw new Error(`Cannot safe json parse value of type ${typeof fe}`);try{return JSONParse(fe)}catch{return fe}}function safeJsonStringify(fe){return typeof fe=="string"?fe:JSONStringify(fe)||""}const x$4="idb-keyval";var z$2=(fe={})=>{const e=fe.base&&fe.base.length>0?`${fe.base}:`:"",ye=be=>e+be;let me;return fe.dbName&&fe.storeName&&(me=createStore(fe.dbName,fe.storeName)),{name:x$4,options:fe,async hasItem(be){return!(typeof await get(ye(be),me)>"u")},async getItem(be){return await get(ye(be),me)??null},setItem(be,ve){return set(ye(be),ve,me)},removeItem(be){return del(ye(be),me)},getKeys(){return keys(me)},clear(){return clear(me)}}};const D$6="WALLET_CONNECT_V2_INDEXED_DB",E$4="keyvaluestorage";let _$5=class{constructor(){this.indexedDb=createStorage({driver:z$2({dbName:D$6,storeName:E$4})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const ye=await this.indexedDb.getItem(e);if(ye!==null)return ye}async setItem(e,ye){await this.indexedDb.setItem(e,safeJsonStringify(ye))}async removeItem(e){await this.indexedDb.removeItem(e)}};var l$2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},c$1={exports:{}};(function(){let fe;function e(){}fe=e,fe.prototype.getItem=function(ye){return this.hasOwnProperty(ye)?String(this[ye]):null},fe.prototype.setItem=function(ye,me){this[ye]=String(me)},fe.prototype.removeItem=function(ye){delete this[ye]},fe.prototype.clear=function(){const ye=this;Object.keys(ye).forEach(function(me){ye[me]=void 0,delete ye[me]})},fe.prototype.key=function(ye){return ye=ye||0,Object.keys(this)[ye]},fe.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof l$2<"u"&&l$2.localStorage?c$1.exports=l$2.localStorage:typeof window<"u"&&window.localStorage?c$1.exports=window.localStorage:c$1.exports=new e})();function k$3(fe){var e;return[fe[0],safeJsonParse((e=fe[1])!=null?e:"")]}let K$2=class{constructor(){this.localStorage=c$1.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(k$3)}async getItem(e){const ye=this.localStorage.getItem(e);if(ye!==null)return safeJsonParse(ye)}async setItem(e,ye){this.localStorage.setItem(e,safeJsonStringify(ye))}async removeItem(e){this.localStorage.removeItem(e)}};const N$5="wc_storage_version",y$4=1,O$4=async(fe,e,ye)=>{const me=N$5,be=await e.getItem(me);if(be&&be>=y$4){ye(e);return}const ve=await fe.getKeys();if(!ve.length){ye(e);return}const Ee=[];for(;ve.length;){const Oe=ve.shift();if(!Oe)continue;const xe=Oe.toLowerCase();if(xe.includes("wc@")||xe.includes("walletconnect")||xe.includes("wc_")||xe.includes("wallet_connect")){const gr=await fe.getItem(Oe);await e.setItem(Oe,gr),Ee.push(Oe)}}await e.setItem(me,y$4),ye(e),j$3(fe,Ee)},j$3=async(fe,e)=>{e.length&&e.forEach(async ye=>{await fe.removeItem(ye)})};let h$8=class{constructor(){this.initialized=!1,this.setInitialized=ye=>{this.storage=ye,this.initialized=!0};const e=new K$2;this.storage=e;try{const ye=new _$5;O$4(e,ye,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,ye){return await this.initialize(),this.storage.setItem(e,ye)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const ye=setInterval(()=>{this.initialized&&(clearInterval(ye),e())},20)})}};var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(fe){return fe&&fe.__esModule&&Object.prototype.hasOwnProperty.call(fe,"default")?fe.default:fe}function getAugmentedNamespace(fe){if(fe.__esModule)return fe;var e=fe.default;if(typeof e=="function"){var ye=function me(){if(this instanceof me){var be=[null];be.push.apply(be,arguments);var ve=Function.bind.apply(e,be);return new ve}return e.apply(this,arguments)};ye.prototype=e.prototype}else ye={};return Object.defineProperty(ye,"__esModule",{value:!0}),Object.keys(fe).forEach(function(me){var be=Object.getOwnPropertyDescriptor(fe,me);Object.defineProperty(ye,me,be.get?be:{enumerable:!0,get:function(){return fe[me]}})}),ye}var cjs$5={},tslib={exports:{}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(function(fe){var e,ye,me,be,ve,Ee,Oe,xe,gr,we,Se,$r,Fr,Br,Vr,oo,so,kr,qr,Hr,Yr,Ur,Mr;(function(Lr){var no=typeof commonjsGlobal=="object"?commonjsGlobal:typeof self=="object"?self:typeof this=="object"?this:{};Lr(Xr(no,Xr(fe.exports)));function Xr(to,ao){return to!==no&&(typeof Object.create=="function"?Object.defineProperty(to,"__esModule",{value:!0}):to.__esModule=!0),function(bo,Wr){return to[bo]=ao?ao(bo,Wr):Wr}}})(function(Lr){var no=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Xr,to){Xr.__proto__=to}||function(Xr,to){for(var ao in to)to.hasOwnProperty(ao)&&(Xr[ao]=to[ao])};e=function(Xr,to){no(Xr,to);function ao(){this.constructor=Xr}Xr.prototype=to===null?Object.create(to):(ao.prototype=to.prototype,new ao)},ye=Object.assign||function(Xr){for(var to,ao=1,bo=arguments.length;ao<bo;ao++){to=arguments[ao];for(var Wr in to)Object.prototype.hasOwnProperty.call(to,Wr)&&(Xr[Wr]=to[Wr])}return Xr},me=function(Xr,to){var ao={};for(var bo in Xr)Object.prototype.hasOwnProperty.call(Xr,bo)&&to.indexOf(bo)<0&&(ao[bo]=Xr[bo]);if(Xr!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Wr=0,bo=Object.getOwnPropertySymbols(Xr);Wr<bo.length;Wr++)to.indexOf(bo[Wr])<0&&Object.prototype.propertyIsEnumerable.call(Xr,bo[Wr])&&(ao[bo[Wr]]=Xr[bo[Wr]]);return ao},be=function(Xr,to,ao,bo){var Wr=arguments.length,Jr=Wr<3?to:bo===null?bo=Object.getOwnPropertyDescriptor(to,ao):bo,fo;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Jr=Reflect.decorate(Xr,to,ao,bo);else for(var vo=Xr.length-1;vo>=0;vo--)(fo=Xr[vo])&&(Jr=(Wr<3?fo(Jr):Wr>3?fo(to,ao,Jr):fo(to,ao))||Jr);return Wr>3&&Jr&&Object.defineProperty(to,ao,Jr),Jr},ve=function(Xr,to){return function(ao,bo){to(ao,bo,Xr)}},Ee=function(Xr,to){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(Xr,to)},Oe=function(Xr,to,ao,bo){function Wr(Jr){return Jr instanceof ao?Jr:new ao(function(fo){fo(Jr)})}return new(ao||(ao=Promise))(function(Jr,fo){function vo(yo){try{po(bo.next(yo))}catch(Oo){fo(Oo)}}function mo(yo){try{po(bo.throw(yo))}catch(Oo){fo(Oo)}}function po(yo){yo.done?Jr(yo.value):Wr(yo.value).then(vo,mo)}po((bo=bo.apply(Xr,to||[])).next())})},xe=function(Xr,to){var ao={label:0,sent:function(){if(Jr[0]&1)throw Jr[1];return Jr[1]},trys:[],ops:[]},bo,Wr,Jr,fo;return fo={next:vo(0),throw:vo(1),return:vo(2)},typeof Symbol=="function"&&(fo[Symbol.iterator]=function(){return this}),fo;function vo(po){return function(yo){return mo([po,yo])}}function mo(po){if(bo)throw new TypeError("Generator is already executing.");for(;ao;)try{if(bo=1,Wr&&(Jr=po[0]&2?Wr.return:po[0]?Wr.throw||((Jr=Wr.return)&&Jr.call(Wr),0):Wr.next)&&!(Jr=Jr.call(Wr,po[1])).done)return Jr;switch(Wr=0,Jr&&(po=[po[0]&2,Jr.value]),po[0]){case 0:case 1:Jr=po;break;case 4:return ao.label++,{value:po[1],done:!1};case 5:ao.label++,Wr=po[1],po=[0];continue;case 7:po=ao.ops.pop(),ao.trys.pop();continue;default:if(Jr=ao.trys,!(Jr=Jr.length>0&&Jr[Jr.length-1])&&(po[0]===6||po[0]===2)){ao=0;continue}if(po[0]===3&&(!Jr||po[1]>Jr[0]&&po[1]<Jr[3])){ao.label=po[1];break}if(po[0]===6&&ao.label<Jr[1]){ao.label=Jr[1],Jr=po;break}if(Jr&&ao.label<Jr[2]){ao.label=Jr[2],ao.ops.push(po);break}Jr[2]&&ao.ops.pop(),ao.trys.pop();continue}po=to.call(Xr,ao)}catch(yo){po=[6,yo],Wr=0}finally{bo=Jr=0}if(po[0]&5)throw po[1];return{value:po[0]?po[1]:void 0,done:!0}}},Mr=function(Xr,to,ao,bo){bo===void 0&&(bo=ao),Xr[bo]=to[ao]},gr=function(Xr,to){for(var ao in Xr)ao!=="default"&&!to.hasOwnProperty(ao)&&(to[ao]=Xr[ao])},we=function(Xr){var to=typeof Symbol=="function"&&Symbol.iterator,ao=to&&Xr[to],bo=0;if(ao)return ao.call(Xr);if(Xr&&typeof Xr.length=="number")return{next:function(){return Xr&&bo>=Xr.length&&(Xr=void 0),{value:Xr&&Xr[bo++],done:!Xr}}};throw new TypeError(to?"Object is not iterable.":"Symbol.iterator is not defined.")},Se=function(Xr,to){var ao=typeof Symbol=="function"&&Xr[Symbol.iterator];if(!ao)return Xr;var bo=ao.call(Xr),Wr,Jr=[],fo;try{for(;(to===void 0||to-- >0)&&!(Wr=bo.next()).done;)Jr.push(Wr.value)}catch(vo){fo={error:vo}}finally{try{Wr&&!Wr.done&&(ao=bo.return)&&ao.call(bo)}finally{if(fo)throw fo.error}}return Jr},$r=function(){for(var Xr=[],to=0;to<arguments.length;to++)Xr=Xr.concat(Se(arguments[to]));return Xr},Fr=function(){for(var Xr=0,to=0,ao=arguments.length;to<ao;to++)Xr+=arguments[to].length;for(var bo=Array(Xr),Wr=0,to=0;to<ao;to++)for(var Jr=arguments[to],fo=0,vo=Jr.length;fo<vo;fo++,Wr++)bo[Wr]=Jr[fo];return bo},Br=function(Xr){return this instanceof Br?(this.v=Xr,this):new Br(Xr)},Vr=function(Xr,to,ao){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var bo=ao.apply(Xr,to||[]),Wr,Jr=[];return Wr={},fo("next"),fo("throw"),fo("return"),Wr[Symbol.asyncIterator]=function(){return this},Wr;function fo(Io){bo[Io]&&(Wr[Io]=function(go){return new Promise(function(No,Po){Jr.push([Io,go,No,Po])>1||vo(Io,go)})})}function vo(Io,go){try{mo(bo[Io](go))}catch(No){Oo(Jr[0][3],No)}}function mo(Io){Io.value instanceof Br?Promise.resolve(Io.value.v).then(po,yo):Oo(Jr[0][2],Io)}function po(Io){vo("next",Io)}function yo(Io){vo("throw",Io)}function Oo(Io,go){Io(go),Jr.shift(),Jr.length&&vo(Jr[0][0],Jr[0][1])}},oo=function(Xr){var to,ao;return to={},bo("next"),bo("throw",function(Wr){throw Wr}),bo("return"),to[Symbol.iterator]=function(){return this},to;function bo(Wr,Jr){to[Wr]=Xr[Wr]?function(fo){return(ao=!ao)?{value:Br(Xr[Wr](fo)),done:Wr==="return"}:Jr?Jr(fo):fo}:Jr}},so=function(Xr){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var to=Xr[Symbol.asyncIterator],ao;return to?to.call(Xr):(Xr=typeof we=="function"?we(Xr):Xr[Symbol.iterator](),ao={},bo("next"),bo("throw"),bo("return"),ao[Symbol.asyncIterator]=function(){return this},ao);function bo(Jr){ao[Jr]=Xr[Jr]&&function(fo){return new Promise(function(vo,mo){fo=Xr[Jr](fo),Wr(vo,mo,fo.done,fo.value)})}}function Wr(Jr,fo,vo,mo){Promise.resolve(mo).then(function(po){Jr({value:po,done:vo})},fo)}},kr=function(Xr,to){return Object.defineProperty?Object.defineProperty(Xr,"raw",{value:to}):Xr.raw=to,Xr},qr=function(Xr){if(Xr&&Xr.__esModule)return Xr;var to={};if(Xr!=null)for(var ao in Xr)Object.hasOwnProperty.call(Xr,ao)&&(to[ao]=Xr[ao]);return to.default=Xr,to},Hr=function(Xr){return Xr&&Xr.__esModule?Xr:{default:Xr}},Yr=function(Xr,to){if(!to.has(Xr))throw new TypeError("attempted to get private field on non-instance");return to.get(Xr)},Ur=function(Xr,to,ao){if(!to.has(Xr))throw new TypeError("attempted to set private field on non-instance");return to.set(Xr,ao),ao},Lr("__extends",e),Lr("__assign",ye),Lr("__rest",me),Lr("__decorate",be),Lr("__param",ve),Lr("__metadata",Ee),Lr("__awaiter",Oe),Lr("__generator",xe),Lr("__exportStar",gr),Lr("__createBinding",Mr),Lr("__values",we),Lr("__read",Se),Lr("__spread",$r),Lr("__spreadArrays",Fr),Lr("__await",Br),Lr("__asyncGenerator",Vr),Lr("__asyncDelegator",oo),Lr("__asyncValues",so),Lr("__makeTemplateObject",kr),Lr("__importStar",qr),Lr("__importDefault",Hr),Lr("__classPrivateFieldGet",Yr),Lr("__classPrivateFieldSet",Ur)})})(tslib);var tslibExports=tslib.exports,heartbeat$2={},cjs$4={},utils$3={},delay={},hasRequiredDelay;function requireDelay(){if(hasRequiredDelay)return delay;hasRequiredDelay=1,Object.defineProperty(delay,"__esModule",{value:!0}),delay.delay=void 0;function fe(e){return new Promise(ye=>{setTimeout(()=>{ye(!0)},e)})}return delay.delay=fe,delay}var convert$1={},constants$3={},misc={},hasRequiredMisc;function requireMisc(){return hasRequiredMisc||(hasRequiredMisc=1,Object.defineProperty(misc,"__esModule",{value:!0}),misc.ONE_THOUSAND=misc.ONE_HUNDRED=void 0,misc.ONE_HUNDRED=100,misc.ONE_THOUSAND=1e3),misc}var time={},hasRequiredTime;function requireTime(){return hasRequiredTime||(hasRequiredTime=1,function(fe){Object.defineProperty(fe,"__esModule",{value:!0}),fe.ONE_YEAR=fe.FOUR_WEEKS=fe.THREE_WEEKS=fe.TWO_WEEKS=fe.ONE_WEEK=fe.THIRTY_DAYS=fe.SEVEN_DAYS=fe.FIVE_DAYS=fe.THREE_DAYS=fe.ONE_DAY=fe.TWENTY_FOUR_HOURS=fe.TWELVE_HOURS=fe.SIX_HOURS=fe.THREE_HOURS=fe.ONE_HOUR=fe.SIXTY_MINUTES=fe.THIRTY_MINUTES=fe.TEN_MINUTES=fe.FIVE_MINUTES=fe.ONE_MINUTE=fe.SIXTY_SECONDS=fe.THIRTY_SECONDS=fe.TEN_SECONDS=fe.FIVE_SECONDS=fe.ONE_SECOND=void 0,fe.ONE_SECOND=1,fe.FIVE_SECONDS=5,fe.TEN_SECONDS=10,fe.THIRTY_SECONDS=30,fe.SIXTY_SECONDS=60,fe.ONE_MINUTE=fe.SIXTY_SECONDS,fe.FIVE_MINUTES=fe.ONE_MINUTE*5,fe.TEN_MINUTES=fe.ONE_MINUTE*10,fe.THIRTY_MINUTES=fe.ONE_MINUTE*30,fe.SIXTY_MINUTES=fe.ONE_MINUTE*60,fe.ONE_HOUR=fe.SIXTY_MINUTES,fe.THREE_HOURS=fe.ONE_HOUR*3,fe.SIX_HOURS=fe.ONE_HOUR*6,fe.TWELVE_HOURS=fe.ONE_HOUR*12,fe.TWENTY_FOUR_HOURS=fe.ONE_HOUR*24,fe.ONE_DAY=fe.TWENTY_FOUR_HOURS,fe.THREE_DAYS=fe.ONE_DAY*3,fe.FIVE_DAYS=fe.ONE_DAY*5,fe.SEVEN_DAYS=fe.ONE_DAY*7,fe.THIRTY_DAYS=fe.ONE_DAY*30,fe.ONE_WEEK=fe.SEVEN_DAYS,fe.TWO_WEEKS=fe.ONE_WEEK*2,fe.THREE_WEEKS=fe.ONE_WEEK*3,fe.FOUR_WEEKS=fe.ONE_WEEK*4,fe.ONE_YEAR=fe.ONE_DAY*365}(time)),time}var hasRequiredConstants$2;function requireConstants$2(){return hasRequiredConstants$2||(hasRequiredConstants$2=1,function(fe){Object.defineProperty(fe,"__esModule",{value:!0});const e=tslibExports;e.__exportStar(requireMisc(),fe),e.__exportStar(requireTime(),fe)}(constants$3)),constants$3}var hasRequiredConvert;function requireConvert(){if(hasRequiredConvert)return convert$1;hasRequiredConvert=1,Object.defineProperty(convert$1,"__esModule",{value:!0}),convert$1.fromMiliseconds=convert$1.toMiliseconds=void 0;const fe=requireConstants$2();function e(me){return me*fe.ONE_THOUSAND}convert$1.toMiliseconds=e;function ye(me){return Math.floor(me/fe.ONE_THOUSAND)}return convert$1.fromMiliseconds=ye,convert$1}var hasRequiredUtils$1;function requireUtils$1(){return hasRequiredUtils$1||(hasRequiredUtils$1=1,function(fe){Object.defineProperty(fe,"__esModule",{value:!0});const e=tslibExports;e.__exportStar(requireDelay(),fe),e.__exportStar(requireConvert(),fe)}(utils$3)),utils$3}var watch$1={},hasRequiredWatch$1;function requireWatch$1(){if(hasRequiredWatch$1)return watch$1;hasRequiredWatch$1=1,Object.defineProperty(watch$1,"__esModule",{value:!0}),watch$1.Watch=void 0;class fe{constructor(){this.timestamps=new Map}start(ye){if(this.timestamps.has(ye))throw new Error(`Watch already started for label: ${ye}`);this.timestamps.set(ye,{started:Date.now()})}stop(ye){const me=this.get(ye);if(typeof me.elapsed<"u")throw new Error(`Watch already stopped for label: ${ye}`);const be=Date.now()-me.started;this.timestamps.set(ye,{started:me.started,elapsed:be})}get(ye){const me=this.timestamps.get(ye);if(typeof me>"u")throw new Error(`No timestamp found for label: ${ye}`);return me}elapsed(ye){const me=this.get(ye);return me.elapsed||Date.now()-me.started}}return watch$1.Watch=fe,watch$1.default=fe,watch$1}var types$3={},watch={},hasRequiredWatch;function requireWatch(){if(hasRequiredWatch)return watch;hasRequiredWatch=1,Object.defineProperty(watch,"__esModule",{value:!0}),watch.IWatch=void 0;class fe{}return watch.IWatch=fe,watch}var hasRequiredTypes$2;function requireTypes$2(){return hasRequiredTypes$2||(hasRequiredTypes$2=1,function(fe){Object.defineProperty(fe,"__esModule",{value:!0}),tslibExports.__exportStar(requireWatch(),fe)}(types$3)),types$3}(function(fe){Object.defineProperty(fe,"__esModule",{value:!0});const e=tslibExports;e.__exportStar(requireUtils$1(),fe),e.__exportStar(requireWatch$1(),fe),e.__exportStar(requireTypes$2(),fe),e.__exportStar(requireConstants$2(),fe)})(cjs$4);var types$2={},heartbeat$1={};let IEvents$1=class{};const esm=Object.freeze(Object.defineProperty({__proto__:null,IEvents:IEvents$1},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(esm);var hasRequiredHeartbeat$2;function requireHeartbeat$2(){if(hasRequiredHeartbeat$2)return heartbeat$1;hasRequiredHeartbeat$2=1,Object.defineProperty(heartbeat$1,"__esModule",{value:!0}),heartbeat$1.IHeartBeat=void 0;const fe=require$$0;class e extends fe.IEvents{constructor(me){super()}}return heartbeat$1.IHeartBeat=e,heartbeat$1}var hasRequiredTypes$1;function requireTypes$1(){return hasRequiredTypes$1||(hasRequiredTypes$1=1,function(fe){Object.defineProperty(fe,"__esModule",{value:!0}),tslibExports.__exportStar(requireHeartbeat$2(),fe)}(types$2)),types$2}var constants$2={},heartbeat={},hasRequiredHeartbeat$1;function requireHeartbeat$1(){if(hasRequiredHeartbeat$1)return heartbeat;hasRequiredHeartbeat$1=1,Object.defineProperty(heartbeat,"__esModule",{value:!0}),heartbeat.HEARTBEAT_EVENTS=heartbeat.HEARTBEAT_INTERVAL=void 0;const fe=cjs$4;return heartbeat.HEARTBEAT_INTERVAL=fe.FIVE_SECONDS,heartbeat.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"},heartbeat}var hasRequiredConstants$1;function requireConstants$1(){return hasRequiredConstants$1||(hasRequiredConstants$1=1,function(fe){Object.defineProperty(fe,"__esModule",{value:!0}),tslibExports.__exportStar(requireHeartbeat$1(),fe)}(constants$2)),constants$2}var hasRequiredHeartbeat;function requireHeartbeat(){if(hasRequiredHeartbeat)return heartbeat$2;hasRequiredHeartbeat=1,Object.defineProperty(heartbeat$2,"__esModule",{value:!0}),heartbeat$2.HeartBeat=void 0;const fe=tslibExports,e=c$4,ye=cjs$4,me=requireTypes$1(),be=requireConstants$1();class ve extends me.IHeartBeat{constructor(Oe){super(Oe),this.events=new e.EventEmitter,this.interval=be.HEARTBEAT_INTERVAL,this.interval=(Oe==null?void 0:Oe.interval)||be.HEARTBEAT_INTERVAL}static init(Oe){return fe.__awaiter(this,void 0,void 0,function*(){const xe=new ve(Oe);return yield xe.init(),xe})}init(){return fe.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(Oe,xe){this.events.on(Oe,xe)}once(Oe,xe){this.events.once(Oe,xe)}off(Oe,xe){this.events.off(Oe,xe)}removeListener(Oe,xe){this.events.removeListener(Oe,xe)}initialize(){return fe.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),ye.toMiliseconds(this.interval))})}pulse(){this.events.emit(be.HEARTBEAT_EVENTS.pulse)}}return heartbeat$2.HeartBeat=ve,heartbeat$2}(function(fe){Object.defineProperty(fe,"__esModule",{value:!0});const e=tslibExports;e.__exportStar(requireHeartbeat(),fe),e.__exportStar(requireTypes$1(),fe),e.__exportStar(requireConstants$1(),fe)})(cjs$5);var cjs$3={},quickFormatUnescaped,hasRequiredQuickFormatUnescaped;function requireQuickFormatUnescaped(){if(hasRequiredQuickFormatUnescaped)return quickFormatUnescaped;hasRequiredQuickFormatUnescaped=1;function fe(ye){try{return JSON.stringify(ye)}catch{return'"[Circular]"'}}quickFormatUnescaped=e;function e(ye,me,be){var ve=be&&be.stringify||fe,Ee=1;if(typeof ye=="object"&&ye!==null){var Oe=me.length+Ee;if(Oe===1)return ye;var xe=new Array(Oe);xe[0]=ve(ye);for(var gr=1;gr<Oe;gr++)xe[gr]=ve(me[gr]);return xe.join(" ")}if(typeof ye!="string")return ye;var we=me.length;if(we===0)return ye;for(var Se="",$r=1-Ee,Fr=-1,Br=ye&&ye.length||0,Vr=0;Vr<Br;){if(ye.charCodeAt(Vr)===37&&Vr+1<Br){switch(Fr=Fr>-1?Fr:0,ye.charCodeAt(Vr+1)){case 100:case 102:if($r>=we||me[$r]==null)break;Fr<Vr&&(Se+=ye.slice(Fr,Vr)),Se+=Number(me[$r]),Fr=Vr+2,Vr++;break;case 105:if($r>=we||me[$r]==null)break;Fr<Vr&&(Se+=ye.slice(Fr,Vr)),Se+=Math.floor(Number(me[$r])),Fr=Vr+2,Vr++;break;case 79:case 111:case 106:if($r>=we||me[$r]===void 0)break;Fr<Vr&&(Se+=ye.slice(Fr,Vr));var oo=typeof me[$r];if(oo==="string"){Se+="'"+me[$r]+"'",Fr=Vr+2,Vr++;break}if(oo==="function"){Se+=me[$r].name||"<anonymous>",Fr=Vr+2,Vr++;break}Se+=ve(me[$r]),Fr=Vr+2,Vr++;break;case 115:if($r>=we)break;Fr<Vr&&(Se+=ye.slice(Fr,Vr)),Se+=String(me[$r]),Fr=Vr+2,Vr++;break;case 37:Fr<Vr&&(Se+=ye.slice(Fr,Vr)),Se+="%",Fr=Vr+2,Vr++,$r--;break}++$r}++Vr}return Fr===-1?ye:(Fr<Br&&(Se+=ye.slice(Fr)),Se)}return quickFormatUnescaped}var browser$1,hasRequiredBrowser;function requireBrowser(){if(hasRequiredBrowser)return browser$1;hasRequiredBrowser=1;const fe=requireQuickFormatUnescaped();browser$1=be;const e=Yr().console||{},ye={mapHttpRequest:Br,mapHttpResponse:Br,wrapRequestSerializer:Vr,wrapResponseSerializer:Vr,wrapErrorSerializer:Vr,req:Br,res:Br,err:$r};function me(Ur,Mr){return Array.isArray(Ur)?Ur.filter(function(no){return no!=="!stdSerializers.err"}):Ur===!0?Object.keys(Mr):!1}function be(Ur){Ur=Ur||{},Ur.browser=Ur.browser||{};const Mr=Ur.browser.transmit;if(Mr&&typeof Mr.send!="function")throw Error("pino: transmit option must have a send function");const Lr=Ur.browser.write||e;Ur.browser.write&&(Ur.browser.asObject=!0);const no=Ur.serializers||{},Xr=me(Ur.browser.serialize,no);let to=Ur.browser.serialize;Array.isArray(Ur.browser.serialize)&&Ur.browser.serialize.indexOf("!stdSerializers.err")>-1&&(to=!1);const ao=["error","fatal","warn","info","debug","trace"];typeof Lr=="function"&&(Lr.error=Lr.fatal=Lr.warn=Lr.info=Lr.debug=Lr.trace=Lr),Ur.enabled===!1&&(Ur.level="silent");const bo=Ur.level||"info",Wr=Object.create(Lr);Wr.log||(Wr.log=oo),Object.defineProperty(Wr,"levelVal",{get:fo}),Object.defineProperty(Wr,"level",{get:vo,set:mo});const Jr={transmit:Mr,serialize:Xr,asObject:Ur.browser.asObject,levels:ao,timestamp:Fr(Ur)};Wr.levels=be.levels,Wr.level=bo,Wr.setMaxListeners=Wr.getMaxListeners=Wr.emit=Wr.addListener=Wr.on=Wr.prependListener=Wr.once=Wr.prependOnceListener=Wr.removeListener=Wr.removeAllListeners=Wr.listeners=Wr.listenerCount=Wr.eventNames=Wr.write=Wr.flush=oo,Wr.serializers=no,Wr._serialize=Xr,Wr._stdErrSerialize=to,Wr.child=po,Mr&&(Wr._logEvent=Se());function fo(){return this.level==="silent"?1/0:this.levels.values[this.level]}function vo(){return this._level}function mo(yo){if(yo!=="silent"&&!this.levels.values[yo])throw Error("unknown level "+yo);this._level=yo,ve(Jr,Wr,"error","log"),ve(Jr,Wr,"fatal","error"),ve(Jr,Wr,"warn","error"),ve(Jr,Wr,"info","log"),ve(Jr,Wr,"debug","log"),ve(Jr,Wr,"trace","log")}function po(yo,Oo){if(!yo)throw new Error("missing bindings for child Pino");Oo=Oo||{},Xr&&yo.serializers&&(Oo.serializers=yo.serializers);const Io=Oo.serializers;if(Xr&&Io){var go=Object.assign({},no,Io),No=Ur.browser.serialize===!0?Object.keys(go):Xr;delete yo.serializers,xe([yo],No,go,this._stdErrSerialize)}function Po(Bo){this._childLevel=(Bo._childLevel|0)+1,this.error=gr(Bo,yo,"error"),this.fatal=gr(Bo,yo,"fatal"),this.warn=gr(Bo,yo,"warn"),this.info=gr(Bo,yo,"info"),this.debug=gr(Bo,yo,"debug"),this.trace=gr(Bo,yo,"trace"),go&&(this.serializers=go,this._serialize=No),Mr&&(this._logEvent=Se([].concat(Bo._logEvent.bindings,yo)))}return Po.prototype=this,new Po(this)}return Wr}be.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},be.stdSerializers=ye,be.stdTimeFunctions=Object.assign({},{nullTime:so,epochTime:kr,unixTime:qr,isoTime:Hr});function ve(Ur,Mr,Lr,no){const Xr=Object.getPrototypeOf(Mr);Mr[Lr]=Mr.levelVal>Mr.levels.values[Lr]?oo:Xr[Lr]?Xr[Lr]:e[Lr]||e[no]||oo,Ee(Ur,Mr,Lr)}function Ee(Ur,Mr,Lr){!Ur.transmit&&Mr[Lr]===oo||(Mr[Lr]=function(no){return function(){const to=Ur.timestamp(),ao=new Array(arguments.length),bo=Object.getPrototypeOf&&Object.getPrototypeOf(this)===e?e:this;for(var Wr=0;Wr<ao.length;Wr++)ao[Wr]=arguments[Wr];if(Ur.serialize&&!Ur.asObject&&xe(ao,this._serialize,this.serializers,this._stdErrSerialize),Ur.asObject?no.call(bo,Oe(this,Lr,ao,to)):no.apply(bo,ao),Ur.transmit){const Jr=Ur.transmit.level||Mr.level,fo=be.levels.values[Jr],vo=be.levels.values[Lr];if(vo<fo)return;we(this,{ts:to,methodLevel:Lr,methodValue:vo,transmitLevel:Jr,transmitValue:be.levels.values[Ur.transmit.level||Mr.level],send:Ur.transmit.send,val:Mr.levelVal},ao)}}}(Mr[Lr]))}function Oe(Ur,Mr,Lr,no){Ur._serialize&&xe(Lr,Ur._serialize,Ur.serializers,Ur._stdErrSerialize);const Xr=Lr.slice();let to=Xr[0];const ao={};no&&(ao.time=no),ao.level=be.levels.values[Mr];let bo=(Ur._childLevel|0)+1;if(bo<1&&(bo=1),to!==null&&typeof to=="object"){for(;bo--&&typeof Xr[0]=="object";)Object.assign(ao,Xr.shift());to=Xr.length?fe(Xr.shift(),Xr):void 0}else typeof to=="string"&&(to=fe(Xr.shift(),Xr));return to!==void 0&&(ao.msg=to),ao}function xe(Ur,Mr,Lr,no){for(const Xr in Ur)if(no&&Ur[Xr]instanceof Error)Ur[Xr]=be.stdSerializers.err(Ur[Xr]);else if(typeof Ur[Xr]=="object"&&!Array.isArray(Ur[Xr]))for(const to in Ur[Xr])Mr&&Mr.indexOf(to)>-1&&to in Lr&&(Ur[Xr][to]=Lr[to](Ur[Xr][to]))}function gr(Ur,Mr,Lr){return function(){const no=new Array(1+arguments.length);no[0]=Mr;for(var Xr=1;Xr<no.length;Xr++)no[Xr]=arguments[Xr-1];return Ur[Lr].apply(this,no)}}function we(Ur,Mr,Lr){const no=Mr.send,Xr=Mr.ts,to=Mr.methodLevel,ao=Mr.methodValue,bo=Mr.val,Wr=Ur._logEvent.bindings;xe(Lr,Ur._serialize||Object.keys(Ur.serializers),Ur.serializers,Ur._stdErrSerialize===void 0?!0:Ur._stdErrSerialize),Ur._logEvent.ts=Xr,Ur._logEvent.messages=Lr.filter(function(Jr){return Wr.indexOf(Jr)===-1}),Ur._logEvent.level.label=to,Ur._logEvent.level.value=ao,no(to,Ur._logEvent,bo),Ur._logEvent=Se(Wr)}function Se(Ur){return{ts:0,messages:[],bindings:Ur||[],level:{label:"",value:0}}}function $r(Ur){const Mr={type:Ur.constructor.name,msg:Ur.message,stack:Ur.stack};for(const Lr in Ur)Mr[Lr]===void 0&&(Mr[Lr]=Ur[Lr]);return Mr}function Fr(Ur){return typeof Ur.timestamp=="function"?Ur.timestamp:Ur.timestamp===!1?so:kr}function Br(){return{}}function Vr(Ur){return Ur}function oo(){}function so(){return!1}function kr(){return Date.now()}function qr(){return Math.round(Date.now()/1e3)}function Hr(){return new Date(Date.now()).toISOString()}function Yr(){function Ur(Mr){return typeof Mr<"u"&&Mr}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return Ur(self)||Ur(window)||Ur(this)||{}}}return browser$1}var constants$1={},hasRequiredConstants;function requireConstants(){return hasRequiredConstants||(hasRequiredConstants=1,Object.defineProperty(constants$1,"__esModule",{value:!0}),constants$1.PINO_CUSTOM_CONTEXT_KEY=constants$1.PINO_LOGGER_DEFAULTS=void 0,constants$1.PINO_LOGGER_DEFAULTS={level:"info"},constants$1.PINO_CUSTOM_CONTEXT_KEY="custom_context"),constants$1}var utils$2={},hasRequiredUtils;function requireUtils(){if(hasRequiredUtils)return utils$2;hasRequiredUtils=1,Object.defineProperty(utils$2,"__esModule",{value:!0}),utils$2.generateChildLogger=utils$2.formatChildLoggerContext=utils$2.getLoggerContext=utils$2.setBrowserLoggerContext=utils$2.getBrowserLoggerContext=utils$2.getDefaultLoggerOptions=void 0;const fe=requireConstants();function e(Oe){return Object.assign(Object.assign({},Oe),{level:(Oe==null?void 0:Oe.level)||fe.PINO_LOGGER_DEFAULTS.level})}utils$2.getDefaultLoggerOptions=e;function ye(Oe,xe=fe.PINO_CUSTOM_CONTEXT_KEY){return Oe[xe]||""}utils$2.getBrowserLoggerContext=ye;function me(Oe,xe,gr=fe.PINO_CUSTOM_CONTEXT_KEY){return Oe[gr]=xe,Oe}utils$2.setBrowserLoggerContext=me;function be(Oe,xe=fe.PINO_CUSTOM_CONTEXT_KEY){let gr="";return typeof Oe.bindings>"u"?gr=ye(Oe,xe):gr=Oe.bindings().context||"",gr}utils$2.getLoggerContext=be;function ve(Oe,xe,gr=fe.PINO_CUSTOM_CONTEXT_KEY){const we=be(Oe,gr);return we.trim()?`${we}/${xe}`:xe}utils$2.formatChildLoggerContext=ve;function Ee(Oe,xe,gr=fe.PINO_CUSTOM_CONTEXT_KEY){const we=ve(Oe,xe,gr),Se=Oe.child({context:we});return me(Se,we,gr)}return utils$2.generateChildLogger=Ee,utils$2}(function(fe){Object.defineProperty(fe,"__esModule",{value:!0}),fe.pino=void 0;const e=tslibExports,ye=e.__importDefault(requireBrowser());Object.defineProperty(fe,"pino",{enumerable:!0,get:function(){return ye.default}}),e.__exportStar(requireConstants(),fe),e.__exportStar(requireUtils(),fe)})(cjs$3);let n$2=class extends IEvents$1{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}},h$7=class extends IEvents$1{constructor(e,ye){super(),this.core=e,this.logger=ye,this.records=new Map}},a$3=class{constructor(e,ye){this.logger=e,this.core=ye}},u$2=class extends IEvents$1{constructor(e,ye){super(),this.relayer=e,this.logger=ye}},g$6=class extends IEvents$1{constructor(e){super()}},p$5=class{constructor(e,ye,me,be){this.core=e,this.logger=ye,this.name=me}},d$1=class extends IEvents$1{constructor(e,ye){super(),this.relayer=e,this.logger=ye}},E$3=class extends IEvents$1{constructor(e,ye){super(),this.core=e,this.logger=ye}},y$3=class{constructor(e,ye){this.projectId=e,this.logger=ye}},b$4=class{constructor(e){this.opts=e,this.protocol="wc",this.version=2}},S$3=class{constructor(e){this.client=e}};var ed25519={},random={},system={},browser={};Object.defineProperty(browser,"__esModule",{value:!0});browser.BrowserRandomSource=void 0;const QUOTA=65536;class BrowserRandomSource{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const ye=new Uint8Array(e);for(let me=0;me<ye.length;me+=QUOTA)this._crypto.getRandomValues(ye.subarray(me,me+Math.min(ye.length-me,QUOTA)));return ye}}browser.BrowserRandomSource=BrowserRandomSource;function commonjsRequire(fe){throw new Error('Could not dynamically require "'+fe+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var node={},wipe$1={};Object.defineProperty(wipe$1,"__esModule",{value:!0});function wipe(fe){for(var e=0;e<fe.length;e++)fe[e]=0;return fe}wipe$1.wipe=wipe;Object.defineProperty(node,"__esModule",{value:!0});node.NodeRandomSource=void 0;const wipe_1$3=wipe$1;class NodeRandomSource{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof commonjsRequire<"u"){const e=require$$1;e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let ye=this._crypto.randomBytes(e);if(ye.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const me=new Uint8Array(e);for(let be=0;be<me.length;be++)me[be]=ye[be];return(0,wipe_1$3.wipe)(ye),me}}node.NodeRandomSource=NodeRandomSource;Object.defineProperty(system,"__esModule",{value:!0});system.SystemRandomSource=void 0;const browser_1=browser,node_1=node;class SystemRandomSource{constructor(){if(this.isAvailable=!1,this.name="",this._source=new browser_1.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new node_1.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}system.SystemRandomSource=SystemRandomSource;var binary={},int={};(function(fe){Object.defineProperty(fe,"__esModule",{value:!0});function e(Oe,xe){var gr=Oe>>>16&65535,we=Oe&65535,Se=xe>>>16&65535,$r=xe&65535;return we*$r+(gr*$r+we*Se<<16>>>0)|0}fe.mul=Math.imul||e;function ye(Oe,xe){return Oe+xe|0}fe.add=ye;function me(Oe,xe){return Oe-xe|0}fe.sub=me;function be(Oe,xe){return Oe<<xe|Oe>>>32-xe}fe.rotl=be;function ve(Oe,xe){return Oe<<32-xe|Oe>>>xe}fe.rotr=ve;function Ee(Oe){return typeof Oe=="number"&&isFinite(Oe)&&Math.floor(Oe)===Oe}fe.isInteger=Number.isInteger||Ee,fe.MAX_SAFE_INTEGER=9007199254740991,fe.isSafeInteger=function(Oe){return fe.isInteger(Oe)&&Oe>=-fe.MAX_SAFE_INTEGER&&Oe<=fe.MAX_SAFE_INTEGER}})(int);Object.defineProperty(binary,"__esModule",{value:!0});var int_1=int;function readInt16BE(fe,e){return e===void 0&&(e=0),(fe[e+0]<<8|fe[e+1])<<16>>16}binary.readInt16BE=readInt16BE;function readUint16BE(fe,e){return e===void 0&&(e=0),(fe[e+0]<<8|fe[e+1])>>>0}binary.readUint16BE=readUint16BE;function readInt16LE(fe,e){return e===void 0&&(e=0),(fe[e+1]<<8|fe[e])<<16>>16}binary.readInt16LE=readInt16LE;function readUint16LE(fe,e){return e===void 0&&(e=0),(fe[e+1]<<8|fe[e])>>>0}binary.readUint16LE=readUint16LE;function writeUint16BE(fe,e,ye){return e===void 0&&(e=new Uint8Array(2)),ye===void 0&&(ye=0),e[ye+0]=fe>>>8,e[ye+1]=fe>>>0,e}binary.writeUint16BE=writeUint16BE;binary.writeInt16BE=writeUint16BE;function writeUint16LE(fe,e,ye){return e===void 0&&(e=new Uint8Array(2)),ye===void 0&&(ye=0),e[ye+0]=fe>>>0,e[ye+1]=fe>>>8,e}binary.writeUint16LE=writeUint16LE;binary.writeInt16LE=writeUint16LE;function readInt32BE(fe,e){return e===void 0&&(e=0),fe[e]<<24|fe[e+1]<<16|fe[e+2]<<8|fe[e+3]}binary.readInt32BE=readInt32BE;function readUint32BE(fe,e){return e===void 0&&(e=0),(fe[e]<<24|fe[e+1]<<16|fe[e+2]<<8|fe[e+3])>>>0}binary.readUint32BE=readUint32BE;function readInt32LE(fe,e){return e===void 0&&(e=0),fe[e+3]<<24|fe[e+2]<<16|fe[e+1]<<8|fe[e]}binary.readInt32LE=readInt32LE;function readUint32LE(fe,e){return e===void 0&&(e=0),(fe[e+3]<<24|fe[e+2]<<16|fe[e+1]<<8|fe[e])>>>0}binary.readUint32LE=readUint32LE;function writeUint32BE(fe,e,ye){return e===void 0&&(e=new Uint8Array(4)),ye===void 0&&(ye=0),e[ye+0]=fe>>>24,e[ye+1]=fe>>>16,e[ye+2]=fe>>>8,e[ye+3]=fe>>>0,e}binary.writeUint32BE=writeUint32BE;binary.writeInt32BE=writeUint32BE;function writeUint32LE(fe,e,ye){return e===void 0&&(e=new Uint8Array(4)),ye===void 0&&(ye=0),e[ye+0]=fe>>>0,e[ye+1]=fe>>>8,e[ye+2]=fe>>>16,e[ye+3]=fe>>>24,e}binary.writeUint32LE=writeUint32LE;binary.writeInt32LE=writeUint32LE;function readInt64BE(fe,e){e===void 0&&(e=0);var ye=readInt32BE(fe,e),me=readInt32BE(fe,e+4);return ye*4294967296+me-(me>>31)*4294967296}binary.readInt64BE=readInt64BE;function readUint64BE(fe,e){e===void 0&&(e=0);var ye=readUint32BE(fe,e),me=readUint32BE(fe,e+4);return ye*4294967296+me}binary.readUint64BE=readUint64BE;function readInt64LE(fe,e){e===void 0&&(e=0);var ye=readInt32LE(fe,e),me=readInt32LE(fe,e+4);return me*4294967296+ye-(ye>>31)*4294967296}binary.readInt64LE=readInt64LE;function readUint64LE(fe,e){e===void 0&&(e=0);var ye=readUint32LE(fe,e),me=readUint32LE(fe,e+4);return me*4294967296+ye}binary.readUint64LE=readUint64LE;function writeUint64BE(fe,e,ye){return e===void 0&&(e=new Uint8Array(8)),ye===void 0&&(ye=0),writeUint32BE(fe/4294967296>>>0,e,ye),writeUint32BE(fe>>>0,e,ye+4),e}binary.writeUint64BE=writeUint64BE;binary.writeInt64BE=writeUint64BE;function writeUint64LE(fe,e,ye){return e===void 0&&(e=new Uint8Array(8)),ye===void 0&&(ye=0),writeUint32LE(fe>>>0,e,ye),writeUint32LE(fe/4294967296>>>0,e,ye+4),e}binary.writeUint64LE=writeUint64LE;binary.writeInt64LE=writeUint64LE;function readUintBE$1(fe,e,ye){if(ye===void 0&&(ye=0),fe%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(fe/8>e.length-ye)throw new Error("readUintBE: array is too short for the given bitLength");for(var me=0,be=1,ve=fe/8+ye-1;ve>=ye;ve--)me+=e[ve]*be,be*=256;return me}binary.readUintBE=readUintBE$1;function readUintLE$1(fe,e,ye){if(ye===void 0&&(ye=0),fe%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(fe/8>e.length-ye)throw new Error("readUintLE: array is too short for the given bitLength");for(var me=0,be=1,ve=ye;ve<ye+fe/8;ve++)me+=e[ve]*be,be*=256;return me}binary.readUintLE=readUintLE$1;function writeUintBE$1(fe,e,ye,me){if(ye===void 0&&(ye=new Uint8Array(fe/8)),me===void 0&&(me=0),fe%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!int_1.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var be=1,ve=fe/8+me-1;ve>=me;ve--)ye[ve]=e/be&255,be*=256;return ye}binary.writeUintBE=writeUintBE$1;function writeUintLE$1(fe,e,ye,me){if(ye===void 0&&(ye=new Uint8Array(fe/8)),me===void 0&&(me=0),fe%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!int_1.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var be=1,ve=me;ve<me+fe/8;ve++)ye[ve]=e/be&255,be*=256;return ye}binary.writeUintLE=writeUintLE$1;function readFloat32BE(fe,e){e===void 0&&(e=0);var ye=new DataView(fe.buffer,fe.byteOffset,fe.byteLength);return ye.getFloat32(e)}binary.readFloat32BE=readFloat32BE;function readFloat32LE(fe,e){e===void 0&&(e=0);var ye=new DataView(fe.buffer,fe.byteOffset,fe.byteLength);return ye.getFloat32(e,!0)}binary.readFloat32LE=readFloat32LE;function readFloat64BE(fe,e){e===void 0&&(e=0);var ye=new DataView(fe.buffer,fe.byteOffset,fe.byteLength);return ye.getFloat64(e)}binary.readFloat64BE=readFloat64BE;function readFloat64LE(fe,e){e===void 0&&(e=0);var ye=new DataView(fe.buffer,fe.byteOffset,fe.byteLength);return ye.getFloat64(e,!0)}binary.readFloat64LE=readFloat64LE;function writeFloat32BE(fe,e,ye){e===void 0&&(e=new Uint8Array(4)),ye===void 0&&(ye=0);var me=new DataView(e.buffer,e.byteOffset,e.byteLength);return me.setFloat32(ye,fe),e}binary.writeFloat32BE=writeFloat32BE;function writeFloat32LE(fe,e,ye){e===void 0&&(e=new Uint8Array(4)),ye===void 0&&(ye=0);var me=new DataView(e.buffer,e.byteOffset,e.byteLength);return me.setFloat32(ye,fe,!0),e}binary.writeFloat32LE=writeFloat32LE;function writeFloat64BE(fe,e,ye){e===void 0&&(e=new Uint8Array(8)),ye===void 0&&(ye=0);var me=new DataView(e.buffer,e.byteOffset,e.byteLength);return me.setFloat64(ye,fe),e}binary.writeFloat64BE=writeFloat64BE;function writeFloat64LE(fe,e,ye){e===void 0&&(e=new Uint8Array(8)),ye===void 0&&(ye=0);var me=new DataView(e.buffer,e.byteOffset,e.byteLength);return me.setFloat64(ye,fe,!0),e}binary.writeFloat64LE=writeFloat64LE;(function(fe){Object.defineProperty(fe,"__esModule",{value:!0}),fe.randomStringForEntropy=fe.randomString=fe.randomUint32=fe.randomBytes=fe.defaultRandomSource=void 0;const e=system,ye=binary,me=wipe$1;fe.defaultRandomSource=new e.SystemRandomSource;function be(gr,we=fe.defaultRandomSource){return we.randomBytes(gr)}fe.randomBytes=be;function ve(gr=fe.defaultRandomSource){const we=be(4,gr),Se=(0,ye.readUint32LE)(we);return(0,me.wipe)(we),Se}fe.randomUint32=ve;const Ee="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function Oe(gr,we=Ee,Se=fe.defaultRandomSource){if(we.length<2)throw new Error("randomString charset is too short");if(we.length>256)throw new Error("randomString charset is too long");let $r="";const Fr=we.length,Br=256-256%Fr;for(;gr>0;){const Vr=be(Math.ceil(gr*256/Br),Se);for(let oo=0;oo<Vr.length&&gr>0;oo++){const so=Vr[oo];so<Br&&($r+=we.charAt(so%Fr),gr--)}(0,me.wipe)(Vr)}return $r}fe.randomString=Oe;function xe(gr,we=Ee,Se=fe.defaultRandomSource){const $r=Math.ceil(gr/(Math.log(we.length)/Math.LN2));return Oe($r,we,Se)}fe.randomStringForEntropy=xe})(random);var sha512={};(function(fe){Object.defineProperty(fe,"__esModule",{value:!0});var e=binary,ye=wipe$1;fe.DIGEST_LENGTH=64,fe.BLOCK_SIZE=128;var me=function(){function Oe(){this.digestLength=fe.DIGEST_LENGTH,this.blockSize=fe.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return Oe.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},Oe.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},Oe.prototype.clean=function(){ye.wipe(this._buffer),ye.wipe(this._tempHi),ye.wipe(this._tempLo),this.reset()},Oe.prototype.update=function(xe,gr){if(gr===void 0&&(gr=xe.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var we=0;if(this._bytesHashed+=gr,this._bufferLength>0){for(;this._bufferLength<fe.BLOCK_SIZE&&gr>0;)this._buffer[this._bufferLength++]=xe[we++],gr--;this._bufferLength===this.blockSize&&(ve(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(gr>=this.blockSize&&(we=ve(this._tempHi,this._tempLo,this._stateHi,this._stateLo,xe,we,gr),gr%=this.blockSize);gr>0;)this._buffer[this._bufferLength++]=xe[we++],gr--;return this},Oe.prototype.finish=function(xe){if(!this._finished){var gr=this._bytesHashed,we=this._bufferLength,Se=gr/536870912|0,$r=gr<<3,Fr=gr%128<112?128:256;this._buffer[we]=128;for(var Br=we+1;Br<Fr-8;Br++)this._buffer[Br]=0;e.writeUint32BE(Se,this._buffer,Fr-8),e.writeUint32BE($r,this._buffer,Fr-4),ve(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,Fr),this._finished=!0}for(var Br=0;Br<this.digestLength/8;Br++)e.writeUint32BE(this._stateHi[Br],xe,Br*8),e.writeUint32BE(this._stateLo[Br],xe,Br*8+4);return this},Oe.prototype.digest=function(){var xe=new Uint8Array(this.digestLength);return this.finish(xe),xe},Oe.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},Oe.prototype.restoreState=function(xe){return this._stateHi.set(xe.stateHi),this._stateLo.set(xe.stateLo),this._bufferLength=xe.bufferLength,xe.buffer&&this._buffer.set(xe.buffer),this._bytesHashed=xe.bytesHashed,this._finished=!1,this},Oe.prototype.cleanSavedState=function(xe){ye.wipe(xe.stateHi),ye.wipe(xe.stateLo),xe.buffer&&ye.wipe(xe.buffer),xe.bufferLength=0,xe.bytesHashed=0},Oe}();fe.SHA512=me;var be=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function ve(Oe,xe,gr,we,Se,$r,Fr){for(var Br=gr[0],Vr=gr[1],oo=gr[2],so=gr[3],kr=gr[4],qr=gr[5],Hr=gr[6],Yr=gr[7],Ur=we[0],Mr=we[1],Lr=we[2],no=we[3],Xr=we[4],to=we[5],ao=we[6],bo=we[7],Wr,Jr,fo,vo,mo,po,yo,Oo;Fr>=128;){for(var Io=0;Io<16;Io++){var go=8*Io+$r;Oe[Io]=e.readUint32BE(Se,go),xe[Io]=e.readUint32BE(Se,go+4)}for(var Io=0;Io<80;Io++){var No=Br,Po=Vr,Bo=oo,ho=so,co=kr,Qr=qr,jr=Hr,Zr=Yr,wo=Ur,Eo=Mr,Ao=Lr,Co=no,Uo=Xr,ko=to,si=ao,ui=bo;if(Wr=Yr,Jr=bo,mo=Jr&65535,po=Jr>>>16,yo=Wr&65535,Oo=Wr>>>16,Wr=(kr>>>14|Xr<<32-14)^(kr>>>18|Xr<<32-18)^(Xr>>>41-32|kr<<32-(41-32)),Jr=(Xr>>>14|kr<<32-14)^(Xr>>>18|kr<<32-18)^(kr>>>41-32|Xr<<32-(41-32)),mo+=Jr&65535,po+=Jr>>>16,yo+=Wr&65535,Oo+=Wr>>>16,Wr=kr&qr^~kr&Hr,Jr=Xr&to^~Xr&ao,mo+=Jr&65535,po+=Jr>>>16,yo+=Wr&65535,Oo+=Wr>>>16,Wr=be[Io*2],Jr=be[Io*2+1],mo+=Jr&65535,po+=Jr>>>16,yo+=Wr&65535,Oo+=Wr>>>16,Wr=Oe[Io%16],Jr=xe[Io%16],mo+=Jr&65535,po+=Jr>>>16,yo+=Wr&65535,Oo+=Wr>>>16,po+=mo>>>16,yo+=po>>>16,Oo+=yo>>>16,fo=yo&65535|Oo<<16,vo=mo&65535|po<<16,Wr=fo,Jr=vo,mo=Jr&65535,po=Jr>>>16,yo=Wr&65535,Oo=Wr>>>16,Wr=(Br>>>28|Ur<<32-28)^(Ur>>>34-32|Br<<32-(34-32))^(Ur>>>39-32|Br<<32-(39-32)),Jr=(Ur>>>28|Br<<32-28)^(Br>>>34-32|Ur<<32-(34-32))^(Br>>>39-32|Ur<<32-(39-32)),mo+=Jr&65535,po+=Jr>>>16,yo+=Wr&65535,Oo+=Wr>>>16,Wr=Br&Vr^Br&oo^Vr&oo,Jr=Ur&Mr^Ur&Lr^Mr&Lr,mo+=Jr&65535,po+=Jr>>>16,yo+=Wr&65535,Oo+=Wr>>>16,po+=mo>>>16,yo+=po>>>16,Oo+=yo>>>16,Zr=yo&65535|Oo<<16,ui=mo&65535|po<<16,Wr=ho,Jr=Co,mo=Jr&65535,po=Jr>>>16,yo=Wr&65535,Oo=Wr>>>16,Wr=fo,Jr=vo,mo+=Jr&65535,po+=Jr>>>16,yo+=Wr&65535,Oo+=Wr>>>16,po+=mo>>>16,yo+=po>>>16,Oo+=yo>>>16,ho=yo&65535|Oo<<16,Co=mo&65535|po<<16,Vr=No,oo=Po,so=Bo,kr=ho,qr=co,Hr=Qr,Yr=jr,Br=Zr,Mr=wo,Lr=Eo,no=Ao,Xr=Co,to=Uo,ao=ko,bo=si,Ur=ui,Io%16===15)for(var go=0;go<16;go++)Wr=Oe[go],Jr=xe[go],mo=Jr&65535,po=Jr>>>16,yo=Wr&65535,Oo=Wr>>>16,Wr=Oe[(go+9)%16],Jr=xe[(go+9)%16],mo+=Jr&65535,po+=Jr>>>16,yo+=Wr&65535,Oo+=Wr>>>16,fo=Oe[(go+1)%16],vo=xe[(go+1)%16],Wr=(fo>>>1|vo<<32-1)^(fo>>>8|vo<<32-8)^fo>>>7,Jr=(vo>>>1|fo<<32-1)^(vo>>>8|fo<<32-8)^(vo>>>7|fo<<32-7),mo+=Jr&65535,po+=Jr>>>16,yo+=Wr&65535,Oo+=Wr>>>16,fo=Oe[(go+14)%16],vo=xe[(go+14)%16],Wr=(fo>>>19|vo<<32-19)^(vo>>>61-32|fo<<32-(61-32))^fo>>>6,Jr=(vo>>>19|fo<<32-19)^(fo>>>61-32|vo<<32-(61-32))^(vo>>>6|fo<<32-6),mo+=Jr&65535,po+=Jr>>>16,yo+=Wr&65535,Oo+=Wr>>>16,po+=mo>>>16,yo+=po>>>16,Oo+=yo>>>16,Oe[go]=yo&65535|Oo<<16,xe[go]=mo&65535|po<<16}Wr=Br,Jr=Ur,mo=Jr&65535,po=Jr>>>16,yo=Wr&65535,Oo=Wr>>>16,Wr=gr[0],Jr=we[0],mo+=Jr&65535,po+=Jr>>>16,yo+=Wr&65535,Oo+=Wr>>>16,po+=mo>>>16,yo+=po>>>16,Oo+=yo>>>16,gr[0]=Br=yo&65535|Oo<<16,we[0]=Ur=mo&65535|po<<16,Wr=Vr,Jr=Mr,mo=Jr&65535,po=Jr>>>16,yo=Wr&65535,Oo=Wr>>>16,Wr=gr[1],Jr=we[1],mo+=Jr&65535,po+=Jr>>>16,yo+=Wr&65535,Oo+=Wr>>>16,po+=mo>>>16,yo+=po>>>16,Oo+=yo>>>16,gr[1]=Vr=yo&65535|Oo<<16,we[1]=Mr=mo&65535|po<<16,Wr=oo,Jr=Lr,mo=Jr&65535,po=Jr>>>16,yo=Wr&65535,Oo=Wr>>>16,Wr=gr[2],Jr=we[2],mo+=Jr&65535,po+=Jr>>>16,yo+=Wr&65535,Oo+=Wr>>>16,po+=mo>>>16,yo+=po>>>16,Oo+=yo>>>16,gr[2]=oo=yo&65535|Oo<<16,we[2]=Lr=mo&65535|po<<16,Wr=so,Jr=no,mo=Jr&65535,po=Jr>>>16,yo=Wr&65535,Oo=Wr>>>16,Wr=gr[3],Jr=we[3],mo+=Jr&65535,po+=Jr>>>16,yo+=Wr&65535,Oo+=Wr>>>16,po+=mo>>>16,yo+=po>>>16,Oo+=yo>>>16,gr[3]=so=yo&65535|Oo<<16,we[3]=no=mo&65535|po<<16,Wr=kr,Jr=Xr,mo=Jr&65535,po=Jr>>>16,yo=Wr&65535,Oo=Wr>>>16,Wr=gr[4],Jr=we[4],mo+=Jr&65535,po+=Jr>>>16,yo+=Wr&65535,Oo+=Wr>>>16,po+=mo>>>16,yo+=po>>>16,Oo+=yo>>>16,gr[4]=kr=yo&65535|Oo<<16,we[4]=Xr=mo&65535|po<<16,Wr=qr,Jr=to,mo=Jr&65535,po=Jr>>>16,yo=Wr&65535,Oo=Wr>>>16,Wr=gr[5],Jr=we[5],mo+=Jr&65535,po+=Jr>>>16,yo+=Wr&65535,Oo+=Wr>>>16,po+=mo>>>16,yo+=po>>>16,Oo+=yo>>>16,gr[5]=qr=yo&65535|Oo<<16,we[5]=to=mo&65535|po<<16,Wr=Hr,Jr=ao,mo=Jr&65535,po=Jr>>>16,yo=Wr&65535,Oo=Wr>>>16,Wr=gr[6],Jr=we[6],mo+=Jr&65535,po+=Jr>>>16,yo+=Wr&65535,Oo+=Wr>>>16,po+=mo>>>16,yo+=po>>>16,Oo+=yo>>>16,gr[6]=Hr=yo&65535|Oo<<16,we[6]=ao=mo&65535|po<<16,Wr=Yr,Jr=bo,mo=Jr&65535,po=Jr>>>16,yo=Wr&65535,Oo=Wr>>>16,Wr=gr[7],Jr=we[7],mo+=Jr&65535,po+=Jr>>>16,yo+=Wr&65535,Oo+=Wr>>>16,po+=mo>>>16,yo+=po>>>16,Oo+=yo>>>16,gr[7]=Yr=yo&65535|Oo<<16,we[7]=bo=mo&65535|po<<16,$r+=128,Fr-=128}return $r}function Ee(Oe){var xe=new me;xe.update(Oe);var gr=xe.digest();return xe.clean(),gr}fe.hash=Ee})(sha512);(function(fe){Object.defineProperty(fe,"__esModule",{value:!0}),fe.convertSecretKeyToX25519=fe.convertPublicKeyToX25519=fe.verify=fe.sign=fe.extractPublicKeyFromSecretKey=fe.generateKeyPair=fe.generateKeyPairFromSeed=fe.SEED_LENGTH=fe.SECRET_KEY_LENGTH=fe.PUBLIC_KEY_LENGTH=fe.SIGNATURE_LENGTH=void 0;const e=random,ye=sha512,me=wipe$1;fe.SIGNATURE_LENGTH=64,fe.PUBLIC_KEY_LENGTH=32,fe.SECRET_KEY_LENGTH=64,fe.SEED_LENGTH=32;function be(ho){const co=new Float64Array(16);if(ho)for(let Qr=0;Qr<ho.length;Qr++)co[Qr]=ho[Qr];return co}const ve=new Uint8Array(32);ve[0]=9;const Ee=be(),Oe=be([1]),xe=be([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),gr=be([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),we=be([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),Se=be([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),$r=be([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function Fr(ho,co){for(let Qr=0;Qr<16;Qr++)ho[Qr]=co[Qr]|0}function Br(ho){let co=1;for(let Qr=0;Qr<16;Qr++){let jr=ho[Qr]+co+65535;co=Math.floor(jr/65536),ho[Qr]=jr-co*65536}ho[0]+=co-1+37*(co-1)}function Vr(ho,co,Qr){const jr=~(Qr-1);for(let Zr=0;Zr<16;Zr++){const wo=jr&(ho[Zr]^co[Zr]);ho[Zr]^=wo,co[Zr]^=wo}}function oo(ho,co){const Qr=be(),jr=be();for(let Zr=0;Zr<16;Zr++)jr[Zr]=co[Zr];Br(jr),Br(jr),Br(jr);for(let Zr=0;Zr<2;Zr++){Qr[0]=jr[0]-65517;for(let Eo=1;Eo<15;Eo++)Qr[Eo]=jr[Eo]-65535-(Qr[Eo-1]>>16&1),Qr[Eo-1]&=65535;Qr[15]=jr[15]-32767-(Qr[14]>>16&1);const wo=Qr[15]>>16&1;Qr[14]&=65535,Vr(jr,Qr,1-wo)}for(let Zr=0;Zr<16;Zr++)ho[2*Zr]=jr[Zr]&255,ho[2*Zr+1]=jr[Zr]>>8}function so(ho,co){let Qr=0;for(let jr=0;jr<32;jr++)Qr|=ho[jr]^co[jr];return(1&Qr-1>>>8)-1}function kr(ho,co){const Qr=new Uint8Array(32),jr=new Uint8Array(32);return oo(Qr,ho),oo(jr,co),so(Qr,jr)}function qr(ho){const co=new Uint8Array(32);return oo(co,ho),co[0]&1}function Hr(ho,co){for(let Qr=0;Qr<16;Qr++)ho[Qr]=co[2*Qr]+(co[2*Qr+1]<<8);ho[15]&=32767}function Yr(ho,co,Qr){for(let jr=0;jr<16;jr++)ho[jr]=co[jr]+Qr[jr]}function Ur(ho,co,Qr){for(let jr=0;jr<16;jr++)ho[jr]=co[jr]-Qr[jr]}function Mr(ho,co,Qr){let jr,Zr,wo=0,Eo=0,Ao=0,Co=0,Uo=0,ko=0,si=0,ui=0,Go=0,Xo=0,Zo=0,Ko=0,Jo=0,Ho=0,zo=0,Wo=0,Yo=0,ei=0,Vo=0,oi=0,ti=0,ri=0,ni=0,ii=0,wi=0,Si=0,$i=0,bi=0,Di=0,Ni=0,fi=0,ai=Qr[0],li=Qr[1],io=Qr[2],Gr=Qr[3],ro=Qr[4],lo=Qr[5],_o=Qr[6],So=Qr[7],$o=Qr[8],Ro=Qr[9],Fo=Qr[10],Do=Qr[11],xo=Qr[12],jo=Qr[13],Lo=Qr[14],Qo=Qr[15];jr=co[0],wo+=jr*ai,Eo+=jr*li,Ao+=jr*io,Co+=jr*Gr,Uo+=jr*ro,ko+=jr*lo,si+=jr*_o,ui+=jr*So,Go+=jr*$o,Xo+=jr*Ro,Zo+=jr*Fo,Ko+=jr*Do,Jo+=jr*xo,Ho+=jr*jo,zo+=jr*Lo,Wo+=jr*Qo,jr=co[1],Eo+=jr*ai,Ao+=jr*li,Co+=jr*io,Uo+=jr*Gr,ko+=jr*ro,si+=jr*lo,ui+=jr*_o,Go+=jr*So,Xo+=jr*$o,Zo+=jr*Ro,Ko+=jr*Fo,Jo+=jr*Do,Ho+=jr*xo,zo+=jr*jo,Wo+=jr*Lo,Yo+=jr*Qo,jr=co[2],Ao+=jr*ai,Co+=jr*li,Uo+=jr*io,ko+=jr*Gr,si+=jr*ro,ui+=jr*lo,Go+=jr*_o,Xo+=jr*So,Zo+=jr*$o,Ko+=jr*Ro,Jo+=jr*Fo,Ho+=jr*Do,zo+=jr*xo,Wo+=jr*jo,Yo+=jr*Lo,ei+=jr*Qo,jr=co[3],Co+=jr*ai,Uo+=jr*li,ko+=jr*io,si+=jr*Gr,ui+=jr*ro,Go+=jr*lo,Xo+=jr*_o,Zo+=jr*So,Ko+=jr*$o,Jo+=jr*Ro,Ho+=jr*Fo,zo+=jr*Do,Wo+=jr*xo,Yo+=jr*jo,ei+=jr*Lo,Vo+=jr*Qo,jr=co[4],Uo+=jr*ai,ko+=jr*li,si+=jr*io,ui+=jr*Gr,Go+=jr*ro,Xo+=jr*lo,Zo+=jr*_o,Ko+=jr*So,Jo+=jr*$o,Ho+=jr*Ro,zo+=jr*Fo,Wo+=jr*Do,Yo+=jr*xo,ei+=jr*jo,Vo+=jr*Lo,oi+=jr*Qo,jr=co[5],ko+=jr*ai,si+=jr*li,ui+=jr*io,Go+=jr*Gr,Xo+=jr*ro,Zo+=jr*lo,Ko+=jr*_o,Jo+=jr*So,Ho+=jr*$o,zo+=jr*Ro,Wo+=jr*Fo,Yo+=jr*Do,ei+=jr*xo,Vo+=jr*jo,oi+=jr*Lo,ti+=jr*Qo,jr=co[6],si+=jr*ai,ui+=jr*li,Go+=jr*io,Xo+=jr*Gr,Zo+=jr*ro,Ko+=jr*lo,Jo+=jr*_o,Ho+=jr*So,zo+=jr*$o,Wo+=jr*Ro,Yo+=jr*Fo,ei+=jr*Do,Vo+=jr*xo,oi+=jr*jo,ti+=jr*Lo,ri+=jr*Qo,jr=co[7],ui+=jr*ai,Go+=jr*li,Xo+=jr*io,Zo+=jr*Gr,Ko+=jr*ro,Jo+=jr*lo,Ho+=jr*_o,zo+=jr*So,Wo+=jr*$o,Yo+=jr*Ro,ei+=jr*Fo,Vo+=jr*Do,oi+=jr*xo,ti+=jr*jo,ri+=jr*Lo,ni+=jr*Qo,jr=co[8],Go+=jr*ai,Xo+=jr*li,Zo+=jr*io,Ko+=jr*Gr,Jo+=jr*ro,Ho+=jr*lo,zo+=jr*_o,Wo+=jr*So,Yo+=jr*$o,ei+=jr*Ro,Vo+=jr*Fo,oi+=jr*Do,ti+=jr*xo,ri+=jr*jo,ni+=jr*Lo,ii+=jr*Qo,jr=co[9],Xo+=jr*ai,Zo+=jr*li,Ko+=jr*io,Jo+=jr*Gr,Ho+=jr*ro,zo+=jr*lo,Wo+=jr*_o,Yo+=jr*So,ei+=jr*$o,Vo+=jr*Ro,oi+=jr*Fo,ti+=jr*Do,ri+=jr*xo,ni+=jr*jo,ii+=jr*Lo,wi+=jr*Qo,jr=co[10],Zo+=jr*ai,Ko+=jr*li,Jo+=jr*io,Ho+=jr*Gr,zo+=jr*ro,Wo+=jr*lo,Yo+=jr*_o,ei+=jr*So,Vo+=jr*$o,oi+=jr*Ro,ti+=jr*Fo,ri+=jr*Do,ni+=jr*xo,ii+=jr*jo,wi+=jr*Lo,Si+=jr*Qo,jr=co[11],Ko+=jr*ai,Jo+=jr*li,Ho+=jr*io,zo+=jr*Gr,Wo+=jr*ro,Yo+=jr*lo,ei+=jr*_o,Vo+=jr*So,oi+=jr*$o,ti+=jr*Ro,ri+=jr*Fo,ni+=jr*Do,ii+=jr*xo,wi+=jr*jo,Si+=jr*Lo,$i+=jr*Qo,jr=co[12],Jo+=jr*ai,Ho+=jr*li,zo+=jr*io,Wo+=jr*Gr,Yo+=jr*ro,ei+=jr*lo,Vo+=jr*_o,oi+=jr*So,ti+=jr*$o,ri+=jr*Ro,ni+=jr*Fo,ii+=jr*Do,wi+=jr*xo,Si+=jr*jo,$i+=jr*Lo,bi+=jr*Qo,jr=co[13],Ho+=jr*ai,zo+=jr*li,Wo+=jr*io,Yo+=jr*Gr,ei+=jr*ro,Vo+=jr*lo,oi+=jr*_o,ti+=jr*So,ri+=jr*$o,ni+=jr*Ro,ii+=jr*Fo,wi+=jr*Do,Si+=jr*xo,$i+=jr*jo,bi+=jr*Lo,Di+=jr*Qo,jr=co[14],zo+=jr*ai,Wo+=jr*li,Yo+=jr*io,ei+=jr*Gr,Vo+=jr*ro,oi+=jr*lo,ti+=jr*_o,ri+=jr*So,ni+=jr*$o,ii+=jr*Ro,wi+=jr*Fo,Si+=jr*Do,$i+=jr*xo,bi+=jr*jo,Di+=jr*Lo,Ni+=jr*Qo,jr=co[15],Wo+=jr*ai,Yo+=jr*li,ei+=jr*io,Vo+=jr*Gr,oi+=jr*ro,ti+=jr*lo,ri+=jr*_o,ni+=jr*So,ii+=jr*$o,wi+=jr*Ro,Si+=jr*Fo,$i+=jr*Do,bi+=jr*xo,Di+=jr*jo,Ni+=jr*Lo,fi+=jr*Qo,wo+=38*Yo,Eo+=38*ei,Ao+=38*Vo,Co+=38*oi,Uo+=38*ti,ko+=38*ri,si+=38*ni,ui+=38*ii,Go+=38*wi,Xo+=38*Si,Zo+=38*$i,Ko+=38*bi,Jo+=38*Di,Ho+=38*Ni,zo+=38*fi,Zr=1,jr=wo+Zr+65535,Zr=Math.floor(jr/65536),wo=jr-Zr*65536,jr=Eo+Zr+65535,Zr=Math.floor(jr/65536),Eo=jr-Zr*65536,jr=Ao+Zr+65535,Zr=Math.floor(jr/65536),Ao=jr-Zr*65536,jr=Co+Zr+65535,Zr=Math.floor(jr/65536),Co=jr-Zr*65536,jr=Uo+Zr+65535,Zr=Math.floor(jr/65536),Uo=jr-Zr*65536,jr=ko+Zr+65535,Zr=Math.floor(jr/65536),ko=jr-Zr*65536,jr=si+Zr+65535,Zr=Math.floor(jr/65536),si=jr-Zr*65536,jr=ui+Zr+65535,Zr=Math.floor(jr/65536),ui=jr-Zr*65536,jr=Go+Zr+65535,Zr=Math.floor(jr/65536),Go=jr-Zr*65536,jr=Xo+Zr+65535,Zr=Math.floor(jr/65536),Xo=jr-Zr*65536,jr=Zo+Zr+65535,Zr=Math.floor(jr/65536),Zo=jr-Zr*65536,jr=Ko+Zr+65535,Zr=Math.floor(jr/65536),Ko=jr-Zr*65536,jr=Jo+Zr+65535,Zr=Math.floor(jr/65536),Jo=jr-Zr*65536,jr=Ho+Zr+65535,Zr=Math.floor(jr/65536),Ho=jr-Zr*65536,jr=zo+Zr+65535,Zr=Math.floor(jr/65536),zo=jr-Zr*65536,jr=Wo+Zr+65535,Zr=Math.floor(jr/65536),Wo=jr-Zr*65536,wo+=Zr-1+37*(Zr-1),Zr=1,jr=wo+Zr+65535,Zr=Math.floor(jr/65536),wo=jr-Zr*65536,jr=Eo+Zr+65535,Zr=Math.floor(jr/65536),Eo=jr-Zr*65536,jr=Ao+Zr+65535,Zr=Math.floor(jr/65536),Ao=jr-Zr*65536,jr=Co+Zr+65535,Zr=Math.floor(jr/65536),Co=jr-Zr*65536,jr=Uo+Zr+65535,Zr=Math.floor(jr/65536),Uo=jr-Zr*65536,jr=ko+Zr+65535,Zr=Math.floor(jr/65536),ko=jr-Zr*65536,jr=si+Zr+65535,Zr=Math.floor(jr/65536),si=jr-Zr*65536,jr=ui+Zr+65535,Zr=Math.floor(jr/65536),ui=jr-Zr*65536,jr=Go+Zr+65535,Zr=Math.floor(jr/65536),Go=jr-Zr*65536,jr=Xo+Zr+65535,Zr=Math.floor(jr/65536),Xo=jr-Zr*65536,jr=Zo+Zr+65535,Zr=Math.floor(jr/65536),Zo=jr-Zr*65536,jr=Ko+Zr+65535,Zr=Math.floor(jr/65536),Ko=jr-Zr*65536,jr=Jo+Zr+65535,Zr=Math.floor(jr/65536),Jo=jr-Zr*65536,jr=Ho+Zr+65535,Zr=Math.floor(jr/65536),Ho=jr-Zr*65536,jr=zo+Zr+65535,Zr=Math.floor(jr/65536),zo=jr-Zr*65536,jr=Wo+Zr+65535,Zr=Math.floor(jr/65536),Wo=jr-Zr*65536,wo+=Zr-1+37*(Zr-1),ho[0]=wo,ho[1]=Eo,ho[2]=Ao,ho[3]=Co,ho[4]=Uo,ho[5]=ko,ho[6]=si,ho[7]=ui,ho[8]=Go,ho[9]=Xo,ho[10]=Zo,ho[11]=Ko,ho[12]=Jo,ho[13]=Ho,ho[14]=zo,ho[15]=Wo}function Lr(ho,co){Mr(ho,co,co)}function no(ho,co){const Qr=be();let jr;for(jr=0;jr<16;jr++)Qr[jr]=co[jr];for(jr=253;jr>=0;jr--)Lr(Qr,Qr),jr!==2&&jr!==4&&Mr(Qr,Qr,co);for(jr=0;jr<16;jr++)ho[jr]=Qr[jr]}function Xr(ho,co){const Qr=be();let jr;for(jr=0;jr<16;jr++)Qr[jr]=co[jr];for(jr=250;jr>=0;jr--)Lr(Qr,Qr),jr!==1&&Mr(Qr,Qr,co);for(jr=0;jr<16;jr++)ho[jr]=Qr[jr]}function to(ho,co){const Qr=be(),jr=be(),Zr=be(),wo=be(),Eo=be(),Ao=be(),Co=be(),Uo=be(),ko=be();Ur(Qr,ho[1],ho[0]),Ur(ko,co[1],co[0]),Mr(Qr,Qr,ko),Yr(jr,ho[0],ho[1]),Yr(ko,co[0],co[1]),Mr(jr,jr,ko),Mr(Zr,ho[3],co[3]),Mr(Zr,Zr,gr),Mr(wo,ho[2],co[2]),Yr(wo,wo,wo),Ur(Eo,jr,Qr),Ur(Ao,wo,Zr),Yr(Co,wo,Zr),Yr(Uo,jr,Qr),Mr(ho[0],Eo,Ao),Mr(ho[1],Uo,Co),Mr(ho[2],Co,Ao),Mr(ho[3],Eo,Uo)}function ao(ho,co,Qr){for(let jr=0;jr<4;jr++)Vr(ho[jr],co[jr],Qr)}function bo(ho,co){const Qr=be(),jr=be(),Zr=be();no(Zr,co[2]),Mr(Qr,co[0],Zr),Mr(jr,co[1],Zr),oo(ho,jr),ho[31]^=qr(Qr)<<7}function Wr(ho,co,Qr){Fr(ho[0],Ee),Fr(ho[1],Oe),Fr(ho[2],Oe),Fr(ho[3],Ee);for(let jr=255;jr>=0;--jr){const Zr=Qr[jr/8|0]>>(jr&7)&1;ao(ho,co,Zr),to(co,ho),to(ho,ho),ao(ho,co,Zr)}}function Jr(ho,co){const Qr=[be(),be(),be(),be()];Fr(Qr[0],we),Fr(Qr[1],Se),Fr(Qr[2],Oe),Mr(Qr[3],we,Se),Wr(ho,Qr,co)}function fo(ho){if(ho.length!==fe.SEED_LENGTH)throw new Error(`ed25519: seed must be ${fe.SEED_LENGTH} bytes`);const co=(0,ye.hash)(ho);co[0]&=248,co[31]&=127,co[31]|=64;const Qr=new Uint8Array(32),jr=[be(),be(),be(),be()];Jr(jr,co),bo(Qr,jr);const Zr=new Uint8Array(64);return Zr.set(ho),Zr.set(Qr,32),{publicKey:Qr,secretKey:Zr}}fe.generateKeyPairFromSeed=fo;function vo(ho){const co=(0,e.randomBytes)(32,ho),Qr=fo(co);return(0,me.wipe)(co),Qr}fe.generateKeyPair=vo;function mo(ho){if(ho.length!==fe.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${fe.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(ho.subarray(32))}fe.extractPublicKeyFromSecretKey=mo;const po=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function yo(ho,co){let Qr,jr,Zr,wo;for(jr=63;jr>=32;--jr){for(Qr=0,Zr=jr-32,wo=jr-12;Zr<wo;++Zr)co[Zr]+=Qr-16*co[jr]*po[Zr-(jr-32)],Qr=Math.floor((co[Zr]+128)/256),co[Zr]-=Qr*256;co[Zr]+=Qr,co[jr]=0}for(Qr=0,Zr=0;Zr<32;Zr++)co[Zr]+=Qr-(co[31]>>4)*po[Zr],Qr=co[Zr]>>8,co[Zr]&=255;for(Zr=0;Zr<32;Zr++)co[Zr]-=Qr*po[Zr];for(jr=0;jr<32;jr++)co[jr+1]+=co[jr]>>8,ho[jr]=co[jr]&255}function Oo(ho){const co=new Float64Array(64);for(let Qr=0;Qr<64;Qr++)co[Qr]=ho[Qr];for(let Qr=0;Qr<64;Qr++)ho[Qr]=0;yo(ho,co)}function Io(ho,co){const Qr=new Float64Array(64),jr=[be(),be(),be(),be()],Zr=(0,ye.hash)(ho.subarray(0,32));Zr[0]&=248,Zr[31]&=127,Zr[31]|=64;const wo=new Uint8Array(64);wo.set(Zr.subarray(32),32);const Eo=new ye.SHA512;Eo.update(wo.subarray(32)),Eo.update(co);const Ao=Eo.digest();Eo.clean(),Oo(Ao),Jr(jr,Ao),bo(wo,jr),Eo.reset(),Eo.update(wo.subarray(0,32)),Eo.update(ho.subarray(32)),Eo.update(co);const Co=Eo.digest();Oo(Co);for(let Uo=0;Uo<32;Uo++)Qr[Uo]=Ao[Uo];for(let Uo=0;Uo<32;Uo++)for(let ko=0;ko<32;ko++)Qr[Uo+ko]+=Co[Uo]*Zr[ko];return yo(wo.subarray(32),Qr),wo}fe.sign=Io;function go(ho,co){const Qr=be(),jr=be(),Zr=be(),wo=be(),Eo=be(),Ao=be(),Co=be();return Fr(ho[2],Oe),Hr(ho[1],co),Lr(Zr,ho[1]),Mr(wo,Zr,xe),Ur(Zr,Zr,ho[2]),Yr(wo,ho[2],wo),Lr(Eo,wo),Lr(Ao,Eo),Mr(Co,Ao,Eo),Mr(Qr,Co,Zr),Mr(Qr,Qr,wo),Xr(Qr,Qr),Mr(Qr,Qr,Zr),Mr(Qr,Qr,wo),Mr(Qr,Qr,wo),Mr(ho[0],Qr,wo),Lr(jr,ho[0]),Mr(jr,jr,wo),kr(jr,Zr)&&Mr(ho[0],ho[0],$r),Lr(jr,ho[0]),Mr(jr,jr,wo),kr(jr,Zr)?-1:(qr(ho[0])===co[31]>>7&&Ur(ho[0],Ee,ho[0]),Mr(ho[3],ho[0],ho[1]),0)}function No(ho,co,Qr){const jr=new Uint8Array(32),Zr=[be(),be(),be(),be()],wo=[be(),be(),be(),be()];if(Qr.length!==fe.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${fe.SIGNATURE_LENGTH} bytes`);if(go(wo,ho))return!1;const Eo=new ye.SHA512;Eo.update(Qr.subarray(0,32)),Eo.update(ho),Eo.update(co);const Ao=Eo.digest();return Oo(Ao),Wr(Zr,wo,Ao),Jr(wo,Qr.subarray(32)),to(Zr,wo),bo(jr,Zr),!so(Qr,jr)}fe.verify=No;function Po(ho){let co=[be(),be(),be(),be()];if(go(co,ho))throw new Error("Ed25519: invalid public key");let Qr=be(),jr=be(),Zr=co[1];Yr(Qr,Oe,Zr),Ur(jr,Oe,Zr),no(jr,jr),Mr(Qr,Qr,jr);let wo=new Uint8Array(32);return oo(wo,Qr),wo}fe.convertPublicKeyToX25519=Po;function Bo(ho){const co=(0,ye.hash)(ho.subarray(0,32));co[0]&=248,co[31]&=127,co[31]|=64;const Qr=new Uint8Array(co.subarray(0,32));return(0,me.wipe)(co),Qr}fe.convertSecretKeyToX25519=Bo})(ed25519);const JWT_IRIDIUM_ALG="EdDSA",JWT_IRIDIUM_TYP="JWT",JWT_DELIMITER=".",JWT_ENCODING="base64url",JSON_ENCODING="utf8",DATA_ENCODING="utf8",DID_DELIMITER=":",DID_PREFIX="did",DID_METHOD="key",MULTICODEC_ED25519_ENCODING="base58btc",MULTICODEC_ED25519_BASE="z",MULTICODEC_ED25519_HEADER="K36",KEY_PAIR_SEED_LENGTH=32;function asUint8Array(fe){return globalThis.Buffer!=null?new Uint8Array(fe.buffer,fe.byteOffset,fe.byteLength):fe}function allocUnsafe(fe=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?asUint8Array(globalThis.Buffer.allocUnsafe(fe)):new Uint8Array(fe)}function concat$1(fe,e){e||(e=fe.reduce((be,ve)=>be+ve.length,0));const ye=allocUnsafe(e);let me=0;for(const be of fe)ye.set(be,me),me+=be.length;return asUint8Array(ye)}function base$2(fe,e){if(fe.length>=255)throw new TypeError("Alphabet too long");for(var ye=new Uint8Array(256),me=0;me<ye.length;me++)ye[me]=255;for(var be=0;be<fe.length;be++){var ve=fe.charAt(be),Ee=ve.charCodeAt(0);if(ye[Ee]!==255)throw new TypeError(ve+" is ambiguous");ye[Ee]=be}var Oe=fe.length,xe=fe.charAt(0),gr=Math.log(Oe)/Math.log(256),we=Math.log(256)/Math.log(Oe);function Se(Br){if(Br instanceof Uint8Array||(ArrayBuffer.isView(Br)?Br=new Uint8Array(Br.buffer,Br.byteOffset,Br.byteLength):Array.isArray(Br)&&(Br=Uint8Array.from(Br))),!(Br instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(Br.length===0)return"";for(var Vr=0,oo=0,so=0,kr=Br.length;so!==kr&&Br[so]===0;)so++,Vr++;for(var qr=(kr-so)*we+1>>>0,Hr=new Uint8Array(qr);so!==kr;){for(var Yr=Br[so],Ur=0,Mr=qr-1;(Yr!==0||Ur<oo)&&Mr!==-1;Mr--,Ur++)Yr+=256*Hr[Mr]>>>0,Hr[Mr]=Yr%Oe>>>0,Yr=Yr/Oe>>>0;if(Yr!==0)throw new Error("Non-zero carry");oo=Ur,so++}for(var Lr=qr-oo;Lr!==qr&&Hr[Lr]===0;)Lr++;for(var no=xe.repeat(Vr);Lr<qr;++Lr)no+=fe.charAt(Hr[Lr]);return no}function $r(Br){if(typeof Br!="string")throw new TypeError("Expected String");if(Br.length===0)return new Uint8Array;var Vr=0;if(Br[Vr]!==" "){for(var oo=0,so=0;Br[Vr]===xe;)oo++,Vr++;for(var kr=(Br.length-Vr)*gr+1>>>0,qr=new Uint8Array(kr);Br[Vr];){var Hr=ye[Br.charCodeAt(Vr)];if(Hr===255)return;for(var Yr=0,Ur=kr-1;(Hr!==0||Yr<so)&&Ur!==-1;Ur--,Yr++)Hr+=Oe*qr[Ur]>>>0,qr[Ur]=Hr%256>>>0,Hr=Hr/256>>>0;if(Hr!==0)throw new Error("Non-zero carry");so=Yr,Vr++}if(Br[Vr]!==" "){for(var Mr=kr-so;Mr!==kr&&qr[Mr]===0;)Mr++;for(var Lr=new Uint8Array(oo+(kr-Mr)),no=oo;Mr!==kr;)Lr[no++]=qr[Mr++];return Lr}}}function Fr(Br){var Vr=$r(Br);if(Vr)return Vr;throw new Error(`Non-${e} character`)}return{encode:Se,decodeUnsafe:$r,decode:Fr}}var src$3=base$2,_brrp__multiformats_scope_baseX=src$3;const coerce=fe=>{if(fe instanceof Uint8Array&&fe.constructor.name==="Uint8Array")return fe;if(fe instanceof ArrayBuffer)return new Uint8Array(fe);if(ArrayBuffer.isView(fe))return new Uint8Array(fe.buffer,fe.byteOffset,fe.byteLength);throw new Error("Unknown type, must be binary type")},fromString$1=fe=>new TextEncoder().encode(fe),toString$1=fe=>new TextDecoder().decode(fe);class Encoder{constructor(e,ye,me){this.name=e,this.prefix=ye,this.baseEncode=me}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Decoder{constructor(e,ye,me){if(this.name=e,this.prefix=ye,ye.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=ye.codePointAt(0),this.baseDecode=me}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return or$2(this,e)}}class ComposedDecoder{constructor(e){this.decoders=e}or(e){return or$2(this,e)}decode(e){const ye=e[0],me=this.decoders[ye];if(me)return me.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const or$2=(fe,e)=>new ComposedDecoder({...fe.decoders||{[fe.prefix]:fe},...e.decoders||{[e.prefix]:e}});class Codec{constructor(e,ye,me,be){this.name=e,this.prefix=ye,this.baseEncode=me,this.baseDecode=be,this.encoder=new Encoder(e,ye,me),this.decoder=new Decoder(e,ye,be)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const from=({name:fe,prefix:e,encode:ye,decode:me})=>new Codec(fe,e,ye,me),baseX$1=({prefix:fe,name:e,alphabet:ye})=>{const{encode:me,decode:be}=_brrp__multiformats_scope_baseX(ye,e);return from({prefix:fe,name:e,encode:me,decode:ve=>coerce(be(ve))})},decode$3=(fe,e,ye,me)=>{const be={};for(let we=0;we<e.length;++we)be[e[we]]=we;let ve=fe.length;for(;fe[ve-1]==="=";)--ve;const Ee=new Uint8Array(ve*ye/8|0);let Oe=0,xe=0,gr=0;for(let we=0;we<ve;++we){const Se=be[fe[we]];if(Se===void 0)throw new SyntaxError(`Non-${me} character`);xe=xe<<ye|Se,Oe+=ye,Oe>=8&&(Oe-=8,Ee[gr++]=255&xe>>Oe)}if(Oe>=ye||255&xe<<8-Oe)throw new SyntaxError("Unexpected end of data");return Ee},encode$2=(fe,e,ye)=>{const me=e[e.length-1]==="=",be=(1<<ye)-1;let ve="",Ee=0,Oe=0;for(let xe=0;xe<fe.length;++xe)for(Oe=Oe<<8|fe[xe],Ee+=8;Ee>ye;)Ee-=ye,ve+=e[be&Oe>>Ee];if(Ee&&(ve+=e[be&Oe<<ye-Ee]),me)for(;ve.length*ye&7;)ve+="=";return ve},rfc4648$2=({name:fe,prefix:e,bitsPerChar:ye,alphabet:me})=>from({prefix:e,name:fe,encode(be){return encode$2(be,me,ye)},decode(be){return decode$3(be,me,ye,fe)}}),identity$1=from({prefix:"\0",name:"identity",encode:fe=>toString$1(fe),decode:fe=>fromString$1(fe)}),identityBase=Object.freeze(Object.defineProperty({__proto__:null,identity:identity$1},Symbol.toStringTag,{value:"Module"})),base2=rfc4648$2({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),base2$1=Object.freeze(Object.defineProperty({__proto__:null,base2},Symbol.toStringTag,{value:"Module"})),base8=rfc4648$2({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),base8$1=Object.freeze(Object.defineProperty({__proto__:null,base8},Symbol.toStringTag,{value:"Module"})),base10=baseX$1({prefix:"9",name:"base10",alphabet:"0123456789"}),base10$1=Object.freeze(Object.defineProperty({__proto__:null,base10},Symbol.toStringTag,{value:"Module"})),base16=rfc4648$2({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),base16upper=rfc4648$2({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),base16$1=Object.freeze(Object.defineProperty({__proto__:null,base16,base16upper},Symbol.toStringTag,{value:"Module"})),base32=rfc4648$2({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),base32upper=rfc4648$2({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),base32pad=rfc4648$2({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),base32padupper=rfc4648$2({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),base32hex=rfc4648$2({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),base32hexupper=rfc4648$2({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),base32hexpad=rfc4648$2({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),base32hexpadupper=rfc4648$2({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),base32z=rfc4648$2({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),base32$1=Object.freeze(Object.defineProperty({__proto__:null,base32,base32hex,base32hexpad,base32hexpadupper,base32hexupper,base32pad,base32padupper,base32upper,base32z},Symbol.toStringTag,{value:"Module"})),base36=baseX$1({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),base36upper=baseX$1({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),base36$1=Object.freeze(Object.defineProperty({__proto__:null,base36,base36upper},Symbol.toStringTag,{value:"Module"})),base58btc=baseX$1({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),base58flickr=baseX$1({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),base58=Object.freeze(Object.defineProperty({__proto__:null,base58btc,base58flickr},Symbol.toStringTag,{value:"Module"})),base64$2=rfc4648$2({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),base64pad=rfc4648$2({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),base64url=rfc4648$2({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),base64urlpad=rfc4648$2({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),base64$3=Object.freeze(Object.defineProperty({__proto__:null,base64:base64$2,base64pad,base64url,base64urlpad},Symbol.toStringTag,{value:"Module"})),alphabet=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),alphabetBytesToChars=alphabet.reduce((fe,e,ye)=>(fe[ye]=e,fe),[]),alphabetCharsToBytes=alphabet.reduce((fe,e,ye)=>(fe[e.codePointAt(0)]=ye,fe),[]);function encode$1(fe){return fe.reduce((e,ye)=>(e+=alphabetBytesToChars[ye],e),"")}function decode$2(fe){const e=[];for(const ye of fe){const me=alphabetCharsToBytes[ye.codePointAt(0)];if(me===void 0)throw new Error(`Non-base256emoji character: ${ye}`);e.push(me)}return new Uint8Array(e)}const base256emoji=from({prefix:"🚀",name:"base256emoji",encode:encode$1,decode:decode$2}),base256emoji$1=Object.freeze(Object.defineProperty({__proto__:null,base256emoji},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const bases={...identityBase,...base2$1,...base8$1,...base10$1,...base16$1,...base32$1,...base36$1,...base58,...base64$3,...base256emoji$1};function createCodec(fe,e,ye,me){return{name:fe,prefix:e,encoder:{name:fe,prefix:e,encode:ye},decoder:{decode:me}}}const string=createCodec("utf8","u",fe=>"u"+new TextDecoder("utf8").decode(fe),fe=>new TextEncoder().encode(fe.substring(1))),ascii=createCodec("ascii","a",fe=>{let e="a";for(let ye=0;ye<fe.length;ye++)e+=String.fromCharCode(fe[ye]);return e},fe=>{fe=fe.substring(1);const e=allocUnsafe(fe.length);for(let ye=0;ye<fe.length;ye++)e[ye]=fe.charCodeAt(ye);return e}),BASES={utf8:string,"utf-8":string,hex:bases.base16,latin1:ascii,ascii,binary:ascii,...bases};function toString(fe,e="utf8"){const ye=BASES[e];if(!ye)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(fe.buffer,fe.byteOffset,fe.byteLength).toString("utf8"):ye.encoder.encode(fe).substring(1)}function fromString(fe,e="utf8"){const ye=BASES[e];if(!ye)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?asUint8Array(globalThis.Buffer.from(fe,"utf-8")):ye.decoder.decode(`${ye.prefix}${fe}`)}function encodeJSON(fe){return toString(fromString(safeJsonStringify(fe),JSON_ENCODING),JWT_ENCODING)}function encodeIss(fe){const e=fromString(MULTICODEC_ED25519_HEADER,MULTICODEC_ED25519_ENCODING),ye=MULTICODEC_ED25519_BASE+toString(concat$1([e,fe]),MULTICODEC_ED25519_ENCODING);return[DID_PREFIX,DID_METHOD,ye].join(DID_DELIMITER)}function encodeSig(fe){return toString(fe,JWT_ENCODING)}function encodeData(fe){return fromString([encodeJSON(fe.header),encodeJSON(fe.payload)].join(JWT_DELIMITER),DATA_ENCODING)}function encodeJWT(fe){return[encodeJSON(fe.header),encodeJSON(fe.payload),encodeSig(fe.signature)].join(JWT_DELIMITER)}function generateKeyPair(fe=random.randomBytes(KEY_PAIR_SEED_LENGTH)){return ed25519.generateKeyPairFromSeed(fe)}async function signJWT(fe,e,ye,me,be=cjs$4.fromMiliseconds(Date.now())){const ve={alg:JWT_IRIDIUM_ALG,typ:JWT_IRIDIUM_TYP},Ee=encodeIss(me.publicKey),Oe=be+ye,xe={iss:Ee,sub:fe,aud:e,iat:be,exp:Oe},gr=encodeData({header:ve,payload:xe}),we=ed25519.sign(me.secretKey,gr);return encodeJWT({header:ve,payload:xe,signature:we})}var chacha20poly1305={},chacha={};Object.defineProperty(chacha,"__esModule",{value:!0});var binary_1=binary,wipe_1$2=wipe$1,ROUNDS=20;function core(fe,e,ye){for(var me=1634760805,be=857760878,ve=2036477234,Ee=1797285236,Oe=ye[3]<<24|ye[2]<<16|ye[1]<<8|ye[0],xe=ye[7]<<24|ye[6]<<16|ye[5]<<8|ye[4],gr=ye[11]<<24|ye[10]<<16|ye[9]<<8|ye[8],we=ye[15]<<24|ye[14]<<16|ye[13]<<8|ye[12],Se=ye[19]<<24|ye[18]<<16|ye[17]<<8|ye[16],$r=ye[23]<<24|ye[22]<<16|ye[21]<<8|ye[20],Fr=ye[27]<<24|ye[26]<<16|ye[25]<<8|ye[24],Br=ye[31]<<24|ye[30]<<16|ye[29]<<8|ye[28],Vr=e[3]<<24|e[2]<<16|e[1]<<8|e[0],oo=e[7]<<24|e[6]<<16|e[5]<<8|e[4],so=e[11]<<24|e[10]<<16|e[9]<<8|e[8],kr=e[15]<<24|e[14]<<16|e[13]<<8|e[12],qr=me,Hr=be,Yr=ve,Ur=Ee,Mr=Oe,Lr=xe,no=gr,Xr=we,to=Se,ao=$r,bo=Fr,Wr=Br,Jr=Vr,fo=oo,vo=so,mo=kr,po=0;po<ROUNDS;po+=2)qr=qr+Mr|0,Jr^=qr,Jr=Jr>>>32-16|Jr<<16,to=to+Jr|0,Mr^=to,Mr=Mr>>>32-12|Mr<<12,Hr=Hr+Lr|0,fo^=Hr,fo=fo>>>32-16|fo<<16,ao=ao+fo|0,Lr^=ao,Lr=Lr>>>32-12|Lr<<12,Yr=Yr+no|0,vo^=Yr,vo=vo>>>32-16|vo<<16,bo=bo+vo|0,no^=bo,no=no>>>32-12|no<<12,Ur=Ur+Xr|0,mo^=Ur,mo=mo>>>32-16|mo<<16,Wr=Wr+mo|0,Xr^=Wr,Xr=Xr>>>32-12|Xr<<12,Yr=Yr+no|0,vo^=Yr,vo=vo>>>32-8|vo<<8,bo=bo+vo|0,no^=bo,no=no>>>32-7|no<<7,Ur=Ur+Xr|0,mo^=Ur,mo=mo>>>32-8|mo<<8,Wr=Wr+mo|0,Xr^=Wr,Xr=Xr>>>32-7|Xr<<7,Hr=Hr+Lr|0,fo^=Hr,fo=fo>>>32-8|fo<<8,ao=ao+fo|0,Lr^=ao,Lr=Lr>>>32-7|Lr<<7,qr=qr+Mr|0,Jr^=qr,Jr=Jr>>>32-8|Jr<<8,to=to+Jr|0,Mr^=to,Mr=Mr>>>32-7|Mr<<7,qr=qr+Lr|0,mo^=qr,mo=mo>>>32-16|mo<<16,bo=bo+mo|0,Lr^=bo,Lr=Lr>>>32-12|Lr<<12,Hr=Hr+no|0,Jr^=Hr,Jr=Jr>>>32-16|Jr<<16,Wr=Wr+Jr|0,no^=Wr,no=no>>>32-12|no<<12,Yr=Yr+Xr|0,fo^=Yr,fo=fo>>>32-16|fo<<16,to=to+fo|0,Xr^=to,Xr=Xr>>>32-12|Xr<<12,Ur=Ur+Mr|0,vo^=Ur,vo=vo>>>32-16|vo<<16,ao=ao+vo|0,Mr^=ao,Mr=Mr>>>32-12|Mr<<12,Yr=Yr+Xr|0,fo^=Yr,fo=fo>>>32-8|fo<<8,to=to+fo|0,Xr^=to,Xr=Xr>>>32-7|Xr<<7,Ur=Ur+Mr|0,vo^=Ur,vo=vo>>>32-8|vo<<8,ao=ao+vo|0,Mr^=ao,Mr=Mr>>>32-7|Mr<<7,Hr=Hr+no|0,Jr^=Hr,Jr=Jr>>>32-8|Jr<<8,Wr=Wr+Jr|0,no^=Wr,no=no>>>32-7|no<<7,qr=qr+Lr|0,mo^=qr,mo=mo>>>32-8|mo<<8,bo=bo+mo|0,Lr^=bo,Lr=Lr>>>32-7|Lr<<7;binary_1.writeUint32LE(qr+me|0,fe,0),binary_1.writeUint32LE(Hr+be|0,fe,4),binary_1.writeUint32LE(Yr+ve|0,fe,8),binary_1.writeUint32LE(Ur+Ee|0,fe,12),binary_1.writeUint32LE(Mr+Oe|0,fe,16),binary_1.writeUint32LE(Lr+xe|0,fe,20),binary_1.writeUint32LE(no+gr|0,fe,24),binary_1.writeUint32LE(Xr+we|0,fe,28),binary_1.writeUint32LE(to+Se|0,fe,32),binary_1.writeUint32LE(ao+$r|0,fe,36),binary_1.writeUint32LE(bo+Fr|0,fe,40),binary_1.writeUint32LE(Wr+Br|0,fe,44),binary_1.writeUint32LE(Jr+Vr|0,fe,48),binary_1.writeUint32LE(fo+oo|0,fe,52),binary_1.writeUint32LE(vo+so|0,fe,56),binary_1.writeUint32LE(mo+kr|0,fe,60)}function streamXOR(fe,e,ye,me,be){if(be===void 0&&(be=0),fe.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(me.length<ye.length)throw new Error("ChaCha: destination is shorter than source");var ve,Ee;if(be===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");ve=new Uint8Array(16),Ee=ve.length-e.length,ve.set(e,Ee)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");ve=e,Ee=be}for(var Oe=new Uint8Array(64),xe=0;xe<ye.length;xe+=64){core(Oe,ve,fe);for(var gr=xe;gr<xe+64&&gr<ye.length;gr++)me[gr]=ye[gr]^Oe[gr-xe];incrementCounter(ve,0,Ee)}return wipe_1$2.wipe(Oe),be===0&&wipe_1$2.wipe(ve),me}chacha.streamXOR=streamXOR;function stream(fe,e,ye,me){return me===void 0&&(me=0),wipe_1$2.wipe(ye),streamXOR(fe,e,ye,ye,me)}chacha.stream=stream;function incrementCounter(fe,e,ye){for(var me=1;ye--;)me=me+(fe[e]&255)|0,fe[e]=me&255,me>>>=8,e++;if(me>0)throw new Error("ChaCha: counter overflow")}var poly1305={},constantTime={};Object.defineProperty(constantTime,"__esModule",{value:!0});function select(fe,e,ye){return~(fe-1)&e|fe-1&ye}constantTime.select=select;function lessOrEqual(fe,e){return(fe|0)-(e|0)-1>>>31&1}constantTime.lessOrEqual=lessOrEqual;function compare(fe,e){if(fe.length!==e.length)return 0;for(var ye=0,me=0;me<fe.length;me++)ye|=fe[me]^e[me];return 1&ye-1>>>8}constantTime.compare=compare;function equal(fe,e){return fe.length===0||e.length===0?!1:compare(fe,e)!==0}constantTime.equal=equal;(function(fe){Object.defineProperty(fe,"__esModule",{value:!0});var e=constantTime,ye=wipe$1;fe.DIGEST_LENGTH=16;var me=function(){function Ee(Oe){this.digestLength=fe.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var xe=Oe[0]|Oe[1]<<8;this._r[0]=xe&8191;var gr=Oe[2]|Oe[3]<<8;this._r[1]=(xe>>>13|gr<<3)&8191;var we=Oe[4]|Oe[5]<<8;this._r[2]=(gr>>>10|we<<6)&7939;var Se=Oe[6]|Oe[7]<<8;this._r[3]=(we>>>7|Se<<9)&8191;var $r=Oe[8]|Oe[9]<<8;this._r[4]=(Se>>>4|$r<<12)&255,this._r[5]=$r>>>1&8190;var Fr=Oe[10]|Oe[11]<<8;this._r[6]=($r>>>14|Fr<<2)&8191;var Br=Oe[12]|Oe[13]<<8;this._r[7]=(Fr>>>11|Br<<5)&8065;var Vr=Oe[14]|Oe[15]<<8;this._r[8]=(Br>>>8|Vr<<8)&8191,this._r[9]=Vr>>>5&127,this._pad[0]=Oe[16]|Oe[17]<<8,this._pad[1]=Oe[18]|Oe[19]<<8,this._pad[2]=Oe[20]|Oe[21]<<8,this._pad[3]=Oe[22]|Oe[23]<<8,this._pad[4]=Oe[24]|Oe[25]<<8,this._pad[5]=Oe[26]|Oe[27]<<8,this._pad[6]=Oe[28]|Oe[29]<<8,this._pad[7]=Oe[30]|Oe[31]<<8}return Ee.prototype._blocks=function(Oe,xe,gr){for(var we=this._fin?0:2048,Se=this._h[0],$r=this._h[1],Fr=this._h[2],Br=this._h[3],Vr=this._h[4],oo=this._h[5],so=this._h[6],kr=this._h[7],qr=this._h[8],Hr=this._h[9],Yr=this._r[0],Ur=this._r[1],Mr=this._r[2],Lr=this._r[3],no=this._r[4],Xr=this._r[5],to=this._r[6],ao=this._r[7],bo=this._r[8],Wr=this._r[9];gr>=16;){var Jr=Oe[xe+0]|Oe[xe+1]<<8;Se+=Jr&8191;var fo=Oe[xe+2]|Oe[xe+3]<<8;$r+=(Jr>>>13|fo<<3)&8191;var vo=Oe[xe+4]|Oe[xe+5]<<8;Fr+=(fo>>>10|vo<<6)&8191;var mo=Oe[xe+6]|Oe[xe+7]<<8;Br+=(vo>>>7|mo<<9)&8191;var po=Oe[xe+8]|Oe[xe+9]<<8;Vr+=(mo>>>4|po<<12)&8191,oo+=po>>>1&8191;var yo=Oe[xe+10]|Oe[xe+11]<<8;so+=(po>>>14|yo<<2)&8191;var Oo=Oe[xe+12]|Oe[xe+13]<<8;kr+=(yo>>>11|Oo<<5)&8191;var Io=Oe[xe+14]|Oe[xe+15]<<8;qr+=(Oo>>>8|Io<<8)&8191,Hr+=Io>>>5|we;var go=0,No=go;No+=Se*Yr,No+=$r*(5*Wr),No+=Fr*(5*bo),No+=Br*(5*ao),No+=Vr*(5*to),go=No>>>13,No&=8191,No+=oo*(5*Xr),No+=so*(5*no),No+=kr*(5*Lr),No+=qr*(5*Mr),No+=Hr*(5*Ur),go+=No>>>13,No&=8191;var Po=go;Po+=Se*Ur,Po+=$r*Yr,Po+=Fr*(5*Wr),Po+=Br*(5*bo),Po+=Vr*(5*ao),go=Po>>>13,Po&=8191,Po+=oo*(5*to),Po+=so*(5*Xr),Po+=kr*(5*no),Po+=qr*(5*Lr),Po+=Hr*(5*Mr),go+=Po>>>13,Po&=8191;var Bo=go;Bo+=Se*Mr,Bo+=$r*Ur,Bo+=Fr*Yr,Bo+=Br*(5*Wr),Bo+=Vr*(5*bo),go=Bo>>>13,Bo&=8191,Bo+=oo*(5*ao),Bo+=so*(5*to),Bo+=kr*(5*Xr),Bo+=qr*(5*no),Bo+=Hr*(5*Lr),go+=Bo>>>13,Bo&=8191;var ho=go;ho+=Se*Lr,ho+=$r*Mr,ho+=Fr*Ur,ho+=Br*Yr,ho+=Vr*(5*Wr),go=ho>>>13,ho&=8191,ho+=oo*(5*bo),ho+=so*(5*ao),ho+=kr*(5*to),ho+=qr*(5*Xr),ho+=Hr*(5*no),go+=ho>>>13,ho&=8191;var co=go;co+=Se*no,co+=$r*Lr,co+=Fr*Mr,co+=Br*Ur,co+=Vr*Yr,go=co>>>13,co&=8191,co+=oo*(5*Wr),co+=so*(5*bo),co+=kr*(5*ao),co+=qr*(5*to),co+=Hr*(5*Xr),go+=co>>>13,co&=8191;var Qr=go;Qr+=Se*Xr,Qr+=$r*no,Qr+=Fr*Lr,Qr+=Br*Mr,Qr+=Vr*Ur,go=Qr>>>13,Qr&=8191,Qr+=oo*Yr,Qr+=so*(5*Wr),Qr+=kr*(5*bo),Qr+=qr*(5*ao),Qr+=Hr*(5*to),go+=Qr>>>13,Qr&=8191;var jr=go;jr+=Se*to,jr+=$r*Xr,jr+=Fr*no,jr+=Br*Lr,jr+=Vr*Mr,go=jr>>>13,jr&=8191,jr+=oo*Ur,jr+=so*Yr,jr+=kr*(5*Wr),jr+=qr*(5*bo),jr+=Hr*(5*ao),go+=jr>>>13,jr&=8191;var Zr=go;Zr+=Se*ao,Zr+=$r*to,Zr+=Fr*Xr,Zr+=Br*no,Zr+=Vr*Lr,go=Zr>>>13,Zr&=8191,Zr+=oo*Mr,Zr+=so*Ur,Zr+=kr*Yr,Zr+=qr*(5*Wr),Zr+=Hr*(5*bo),go+=Zr>>>13,Zr&=8191;var wo=go;wo+=Se*bo,wo+=$r*ao,wo+=Fr*to,wo+=Br*Xr,wo+=Vr*no,go=wo>>>13,wo&=8191,wo+=oo*Lr,wo+=so*Mr,wo+=kr*Ur,wo+=qr*Yr,wo+=Hr*(5*Wr),go+=wo>>>13,wo&=8191;var Eo=go;Eo+=Se*Wr,Eo+=$r*bo,Eo+=Fr*ao,Eo+=Br*to,Eo+=Vr*Xr,go=Eo>>>13,Eo&=8191,Eo+=oo*no,Eo+=so*Lr,Eo+=kr*Mr,Eo+=qr*Ur,Eo+=Hr*Yr,go+=Eo>>>13,Eo&=8191,go=(go<<2)+go|0,go=go+No|0,No=go&8191,go=go>>>13,Po+=go,Se=No,$r=Po,Fr=Bo,Br=ho,Vr=co,oo=Qr,so=jr,kr=Zr,qr=wo,Hr=Eo,xe+=16,gr-=16}this._h[0]=Se,this._h[1]=$r,this._h[2]=Fr,this._h[3]=Br,this._h[4]=Vr,this._h[5]=oo,this._h[6]=so,this._h[7]=kr,this._h[8]=qr,this._h[9]=Hr},Ee.prototype.finish=function(Oe,xe){xe===void 0&&(xe=0);var gr=new Uint16Array(10),we,Se,$r,Fr;if(this._leftover){for(Fr=this._leftover,this._buffer[Fr++]=1;Fr<16;Fr++)this._buffer[Fr]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(we=this._h[1]>>>13,this._h[1]&=8191,Fr=2;Fr<10;Fr++)this._h[Fr]+=we,we=this._h[Fr]>>>13,this._h[Fr]&=8191;for(this._h[0]+=we*5,we=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=we,we=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=we,gr[0]=this._h[0]+5,we=gr[0]>>>13,gr[0]&=8191,Fr=1;Fr<10;Fr++)gr[Fr]=this._h[Fr]+we,we=gr[Fr]>>>13,gr[Fr]&=8191;for(gr[9]-=8192,Se=(we^1)-1,Fr=0;Fr<10;Fr++)gr[Fr]&=Se;for(Se=~Se,Fr=0;Fr<10;Fr++)this._h[Fr]=this._h[Fr]&Se|gr[Fr];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,$r=this._h[0]+this._pad[0],this._h[0]=$r&65535,Fr=1;Fr<8;Fr++)$r=(this._h[Fr]+this._pad[Fr]|0)+($r>>>16)|0,this._h[Fr]=$r&65535;return Oe[xe+0]=this._h[0]>>>0,Oe[xe+1]=this._h[0]>>>8,Oe[xe+2]=this._h[1]>>>0,Oe[xe+3]=this._h[1]>>>8,Oe[xe+4]=this._h[2]>>>0,Oe[xe+5]=this._h[2]>>>8,Oe[xe+6]=this._h[3]>>>0,Oe[xe+7]=this._h[3]>>>8,Oe[xe+8]=this._h[4]>>>0,Oe[xe+9]=this._h[4]>>>8,Oe[xe+10]=this._h[5]>>>0,Oe[xe+11]=this._h[5]>>>8,Oe[xe+12]=this._h[6]>>>0,Oe[xe+13]=this._h[6]>>>8,Oe[xe+14]=this._h[7]>>>0,Oe[xe+15]=this._h[7]>>>8,this._finished=!0,this},Ee.prototype.update=function(Oe){var xe=0,gr=Oe.length,we;if(this._leftover){we=16-this._leftover,we>gr&&(we=gr);for(var Se=0;Se<we;Se++)this._buffer[this._leftover+Se]=Oe[xe+Se];if(gr-=we,xe+=we,this._leftover+=we,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(gr>=16&&(we=gr-gr%16,this._blocks(Oe,xe,we),xe+=we,gr-=we),gr){for(var Se=0;Se<gr;Se++)this._buffer[this._leftover+Se]=Oe[xe+Se];this._leftover+=gr}return this},Ee.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var Oe=new Uint8Array(16);return this.finish(Oe),Oe},Ee.prototype.clean=function(){return ye.wipe(this._buffer),ye.wipe(this._r),ye.wipe(this._h),ye.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},Ee}();fe.Poly1305=me;function be(Ee,Oe){var xe=new me(Ee);xe.update(Oe);var gr=xe.digest();return xe.clean(),gr}fe.oneTimeAuth=be;function ve(Ee,Oe){return Ee.length!==fe.DIGEST_LENGTH||Oe.length!==fe.DIGEST_LENGTH?!1:e.equal(Ee,Oe)}fe.equal=ve})(poly1305);(function(fe){Object.defineProperty(fe,"__esModule",{value:!0});var e=chacha,ye=poly1305,me=wipe$1,be=binary,ve=constantTime;fe.KEY_LENGTH=32,fe.NONCE_LENGTH=12,fe.TAG_LENGTH=16;var Ee=new Uint8Array(16),Oe=function(){function xe(gr){if(this.nonceLength=fe.NONCE_LENGTH,this.tagLength=fe.TAG_LENGTH,gr.length!==fe.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(gr)}return xe.prototype.seal=function(gr,we,Se,$r){if(gr.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var Fr=new Uint8Array(16);Fr.set(gr,Fr.length-gr.length);var Br=new Uint8Array(32);e.stream(this._key,Fr,Br,4);var Vr=we.length+this.tagLength,oo;if($r){if($r.length!==Vr)throw new Error("ChaCha20Poly1305: incorrect destination length");oo=$r}else oo=new Uint8Array(Vr);return e.streamXOR(this._key,Fr,we,oo,4),this._authenticate(oo.subarray(oo.length-this.tagLength,oo.length),Br,oo.subarray(0,oo.length-this.tagLength),Se),me.wipe(Fr),oo},xe.prototype.open=function(gr,we,Se,$r){if(gr.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(we.length<this.tagLength)return null;var Fr=new Uint8Array(16);Fr.set(gr,Fr.length-gr.length);var Br=new Uint8Array(32);e.stream(this._key,Fr,Br,4);var Vr=new Uint8Array(this.tagLength);if(this._authenticate(Vr,Br,we.subarray(0,we.length-this.tagLength),Se),!ve.equal(Vr,we.subarray(we.length-this.tagLength,we.length)))return null;var oo=we.length-this.tagLength,so;if($r){if($r.length!==oo)throw new Error("ChaCha20Poly1305: incorrect destination length");so=$r}else so=new Uint8Array(oo);return e.streamXOR(this._key,Fr,we.subarray(0,we.length-this.tagLength),so,4),me.wipe(Fr),so},xe.prototype.clean=function(){return me.wipe(this._key),this},xe.prototype._authenticate=function(gr,we,Se,$r){var Fr=new ye.Poly1305(we);$r&&(Fr.update($r),$r.length%16>0&&Fr.update(Ee.subarray($r.length%16))),Fr.update(Se),Se.length%16>0&&Fr.update(Ee.subarray(Se.length%16));var Br=new Uint8Array(8);$r&&be.writeUint64LE($r.length,Br),Fr.update(Br),be.writeUint64LE(Se.length,Br),Fr.update(Br);for(var Vr=Fr.digest(),oo=0;oo<Vr.length;oo++)gr[oo]=Vr[oo];Fr.clean(),me.wipe(Vr),me.wipe(Br)},xe}();fe.ChaCha20Poly1305=Oe})(chacha20poly1305);var hkdf={},hmac$1={},hash$1={};Object.defineProperty(hash$1,"__esModule",{value:!0});function isSerializableHash(fe){return typeof fe.saveState<"u"&&typeof fe.restoreState<"u"&&typeof fe.cleanSavedState<"u"}hash$1.isSerializableHash=isSerializableHash;Object.defineProperty(hmac$1,"__esModule",{value:!0});var hash_1=hash$1,constant_time_1=constantTime,wipe_1$1=wipe$1,HMAC=function(){function fe(e,ye){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var me=new Uint8Array(this.blockSize);ye.length>this.blockSize?this._inner.update(ye).finish(me).clean():me.set(ye);for(var be=0;be<me.length;be++)me[be]^=54;this._inner.update(me);for(var be=0;be<me.length;be++)me[be]^=106;this._outer.update(me),hash_1.isSerializableHash(this._inner)&&hash_1.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),wipe_1$1.wipe(me)}return fe.prototype.reset=function(){if(!hash_1.isSerializableHash(this._inner)||!hash_1.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},fe.prototype.clean=function(){hash_1.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),hash_1.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},fe.prototype.update=function(e){return this._inner.update(e),this},fe.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},fe.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},fe.prototype.saveState=function(){if(!hash_1.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},fe.prototype.restoreState=function(e){if(!hash_1.isSerializableHash(this._inner)||!hash_1.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},fe.prototype.cleanSavedState=function(e){if(!hash_1.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},fe}();hmac$1.HMAC=HMAC;function hmac(fe,e,ye){var me=new HMAC(fe,e);me.update(ye);var be=me.digest();return me.clean(),be}hmac$1.hmac=hmac;hmac$1.equal=constant_time_1.equal;Object.defineProperty(hkdf,"__esModule",{value:!0});var hmac_1=hmac$1,wipe_1=wipe$1,HKDF=function(){function fe(e,ye,me,be){me===void 0&&(me=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=be;var ve=hmac_1.hmac(this._hash,me,ye);this._hmac=new hmac_1.HMAC(e,ve),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return fe.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(e===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},fe.prototype.expand=function(e){for(var ye=new Uint8Array(e),me=0;me<ye.length;me++)this._bufpos===this._buffer.length&&this._fillBuffer(),ye[me]=this._buffer[this._bufpos++];return ye},fe.prototype.clean=function(){this._hmac.clean(),wipe_1.wipe(this._buffer),wipe_1.wipe(this._counter),this._bufpos=0},fe}(),HKDF_1=hkdf.HKDF=HKDF,sha256$1={};(function(fe){Object.defineProperty(fe,"__esModule",{value:!0});var e=binary,ye=wipe$1;fe.DIGEST_LENGTH=32,fe.BLOCK_SIZE=64;var me=function(){function Oe(){this.digestLength=fe.DIGEST_LENGTH,this.blockSize=fe.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return Oe.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},Oe.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},Oe.prototype.clean=function(){ye.wipe(this._buffer),ye.wipe(this._temp),this.reset()},Oe.prototype.update=function(xe,gr){if(gr===void 0&&(gr=xe.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var we=0;if(this._bytesHashed+=gr,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&gr>0;)this._buffer[this._bufferLength++]=xe[we++],gr--;this._bufferLength===this.blockSize&&(ve(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(gr>=this.blockSize&&(we=ve(this._temp,this._state,xe,we,gr),gr%=this.blockSize);gr>0;)this._buffer[this._bufferLength++]=xe[we++],gr--;return this},Oe.prototype.finish=function(xe){if(!this._finished){var gr=this._bytesHashed,we=this._bufferLength,Se=gr/536870912|0,$r=gr<<3,Fr=gr%64<56?64:128;this._buffer[we]=128;for(var Br=we+1;Br<Fr-8;Br++)this._buffer[Br]=0;e.writeUint32BE(Se,this._buffer,Fr-8),e.writeUint32BE($r,this._buffer,Fr-4),ve(this._temp,this._state,this._buffer,0,Fr),this._finished=!0}for(var Br=0;Br<this.digestLength/4;Br++)e.writeUint32BE(this._state[Br],xe,Br*4);return this},Oe.prototype.digest=function(){var xe=new Uint8Array(this.digestLength);return this.finish(xe),xe},Oe.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},Oe.prototype.restoreState=function(xe){return this._state.set(xe.state),this._bufferLength=xe.bufferLength,xe.buffer&&this._buffer.set(xe.buffer),this._bytesHashed=xe.bytesHashed,this._finished=!1,this},Oe.prototype.cleanSavedState=function(xe){ye.wipe(xe.state),xe.buffer&&ye.wipe(xe.buffer),xe.bufferLength=0,xe.bytesHashed=0},Oe}();fe.SHA256=me;var be=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function ve(Oe,xe,gr,we,Se){for(;Se>=64;){for(var $r=xe[0],Fr=xe[1],Br=xe[2],Vr=xe[3],oo=xe[4],so=xe[5],kr=xe[6],qr=xe[7],Hr=0;Hr<16;Hr++){var Yr=we+Hr*4;Oe[Hr]=e.readUint32BE(gr,Yr)}for(var Hr=16;Hr<64;Hr++){var Ur=Oe[Hr-2],Mr=(Ur>>>17|Ur<<32-17)^(Ur>>>19|Ur<<32-19)^Ur>>>10;Ur=Oe[Hr-15];var Lr=(Ur>>>7|Ur<<32-7)^(Ur>>>18|Ur<<32-18)^Ur>>>3;Oe[Hr]=(Mr+Oe[Hr-7]|0)+(Lr+Oe[Hr-16]|0)}for(var Hr=0;Hr<64;Hr++){var Mr=(((oo>>>6|oo<<26)^(oo>>>11|oo<<21)^(oo>>>25|oo<<7))+(oo&so^~oo&kr)|0)+(qr+(be[Hr]+Oe[Hr]|0)|0)|0,Lr=(($r>>>2|$r<<32-2)^($r>>>13|$r<<32-13)^($r>>>22|$r<<32-22))+($r&Fr^$r&Br^Fr&Br)|0;qr=kr,kr=so,so=oo,oo=Vr+Mr|0,Vr=Br,Br=Fr,Fr=$r,$r=Mr+Lr|0}xe[0]+=$r,xe[1]+=Fr,xe[2]+=Br,xe[3]+=Vr,xe[4]+=oo,xe[5]+=so,xe[6]+=kr,xe[7]+=qr,we+=64,Se-=64}return we}function Ee(Oe){var xe=new me;xe.update(Oe);var gr=xe.digest();return xe.clean(),gr}fe.hash=Ee})(sha256$1);var x25519={};(function(fe){Object.defineProperty(fe,"__esModule",{value:!0}),fe.sharedKey=fe.generateKeyPair=fe.generateKeyPairFromSeed=fe.scalarMultBase=fe.scalarMult=fe.SHARED_KEY_LENGTH=fe.SECRET_KEY_LENGTH=fe.PUBLIC_KEY_LENGTH=void 0;const e=random,ye=wipe$1;fe.PUBLIC_KEY_LENGTH=32,fe.SECRET_KEY_LENGTH=32,fe.SHARED_KEY_LENGTH=32;function me(Hr){const Yr=new Float64Array(16);if(Hr)for(let Ur=0;Ur<Hr.length;Ur++)Yr[Ur]=Hr[Ur];return Yr}const be=new Uint8Array(32);be[0]=9;const ve=me([56129,1]);function Ee(Hr){let Yr=1;for(let Ur=0;Ur<16;Ur++){let Mr=Hr[Ur]+Yr+65535;Yr=Math.floor(Mr/65536),Hr[Ur]=Mr-Yr*65536}Hr[0]+=Yr-1+37*(Yr-1)}function Oe(Hr,Yr,Ur){const Mr=~(Ur-1);for(let Lr=0;Lr<16;Lr++){const no=Mr&(Hr[Lr]^Yr[Lr]);Hr[Lr]^=no,Yr[Lr]^=no}}function xe(Hr,Yr){const Ur=me(),Mr=me();for(let Lr=0;Lr<16;Lr++)Mr[Lr]=Yr[Lr];Ee(Mr),Ee(Mr),Ee(Mr);for(let Lr=0;Lr<2;Lr++){Ur[0]=Mr[0]-65517;for(let Xr=1;Xr<15;Xr++)Ur[Xr]=Mr[Xr]-65535-(Ur[Xr-1]>>16&1),Ur[Xr-1]&=65535;Ur[15]=Mr[15]-32767-(Ur[14]>>16&1);const no=Ur[15]>>16&1;Ur[14]&=65535,Oe(Mr,Ur,1-no)}for(let Lr=0;Lr<16;Lr++)Hr[2*Lr]=Mr[Lr]&255,Hr[2*Lr+1]=Mr[Lr]>>8}function gr(Hr,Yr){for(let Ur=0;Ur<16;Ur++)Hr[Ur]=Yr[2*Ur]+(Yr[2*Ur+1]<<8);Hr[15]&=32767}function we(Hr,Yr,Ur){for(let Mr=0;Mr<16;Mr++)Hr[Mr]=Yr[Mr]+Ur[Mr]}function Se(Hr,Yr,Ur){for(let Mr=0;Mr<16;Mr++)Hr[Mr]=Yr[Mr]-Ur[Mr]}function $r(Hr,Yr,Ur){let Mr,Lr,no=0,Xr=0,to=0,ao=0,bo=0,Wr=0,Jr=0,fo=0,vo=0,mo=0,po=0,yo=0,Oo=0,Io=0,go=0,No=0,Po=0,Bo=0,ho=0,co=0,Qr=0,jr=0,Zr=0,wo=0,Eo=0,Ao=0,Co=0,Uo=0,ko=0,si=0,ui=0,Go=Ur[0],Xo=Ur[1],Zo=Ur[2],Ko=Ur[3],Jo=Ur[4],Ho=Ur[5],zo=Ur[6],Wo=Ur[7],Yo=Ur[8],ei=Ur[9],Vo=Ur[10],oi=Ur[11],ti=Ur[12],ri=Ur[13],ni=Ur[14],ii=Ur[15];Mr=Yr[0],no+=Mr*Go,Xr+=Mr*Xo,to+=Mr*Zo,ao+=Mr*Ko,bo+=Mr*Jo,Wr+=Mr*Ho,Jr+=Mr*zo,fo+=Mr*Wo,vo+=Mr*Yo,mo+=Mr*ei,po+=Mr*Vo,yo+=Mr*oi,Oo+=Mr*ti,Io+=Mr*ri,go+=Mr*ni,No+=Mr*ii,Mr=Yr[1],Xr+=Mr*Go,to+=Mr*Xo,ao+=Mr*Zo,bo+=Mr*Ko,Wr+=Mr*Jo,Jr+=Mr*Ho,fo+=Mr*zo,vo+=Mr*Wo,mo+=Mr*Yo,po+=Mr*ei,yo+=Mr*Vo,Oo+=Mr*oi,Io+=Mr*ti,go+=Mr*ri,No+=Mr*ni,Po+=Mr*ii,Mr=Yr[2],to+=Mr*Go,ao+=Mr*Xo,bo+=Mr*Zo,Wr+=Mr*Ko,Jr+=Mr*Jo,fo+=Mr*Ho,vo+=Mr*zo,mo+=Mr*Wo,po+=Mr*Yo,yo+=Mr*ei,Oo+=Mr*Vo,Io+=Mr*oi,go+=Mr*ti,No+=Mr*ri,Po+=Mr*ni,Bo+=Mr*ii,Mr=Yr[3],ao+=Mr*Go,bo+=Mr*Xo,Wr+=Mr*Zo,Jr+=Mr*Ko,fo+=Mr*Jo,vo+=Mr*Ho,mo+=Mr*zo,po+=Mr*Wo,yo+=Mr*Yo,Oo+=Mr*ei,Io+=Mr*Vo,go+=Mr*oi,No+=Mr*ti,Po+=Mr*ri,Bo+=Mr*ni,ho+=Mr*ii,Mr=Yr[4],bo+=Mr*Go,Wr+=Mr*Xo,Jr+=Mr*Zo,fo+=Mr*Ko,vo+=Mr*Jo,mo+=Mr*Ho,po+=Mr*zo,yo+=Mr*Wo,Oo+=Mr*Yo,Io+=Mr*ei,go+=Mr*Vo,No+=Mr*oi,Po+=Mr*ti,Bo+=Mr*ri,ho+=Mr*ni,co+=Mr*ii,Mr=Yr[5],Wr+=Mr*Go,Jr+=Mr*Xo,fo+=Mr*Zo,vo+=Mr*Ko,mo+=Mr*Jo,po+=Mr*Ho,yo+=Mr*zo,Oo+=Mr*Wo,Io+=Mr*Yo,go+=Mr*ei,No+=Mr*Vo,Po+=Mr*oi,Bo+=Mr*ti,ho+=Mr*ri,co+=Mr*ni,Qr+=Mr*ii,Mr=Yr[6],Jr+=Mr*Go,fo+=Mr*Xo,vo+=Mr*Zo,mo+=Mr*Ko,po+=Mr*Jo,yo+=Mr*Ho,Oo+=Mr*zo,Io+=Mr*Wo,go+=Mr*Yo,No+=Mr*ei,Po+=Mr*Vo,Bo+=Mr*oi,ho+=Mr*ti,co+=Mr*ri,Qr+=Mr*ni,jr+=Mr*ii,Mr=Yr[7],fo+=Mr*Go,vo+=Mr*Xo,mo+=Mr*Zo,po+=Mr*Ko,yo+=Mr*Jo,Oo+=Mr*Ho,Io+=Mr*zo,go+=Mr*Wo,No+=Mr*Yo,Po+=Mr*ei,Bo+=Mr*Vo,ho+=Mr*oi,co+=Mr*ti,Qr+=Mr*ri,jr+=Mr*ni,Zr+=Mr*ii,Mr=Yr[8],vo+=Mr*Go,mo+=Mr*Xo,po+=Mr*Zo,yo+=Mr*Ko,Oo+=Mr*Jo,Io+=Mr*Ho,go+=Mr*zo,No+=Mr*Wo,Po+=Mr*Yo,Bo+=Mr*ei,ho+=Mr*Vo,co+=Mr*oi,Qr+=Mr*ti,jr+=Mr*ri,Zr+=Mr*ni,wo+=Mr*ii,Mr=Yr[9],mo+=Mr*Go,po+=Mr*Xo,yo+=Mr*Zo,Oo+=Mr*Ko,Io+=Mr*Jo,go+=Mr*Ho,No+=Mr*zo,Po+=Mr*Wo,Bo+=Mr*Yo,ho+=Mr*ei,co+=Mr*Vo,Qr+=Mr*oi,jr+=Mr*ti,Zr+=Mr*ri,wo+=Mr*ni,Eo+=Mr*ii,Mr=Yr[10],po+=Mr*Go,yo+=Mr*Xo,Oo+=Mr*Zo,Io+=Mr*Ko,go+=Mr*Jo,No+=Mr*Ho,Po+=Mr*zo,Bo+=Mr*Wo,ho+=Mr*Yo,co+=Mr*ei,Qr+=Mr*Vo,jr+=Mr*oi,Zr+=Mr*ti,wo+=Mr*ri,Eo+=Mr*ni,Ao+=Mr*ii,Mr=Yr[11],yo+=Mr*Go,Oo+=Mr*Xo,Io+=Mr*Zo,go+=Mr*Ko,No+=Mr*Jo,Po+=Mr*Ho,Bo+=Mr*zo,ho+=Mr*Wo,co+=Mr*Yo,Qr+=Mr*ei,jr+=Mr*Vo,Zr+=Mr*oi,wo+=Mr*ti,Eo+=Mr*ri,Ao+=Mr*ni,Co+=Mr*ii,Mr=Yr[12],Oo+=Mr*Go,Io+=Mr*Xo,go+=Mr*Zo,No+=Mr*Ko,Po+=Mr*Jo,Bo+=Mr*Ho,ho+=Mr*zo,co+=Mr*Wo,Qr+=Mr*Yo,jr+=Mr*ei,Zr+=Mr*Vo,wo+=Mr*oi,Eo+=Mr*ti,Ao+=Mr*ri,Co+=Mr*ni,Uo+=Mr*ii,Mr=Yr[13],Io+=Mr*Go,go+=Mr*Xo,No+=Mr*Zo,Po+=Mr*Ko,Bo+=Mr*Jo,ho+=Mr*Ho,co+=Mr*zo,Qr+=Mr*Wo,jr+=Mr*Yo,Zr+=Mr*ei,wo+=Mr*Vo,Eo+=Mr*oi,Ao+=Mr*ti,Co+=Mr*ri,Uo+=Mr*ni,ko+=Mr*ii,Mr=Yr[14],go+=Mr*Go,No+=Mr*Xo,Po+=Mr*Zo,Bo+=Mr*Ko,ho+=Mr*Jo,co+=Mr*Ho,Qr+=Mr*zo,jr+=Mr*Wo,Zr+=Mr*Yo,wo+=Mr*ei,Eo+=Mr*Vo,Ao+=Mr*oi,Co+=Mr*ti,Uo+=Mr*ri,ko+=Mr*ni,si+=Mr*ii,Mr=Yr[15],No+=Mr*Go,Po+=Mr*Xo,Bo+=Mr*Zo,ho+=Mr*Ko,co+=Mr*Jo,Qr+=Mr*Ho,jr+=Mr*zo,Zr+=Mr*Wo,wo+=Mr*Yo,Eo+=Mr*ei,Ao+=Mr*Vo,Co+=Mr*oi,Uo+=Mr*ti,ko+=Mr*ri,si+=Mr*ni,ui+=Mr*ii,no+=38*Po,Xr+=38*Bo,to+=38*ho,ao+=38*co,bo+=38*Qr,Wr+=38*jr,Jr+=38*Zr,fo+=38*wo,vo+=38*Eo,mo+=38*Ao,po+=38*Co,yo+=38*Uo,Oo+=38*ko,Io+=38*si,go+=38*ui,Lr=1,Mr=no+Lr+65535,Lr=Math.floor(Mr/65536),no=Mr-Lr*65536,Mr=Xr+Lr+65535,Lr=Math.floor(Mr/65536),Xr=Mr-Lr*65536,Mr=to+Lr+65535,Lr=Math.floor(Mr/65536),to=Mr-Lr*65536,Mr=ao+Lr+65535,Lr=Math.floor(Mr/65536),ao=Mr-Lr*65536,Mr=bo+Lr+65535,Lr=Math.floor(Mr/65536),bo=Mr-Lr*65536,Mr=Wr+Lr+65535,Lr=Math.floor(Mr/65536),Wr=Mr-Lr*65536,Mr=Jr+Lr+65535,Lr=Math.floor(Mr/65536),Jr=Mr-Lr*65536,Mr=fo+Lr+65535,Lr=Math.floor(Mr/65536),fo=Mr-Lr*65536,Mr=vo+Lr+65535,Lr=Math.floor(Mr/65536),vo=Mr-Lr*65536,Mr=mo+Lr+65535,Lr=Math.floor(Mr/65536),mo=Mr-Lr*65536,Mr=po+Lr+65535,Lr=Math.floor(Mr/65536),po=Mr-Lr*65536,Mr=yo+Lr+65535,Lr=Math.floor(Mr/65536),yo=Mr-Lr*65536,Mr=Oo+Lr+65535,Lr=Math.floor(Mr/65536),Oo=Mr-Lr*65536,Mr=Io+Lr+65535,Lr=Math.floor(Mr/65536),Io=Mr-Lr*65536,Mr=go+Lr+65535,Lr=Math.floor(Mr/65536),go=Mr-Lr*65536,Mr=No+Lr+65535,Lr=Math.floor(Mr/65536),No=Mr-Lr*65536,no+=Lr-1+37*(Lr-1),Lr=1,Mr=no+Lr+65535,Lr=Math.floor(Mr/65536),no=Mr-Lr*65536,Mr=Xr+Lr+65535,Lr=Math.floor(Mr/65536),Xr=Mr-Lr*65536,Mr=to+Lr+65535,Lr=Math.floor(Mr/65536),to=Mr-Lr*65536,Mr=ao+Lr+65535,Lr=Math.floor(Mr/65536),ao=Mr-Lr*65536,Mr=bo+Lr+65535,Lr=Math.floor(Mr/65536),bo=Mr-Lr*65536,Mr=Wr+Lr+65535,Lr=Math.floor(Mr/65536),Wr=Mr-Lr*65536,Mr=Jr+Lr+65535,Lr=Math.floor(Mr/65536),Jr=Mr-Lr*65536,Mr=fo+Lr+65535,Lr=Math.floor(Mr/65536),fo=Mr-Lr*65536,Mr=vo+Lr+65535,Lr=Math.floor(Mr/65536),vo=Mr-Lr*65536,Mr=mo+Lr+65535,Lr=Math.floor(Mr/65536),mo=Mr-Lr*65536,Mr=po+Lr+65535,Lr=Math.floor(Mr/65536),po=Mr-Lr*65536,Mr=yo+Lr+65535,Lr=Math.floor(Mr/65536),yo=Mr-Lr*65536,Mr=Oo+Lr+65535,Lr=Math.floor(Mr/65536),Oo=Mr-Lr*65536,Mr=Io+Lr+65535,Lr=Math.floor(Mr/65536),Io=Mr-Lr*65536,Mr=go+Lr+65535,Lr=Math.floor(Mr/65536),go=Mr-Lr*65536,Mr=No+Lr+65535,Lr=Math.floor(Mr/65536),No=Mr-Lr*65536,no+=Lr-1+37*(Lr-1),Hr[0]=no,Hr[1]=Xr,Hr[2]=to,Hr[3]=ao,Hr[4]=bo,Hr[5]=Wr,Hr[6]=Jr,Hr[7]=fo,Hr[8]=vo,Hr[9]=mo,Hr[10]=po,Hr[11]=yo,Hr[12]=Oo,Hr[13]=Io,Hr[14]=go,Hr[15]=No}function Fr(Hr,Yr){$r(Hr,Yr,Yr)}function Br(Hr,Yr){const Ur=me();for(let Mr=0;Mr<16;Mr++)Ur[Mr]=Yr[Mr];for(let Mr=253;Mr>=0;Mr--)Fr(Ur,Ur),Mr!==2&&Mr!==4&&$r(Ur,Ur,Yr);for(let Mr=0;Mr<16;Mr++)Hr[Mr]=Ur[Mr]}function Vr(Hr,Yr){const Ur=new Uint8Array(32),Mr=new Float64Array(80),Lr=me(),no=me(),Xr=me(),to=me(),ao=me(),bo=me();for(let vo=0;vo<31;vo++)Ur[vo]=Hr[vo];Ur[31]=Hr[31]&127|64,Ur[0]&=248,gr(Mr,Yr);for(let vo=0;vo<16;vo++)no[vo]=Mr[vo];Lr[0]=to[0]=1;for(let vo=254;vo>=0;--vo){const mo=Ur[vo>>>3]>>>(vo&7)&1;Oe(Lr,no,mo),Oe(Xr,to,mo),we(ao,Lr,Xr),Se(Lr,Lr,Xr),we(Xr,no,to),Se(no,no,to),Fr(to,ao),Fr(bo,Lr),$r(Lr,Xr,Lr),$r(Xr,no,ao),we(ao,Lr,Xr),Se(Lr,Lr,Xr),Fr(no,Lr),Se(Xr,to,bo),$r(Lr,Xr,ve),we(Lr,Lr,to),$r(Xr,Xr,Lr),$r(Lr,to,bo),$r(to,no,Mr),Fr(no,ao),Oe(Lr,no,mo),Oe(Xr,to,mo)}for(let vo=0;vo<16;vo++)Mr[vo+16]=Lr[vo],Mr[vo+32]=Xr[vo],Mr[vo+48]=no[vo],Mr[vo+64]=to[vo];const Wr=Mr.subarray(32),Jr=Mr.subarray(16);Br(Wr,Wr),$r(Jr,Jr,Wr);const fo=new Uint8Array(32);return xe(fo,Jr),fo}fe.scalarMult=Vr;function oo(Hr){return Vr(Hr,be)}fe.scalarMultBase=oo;function so(Hr){if(Hr.length!==fe.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${fe.SECRET_KEY_LENGTH} bytes`);const Yr=new Uint8Array(Hr);return{publicKey:oo(Yr),secretKey:Yr}}fe.generateKeyPairFromSeed=so;function kr(Hr){const Yr=(0,e.randomBytes)(32,Hr),Ur=so(Yr);return(0,ye.wipe)(Yr),Ur}fe.generateKeyPair=kr;function qr(Hr,Yr,Ur=!1){if(Hr.length!==fe.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(Yr.length!==fe.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const Mr=Vr(Hr,Yr);if(Ur){let Lr=0;for(let no=0;no<Mr.length;no++)Lr|=Mr[no];if(Lr===0)throw new Error("X25519: invalid shared key")}return Mr}fe.sharedKey=qr})(x25519);var __spreadArray=globalThis&&globalThis.__spreadArray||function(fe,e,ye){if(ye||arguments.length===2)for(var me=0,be=e.length,ve;me<be;me++)(ve||!(me in e))&&(ve||(ve=Array.prototype.slice.call(e,0,me)),ve[me]=e[me]);return fe.concat(ve||Array.prototype.slice.call(e))},BrowserInfo=function(){function fe(e,ye,me){this.name=e,this.version=ye,this.os=me,this.type="browser"}return fe}(),NodeInfo=function(){function fe(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return fe}(),SearchBotDeviceInfo=function(){function fe(e,ye,me,be){this.name=e,this.version=ye,this.os=me,this.bot=be,this.type="bot-device"}return fe}(),BotInfo=function(){function fe(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return fe}(),ReactNativeInfo=function(){function fe(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return fe}(),SEARCHBOX_UA_REGEX=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,SEARCHBOT_OS_REGEX=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,REQUIRED_VERSION_PARTS=3,userAgentRules=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",SEARCHBOX_UA_REGEX]],operatingSystemRules=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function detect(fe){return fe?parseUserAgent(fe):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new ReactNativeInfo:typeof navigator<"u"?parseUserAgent(navigator.userAgent):getNodeVersion()}function matchUserAgent(fe){return fe!==""&&userAgentRules.reduce(function(e,ye){var me=ye[0],be=ye[1];if(e)return e;var ve=be.exec(fe);return!!ve&&[me,ve]},!1)}function parseUserAgent(fe){var e=matchUserAgent(fe);if(!e)return null;var ye=e[0],me=e[1];if(ye==="searchbot")return new BotInfo;var be=me[1]&&me[1].split(".").join("_").split("_").slice(0,3);be?be.length<REQUIRED_VERSION_PARTS&&(be=__spreadArray(__spreadArray([],be,!0),createVersionParts(REQUIRED_VERSION_PARTS-be.length),!0)):be=[];var ve=be.join("."),Ee=detectOS(fe),Oe=SEARCHBOT_OS_REGEX.exec(fe);return Oe&&Oe[1]?new SearchBotDeviceInfo(ye,ve,Ee,Oe[1]):new BrowserInfo(ye,ve,Ee)}function detectOS(fe){for(var e=0,ye=operatingSystemRules.length;e<ye;e++){var me=operatingSystemRules[e],be=me[0],ve=me[1],Ee=ve.exec(fe);if(Ee)return be}return null}function getNodeVersion(){var fe=typeof process<"u"&&process.version;return fe?new NodeInfo(process.version.slice(1)):null}function createVersionParts(fe){for(var e=[],ye=0;ye<fe;ye++)e.push("0");return e}var cjs$2={};Object.defineProperty(cjs$2,"__esModule",{value:!0});cjs$2.getLocalStorage=cjs$2.getLocalStorageOrThrow=cjs$2.getCrypto=cjs$2.getCryptoOrThrow=getLocation_1=cjs$2.getLocation=cjs$2.getLocationOrThrow=getNavigator_1=cjs$2.getNavigator=cjs$2.getNavigatorOrThrow=getDocument_1=cjs$2.getDocument=cjs$2.getDocumentOrThrow=cjs$2.getFromWindowOrThrow=cjs$2.getFromWindow=void 0;function getFromWindow(fe){let e;return typeof window<"u"&&typeof window[fe]<"u"&&(e=window[fe]),e}cjs$2.getFromWindow=getFromWindow;function getFromWindowOrThrow(fe){const e=getFromWindow(fe);if(!e)throw new Error(`${fe} is not defined in Window`);return e}cjs$2.getFromWindowOrThrow=getFromWindowOrThrow;function getDocumentOrThrow(){return getFromWindowOrThrow("document")}cjs$2.getDocumentOrThrow=getDocumentOrThrow;function getDocument(){return getFromWindow("document")}var getDocument_1=cjs$2.getDocument=getDocument;function getNavigatorOrThrow(){return getFromWindowOrThrow("navigator")}cjs$2.getNavigatorOrThrow=getNavigatorOrThrow;function getNavigator(){return getFromWindow("navigator")}var getNavigator_1=cjs$2.getNavigator=getNavigator;function getLocationOrThrow(){return getFromWindowOrThrow("location")}cjs$2.getLocationOrThrow=getLocationOrThrow;function getLocation(){return getFromWindow("location")}var getLocation_1=cjs$2.getLocation=getLocation;function getCryptoOrThrow(){return getFromWindowOrThrow("crypto")}cjs$2.getCryptoOrThrow=getCryptoOrThrow;function getCrypto(){return getFromWindow("crypto")}cjs$2.getCrypto=getCrypto;function getLocalStorageOrThrow(){return getFromWindowOrThrow("localStorage")}cjs$2.getLocalStorageOrThrow=getLocalStorageOrThrow;function getLocalStorage(){return getFromWindow("localStorage")}cjs$2.getLocalStorage=getLocalStorage;var cjs$1={};Object.defineProperty(cjs$1,"__esModule",{value:!0});var getWindowMetadata_1=cjs$1.getWindowMetadata=void 0;const window_getters_1=cjs$2;function getWindowMetadata(){let fe,e;try{fe=window_getters_1.getDocumentOrThrow(),e=window_getters_1.getLocationOrThrow()}catch{return null}function ye(){const Se=fe.getElementsByTagName("link"),$r=[];for(let Fr=0;Fr<Se.length;Fr++){const Br=Se[Fr],Vr=Br.getAttribute("rel");if(Vr&&Vr.toLowerCase().indexOf("icon")>-1){const oo=Br.getAttribute("href");if(oo)if(oo.toLowerCase().indexOf("https:")===-1&&oo.toLowerCase().indexOf("http:")===-1&&oo.indexOf("//")!==0){let so=e.protocol+"//"+e.host;if(oo.indexOf("/")===0)so+=oo;else{const kr=e.pathname.split("/");kr.pop();const qr=kr.join("/");so+=qr+"/"+oo}$r.push(so)}else if(oo.indexOf("//")===0){const so=e.protocol+oo;$r.push(so)}else $r.push(oo)}}return $r}function me(...Se){const $r=fe.getElementsByTagName("meta");for(let Fr=0;Fr<$r.length;Fr++){const Br=$r[Fr],Vr=["itemprop","property","name"].map(oo=>Br.getAttribute(oo)).filter(oo=>oo?Se.includes(oo):!1);if(Vr.length&&Vr){const oo=Br.getAttribute("content");if(oo)return oo}}return""}function be(){let Se=me("name","og:site_name","og:title","twitter:title");return Se||(Se=fe.title),Se}function ve(){return me("description","og:description","twitter:description","keywords")}const Ee=be(),Oe=ve(),xe=e.origin,gr=ye();return{description:Oe,url:xe,icons:gr,name:Ee}}getWindowMetadata_1=cjs$1.getWindowMetadata=getWindowMetadata;var queryString={},strictUriEncode=fe=>encodeURIComponent(fe).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),token="%[a-f0-9]{2}",singleMatcher=new RegExp("("+token+")|([^%]+?)","gi"),multiMatcher=new RegExp("("+token+")+","gi");function decodeComponents(fe,e){try{return[decodeURIComponent(fe.join(""))]}catch{}if(fe.length===1)return fe;e=e||1;var ye=fe.slice(0,e),me=fe.slice(e);return Array.prototype.concat.call([],decodeComponents(ye),decodeComponents(me))}function decode$1(fe){try{return decodeURIComponent(fe)}catch{for(var e=fe.match(singleMatcher)||[],ye=1;ye<e.length;ye++)fe=decodeComponents(e,ye).join(""),e=fe.match(singleMatcher)||[];return fe}}function customDecodeURIComponent(fe){for(var e={"%FE%FF":"��","%FF%FE":"��"},ye=multiMatcher.exec(fe);ye;){try{e[ye[0]]=decodeURIComponent(ye[0])}catch{var me=decode$1(ye[0]);me!==ye[0]&&(e[ye[0]]=me)}ye=multiMatcher.exec(fe)}e["%C2"]="�";for(var be=Object.keys(e),ve=0;ve<be.length;ve++){var Ee=be[ve];fe=fe.replace(new RegExp(Ee,"g"),e[Ee])}return fe}var decodeUriComponent=function(fe){if(typeof fe!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof fe+"`");try{return fe=fe.replace(/\+/g," "),decodeURIComponent(fe)}catch{return customDecodeURIComponent(fe)}},splitOnFirst=(fe,e)=>{if(!(typeof fe=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[fe];const ye=fe.indexOf(e);return ye===-1?[fe]:[fe.slice(0,ye),fe.slice(ye+e.length)]},filterObj=function(fe,e){for(var ye={},me=Object.keys(fe),be=Array.isArray(e),ve=0;ve<me.length;ve++){var Ee=me[ve],Oe=fe[Ee];(be?e.indexOf(Ee)!==-1:e(Ee,Oe,fe))&&(ye[Ee]=Oe)}return ye};(function(fe){const e=strictUriEncode,ye=decodeUriComponent,me=splitOnFirst,be=filterObj,ve=kr=>kr==null,Ee=Symbol("encodeFragmentIdentifier");function Oe(kr){switch(kr.arrayFormat){case"index":return qr=>(Hr,Yr)=>{const Ur=Hr.length;return Yr===void 0||kr.skipNull&&Yr===null||kr.skipEmptyString&&Yr===""?Hr:Yr===null?[...Hr,[we(qr,kr),"[",Ur,"]"].join("")]:[...Hr,[we(qr,kr),"[",we(Ur,kr),"]=",we(Yr,kr)].join("")]};case"bracket":return qr=>(Hr,Yr)=>Yr===void 0||kr.skipNull&&Yr===null||kr.skipEmptyString&&Yr===""?Hr:Yr===null?[...Hr,[we(qr,kr),"[]"].join("")]:[...Hr,[we(qr,kr),"[]=",we(Yr,kr)].join("")];case"colon-list-separator":return qr=>(Hr,Yr)=>Yr===void 0||kr.skipNull&&Yr===null||kr.skipEmptyString&&Yr===""?Hr:Yr===null?[...Hr,[we(qr,kr),":list="].join("")]:[...Hr,[we(qr,kr),":list=",we(Yr,kr)].join("")];case"comma":case"separator":case"bracket-separator":{const qr=kr.arrayFormat==="bracket-separator"?"[]=":"=";return Hr=>(Yr,Ur)=>Ur===void 0||kr.skipNull&&Ur===null||kr.skipEmptyString&&Ur===""?Yr:(Ur=Ur===null?"":Ur,Yr.length===0?[[we(Hr,kr),qr,we(Ur,kr)].join("")]:[[Yr,we(Ur,kr)].join(kr.arrayFormatSeparator)])}default:return qr=>(Hr,Yr)=>Yr===void 0||kr.skipNull&&Yr===null||kr.skipEmptyString&&Yr===""?Hr:Yr===null?[...Hr,we(qr,kr)]:[...Hr,[we(qr,kr),"=",we(Yr,kr)].join("")]}}function xe(kr){let qr;switch(kr.arrayFormat){case"index":return(Hr,Yr,Ur)=>{if(qr=/\[(\d*)\]$/.exec(Hr),Hr=Hr.replace(/\[\d*\]$/,""),!qr){Ur[Hr]=Yr;return}Ur[Hr]===void 0&&(Ur[Hr]={}),Ur[Hr][qr[1]]=Yr};case"bracket":return(Hr,Yr,Ur)=>{if(qr=/(\[\])$/.exec(Hr),Hr=Hr.replace(/\[\]$/,""),!qr){Ur[Hr]=Yr;return}if(Ur[Hr]===void 0){Ur[Hr]=[Yr];return}Ur[Hr]=[].concat(Ur[Hr],Yr)};case"colon-list-separator":return(Hr,Yr,Ur)=>{if(qr=/(:list)$/.exec(Hr),Hr=Hr.replace(/:list$/,""),!qr){Ur[Hr]=Yr;return}if(Ur[Hr]===void 0){Ur[Hr]=[Yr];return}Ur[Hr]=[].concat(Ur[Hr],Yr)};case"comma":case"separator":return(Hr,Yr,Ur)=>{const Mr=typeof Yr=="string"&&Yr.includes(kr.arrayFormatSeparator),Lr=typeof Yr=="string"&&!Mr&&Se(Yr,kr).includes(kr.arrayFormatSeparator);Yr=Lr?Se(Yr,kr):Yr;const no=Mr||Lr?Yr.split(kr.arrayFormatSeparator).map(Xr=>Se(Xr,kr)):Yr===null?Yr:Se(Yr,kr);Ur[Hr]=no};case"bracket-separator":return(Hr,Yr,Ur)=>{const Mr=/(\[\])$/.test(Hr);if(Hr=Hr.replace(/\[\]$/,""),!Mr){Ur[Hr]=Yr&&Se(Yr,kr);return}const Lr=Yr===null?[]:Yr.split(kr.arrayFormatSeparator).map(no=>Se(no,kr));if(Ur[Hr]===void 0){Ur[Hr]=Lr;return}Ur[Hr]=[].concat(Ur[Hr],Lr)};default:return(Hr,Yr,Ur)=>{if(Ur[Hr]===void 0){Ur[Hr]=Yr;return}Ur[Hr]=[].concat(Ur[Hr],Yr)}}}function gr(kr){if(typeof kr!="string"||kr.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function we(kr,qr){return qr.encode?qr.strict?e(kr):encodeURIComponent(kr):kr}function Se(kr,qr){return qr.decode?ye(kr):kr}function $r(kr){return Array.isArray(kr)?kr.sort():typeof kr=="object"?$r(Object.keys(kr)).sort((qr,Hr)=>Number(qr)-Number(Hr)).map(qr=>kr[qr]):kr}function Fr(kr){const qr=kr.indexOf("#");return qr!==-1&&(kr=kr.slice(0,qr)),kr}function Br(kr){let qr="";const Hr=kr.indexOf("#");return Hr!==-1&&(qr=kr.slice(Hr)),qr}function Vr(kr){kr=Fr(kr);const qr=kr.indexOf("?");return qr===-1?"":kr.slice(qr+1)}function oo(kr,qr){return qr.parseNumbers&&!Number.isNaN(Number(kr))&&typeof kr=="string"&&kr.trim()!==""?kr=Number(kr):qr.parseBooleans&&kr!==null&&(kr.toLowerCase()==="true"||kr.toLowerCase()==="false")&&(kr=kr.toLowerCase()==="true"),kr}function so(kr,qr){qr=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},qr),gr(qr.arrayFormatSeparator);const Hr=xe(qr),Yr=Object.create(null);if(typeof kr!="string"||(kr=kr.trim().replace(/^[?#&]/,""),!kr))return Yr;for(const Ur of kr.split("&")){if(Ur==="")continue;let[Mr,Lr]=me(qr.decode?Ur.replace(/\+/g," "):Ur,"=");Lr=Lr===void 0?null:["comma","separator","bracket-separator"].includes(qr.arrayFormat)?Lr:Se(Lr,qr),Hr(Se(Mr,qr),Lr,Yr)}for(const Ur of Object.keys(Yr)){const Mr=Yr[Ur];if(typeof Mr=="object"&&Mr!==null)for(const Lr of Object.keys(Mr))Mr[Lr]=oo(Mr[Lr],qr);else Yr[Ur]=oo(Mr,qr)}return qr.sort===!1?Yr:(qr.sort===!0?Object.keys(Yr).sort():Object.keys(Yr).sort(qr.sort)).reduce((Ur,Mr)=>{const Lr=Yr[Mr];return Lr&&typeof Lr=="object"&&!Array.isArray(Lr)?Ur[Mr]=$r(Lr):Ur[Mr]=Lr,Ur},Object.create(null))}fe.extract=Vr,fe.parse=so,fe.stringify=(kr,qr)=>{if(!kr)return"";qr=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},qr),gr(qr.arrayFormatSeparator);const Hr=Lr=>qr.skipNull&&ve(kr[Lr])||qr.skipEmptyString&&kr[Lr]==="",Yr=Oe(qr),Ur={};for(const Lr of Object.keys(kr))Hr(Lr)||(Ur[Lr]=kr[Lr]);const Mr=Object.keys(Ur);return qr.sort!==!1&&Mr.sort(qr.sort),Mr.map(Lr=>{const no=kr[Lr];return no===void 0?"":no===null?we(Lr,qr):Array.isArray(no)?no.length===0&&qr.arrayFormat==="bracket-separator"?we(Lr,qr)+"[]":no.reduce(Yr(Lr),[]).join("&"):we(Lr,qr)+"="+we(no,qr)}).filter(Lr=>Lr.length>0).join("&")},fe.parseUrl=(kr,qr)=>{qr=Object.assign({decode:!0},qr);const[Hr,Yr]=me(kr,"#");return Object.assign({url:Hr.split("?")[0]||"",query:so(Vr(kr),qr)},qr&&qr.parseFragmentIdentifier&&Yr?{fragmentIdentifier:Se(Yr,qr)}:{})},fe.stringifyUrl=(kr,qr)=>{qr=Object.assign({encode:!0,strict:!0,[Ee]:!0},qr);const Hr=Fr(kr.url).split("?")[0]||"",Yr=fe.extract(kr.url),Ur=fe.parse(Yr,{sort:!1}),Mr=Object.assign(Ur,kr.query);let Lr=fe.stringify(Mr,qr);Lr&&(Lr=`?${Lr}`);let no=Br(kr.url);return kr.fragmentIdentifier&&(no=`#${qr[Ee]?we(kr.fragmentIdentifier,qr):kr.fragmentIdentifier}`),`${Hr}${Lr}${no}`},fe.pick=(kr,qr,Hr)=>{Hr=Object.assign({parseFragmentIdentifier:!0,[Ee]:!1},Hr);const{url:Yr,query:Ur,fragmentIdentifier:Mr}=fe.parseUrl(kr,Hr);return fe.stringifyUrl({url:Yr,query:be(Ur,qr),fragmentIdentifier:Mr},Hr)},fe.exclude=(kr,qr,Hr)=>{const Yr=Array.isArray(qr)?Ur=>!qr.includes(Ur):(Ur,Mr)=>!qr(Ur,Mr);return fe.pick(kr,Yr,Hr)}})(queryString);const RELAY_JSONRPC={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}};function M$2(fe,e){return fe.includes(":")?[fe]:e.chains||[]}const J$3="base10",p$4="base16",L$1="base64pad",x$3="utf8",Q$5=0,_$4=1,$n=0,Ie$1=1,Z$3=12,X$5=32;function jn(){const fe=x25519.generateKeyPair();return{privateKey:toString(fe.secretKey,p$4),publicKey:toString(fe.publicKey,p$4)}}function Dn$1(){const fe=random.randomBytes(X$5);return toString(fe,p$4)}function kn$1(fe,e){const ye=x25519.sharedKey(fromString(fe,p$4),fromString(e,p$4)),me=new HKDF_1(sha256$1.SHA256,ye).expand(X$5);return toString(me,p$4)}function Vn$1(fe){const e=sha256$1.hash(fromString(fe,p$4));return toString(e,p$4)}function Mn$1(fe){const e=sha256$1.hash(fromString(fe,x$3));return toString(e,p$4)}function Pe$1(fe){return fromString(`${fe}`,J$3)}function $$2(fe){return Number(toString(fe,J$3))}function Kn$1(fe){const e=Pe$1(typeof fe.type<"u"?fe.type:Q$5);if($$2(e)===_$4&&typeof fe.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const ye=typeof fe.senderPublicKey<"u"?fromString(fe.senderPublicKey,p$4):void 0,me=typeof fe.iv<"u"?fromString(fe.iv,p$4):random.randomBytes(Z$3),be=new chacha20poly1305.ChaCha20Poly1305(fromString(fe.symKey,p$4)).seal(me,fromString(fe.message,x$3));return Te$1({type:e,sealed:be,iv:me,senderPublicKey:ye})}function Ln$2(fe){const e=new chacha20poly1305.ChaCha20Poly1305(fromString(fe.symKey,p$4)),{sealed:ye,iv:me}=ee$2(fe.encoded),be=e.open(me,ye);if(be===null)throw new Error("Failed to decrypt");return toString(be,x$3)}function Te$1(fe){if($$2(fe.type)===_$4){if(typeof fe.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return toString(concat$1([fe.type,fe.senderPublicKey,fe.iv,fe.sealed]),L$1)}return toString(concat$1([fe.type,fe.iv,fe.sealed]),L$1)}function ee$2(fe){const e=fromString(fe,L$1),ye=e.slice($n,Ie$1),me=Ie$1;if($$2(ye)===_$4){const Oe=me+X$5,xe=Oe+Z$3,gr=e.slice(me,Oe),we=e.slice(Oe,xe),Se=e.slice(xe);return{type:ye,sealed:Se,iv:we,senderPublicKey:gr}}const be=me+Z$3,ve=e.slice(me,be),Ee=e.slice(be);return{type:ye,sealed:Ee,iv:ve}}function xn$1(fe,e){const ye=ee$2(fe);return Re$1({type:$$2(ye.type),senderPublicKey:typeof ye.senderPublicKey<"u"?toString(ye.senderPublicKey,p$4):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function Re$1(fe){const e=(fe==null?void 0:fe.type)||Q$5;if(e===_$4){if(typeof(fe==null?void 0:fe.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(fe==null?void 0:fe.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:fe==null?void 0:fe.senderPublicKey,receiverPublicKey:fe==null?void 0:fe.receiverPublicKey}}function Fn$1(fe){return fe.type===_$4&&typeof fe.senderPublicKey=="string"&&typeof fe.receiverPublicKey=="string"}var Hn$1=Object.defineProperty,Ae$2=Object.getOwnPropertySymbols,qn$1=Object.prototype.hasOwnProperty,Bn$1=Object.prototype.propertyIsEnumerable,Ue$3=(fe,e,ye)=>e in fe?Hn$1(fe,e,{enumerable:!0,configurable:!0,writable:!0,value:ye}):fe[e]=ye,_e$1=(fe,e)=>{for(var ye in e||(e={}))qn$1.call(e,ye)&&Ue$3(fe,ye,e[ye]);if(Ae$2)for(var ye of Ae$2(e))Bn$1.call(e,ye)&&Ue$3(fe,ye,e[ye]);return fe};const Ce$2="ReactNative",m$3={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},je$2="js";function te$3(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function H$4(){return!getDocument_1()&&!!getNavigator_1()&&navigator.product===Ce$2}function q$2(){return!te$3()&&!!getNavigator_1()}function R$2(){return H$4()?m$3.reactNative:te$3()?m$3.node:q$2()?m$3.browser:m$3.unknown}function De$2(fe,e){let ye=queryString.parse(fe);return ye=_e$1(_e$1({},ye),e),fe=queryString.stringify(ye),fe}function zn(){return getWindowMetadata_1()||{name:"",description:"",url:"",icons:[""]}}function ke$3(){if(R$2()===m$3.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:ye,Version:me}=global.Platform;return[ye,me].join("-")}const fe=detect();if(fe===null)return"unknown";const e=fe.os?fe.os.replace(" ","").toLowerCase():"unknown";return fe.type==="browser"?[e,fe.name,fe.version].join("-"):[e,fe.version].join("-")}function Ve$3(){var fe;const e=R$2();return e===m$3.browser?[e,((fe=getLocation_1())==null?void 0:fe.host)||"unknown"].join(":"):e}function Me$3(fe,e,ye){const me=ke$3(),be=Ve$3();return[[fe,e].join("-"),[je$2,ye].join("-"),me,be].join("/")}function Jn$1({protocol:fe,version:e,relayUrl:ye,sdkVersion:me,auth:be,projectId:ve,useOnCloseEvent:Ee}){const Oe=ye.split("?"),xe=Me$3(fe,e,me),gr={auth:be,ua:xe,projectId:ve,useOnCloseEvent:Ee||void 0},we=De$2(Oe[1]||"",gr);return Oe[0]+"?"+we}function O$3(fe,e){return fe.filter(ye=>e.includes(ye)).length===fe.length}function et$2(fe){return Object.fromEntries(fe.entries())}function nt$2(fe){return new Map(Object.entries(fe))}function st$2(fe=cjs$4.FIVE_MINUTES,e){const ye=cjs$4.toMiliseconds(fe||cjs$4.FIVE_MINUTES);let me,be,ve;return{resolve:Ee=>{ve&&me&&(clearTimeout(ve),me(Ee))},reject:Ee=>{ve&&be&&(clearTimeout(ve),be(Ee))},done:()=>new Promise((Ee,Oe)=>{ve=setTimeout(()=>{Oe(new Error(e))},ye),me=Ee,be=Oe})}}function it$2(fe,e,ye){return new Promise(async(me,be)=>{const ve=setTimeout(()=>be(new Error(ye)),e);try{const Ee=await fe;me(Ee)}catch(Ee){be(Ee)}clearTimeout(ve)})}function re$1(fe,e){if(typeof e=="string"&&e.startsWith(`${fe}:`))return e;if(fe.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(fe.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${fe}`)}function ct$2(fe){return re$1("topic",fe)}function at$4(fe){return re$1("id",fe)}function ut$3(fe){const[e,ye]=fe.split(":"),me={id:void 0,topic:void 0};if(e==="topic"&&typeof ye=="string")me.topic=ye;else if(e==="id"&&Number.isInteger(Number(ye)))me.id=Number(ye);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${ye}`);return me}function lt$3(fe,e){return cjs$4.fromMiliseconds((e||Date.now())+cjs$4.toMiliseconds(fe))}function dt$3(fe){return Date.now()>=cjs$4.toMiliseconds(fe)}function ft$4(fe,e){return`${fe}${e?`:${e}`:""}`}async function pt$4({id:fe,topic:e,wcDeepLink:ye}){try{if(!ye)return;const me=typeof ye=="string"?JSON.parse(ye):ye;let be=me==null?void 0:me.href;if(typeof be!="string")return;be.endsWith("/")&&(be=be.slice(0,-1));const ve=`${be}/wc?requestId=${fe}&sessionTopic=${e}`,Ee=R$2();Ee===m$3.browser?ve.startsWith("https://")?window.open(ve,"_blank","noreferrer noopener"):window.open(ve,"_self","noreferrer noopener"):Ee===m$3.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(ve)}catch(me){console.error(me)}}const Fe$3="irn";function mt$4(fe){return(fe==null?void 0:fe.relay)||{protocol:Fe$3}}function yt$4(fe){const e=RELAY_JSONRPC[fe];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${fe}`);return e}var ht$3=Object.defineProperty,He$3=Object.getOwnPropertySymbols,vt$3=Object.prototype.hasOwnProperty,gt$3=Object.prototype.propertyIsEnumerable,qe$3=(fe,e,ye)=>e in fe?ht$3(fe,e,{enumerable:!0,configurable:!0,writable:!0,value:ye}):fe[e]=ye,Et$3=(fe,e)=>{for(var ye in e||(e={}))vt$3.call(e,ye)&&qe$3(fe,ye,e[ye]);if(He$3)for(var ye of He$3(e))gt$3.call(e,ye)&&qe$3(fe,ye,e[ye]);return fe};function Be$3(fe,e="-"){const ye={},me="relay"+e;return Object.keys(fe).forEach(be=>{if(be.startsWith(me)){const ve=be.replace(me,""),Ee=fe[be];ye[ve]=Ee}}),ye}function bt$3(fe){const e=fe.indexOf(":"),ye=fe.indexOf("?")!==-1?fe.indexOf("?"):void 0,me=fe.substring(0,e),be=fe.substring(e+1,ye).split("@"),ve=typeof ye<"u"?fe.substring(ye):"",Ee=queryString.parse(ve);return{protocol:me,topic:Ge$3(be[0]),version:parseInt(be[1],10),symKey:Ee.symKey,relay:Be$3(Ee)}}function Ge$3(fe){return fe.startsWith("//")?fe.substring(2):fe}function We$3(fe,e="-"){const ye="relay",me={};return Object.keys(fe).forEach(be=>{const ve=ye+e+be;fe[be]&&(me[ve]=fe[be])}),me}function Nt$3(fe){return`${fe.protocol}:${fe.topic}@${fe.version}?`+queryString.stringify(Et$3({symKey:fe.symKey},We$3(fe.relay)))}function A$3(fe){const e=[];return fe.forEach(ye=>{const[me,be]=ye.split(":");e.push(`${me}:${be}`)}),e}function Je$3(fe){const e=[];return Object.values(fe).forEach(ye=>{e.push(...A$3(ye.accounts))}),e}function Qe$3(fe,e){const ye=[];return Object.values(fe).forEach(me=>{A$3(me.accounts).includes(e)&&ye.push(...me.methods)}),ye}function Ze$3(fe,e){const ye=[];return Object.values(fe).forEach(me=>{A$3(me.accounts).includes(e)&&ye.push(...me.events)}),ye}function At$2(fe,e){const ye=cn$1(fe,e);if(ye)throw new Error(ye.message);const me={};for(const[be,ve]of Object.entries(fe))me[be]={methods:ve.methods,events:ve.events,chains:ve.accounts.map(Ee=>`${Ee.split(":")[0]}:${Ee.split(":")[1]}`)};return me}const _t$3={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},Ct$2={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function N$4(fe,e){const{message:ye,code:me}=Ct$2[fe];return{message:e?`${ye} ${e}`:ye,code:me}}function U$6(fe,e){const{message:ye,code:me}=_t$3[fe];return{message:e?`${ye} ${e}`:ye,code:me}}function j$2(fe,e){return Array.isArray(fe)?typeof e<"u"&&fe.length?fe.every(e):!0:!1}function B$3(fe){return Object.getPrototypeOf(fe)===Object.prototype&&Object.keys(fe).length}function w$6(fe){return typeof fe>"u"}function h$6(fe,e){return e&&w$6(fe)?!0:typeof fe=="string"&&!!fe.trim().length}function G$3(fe,e){return e&&w$6(fe)?!0:typeof fe=="number"&&!isNaN(fe)}function $t$2(fe,e){const{requiredNamespaces:ye}=e,me=Object.keys(fe.namespaces),be=Object.keys(ye);let ve=!0;return O$3(be,me)?(me.forEach(Ee=>{const{accounts:Oe,methods:xe,events:gr}=fe.namespaces[Ee],we=A$3(Oe),Se=ye[Ee];(!O$3(M$2(Ee,Se),we)||!O$3(Se.methods,xe)||!O$3(Se.events,gr))&&(ve=!1)}),ve):!1}function D$5(fe){return h$6(fe,!1)&&fe.includes(":")?fe.split(":").length===2:!1}function en$2(fe){if(h$6(fe,!1)&&fe.includes(":")){const e=fe.split(":");if(e.length===3){const ye=e[0]+":"+e[1];return!!e[2]&&D$5(ye)}}return!1}function jt$2(fe){if(h$6(fe,!1))try{return typeof new URL(fe)<"u"}catch{return!1}return!1}function Dt$3(fe){var e;return(e=fe==null?void 0:fe.proposer)==null?void 0:e.publicKey}function kt$3(fe){return fe==null?void 0:fe.topic}function Vt$3(fe,e){let ye=null;return h$6(fe==null?void 0:fe.publicKey,!1)||(ye=N$4("MISSING_OR_INVALID",`${e} controller public key should be a string`)),ye}function ie$1(fe){let e=!0;return j$2(fe)?fe.length&&(e=fe.every(ye=>h$6(ye,!1))):e=!1,e}function nn$2(fe,e,ye){let me=null;return j$2(e)&&e.length?e.forEach(be=>{me||D$5(be)||(me=U$6("UNSUPPORTED_CHAINS",`${ye}, chain ${be} should be a string and conform to "namespace:chainId" format`))}):D$5(fe)||(me=U$6("UNSUPPORTED_CHAINS",`${ye}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),me}function tn$1(fe,e,ye){let me=null;return Object.entries(fe).forEach(([be,ve])=>{if(me)return;const Ee=nn$2(be,M$2(be,ve),`${e} ${ye}`);Ee&&(me=Ee)}),me}function rn$1(fe,e){let ye=null;return j$2(fe)?fe.forEach(me=>{ye||en$2(me)||(ye=U$6("UNSUPPORTED_ACCOUNTS",`${e}, account ${me} should be a string and conform to "namespace:chainId:address" format`))}):ye=U$6("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),ye}function on$1(fe,e){let ye=null;return Object.values(fe).forEach(me=>{if(ye)return;const be=rn$1(me==null?void 0:me.accounts,`${e} namespace`);be&&(ye=be)}),ye}function sn$1(fe,e){let ye=null;return ie$1(fe==null?void 0:fe.methods)?ie$1(fe==null?void 0:fe.events)||(ye=U$6("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):ye=U$6("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),ye}function ce$5(fe,e){let ye=null;return Object.values(fe).forEach(me=>{if(ye)return;const be=sn$1(me,`${e}, namespace`);be&&(ye=be)}),ye}function Mt$3(fe,e,ye){let me=null;if(fe&&B$3(fe)){const be=ce$5(fe,e);be&&(me=be);const ve=tn$1(fe,e,ye);ve&&(me=ve)}else me=N$4("MISSING_OR_INVALID",`${e}, ${ye} should be an object with data`);return me}function cn$1(fe,e){let ye=null;if(fe&&B$3(fe)){const me=ce$5(fe,e);me&&(ye=me);const be=on$1(fe,e);be&&(ye=be)}else ye=N$4("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return ye}function an$1(fe){return h$6(fe.protocol,!0)}function Kt$3(fe,e){let ye=!1;return e&&!fe?ye=!0:fe&&j$2(fe)&&fe.length&&fe.forEach(me=>{ye=an$1(me)}),ye}function Lt$3(fe){return typeof fe=="number"}function xt$3(fe){return typeof fe<"u"&&typeof fe!==null}function Ft$3(fe){return!(!fe||typeof fe!="object"||!fe.code||!G$3(fe.code,!1)||!fe.message||!h$6(fe.message,!1))}function Ht$2(fe){return!(w$6(fe)||!h$6(fe.method,!1))}function qt$2(fe){return!(w$6(fe)||w$6(fe.result)&&w$6(fe.error)||!G$3(fe.id,!1)||!h$6(fe.jsonrpc,!1))}function Bt$3(fe){return!(w$6(fe)||!h$6(fe.name,!1))}function Gt$2(fe,e){return!(!D$5(e)||!Je$3(fe).includes(e))}function Wt$1(fe,e,ye){return h$6(ye,!1)?Qe$3(fe,e).includes(ye):!1}function zt$3(fe,e,ye){return h$6(ye,!1)?Ze$3(fe,e).includes(ye):!1}function un$1(fe,e,ye){let me=null;const be=Yt$1(fe),ve=Jt$1(e),Ee=Object.keys(be),Oe=Object.keys(ve),xe=ln$1(Object.keys(fe)),gr=ln$1(Object.keys(e)),we=xe.filter(Se=>!gr.includes(Se));return we.length&&(me=N$4("NON_CONFORMING_NAMESPACES",`${ye} namespaces keys don't satisfy requiredNamespaces.
      Required: ${we.toString()}
      Received: ${Object.keys(e).toString()}`)),O$3(Ee,Oe)||(me=N$4("NON_CONFORMING_NAMESPACES",`${ye} namespaces chains don't satisfy required namespaces.
      Required: ${Ee.toString()}
      Approved: ${Oe.toString()}`)),Object.keys(e).forEach(Se=>{if(!Se.includes(":")||me)return;const $r=A$3(e[Se].accounts);$r.includes(Se)||(me=N$4("NON_CONFORMING_NAMESPACES",`${ye} namespaces accounts don't satisfy namespace accounts for ${Se}
        Required: ${Se}
        Approved: ${$r.toString()}`))}),Ee.forEach(Se=>{me||(O$3(be[Se].methods,ve[Se].methods)?O$3(be[Se].events,ve[Se].events)||(me=N$4("NON_CONFORMING_NAMESPACES",`${ye} namespaces events don't satisfy namespace events for ${Se}`)):me=N$4("NON_CONFORMING_NAMESPACES",`${ye} namespaces methods don't satisfy namespace methods for ${Se}`))}),me}function Yt$1(fe){const e={};return Object.keys(fe).forEach(ye=>{var me;ye.includes(":")?e[ye]=fe[ye]:(me=fe[ye].chains)==null||me.forEach(be=>{e[be]={methods:fe[ye].methods,events:fe[ye].events}})}),e}function ln$1(fe){return[...new Set(fe.map(e=>e.includes(":")?e.split(":")[0]:e))]}function Jt$1(fe){const e={};return Object.keys(fe).forEach(ye=>{if(ye.includes(":"))e[ye]=fe[ye];else{const me=A$3(fe[ye].accounts);me==null||me.forEach(be=>{e[be]={accounts:fe[ye].accounts.filter(ve=>ve.includes(`${be}:`)),methods:fe[ye].methods,events:fe[ye].events}})}}),e}function Qt$1(fe,e){return G$3(fe,!1)&&fe<=e.max&&fe>=e.min}function Zt$1(){const fe=R$2();return new Promise(e=>{switch(fe){case m$3.browser:e(dn$1());break;case m$3.reactNative:e(fn$1());break;case m$3.node:e(pn$1());break;default:e(!0)}})}function dn$1(){return q$2()&&(navigator==null?void 0:navigator.onLine)}async function fn$1(){if(H$4()&&typeof global<"u"&&global!=null&&global.NetInfo){const fe=await(global==null?void 0:global.NetInfo.fetch());return fe==null?void 0:fe.isConnected}return!0}function pn$1(){return!0}function Xt$1(fe){switch(R$2()){case m$3.browser:mn$1(fe);break;case m$3.reactNative:yn$1(fe);break}}function mn$1(fe){q$2()&&(window.addEventListener("online",()=>fe(!0)),window.addEventListener("offline",()=>fe(!1)))}function yn$1(fe){H$4()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>fe(e==null?void 0:e.isConnected)))}const ae$4={};let er$3=class{static get(e){return ae$4[e]}static set(e,ye){ae$4[e]=ye}static delete(e){delete ae$4[e]}};const PARSE_ERROR="PARSE_ERROR",INVALID_REQUEST="INVALID_REQUEST",METHOD_NOT_FOUND="METHOD_NOT_FOUND",INVALID_PARAMS="INVALID_PARAMS",INTERNAL_ERROR="INTERNAL_ERROR",SERVER_ERROR="SERVER_ERROR",RESERVED_ERROR_CODES=[-32700,-32600,-32601,-32602,-32603],STANDARD_ERROR_MAP={[PARSE_ERROR]:{code:-32700,message:"Parse error"},[INVALID_REQUEST]:{code:-32600,message:"Invalid Request"},[METHOD_NOT_FOUND]:{code:-32601,message:"Method not found"},[INVALID_PARAMS]:{code:-32602,message:"Invalid params"},[INTERNAL_ERROR]:{code:-32603,message:"Internal error"},[SERVER_ERROR]:{code:-32e3,message:"Server error"}},DEFAULT_ERROR=SERVER_ERROR;function isReservedErrorCode(fe){return RESERVED_ERROR_CODES.includes(fe)}function getError(fe){return Object.keys(STANDARD_ERROR_MAP).includes(fe)?STANDARD_ERROR_MAP[fe]:STANDARD_ERROR_MAP[DEFAULT_ERROR]}function getErrorByCode(fe){const e=Object.values(STANDARD_ERROR_MAP).find(ye=>ye.code===fe);return e||STANDARD_ERROR_MAP[DEFAULT_ERROR]}function parseConnectionError(fe,e,ye){return fe.message.includes("getaddrinfo ENOTFOUND")||fe.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${ye} RPC url at ${e}`):fe}var cjs={},crypto$2={},hasRequiredCrypto;function requireCrypto(){if(hasRequiredCrypto)return crypto$2;hasRequiredCrypto=1,Object.defineProperty(crypto$2,"__esModule",{value:!0}),crypto$2.isBrowserCryptoAvailable=crypto$2.getSubtleCrypto=crypto$2.getBrowerCrypto=void 0;function fe(){return(commonjsGlobal==null?void 0:commonjsGlobal.crypto)||(commonjsGlobal==null?void 0:commonjsGlobal.msCrypto)||{}}crypto$2.getBrowerCrypto=fe;function e(){const me=fe();return me.subtle||me.webkitSubtle}crypto$2.getSubtleCrypto=e;function ye(){return!!fe()&&!!e()}return crypto$2.isBrowserCryptoAvailable=ye,crypto$2}var env={},hasRequiredEnv;function requireEnv(){if(hasRequiredEnv)return env;hasRequiredEnv=1,Object.defineProperty(env,"__esModule",{value:!0}),env.isBrowser=env.isNode=env.isReactNative=void 0;function fe(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}env.isReactNative=fe;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}env.isNode=e;function ye(){return!fe()&&!e()}return env.isBrowser=ye,env}(function(fe){Object.defineProperty(fe,"__esModule",{value:!0});const e=tslibExports;e.__exportStar(requireCrypto(),fe),e.__exportStar(requireEnv(),fe)})(cjs);function payloadId(fe=3){const e=Date.now()*Math.pow(10,fe),ye=Math.floor(Math.random()*Math.pow(10,fe));return e+ye}function getBigIntRpcId(fe=6){return BigInt(payloadId(fe))}function formatJsonRpcRequest(fe,e,ye){return{id:ye||payloadId(),jsonrpc:"2.0",method:fe,params:e}}function formatJsonRpcResult(fe,e){return{id:fe,jsonrpc:"2.0",result:e}}function formatJsonRpcError(fe,e,ye){return{id:fe,jsonrpc:"2.0",error:formatErrorMessage(e,ye)}}function formatErrorMessage(fe,e){return typeof fe>"u"?getError(INTERNAL_ERROR):(typeof fe=="string"&&(fe=Object.assign(Object.assign({},getError(SERVER_ERROR)),{message:fe})),typeof e<"u"&&(fe.data=e),isReservedErrorCode(fe.code)&&(fe=getErrorByCode(fe.code)),fe)}class IEvents{}class IBaseJsonRpcProvider extends IEvents{constructor(){super()}}class IJsonRpcProvider extends IBaseJsonRpcProvider{constructor(e){super()}}const WS_REGEX="^wss?:";function getUrlProtocol(fe){const e=fe.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function matchRegexProtocol(fe,e){const ye=getUrlProtocol(fe);return typeof ye>"u"?!1:new RegExp(e).test(ye)}function isWsUrl(fe){return matchRegexProtocol(fe,WS_REGEX)}function isLocalhostUrl(fe){return new RegExp("wss?://localhost(:d{2,5})?").test(fe)}function isJsonRpcPayload(fe){return typeof fe=="object"&&"id"in fe&&"jsonrpc"in fe&&fe.jsonrpc==="2.0"}function isJsonRpcRequest(fe){return isJsonRpcPayload(fe)&&"method"in fe}function isJsonRpcResponse(fe){return isJsonRpcPayload(fe)&&(isJsonRpcResult(fe)||isJsonRpcError(fe))}function isJsonRpcResult(fe){return"result"in fe}function isJsonRpcError(fe){return"error"in fe}class JsonRpcProvider extends IJsonRpcProvider{constructor(e){super(e),this.events=new c$4.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,ye){this.events.on(e,ye)}once(e,ye){this.events.once(e,ye)}off(e,ye){this.events.off(e,ye)}removeListener(e,ye){this.events.removeListener(e,ye)}async request(e,ye){return this.requestStrict(formatJsonRpcRequest(e.method,e.params||[],e.id||getBigIntRpcId().toString()),ye)}async requestStrict(e,ye){return new Promise(async(me,be)=>{if(!this.connection.connected)try{await this.open()}catch(ve){be(ve)}this.events.on(`${e.id}`,ve=>{isJsonRpcError(ve)?be(ve.error):me(ve.result)});try{await this.connection.send(e,ye)}catch(ve){be(ve)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),isJsonRpcResponse(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}const resolveWebSocketImplementation=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),hasBuiltInWebSocket=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",truncateQuery=fe=>fe.split("?")[0],EVENT_EMITTER_MAX_LISTENERS_DEFAULT=10,WS=resolveWebSocketImplementation();class WsConnection{constructor(e){if(this.url=e,this.events=new c$4.EventEmitter,this.registering=!1,!isWsUrl(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,ye){this.events.on(e,ye)}once(e,ye){this.events.once(e,ye)}off(e,ye){this.events.off(e,ye)}removeListener(e,ye){this.events.removeListener(e,ye)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,ye)=>{if(typeof this.socket>"u"){ye(new Error("Connection already closed"));return}this.socket.onclose=me=>{this.onClose(me),e()},this.socket.close()})}async send(e,ye){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(safeJsonStringify(e))}catch(me){this.onError(e.id,me)}}register(e=this.url){if(!isWsUrl(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const ye=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=ye||this.events.listenerCount("open")>=ye)&&this.events.setMaxListeners(ye+1),new Promise((me,be)=>{this.events.once("register_error",ve=>{this.resetMaxListeners(),be(ve)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return be(new Error("WebSocket connection is missing or invalid"));me(this.socket)})})}return this.url=e,this.registering=!0,new Promise((ye,me)=>{const be=cjs.isReactNative()?void 0:{rejectUnauthorized:!isLocalhostUrl(e)},ve=new WS(e,[],be);hasBuiltInWebSocket()?ve.onerror=Ee=>{const Oe=Ee;me(this.emitError(Oe.error))}:ve.on("error",Ee=>{me(this.emitError(Ee))}),ve.onopen=()=>{this.onOpen(ve),ye(ve)}})}onOpen(e){e.onmessage=ye=>this.onPayload(ye),e.onclose=ye=>this.onClose(ye),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const ye=typeof e.data=="string"?safeJsonParse(e.data):e.data;this.events.emit("payload",ye)}onError(e,ye){const me=this.parseError(ye),be=me.message||me.toString(),ve=formatJsonRpcError(e,be);this.events.emit("payload",ve)}parseError(e,ye=this.url){return parseConnectionError(e,truncateQuery(ye),"WS")}resetMaxListeners(){this.events.getMaxListeners()>EVENT_EMITTER_MAX_LISTENERS_DEFAULT&&this.events.setMaxListeners(EVENT_EMITTER_MAX_LISTENERS_DEFAULT)}emitError(e){const ye=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${truncateQuery(this.url)}`));return this.events.emit("register_error",ye),ye}}var lodash_isequal={exports:{}};lodash_isequal.exports;(function(fe,e){var ye=200,me="__lodash_hash_undefined__",be=1,ve=2,Ee=9007199254740991,Oe="[object Arguments]",xe="[object Array]",gr="[object AsyncFunction]",we="[object Boolean]",Se="[object Date]",$r="[object Error]",Fr="[object Function]",Br="[object GeneratorFunction]",Vr="[object Map]",oo="[object Number]",so="[object Null]",kr="[object Object]",qr="[object Promise]",Hr="[object Proxy]",Yr="[object RegExp]",Ur="[object Set]",Mr="[object String]",Lr="[object Symbol]",no="[object Undefined]",Xr="[object WeakMap]",to="[object ArrayBuffer]",ao="[object DataView]",bo="[object Float32Array]",Wr="[object Float64Array]",Jr="[object Int8Array]",fo="[object Int16Array]",vo="[object Int32Array]",mo="[object Uint8Array]",po="[object Uint8ClampedArray]",yo="[object Uint16Array]",Oo="[object Uint32Array]",Io=/[\\^$.*+?()[\]{}|]/g,go=/^\[object .+?Constructor\]$/,No=/^(?:0|[1-9]\d*)$/,Po={};Po[bo]=Po[Wr]=Po[Jr]=Po[fo]=Po[vo]=Po[mo]=Po[po]=Po[yo]=Po[Oo]=!0,Po[Oe]=Po[xe]=Po[to]=Po[we]=Po[ao]=Po[Se]=Po[$r]=Po[Fr]=Po[Vr]=Po[oo]=Po[kr]=Po[Yr]=Po[Ur]=Po[Mr]=Po[Xr]=!1;var Bo=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,ho=typeof self=="object"&&self&&self.Object===Object&&self,co=Bo||ho||Function("return this")(),Qr=e&&!e.nodeType&&e,jr=Qr&&!0&&fe&&!fe.nodeType&&fe,Zr=jr&&jr.exports===Qr,wo=Zr&&Bo.process,Eo=function(){try{return wo&&wo.binding&&wo.binding("util")}catch{}}(),Ao=Eo&&Eo.isTypedArray;function Co(eo,uo){for(var To=-1,Mo=eo==null?0:eo.length,ci=0,qo=[];++To<Mo;){var di=eo[To];uo(di,To,eo)&&(qo[ci++]=di)}return qo}function Uo(eo,uo){for(var To=-1,Mo=uo.length,ci=eo.length;++To<Mo;)eo[ci+To]=uo[To];return eo}function ko(eo,uo){for(var To=-1,Mo=eo==null?0:eo.length;++To<Mo;)if(uo(eo[To],To,eo))return!0;return!1}function si(eo,uo){for(var To=-1,Mo=Array(eo);++To<eo;)Mo[To]=uo(To);return Mo}function ui(eo){return function(uo){return eo(uo)}}function Go(eo,uo){return eo.has(uo)}function Xo(eo,uo){return eo==null?void 0:eo[uo]}function Zo(eo){var uo=-1,To=Array(eo.size);return eo.forEach(function(Mo,ci){To[++uo]=[ci,Mo]}),To}function Ko(eo,uo){return function(To){return eo(uo(To))}}function Jo(eo){var uo=-1,To=Array(eo.size);return eo.forEach(function(Mo){To[++uo]=Mo}),To}var Ho=Array.prototype,zo=Function.prototype,Wo=Object.prototype,Yo=co["__core-js_shared__"],ei=zo.toString,Vo=Wo.hasOwnProperty,oi=function(){var eo=/[^.]+$/.exec(Yo&&Yo.keys&&Yo.keys.IE_PROTO||"");return eo?"Symbol(src)_1."+eo:""}(),ti=Wo.toString,ri=RegExp("^"+ei.call(Vo).replace(Io,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ni=Zr?co.Buffer:void 0,ii=co.Symbol,wi=co.Uint8Array,Si=Wo.propertyIsEnumerable,$i=Ho.splice,bi=ii?ii.toStringTag:void 0,Di=Object.getOwnPropertySymbols,Ni=ni?ni.isBuffer:void 0,fi=Ko(Object.keys,Object),ai=vn(co,"DataView"),li=vn(co,"Map"),io=vn(co,"Promise"),Gr=vn(co,"Set"),ro=vn(co,"WeakMap"),lo=vn(Object,"create"),_o=bn(ai),So=bn(li),$o=bn(io),Ro=bn(Gr),Fo=bn(ro),Do=ii?ii.prototype:void 0,xo=Do?Do.valueOf:void 0;function jo(eo){var uo=-1,To=eo==null?0:eo.length;for(this.clear();++uo<To;){var Mo=eo[uo];this.set(Mo[0],Mo[1])}}function Lo(){this.__data__=lo?lo(null):{},this.size=0}function Qo(eo){var uo=this.has(eo)&&delete this.__data__[eo];return this.size-=uo?1:0,uo}function gi(eo){var uo=this.__data__;if(lo){var To=uo[eo];return To===me?void 0:To}return Vo.call(uo,eo)?uo[eo]:void 0}function vi(eo){var uo=this.__data__;return lo?uo[eo]!==void 0:Vo.call(uo,eo)}function Fi(eo,uo){var To=this.__data__;return this.size+=this.has(eo)?0:1,To[eo]=lo&&uo===void 0?me:uo,this}jo.prototype.clear=Lo,jo.prototype.delete=Qo,jo.prototype.get=gi,jo.prototype.has=vi,jo.prototype.set=Fi;function _i(eo){var uo=-1,To=eo==null?0:eo.length;for(this.clear();++uo<To;){var Mo=eo[uo];this.set(Mo[0],Mo[1])}}function Mi(){this.__data__=[],this.size=0}function wn(eo){var uo=this.__data__,To=Rn(uo,eo);if(To<0)return!1;var Mo=uo.length-1;return To==Mo?uo.pop():$i.call(uo,To,1),--this.size,!0}function En(eo){var uo=this.__data__,To=Rn(uo,eo);return To<0?void 0:uo[To][1]}function Li(eo){return Rn(this.__data__,eo)>-1}function Un(eo,uo){var To=this.__data__,Mo=Rn(To,eo);return Mo<0?(++this.size,To.push([eo,uo])):To[Mo][1]=uo,this}_i.prototype.clear=Mi,_i.prototype.delete=wn,_i.prototype.get=En,_i.prototype.has=Li,_i.prototype.set=Un;function zi(eo){var uo=-1,To=eo==null?0:eo.length;for(this.clear();++uo<To;){var Mo=eo[uo];this.set(Mo[0],Mo[1])}}function pa(){this.size=0,this.__data__={hash:new jo,map:new(li||_i),string:new jo}}function ga(eo){var uo=An(this,eo).delete(eo);return this.size-=uo?1:0,uo}function da(eo){return An(this,eo).get(eo)}function fa(eo){return An(this,eo).has(eo)}function ha(eo,uo){var To=An(this,eo),Mo=To.size;return To.set(eo,uo),this.size+=To.size==Mo?0:1,this}zi.prototype.clear=pa,zi.prototype.delete=ga,zi.prototype.get=da,zi.prototype.has=fa,zi.prototype.set=ha;function Tn(eo){var uo=-1,To=eo==null?0:eo.length;for(this.__data__=new zi;++uo<To;)this.add(eo[uo])}function ya(eo){return this.__data__.set(eo,me),this}function ba(eo){return this.__data__.has(eo)}Tn.prototype.add=Tn.prototype.push=ya,Tn.prototype.has=ba;function xi(eo){var uo=this.__data__=new _i(eo);this.size=uo.size}function _a(){this.__data__=new _i,this.size=0}function ma(eo){var uo=this.__data__,To=uo.delete(eo);return this.size=uo.size,To}function wa(eo){return this.__data__.get(eo)}function va(eo){return this.__data__.has(eo)}function Ea(eo,uo){var To=this.__data__;if(To instanceof _i){var Mo=To.__data__;if(!li||Mo.length<ye-1)return Mo.push([eo,uo]),this.size=++To.size,this;To=this.__data__=new zi(Mo)}return To.set(eo,uo),this.size=To.size,this}xi.prototype.clear=_a,xi.prototype.delete=ma,xi.prototype.get=wa,xi.prototype.has=va,xi.prototype.set=Ea;function Sa(eo,uo){var To=In(eo),Mo=!To&&Ca(eo),ci=!To&&!Mo&&Cn(eo),qo=!To&&!Mo&&!ci&&sa(eo),di=To||Mo||ci||qo,hi=di?si(eo.length,String):[],yi=hi.length;for(var pi in eo)(uo||Vo.call(eo,pi))&&!(di&&(pi=="length"||ci&&(pi=="offset"||pi=="parent")||qo&&(pi=="buffer"||pi=="byteLength"||pi=="byteOffset")||Fa(pi,yi)))&&hi.push(pi);return hi}function Rn(eo,uo){for(var To=eo.length;To--;)if(ra(eo[To][0],uo))return To;return-1}function Oa(eo,uo,To){var Mo=uo(eo);return In(eo)?Mo:Uo(Mo,To(eo))}function Sn(eo){return eo==null?eo===void 0?no:so:bi&&bi in Object(eo)?Pa(eo):Ba(eo)}function Yn(eo){return On(eo)&&Sn(eo)==Oe}function Zn(eo,uo,To,Mo,ci){return eo===uo?!0:eo==null||uo==null||!On(eo)&&!On(uo)?eo!==eo&&uo!==uo:Ta(eo,uo,To,Mo,Zn,ci)}function Ta(eo,uo,To,Mo,ci,qo){var di=In(eo),hi=In(uo),yi=di?xe:Ci(eo),pi=hi?xe:Ci(uo);yi=yi==Oe?kr:yi,pi=pi==Oe?kr:pi;var Ei=yi==kr,Ri=pi==kr,mi=yi==pi;if(mi&&Cn(eo)){if(!Cn(uo))return!1;di=!0,Ei=!1}if(mi&&!Ei)return qo||(qo=new xi),di||sa(eo)?ea(eo,uo,To,Mo,ci,qo):Da(eo,uo,yi,To,Mo,ci,qo);if(!(To&be)){var Oi=Ei&&Vo.call(eo,"__wrapped__"),Ti=Ri&&Vo.call(uo,"__wrapped__");if(Oi||Ti){var Ui=Oi?eo.value():eo,Ii=Ti?uo.value():uo;return qo||(qo=new xi),ci(Ui,Ii,To,Mo,qo)}}return mi?(qo||(qo=new xi),Ia(eo,uo,To,Mo,ci,qo)):!1}function $a(eo){if(!na(eo)||xa(eo))return!1;var uo=oa(eo)?ri:go;return uo.test(bn(eo))}function Ra(eo){return On(eo)&&ia(eo.length)&&!!Po[Sn(eo)]}function Aa(eo){if(!ja(eo))return fi(eo);var uo=[];for(var To in Object(eo))Vo.call(eo,To)&&To!="constructor"&&uo.push(To);return uo}function ea(eo,uo,To,Mo,ci,qo){var di=To&be,hi=eo.length,yi=uo.length;if(hi!=yi&&!(di&&yi>hi))return!1;var pi=qo.get(eo);if(pi&&qo.get(uo))return pi==uo;var Ei=-1,Ri=!0,mi=To&ve?new Tn:void 0;for(qo.set(eo,uo),qo.set(uo,eo);++Ei<hi;){var Oi=eo[Ei],Ti=uo[Ei];if(Mo)var Ui=di?Mo(Ti,Oi,Ei,uo,eo,qo):Mo(Oi,Ti,Ei,eo,uo,qo);if(Ui!==void 0){if(Ui)continue;Ri=!1;break}if(mi){if(!ko(uo,function(Ii,_n){if(!Go(mi,_n)&&(Oi===Ii||ci(Oi,Ii,To,Mo,qo)))return mi.push(_n)})){Ri=!1;break}}else if(!(Oi===Ti||ci(Oi,Ti,To,Mo,qo))){Ri=!1;break}}return qo.delete(eo),qo.delete(uo),Ri}function Da(eo,uo,To,Mo,ci,qo,di){switch(To){case ao:if(eo.byteLength!=uo.byteLength||eo.byteOffset!=uo.byteOffset)return!1;eo=eo.buffer,uo=uo.buffer;case to:return!(eo.byteLength!=uo.byteLength||!qo(new wi(eo),new wi(uo)));case we:case Se:case oo:return ra(+eo,+uo);case $r:return eo.name==uo.name&&eo.message==uo.message;case Yr:case Mr:return eo==uo+"";case Vr:var hi=Zo;case Ur:var yi=Mo&be;if(hi||(hi=Jo),eo.size!=uo.size&&!yi)return!1;var pi=di.get(eo);if(pi)return pi==uo;Mo|=ve,di.set(eo,uo);var Ei=ea(hi(eo),hi(uo),Mo,ci,qo,di);return di.delete(eo),Ei;case Lr:if(xo)return xo.call(eo)==xo.call(uo)}return!1}function Ia(eo,uo,To,Mo,ci,qo){var di=To&be,hi=ta(eo),yi=hi.length,pi=ta(uo),Ei=pi.length;if(yi!=Ei&&!di)return!1;for(var Ri=yi;Ri--;){var mi=hi[Ri];if(!(di?mi in uo:Vo.call(uo,mi)))return!1}var Oi=qo.get(eo);if(Oi&&qo.get(uo))return Oi==uo;var Ti=!0;qo.set(eo,uo),qo.set(uo,eo);for(var Ui=di;++Ri<yi;){mi=hi[Ri];var Ii=eo[mi],_n=uo[mi];if(Mo)var aa=di?Mo(_n,Ii,mi,uo,eo,qo):Mo(Ii,_n,mi,eo,uo,qo);if(!(aa===void 0?Ii===_n||ci(Ii,_n,To,Mo,qo):aa)){Ti=!1;break}Ui||(Ui=mi=="constructor")}if(Ti&&!Ui){var Pn=eo.constructor,Nn=uo.constructor;Pn!=Nn&&"constructor"in eo&&"constructor"in uo&&!(typeof Pn=="function"&&Pn instanceof Pn&&typeof Nn=="function"&&Nn instanceof Nn)&&(Ti=!1)}return qo.delete(eo),qo.delete(uo),Ti}function ta(eo){return Oa(eo,ka,Na)}function An(eo,uo){var To=eo.__data__;return Ma(uo)?To[typeof uo=="string"?"string":"hash"]:To.map}function vn(eo,uo){var To=Xo(eo,uo);return $a(To)?To:void 0}function Pa(eo){var uo=Vo.call(eo,bi),To=eo[bi];try{eo[bi]=void 0;var Mo=!0}catch{}var ci=ti.call(eo);return Mo&&(uo?eo[bi]=To:delete eo[bi]),ci}var Na=Di?function(eo){return eo==null?[]:(eo=Object(eo),Co(Di(eo),function(uo){return Si.call(eo,uo)}))}:Wa,Ci=Sn;(ai&&Ci(new ai(new ArrayBuffer(1)))!=ao||li&&Ci(new li)!=Vr||io&&Ci(io.resolve())!=qr||Gr&&Ci(new Gr)!=Ur||ro&&Ci(new ro)!=Xr)&&(Ci=function(eo){var uo=Sn(eo),To=uo==kr?eo.constructor:void 0,Mo=To?bn(To):"";if(Mo)switch(Mo){case _o:return ao;case So:return Vr;case $o:return qr;case Ro:return Ur;case Fo:return Xr}return uo});function Fa(eo,uo){return uo=uo??Ee,!!uo&&(typeof eo=="number"||No.test(eo))&&eo>-1&&eo%1==0&&eo<uo}function Ma(eo){var uo=typeof eo;return uo=="string"||uo=="number"||uo=="symbol"||uo=="boolean"?eo!=="__proto__":eo===null}function xa(eo){return!!oi&&oi in eo}function ja(eo){var uo=eo&&eo.constructor,To=typeof uo=="function"&&uo.prototype||Wo;return eo===To}function Ba(eo){return ti.call(eo)}function bn(eo){if(eo!=null){try{return ei.call(eo)}catch{}try{return eo+""}catch{}}return""}function ra(eo,uo){return eo===uo||eo!==eo&&uo!==uo}var Ca=Yn(function(){return arguments}())?Yn:function(eo){return On(eo)&&Vo.call(eo,"callee")&&!Si.call(eo,"callee")},In=Array.isArray;function Ua(eo){return eo!=null&&ia(eo.length)&&!oa(eo)}var Cn=Ni||Va;function La(eo,uo){return Zn(eo,uo)}function oa(eo){if(!na(eo))return!1;var uo=Sn(eo);return uo==Fr||uo==Br||uo==gr||uo==Hr}function ia(eo){return typeof eo=="number"&&eo>-1&&eo%1==0&&eo<=Ee}function na(eo){var uo=typeof eo;return eo!=null&&(uo=="object"||uo=="function")}function On(eo){return eo!=null&&typeof eo=="object"}var sa=Ao?ui(Ao):Ra;function ka(eo){return Ua(eo)?Sa(eo):Aa(eo)}function Wa(){return[]}function Va(){return!1}fe.exports=La})(lodash_isequal,lodash_isequal.exports);var lodash_isequalExports=lodash_isequal.exports;const Bi$1=getDefaultExportFromCjs(lodash_isequalExports);function ki(fe,e){if(fe.length>=255)throw new TypeError("Alphabet too long");for(var ye=new Uint8Array(256),me=0;me<ye.length;me++)ye[me]=255;for(var be=0;be<fe.length;be++){var ve=fe.charAt(be),Ee=ve.charCodeAt(0);if(ye[Ee]!==255)throw new TypeError(ve+" is ambiguous");ye[Ee]=be}var Oe=fe.length,xe=fe.charAt(0),gr=Math.log(Oe)/Math.log(256),we=Math.log(256)/Math.log(Oe);function Se(Br){if(Br instanceof Uint8Array||(ArrayBuffer.isView(Br)?Br=new Uint8Array(Br.buffer,Br.byteOffset,Br.byteLength):Array.isArray(Br)&&(Br=Uint8Array.from(Br))),!(Br instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(Br.length===0)return"";for(var Vr=0,oo=0,so=0,kr=Br.length;so!==kr&&Br[so]===0;)so++,Vr++;for(var qr=(kr-so)*we+1>>>0,Hr=new Uint8Array(qr);so!==kr;){for(var Yr=Br[so],Ur=0,Mr=qr-1;(Yr!==0||Ur<oo)&&Mr!==-1;Mr--,Ur++)Yr+=256*Hr[Mr]>>>0,Hr[Mr]=Yr%Oe>>>0,Yr=Yr/Oe>>>0;if(Yr!==0)throw new Error("Non-zero carry");oo=Ur,so++}for(var Lr=qr-oo;Lr!==qr&&Hr[Lr]===0;)Lr++;for(var no=xe.repeat(Vr);Lr<qr;++Lr)no+=fe.charAt(Hr[Lr]);return no}function $r(Br){if(typeof Br!="string")throw new TypeError("Expected String");if(Br.length===0)return new Uint8Array;var Vr=0;if(Br[Vr]!==" "){for(var oo=0,so=0;Br[Vr]===xe;)oo++,Vr++;for(var kr=(Br.length-Vr)*gr+1>>>0,qr=new Uint8Array(kr);Br[Vr];){var Hr=ye[Br.charCodeAt(Vr)];if(Hr===255)return;for(var Yr=0,Ur=kr-1;(Hr!==0||Yr<so)&&Ur!==-1;Ur--,Yr++)Hr+=Oe*qr[Ur]>>>0,qr[Ur]=Hr%256>>>0,Hr=Hr/256>>>0;if(Hr!==0)throw new Error("Non-zero carry");so=Yr,Vr++}if(Br[Vr]!==" "){for(var Mr=kr-so;Mr!==kr&&qr[Mr]===0;)Mr++;for(var Lr=new Uint8Array(oo+(kr-Mr)),no=oo;Mr!==kr;)Lr[no++]=qr[Mr++];return Lr}}}function Fr(Br){var Vr=$r(Br);if(Vr)return Vr;throw new Error(`Non-${e} character`)}return{encode:Se,decodeUnsafe:$r,decode:Fr}}var Ki=ki,Bi=Ki;const Ae$1=fe=>{if(fe instanceof Uint8Array&&fe.constructor.name==="Uint8Array")return fe;if(fe instanceof ArrayBuffer)return new Uint8Array(fe);if(ArrayBuffer.isView(fe))return new Uint8Array(fe.buffer,fe.byteOffset,fe.byteLength);throw new Error("Unknown type, must be binary type")},Vi$1=fe=>new TextEncoder().encode(fe),qi$1=fe=>new TextDecoder().decode(fe);let ji$1=class{constructor(e,ye,me){this.name=e,this.prefix=ye,this.baseEncode=me}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Yi$1=class{constructor(e,ye,me){if(this.name=e,this.prefix=ye,ye.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=ye.codePointAt(0),this.baseDecode=me}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return ze(this,e)}},Gi$1=class{constructor(e){this.decoders=e}or(e){return ze(this,e)}decode(e){const ye=e[0],me=this.decoders[ye];if(me)return me.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const ze=(fe,e)=>new Gi$1({...fe.decoders||{[fe.prefix]:fe},...e.decoders||{[e.prefix]:e}});let Hi$1=class{constructor(e,ye,me,be){this.name=e,this.prefix=ye,this.baseEncode=me,this.baseDecode=be,this.encoder=new ji$1(e,ye,me),this.decoder=new Yi$1(e,ye,be)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const J$2=({name:fe,prefix:e,encode:ye,decode:me})=>new Hi$1(fe,e,ye,me),K$1=({prefix:fe,name:e,alphabet:ye})=>{const{encode:me,decode:be}=Bi(ye,e);return J$2({prefix:fe,name:e,encode:me,decode:ve=>Ae$1(be(ve))})},Ji$1=(fe,e,ye,me)=>{const be={};for(let we=0;we<e.length;++we)be[e[we]]=we;let ve=fe.length;for(;fe[ve-1]==="=";)--ve;const Ee=new Uint8Array(ve*ye/8|0);let Oe=0,xe=0,gr=0;for(let we=0;we<ve;++we){const Se=be[fe[we]];if(Se===void 0)throw new SyntaxError(`Non-${me} character`);xe=xe<<ye|Se,Oe+=ye,Oe>=8&&(Oe-=8,Ee[gr++]=255&xe>>Oe)}if(Oe>=ye||255&xe<<8-Oe)throw new SyntaxError("Unexpected end of data");return Ee},Wi$1=(fe,e,ye)=>{const me=e[e.length-1]==="=",be=(1<<ye)-1;let ve="",Ee=0,Oe=0;for(let xe=0;xe<fe.length;++xe)for(Oe=Oe<<8|fe[xe],Ee+=8;Ee>ye;)Ee-=ye,ve+=e[be&Oe>>Ee];if(Ee&&(ve+=e[be&Oe<<ye-Ee]),me)for(;ve.length*ye&7;)ve+="=";return ve},g$5=({name:fe,prefix:e,bitsPerChar:ye,alphabet:me})=>J$2({prefix:e,name:fe,encode(be){return Wi$1(be,me,ye)},decode(be){return Ji$1(be,me,ye,fe)}}),Xi$1=J$2({prefix:"\0",name:"identity",encode:fe=>qi$1(fe),decode:fe=>Vi$1(fe)});var Qi$1=Object.freeze({__proto__:null,identity:Xi$1});const Zi$1=g$5({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var es$1=Object.freeze({__proto__:null,base2:Zi$1});const ts$1=g$5({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var is$1=Object.freeze({__proto__:null,base8:ts$1});const ss$1=K$1({prefix:"9",name:"base10",alphabet:"0123456789"});var rs$2=Object.freeze({__proto__:null,base10:ss$1});const ns$2=g$5({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),as$3=g$5({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var os$3=Object.freeze({__proto__:null,base16:ns$2,base16upper:as$3});const hs$3=g$5({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),cs$3=g$5({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),us$2=g$5({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),ls$3=g$5({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),ds$3=g$5({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),gs$2=g$5({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),ps$3=g$5({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Ds$1=g$5({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),ys$1=g$5({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var bs$1=Object.freeze({__proto__:null,base32:hs$3,base32upper:cs$3,base32pad:us$2,base32padupper:ls$3,base32hex:ds$3,base32hexupper:gs$2,base32hexpad:ps$3,base32hexpadupper:Ds$1,base32z:ys$1});const ms$2=K$1({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),fs$2=K$1({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Es$1=Object.freeze({__proto__:null,base36:ms$2,base36upper:fs$2});const ws$1=K$1({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),vs$1=K$1({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Is$1=Object.freeze({__proto__:null,base58btc:ws$1,base58flickr:vs$1});const Cs$1=g$5({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Rs$1=g$5({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),_s$1=g$5({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Ts$1=g$5({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Ss$1=Object.freeze({__proto__:null,base64:Cs$1,base64pad:Rs$1,base64url:_s$1,base64urlpad:Ts$1});const Ne$1=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),Ps$1=Ne$1.reduce((fe,e,ye)=>(fe[ye]=e,fe),[]),Os$1=Ne$1.reduce((fe,e,ye)=>(fe[e.codePointAt(0)]=ye,fe),[]);function xs$1(fe){return fe.reduce((e,ye)=>(e+=Ps$1[ye],e),"")}function As$1(fe){const e=[];for(const ye of fe){const me=Os$1[ye.codePointAt(0)];if(me===void 0)throw new Error(`Non-base256emoji character: ${ye}`);e.push(me)}return new Uint8Array(e)}const zs$1=J$2({prefix:"🚀",name:"base256emoji",encode:xs$1,decode:As$1});var Ns$1=Object.freeze({__proto__:null,base256emoji:zs$1}),Ls$1=Ue$2,Le$1=128,Us$1=127,Fs$1=~Us$1,$s$1=Math.pow(2,31);function Ue$2(fe,e,ye){e=e||[],ye=ye||0;for(var me=ye;fe>=$s$1;)e[ye++]=fe&255|Le$1,fe/=128;for(;fe&Fs$1;)e[ye++]=fe&255|Le$1,fe>>>=7;return e[ye]=fe|0,Ue$2.bytes=ye-me+1,e}var Ms$1=ae$3,ks$1=128,Fe$2=127;function ae$3(fe,me){var ye=0,me=me||0,be=0,ve=me,Ee,Oe=fe.length;do{if(ve>=Oe)throw ae$3.bytes=0,new RangeError("Could not decode varint");Ee=fe[ve++],ye+=be<28?(Ee&Fe$2)<<be:(Ee&Fe$2)*Math.pow(2,be),be+=7}while(Ee>=ks$1);return ae$3.bytes=ve-me,ye}var Ks$1=Math.pow(2,7),Bs$1=Math.pow(2,14),Vs$1=Math.pow(2,21),qs$1=Math.pow(2,28),js$1=Math.pow(2,35),Ys$1=Math.pow(2,42),Gs$1=Math.pow(2,49),Hs$1=Math.pow(2,56),Js$1=Math.pow(2,63),Ws$1=function(fe){return fe<Ks$1?1:fe<Bs$1?2:fe<Vs$1?3:fe<qs$1?4:fe<js$1?5:fe<Ys$1?6:fe<Gs$1?7:fe<Hs$1?8:fe<Js$1?9:10},Xs$1={encode:Ls$1,decode:Ms$1,encodingLength:Ws$1},$e$2=Xs$1;const Me$2=(fe,e,ye=0)=>($e$2.encode(fe,e,ye),e),ke$2=fe=>$e$2.encodingLength(fe),oe$2=(fe,e)=>{const ye=e.byteLength,me=ke$2(fe),be=me+ke$2(ye),ve=new Uint8Array(be+ye);return Me$2(fe,ve,0),Me$2(ye,ve,me),ve.set(e,be),new Qs$1(fe,ye,e,ve)};let Qs$1=class{constructor(e,ye,me,be){this.code=e,this.size=ye,this.digest=me,this.bytes=be}};const Ke$1=({name:fe,code:e,encode:ye})=>new Zs$1(fe,e,ye);let Zs$1=class{constructor(e,ye,me){this.name=e,this.code=ye,this.encode=me}digest(e){if(e instanceof Uint8Array){const ye=this.encode(e);return ye instanceof Uint8Array?oe$2(this.code,ye):ye.then(me=>oe$2(this.code,me))}else throw Error("Unknown type, must be binary type")}};const Be$2=fe=>async e=>new Uint8Array(await crypto.subtle.digest(fe,e)),er$2=Ke$1({name:"sha2-256",code:18,encode:Be$2("SHA-256")}),tr$2=Ke$1({name:"sha2-512",code:19,encode:Be$2("SHA-512")});var ir$1=Object.freeze({__proto__:null,sha256:er$2,sha512:tr$2});const Ve$2=0,sr$1="identity",qe$2=Ae$1,rr$1=fe=>oe$2(Ve$2,qe$2(fe)),nr$2={code:Ve$2,name:sr$1,encode:qe$2,digest:rr$1};var ar$1=Object.freeze({__proto__:null,identity:nr$2});new TextEncoder,new TextDecoder;const je$1={...Qi$1,...es$1,...is$1,...rs$2,...os$3,...bs$1,...Es$1,...Is$1,...Ss$1,...Ns$1};({...ir$1,...ar$1});function Ye$1(fe){return globalThis.Buffer!=null?new Uint8Array(fe.buffer,fe.byteOffset,fe.byteLength):fe}function or$1(fe=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Ye$1(globalThis.Buffer.allocUnsafe(fe)):new Uint8Array(fe)}function Ge$2(fe,e,ye,me){return{name:fe,prefix:e,encoder:{name:fe,prefix:e,encode:ye},decoder:{decode:me}}}const He$2=Ge$2("utf8","u",fe=>"u"+new TextDecoder("utf8").decode(fe),fe=>new TextEncoder().encode(fe.substring(1))),he$3=Ge$2("ascii","a",fe=>{let e="a";for(let ye=0;ye<fe.length;ye++)e+=String.fromCharCode(fe[ye]);return e},fe=>{fe=fe.substring(1);const e=or$1(fe.length);for(let ye=0;ye<fe.length;ye++)e[ye]=fe.charCodeAt(ye);return e}),hr$1={utf8:He$2,"utf-8":He$2,hex:je$1.base16,latin1:he$3,ascii:he$3,binary:he$3,...je$1};function cr$1(fe,e="utf8"){const ye=hr$1[e];if(!ye)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Ye$1(globalThis.Buffer.from(fe,"utf-8")):ye.decoder.decode(`${ye.prefix}${fe}`)}const ce$4="wc",Je$2=2,W$2="core",x$2=`${ce$4}@2:${W$2}:`,We$2={name:W$2,logger:"error"},Xe$1={database:":memory:"},Qe$2="crypto",ue$1="client_ed25519_seed",Ze$2=cjs$4.ONE_DAY,et$1="keychain",tt$1="0.3",it$1="messages",st$1="0.3",rt$2=cjs$4.SIX_HOURS,nt$1="publisher",at$3="irn",ot$2="error",le$3="wss://relay.walletconnect.com",de$3="wss://relay.walletconnect.org",ht$2="relayer",D$4={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},ct$1="_subscription",P$2={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},ut$2=cjs$4.ONE_SECOND,lt$2="2.10.0",dt$2=1e4,gt$2="0.3",pt$3="WALLETCONNECT_CLIENT_ID",C$3={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},Dt$2="subscription",yt$3="0.3",bt$2=cjs$4.FIVE_SECONDS*1e3,mt$3="pairing",ft$3="0.3",F$4={wc_pairingDelete:{req:{ttl:cjs$4.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:cjs$4.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:cjs$4.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:cjs$4.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:cjs$4.ONE_DAY,prompt:!1,tag:0},res:{ttl:cjs$4.ONE_DAY,prompt:!1,tag:0}}},R$1={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},Et$2="history",wt$2="0.3",vt$2="expirer",w$5={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},It$2="0.3",X$4="verify-api",Q$4="https://verify.walletconnect.com",ge$1="https://verify.walletconnect.org";let Ct$1=class{constructor(e,ye){this.core=e,this.logger=ye,this.keychain=new Map,this.name=et$1,this.version=tt$1,this.initialized=!1,this.storagePrefix=x$2,this.init=async()=>{if(!this.initialized){const me=await this.getKeyChain();typeof me<"u"&&(this.keychain=me),this.initialized=!0}},this.has=me=>(this.isInitialized(),this.keychain.has(me)),this.set=async(me,be)=>{this.isInitialized(),this.keychain.set(me,be),await this.persist()},this.get=me=>{this.isInitialized();const be=this.keychain.get(me);if(typeof be>"u"){const{message:ve}=N$4("NO_MATCHING_KEY",`${this.name}: ${me}`);throw new Error(ve)}return be},this.del=async me=>{this.isInitialized(),this.keychain.delete(me),await this.persist()},this.core=e,this.logger=cjs$3.generateChildLogger(ye,this.name)}get context(){return cjs$3.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,et$2(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?nt$2(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=N$4("NOT_INITIALIZED",this.name);throw new Error(e)}}},Rt$1=class{constructor(e,ye,me){this.core=e,this.logger=ye,this.name=Qe$2,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=be=>(this.isInitialized(),this.keychain.has(be)),this.getClientId=async()=>{this.isInitialized();const be=await this.getClientSeed(),ve=generateKeyPair(be);return encodeIss(ve.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const be=jn();return this.setPrivateKey(be.publicKey,be.privateKey)},this.signJWT=async be=>{this.isInitialized();const ve=await this.getClientSeed(),Ee=generateKeyPair(ve),Oe=Dn$1();return await signJWT(Oe,be,Ze$2,Ee)},this.generateSharedKey=(be,ve,Ee)=>{this.isInitialized();const Oe=this.getPrivateKey(be),xe=kn$1(Oe,ve);return this.setSymKey(xe,Ee)},this.setSymKey=async(be,ve)=>{this.isInitialized();const Ee=ve||Vn$1(be);return await this.keychain.set(Ee,be),Ee},this.deleteKeyPair=async be=>{this.isInitialized(),await this.keychain.del(be)},this.deleteSymKey=async be=>{this.isInitialized(),await this.keychain.del(be)},this.encode=async(be,ve,Ee)=>{this.isInitialized();const Oe=Re$1(Ee),xe=safeJsonStringify(ve);if(Fn$1(Oe)){const $r=Oe.senderPublicKey,Fr=Oe.receiverPublicKey;be=await this.generateSharedKey($r,Fr)}const gr=this.getSymKey(be),{type:we,senderPublicKey:Se}=Oe;return Kn$1({type:we,symKey:gr,message:xe,senderPublicKey:Se})},this.decode=async(be,ve,Ee)=>{this.isInitialized();const Oe=xn$1(ve,Ee);if(Fn$1(Oe)){const xe=Oe.receiverPublicKey,gr=Oe.senderPublicKey;be=await this.generateSharedKey(xe,gr)}try{const xe=this.getSymKey(be),gr=Ln$2({symKey:xe,encoded:ve});return safeJsonParse(gr)}catch(xe){this.logger.error(`Failed to decode message from topic: '${be}', clientId: '${await this.getClientId()}'`),this.logger.error(xe)}},this.getPayloadType=be=>{const ve=ee$2(be);return $$2(ve.type)},this.getPayloadSenderPublicKey=be=>{const ve=ee$2(be);return ve.senderPublicKey?toString(ve.senderPublicKey,p$4):void 0},this.core=e,this.logger=cjs$3.generateChildLogger(ye,this.name),this.keychain=me||new Ct$1(this.core,this.logger)}get context(){return cjs$3.getLoggerContext(this.logger)}async setPrivateKey(e,ye){return await this.keychain.set(e,ye),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(ue$1)}catch{e=Dn$1(),await this.keychain.set(ue$1,e)}return cr$1(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=N$4("NOT_INITIALIZED",this.name);throw new Error(e)}}},_t$2=class extends a$3{constructor(e,ye){super(e,ye),this.logger=e,this.core=ye,this.messages=new Map,this.name=it$1,this.version=st$1,this.initialized=!1,this.storagePrefix=x$2,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const me=await this.getRelayerMessages();typeof me<"u"&&(this.messages=me),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(me){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(me)}finally{this.initialized=!0}}},this.set=async(me,be)=>{this.isInitialized();const ve=Mn$1(be);let Ee=this.messages.get(me);return typeof Ee>"u"&&(Ee={}),typeof Ee[ve]<"u"||(Ee[ve]=be,this.messages.set(me,Ee),await this.persist()),ve},this.get=me=>{this.isInitialized();let be=this.messages.get(me);return typeof be>"u"&&(be={}),be},this.has=(me,be)=>{this.isInitialized();const ve=this.get(me),Ee=Mn$1(be);return typeof ve[Ee]<"u"},this.del=async me=>{this.isInitialized(),this.messages.delete(me),await this.persist()},this.logger=cjs$3.generateChildLogger(e,this.name),this.core=ye}get context(){return cjs$3.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,et$2(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?nt$2(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=N$4("NOT_INITIALIZED",this.name);throw new Error(e)}}};class pr extends u$2{constructor(e,ye){super(e,ye),this.relayer=e,this.logger=ye,this.events=new c$4.EventEmitter,this.name=nt$1,this.queue=new Map,this.publishTimeout=cjs$4.toMiliseconds(cjs$4.TEN_SECONDS),this.needsTransportRestart=!1,this.publish=async(me,be,ve)=>{var Ee;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:me,message:be,opts:ve}});try{const Oe=(ve==null?void 0:ve.ttl)||rt$2,xe=mt$4(ve),gr=(ve==null?void 0:ve.prompt)||!1,we=(ve==null?void 0:ve.tag)||0,Se=(ve==null?void 0:ve.id)||getBigIntRpcId().toString(),$r={topic:me,message:be,opts:{ttl:Oe,relay:xe,prompt:gr,tag:we,id:Se}},Fr=setTimeout(()=>this.queue.set(Se,$r),this.publishTimeout);try{await await it$2(this.rpcPublish(me,be,Oe,xe,gr,we,Se),this.publishTimeout,"Failed to publish payload, please try again."),this.removeRequestFromQueue(Se),this.relayer.events.emit(D$4.publish,$r)}catch(Br){if(this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0,(Ee=ve==null?void 0:ve.internal)!=null&&Ee.throwOnFailedPublish)throw this.removeRequestFromQueue(Se),Br;return}finally{clearTimeout(Fr)}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:me,message:be,opts:ve}})}catch(Oe){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(Oe),Oe}},this.on=(me,be)=>{this.events.on(me,be)},this.once=(me,be)=>{this.events.once(me,be)},this.off=(me,be)=>{this.events.off(me,be)},this.removeListener=(me,be)=>{this.events.removeListener(me,be)},this.relayer=e,this.logger=cjs$3.generateChildLogger(ye,this.name),this.registerEventListeners()}get context(){return cjs$3.getLoggerContext(this.logger)}rpcPublish(e,ye,me,be,ve,Ee,Oe){var xe,gr,we,Se;const $r={method:yt$4(be.protocol).publish,params:{topic:e,message:ye,ttl:me,prompt:ve,tag:Ee},id:Oe};return w$6((xe=$r.params)==null?void 0:xe.prompt)&&((gr=$r.params)==null||delete gr.prompt),w$6((we=$r.params)==null?void 0:we.tag)&&((Se=$r.params)==null||delete Se.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:$r}),this.relayer.request($r)}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async e=>{const{topic:ye,message:me,opts:be}=e;await this.publish(ye,me,be)})}registerEventListeners(){this.relayer.core.heartbeat.on(cjs$5.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(D$4.connection_stalled);return}this.checkQueue()}),this.relayer.on(D$4.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}class Dr{constructor(){this.map=new Map,this.set=(e,ye)=>{const me=this.get(e);this.exists(e,ye)||this.map.set(e,[...me,ye])},this.get=e=>this.map.get(e)||[],this.exists=(e,ye)=>this.get(e).includes(ye),this.delete=(e,ye)=>{if(typeof ye>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const me=this.get(e);if(!this.exists(e,ye))return;const be=me.filter(ve=>ve!==ye);if(!be.length){this.map.delete(e);return}this.map.set(e,be)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var yr=Object.defineProperty,br$1=Object.defineProperties,mr$1=Object.getOwnPropertyDescriptors,Tt$1=Object.getOwnPropertySymbols,fr$1=Object.prototype.hasOwnProperty,Er$1=Object.prototype.propertyIsEnumerable,St$2=(fe,e,ye)=>e in fe?yr(fe,e,{enumerable:!0,configurable:!0,writable:!0,value:ye}):fe[e]=ye,B$2=(fe,e)=>{for(var ye in e||(e={}))fr$1.call(e,ye)&&St$2(fe,ye,e[ye]);if(Tt$1)for(var ye of Tt$1(e))Er$1.call(e,ye)&&St$2(fe,ye,e[ye]);return fe},pe$3=(fe,e)=>br$1(fe,mr$1(e));let Pt$1=class extends d$1{constructor(e,ye){super(e,ye),this.relayer=e,this.logger=ye,this.subscriptions=new Map,this.topicMap=new Dr,this.events=new c$4.EventEmitter,this.name=Dt$2,this.version=yt$3,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=x$2,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(me,be)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:me,opts:be}});try{const ve=mt$4(be),Ee={topic:me,relay:ve};this.pending.set(me,Ee);const Oe=await this.rpcSubscribe(me,ve);return this.onSubscribe(Oe,Ee),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:me,opts:be}}),Oe}catch(ve){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(ve),ve}},this.unsubscribe=async(me,be)=>{await this.restartToComplete(),this.isInitialized(),typeof(be==null?void 0:be.id)<"u"?await this.unsubscribeById(me,be.id,be):await this.unsubscribeByTopic(me,be)},this.isSubscribed=async me=>this.topics.includes(me)?!0:await new Promise((be,ve)=>{const Ee=new cjs$4.Watch;Ee.start(this.pendingSubscriptionWatchLabel);const Oe=setInterval(()=>{!this.pending.has(me)&&this.topics.includes(me)&&(clearInterval(Oe),Ee.stop(this.pendingSubscriptionWatchLabel),be(!0)),Ee.elapsed(this.pendingSubscriptionWatchLabel)>=bt$2&&(clearInterval(Oe),Ee.stop(this.pendingSubscriptionWatchLabel),ve(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1),this.on=(me,be)=>{this.events.on(me,be)},this.once=(me,be)=>{this.events.once(me,be)},this.off=(me,be)=>{this.events.off(me,be)},this.removeListener=(me,be)=>{this.events.removeListener(me,be)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=cjs$3.generateChildLogger(ye,this.name),this.clientId=""}get context(){return cjs$3.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,ye){let me=!1;try{me=this.getSubscription(e).topic===ye}catch{}return me}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,ye){const me=this.topicMap.get(e);await Promise.all(me.map(async be=>await this.unsubscribeById(e,be,ye)))}async unsubscribeById(e,ye,me){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:ye,opts:me}});try{const be=mt$4(me);await this.rpcUnsubscribe(e,ye,be);const ve=U$6("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,ye,ve),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:ye,opts:me}})}catch(be){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(be),be}}async rpcSubscribe(e,ye){const me={method:yt$4(ye.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:me});try{await await it$2(this.relayer.request(me),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(D$4.connection_stalled)}return Mn$1(e+this.clientId)}async rpcBatchSubscribe(e){if(!e.length)return;const ye=e[0].relay,me={method:yt$4(ye.protocol).batchSubscribe,params:{topics:e.map(be=>be.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:me});try{return await await it$2(this.relayer.request(me),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(D$4.connection_stalled)}}rpcUnsubscribe(e,ye,me){const be={method:yt$4(me.protocol).unsubscribe,params:{topic:e,id:ye}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:be}),this.relayer.request(be)}onSubscribe(e,ye){this.setSubscription(e,pe$3(B$2({},ye),{id:e})),this.pending.delete(ye.topic)}onBatchSubscribe(e){e.length&&e.forEach(ye=>{this.setSubscription(ye.id,B$2({},ye)),this.pending.delete(ye.topic)})}async onUnsubscribe(e,ye,me){this.events.removeAllListeners(ye),this.hasSubscription(ye,e)&&this.deleteSubscription(ye,me),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,ye){this.subscriptions.has(e)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:ye}),this.addSubscription(e,ye))}addSubscription(e,ye){this.subscriptions.set(e,B$2({},ye)),this.topicMap.set(ye.topic,e),this.events.emit(C$3.created,ye)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const ye=this.subscriptions.get(e);if(!ye){const{message:me}=N$4("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(me)}return ye}deleteSubscription(e,ye){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:ye});const me=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(me.topic,e),this.events.emit(C$3.deleted,pe$3(B$2({},me),{reason:ye}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(C$3.sync)}async reset(){if(this.cached.length){const e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let ye=0;ye<e;ye++){const me=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(me)}}this.events.emit(C$3.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:ye}=N$4("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(ye),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(ye)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;const ye=await this.rpcBatchSubscribe(e);j$2(ye)&&this.onBatchSubscribe(ye.map((me,be)=>pe$3(B$2({},e[be]),{id:me})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(!this.initialized||this.relayer.transportExplicitlyClosed)return;const e=[];this.pending.forEach(ye=>{e.push(ye)}),await this.batchSubscribe(e)}registerEventListeners(){this.relayer.core.heartbeat.on(cjs$5.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(D$4.connect,async()=>{await this.onConnect()}),this.relayer.on(D$4.disconnect,()=>{this.onDisconnect()}),this.events.on(C$3.created,async e=>{const ye=C$3.created;this.logger.info(`Emitting ${ye}`),this.logger.debug({type:"event",event:ye,data:e}),await this.persist()}),this.events.on(C$3.deleted,async e=>{const ye=C$3.deleted;this.logger.info(`Emitting ${ye}`),this.logger.debug({type:"event",event:ye,data:e}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=N$4("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){this.restartInProgress&&await new Promise(e=>{const ye=setInterval(()=>{this.restartInProgress||(clearInterval(ye),e())},this.pollingInterval)})}};var wr$1=Object.defineProperty,Ot$2=Object.getOwnPropertySymbols,vr$1=Object.prototype.hasOwnProperty,Ir$1=Object.prototype.propertyIsEnumerable,xt$2=(fe,e,ye)=>e in fe?wr$1(fe,e,{enumerable:!0,configurable:!0,writable:!0,value:ye}):fe[e]=ye,Cr$1=(fe,e)=>{for(var ye in e||(e={}))vr$1.call(e,ye)&&xt$2(fe,ye,e[ye]);if(Ot$2)for(var ye of Ot$2(e))Ir$1.call(e,ye)&&xt$2(fe,ye,e[ye]);return fe};let At$1=class extends g$6{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new c$4.EventEmitter,this.name=ht$2,this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.hasExperiencedNetworkDisruption=!1,this.request=async ye=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(ye)}catch(me){throw this.logger.debug("Failed to Publish Request"),this.logger.error(me),me}},this.onPayloadHandler=ye=>{this.onProviderPayload(ye)},this.onConnectHandler=()=>{this.events.emit(D$4.connect)},this.onDisconnectHandler=()=>{this.onProviderDisconnect()},this.onProviderErrorHandler=ye=>{this.logger.error(ye),this.events.emit(D$4.error,ye)},this.registerProviderListeners=()=>{this.provider.on(P$2.payload,this.onPayloadHandler),this.provider.on(P$2.connect,this.onConnectHandler),this.provider.on(P$2.disconnect,this.onDisconnectHandler),this.provider.on(P$2.error,this.onProviderErrorHandler)},this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?cjs$3.generateChildLogger(e.logger,this.name):cjs$3.pino(cjs$3.getDefaultLoggerOptions({level:e.logger||ot$2})),this.messages=new _t$2(this.logger,e.core),this.subscriber=new Pt$1(this,this.logger),this.publisher=new pr(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||le$3,this.projectId=e.projectId,this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${de$3}...`),await this.restartTransport(de$3)}this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},dt$2)}get context(){return cjs$3.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(e,ye,me){this.isInitialized(),await this.publisher.publish(e,ye,me),await this.recordMessageEvent({topic:e,message:ye,publishedAt:Date.now()})}async subscribe(e,ye){var me;this.isInitialized();let be=((me=this.subscriber.topicMap.get(e))==null?void 0:me[0])||"";return be||(await Promise.all([new Promise(ve=>{this.subscriber.once(C$3.created,Ee=>{Ee.topic===e&&ve()})}),new Promise(async ve=>{be=await this.subscriber.subscribe(e,ye),ve()})]),be)}async unsubscribe(e,ye){this.isInitialized(),await this.subscriber.unsubscribe(e,ye)}on(e,ye){this.events.on(e,ye)}once(e,ye){this.events.once(e,ye)}off(e,ye){this.events.off(e,ye)}removeListener(e,ye){this.events.removeListener(e,ye)}async transportClose(){this.transportExplicitlyClosed=!0,this.hasExperiencedNetworkDisruption&&this.connected?await it$2(this.provider.disconnect(),1e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.connected&&await this.provider.disconnect()}async transportOpen(e){if(this.transportExplicitlyClosed=!1,await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress){e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportClose(),await this.createProvider()),this.connectionAttemptInProgress=!0;try{await Promise.all([new Promise(ye=>{if(!this.initialized)return ye();this.subscriber.once(C$3.resubscribed,()=>{ye()})}),new Promise(async(ye,me)=>{try{await it$2(this.provider.connect(),1e4,`Socket stalled when trying to connect to ${this.relayUrl}`)}catch(be){me(be);return}ye()})])}catch(ye){this.logger.error(ye);const me=ye;if(!this.isConnectionStalled(me.message))throw ye;this.provider.events.emit(P$2.disconnect)}finally{this.connectionAttemptInProgress=!1,this.hasExperiencedNetworkDisruption=!1}}}async restartTransport(e){await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.transportClose(),await this.createProvider(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await Zt$1())throw new Error("No internet connection detected. Please restart your network and try again.")}isConnectionStalled(e){return this.staleConnectionErrors.some(ye=>e.includes(ye))}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new JsonRpcProvider(new WsConnection(Jn$1({sdkVersion:lt$2,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:ye,message:me}=e;await this.messages.set(ye,me)}async shouldIgnoreMessageEvent(e){const{topic:ye,message:me}=e;if(!me||me.length===0)return this.logger.debug(`Ignoring invalid/empty message: ${me}`),!0;if(!await this.subscriber.isSubscribed(ye))return this.logger.debug(`Ignoring message for non-subscribed topic ${ye}`),!0;const be=this.messages.has(ye,me);return be&&this.logger.debug(`Ignoring duplicate message: ${me}`),be}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),isJsonRpcRequest(e)){if(!e.method.endsWith(ct$1))return;const ye=e.params,{topic:me,message:be,publishedAt:ve}=ye.data,Ee={topic:me,message:be,publishedAt:ve};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(Cr$1({type:"event",event:ye.id},Ee)),this.events.emit(ye.id,Ee),await this.acknowledgePayload(e),await this.onMessageEvent(Ee)}else isJsonRpcResponse(e)&&this.events.emit(D$4.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(D$4.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const ye=formatJsonRpcResult(e.id,!0);await this.provider.connection.send(ye)}unregisterProviderListeners(){this.provider.off(P$2.payload,this.onPayloadHandler),this.provider.off(P$2.connect,this.onConnectHandler),this.provider.off(P$2.disconnect,this.onDisconnectHandler),this.provider.off(P$2.error,this.onProviderErrorHandler)}async registerEventListeners(){this.events.on(D$4.connection_stalled,()=>{this.restartTransport().catch(ye=>this.logger.error(ye))});let e=await Zt$1();Xt$1(async ye=>{this.initialized&&e!==ye&&(e=ye,ye?await this.restartTransport().catch(me=>this.logger.error(me)):(this.hasExperiencedNetworkDisruption=!0,await this.transportClose().catch(me=>this.logger.error(me))))})}onProviderDisconnect(){this.events.emit(D$4.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||(this.logger.info("attemptToReconnect called. Connecting..."),setTimeout(async()=>{await this.restartTransport().catch(e=>this.logger.error(e))},cjs$4.toMiliseconds(ut$2)))}isInitialized(){if(!this.initialized){const{message:e}=N$4("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectionAttemptInProgress)return await new Promise(e=>{const ye=setInterval(()=>{this.connected&&(clearInterval(ye),e())},this.connectionStatusPollingInterval)});await this.restartTransport()}}};var Rr$1=Object.defineProperty,zt$2=Object.getOwnPropertySymbols,_r$1=Object.prototype.hasOwnProperty,Tr$1=Object.prototype.propertyIsEnumerable,Nt$2=(fe,e,ye)=>e in fe?Rr$1(fe,e,{enumerable:!0,configurable:!0,writable:!0,value:ye}):fe[e]=ye,Lt$2=(fe,e)=>{for(var ye in e||(e={}))_r$1.call(e,ye)&&Nt$2(fe,ye,e[ye]);if(zt$2)for(var ye of zt$2(e))Tr$1.call(e,ye)&&Nt$2(fe,ye,e[ye]);return fe};let Ut$1=class extends p$5{constructor(e,ye,me,be=x$2,ve=void 0){super(e,ye,me,be),this.core=e,this.logger=ye,this.name=me,this.map=new Map,this.version=gt$2,this.cached=[],this.initialized=!1,this.storagePrefix=x$2,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(Ee=>{this.getKey&&Ee!==null&&!w$6(Ee)?this.map.set(this.getKey(Ee),Ee):Dt$3(Ee)?this.map.set(Ee.id,Ee):kt$3(Ee)&&this.map.set(Ee.topic,Ee)}),this.cached=[],this.initialized=!0)},this.set=async(Ee,Oe)=>{this.isInitialized(),this.map.has(Ee)?await this.update(Ee,Oe):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:Ee,value:Oe}),this.map.set(Ee,Oe),await this.persist())},this.get=Ee=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:Ee}),this.getData(Ee)),this.getAll=Ee=>(this.isInitialized(),Ee?this.values.filter(Oe=>Object.keys(Ee).every(xe=>Bi$1(Oe[xe],Ee[xe]))):this.values),this.update=async(Ee,Oe)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:Ee,update:Oe});const xe=Lt$2(Lt$2({},this.getData(Ee)),Oe);this.map.set(Ee,xe),await this.persist()},this.delete=async(Ee,Oe)=>{this.isInitialized(),this.map.has(Ee)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:Ee,reason:Oe}),this.map.delete(Ee),await this.persist())},this.logger=cjs$3.generateChildLogger(ye,this.name),this.storagePrefix=be,this.getKey=ve}get context(){return cjs$3.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const ye=this.map.get(e);if(!ye){const{message:me}=N$4("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(me),new Error(me)}return ye}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:ye}=N$4("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(ye),new Error(ye)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=N$4("NOT_INITIALIZED",this.name);throw new Error(e)}}},Ft$2=class{constructor(e,ye){this.core=e,this.logger=ye,this.name=mt$3,this.version=ft$3,this.events=new c$4,this.initialized=!1,this.storagePrefix=x$2,this.ignoredPayloadTypes=[_$4],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:me})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...me])]},this.create=async()=>{this.isInitialized();const me=Dn$1(),be=await this.core.crypto.setSymKey(me),ve=lt$3(cjs$4.FIVE_MINUTES),Ee={protocol:at$3},Oe={topic:be,expiry:ve,relay:Ee,active:!1},xe=Nt$3({protocol:this.core.protocol,version:this.core.version,topic:be,symKey:me,relay:Ee});return await this.pairings.set(be,Oe),await this.core.relayer.subscribe(be),this.core.expirer.set(be,ve),{topic:be,uri:xe}},this.pair=async me=>{this.isInitialized(),this.isValidPair(me);const{topic:be,symKey:ve,relay:Ee}=bt$3(me.uri);if(this.pairings.keys.includes(be))throw new Error(`Pairing already exists: ${be}`);if(this.core.crypto.hasKeys(be))throw new Error(`Keychain already exists: ${be}`);const Oe=lt$3(cjs$4.FIVE_MINUTES),xe={topic:be,relay:Ee,expiry:Oe,active:!1};return await this.pairings.set(be,xe),await this.core.crypto.setSymKey(ve,be),await this.core.relayer.subscribe(be,{relay:Ee}),this.core.expirer.set(be,Oe),me.activatePairing&&await this.activate({topic:be}),xe},this.activate=async({topic:me})=>{this.isInitialized();const be=lt$3(cjs$4.THIRTY_DAYS);await this.pairings.update(me,{active:!0,expiry:be}),this.core.expirer.set(me,be)},this.ping=async me=>{this.isInitialized(),await this.isValidPing(me);const{topic:be}=me;if(this.pairings.keys.includes(be)){const ve=await this.sendRequest(be,"wc_pairingPing",{}),{done:Ee,resolve:Oe,reject:xe}=st$2();this.events.once(ft$4("pairing_ping",ve),({error:gr})=>{gr?xe(gr):Oe()}),await Ee()}},this.updateExpiry=async({topic:me,expiry:be})=>{this.isInitialized(),await this.pairings.update(me,{expiry:be})},this.updateMetadata=async({topic:me,metadata:be})=>{this.isInitialized(),await this.pairings.update(me,{peerMetadata:be})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async me=>{this.isInitialized(),await this.isValidDisconnect(me);const{topic:be}=me;this.pairings.keys.includes(be)&&(await this.sendRequest(be,"wc_pairingDelete",U$6("USER_DISCONNECTED")),await this.deletePairing(be))},this.sendRequest=async(me,be,ve)=>{const Ee=formatJsonRpcRequest(be,ve),Oe=await this.core.crypto.encode(me,Ee),xe=F$4[be].req;return this.core.history.set(me,Ee),this.core.relayer.publish(me,Oe,xe),Ee.id},this.sendResult=async(me,be,ve)=>{const Ee=formatJsonRpcResult(me,ve),Oe=await this.core.crypto.encode(be,Ee),xe=await this.core.history.get(be,me),gr=F$4[xe.request.method].res;await this.core.relayer.publish(be,Oe,gr),await this.core.history.resolve(Ee)},this.sendError=async(me,be,ve)=>{const Ee=formatJsonRpcError(me,ve),Oe=await this.core.crypto.encode(be,Ee),xe=await this.core.history.get(be,me),gr=F$4[xe.request.method]?F$4[xe.request.method].res:F$4.unregistered_method.res;await this.core.relayer.publish(be,Oe,gr),await this.core.history.resolve(Ee)},this.deletePairing=async(me,be)=>{await this.core.relayer.unsubscribe(me),await Promise.all([this.pairings.delete(me,U$6("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(me),be?Promise.resolve():this.core.expirer.del(me)])},this.cleanup=async()=>{const me=this.pairings.getAll().filter(be=>dt$3(be.expiry));await Promise.all(me.map(be=>this.deletePairing(be.topic)))},this.onRelayEventRequest=me=>{const{topic:be,payload:ve}=me;switch(ve.method){case"wc_pairingPing":return this.onPairingPingRequest(be,ve);case"wc_pairingDelete":return this.onPairingDeleteRequest(be,ve);default:return this.onUnknownRpcMethodRequest(be,ve)}},this.onRelayEventResponse=async me=>{const{topic:be,payload:ve}=me,Ee=(await this.core.history.get(be,ve.id)).request.method;switch(Ee){case"wc_pairingPing":return this.onPairingPingResponse(be,ve);default:return this.onUnknownRpcMethodResponse(Ee)}},this.onPairingPingRequest=async(me,be)=>{const{id:ve}=be;try{this.isValidPing({topic:me}),await this.sendResult(ve,me,!0),this.events.emit("pairing_ping",{id:ve,topic:me})}catch(Ee){await this.sendError(ve,me,Ee),this.logger.error(Ee)}},this.onPairingPingResponse=(me,be)=>{const{id:ve}=be;setTimeout(()=>{isJsonRpcResult(be)?this.events.emit(ft$4("pairing_ping",ve),{}):isJsonRpcError(be)&&this.events.emit(ft$4("pairing_ping",ve),{error:be.error})},500)},this.onPairingDeleteRequest=async(me,be)=>{const{id:ve}=be;try{this.isValidDisconnect({topic:me}),await this.deletePairing(me),this.events.emit("pairing_delete",{id:ve,topic:me})}catch(Ee){await this.sendError(ve,me,Ee),this.logger.error(Ee)}},this.onUnknownRpcMethodRequest=async(me,be)=>{const{id:ve,method:Ee}=be;try{if(this.registeredMethods.includes(Ee))return;const Oe=U$6("WC_METHOD_UNSUPPORTED",Ee);await this.sendError(ve,me,Oe),this.logger.error(Oe)}catch(Oe){await this.sendError(ve,me,Oe),this.logger.error(Oe)}},this.onUnknownRpcMethodResponse=me=>{this.registeredMethods.includes(me)||this.logger.error(U$6("WC_METHOD_UNSUPPORTED",me))},this.isValidPair=me=>{if(!xt$3(me)){const{message:be}=N$4("MISSING_OR_INVALID",`pair() params: ${me}`);throw new Error(be)}if(!jt$2(me.uri)){const{message:be}=N$4("MISSING_OR_INVALID",`pair() uri: ${me.uri}`);throw new Error(be)}},this.isValidPing=async me=>{if(!xt$3(me)){const{message:ve}=N$4("MISSING_OR_INVALID",`ping() params: ${me}`);throw new Error(ve)}const{topic:be}=me;await this.isValidPairingTopic(be)},this.isValidDisconnect=async me=>{if(!xt$3(me)){const{message:ve}=N$4("MISSING_OR_INVALID",`disconnect() params: ${me}`);throw new Error(ve)}const{topic:be}=me;await this.isValidPairingTopic(be)},this.isValidPairingTopic=async me=>{if(!h$6(me,!1)){const{message:be}=N$4("MISSING_OR_INVALID",`pairing topic should be a string: ${me}`);throw new Error(be)}if(!this.pairings.keys.includes(me)){const{message:be}=N$4("NO_MATCHING_KEY",`pairing topic doesn't exist: ${me}`);throw new Error(be)}if(dt$3(this.pairings.get(me).expiry)){await this.deletePairing(me);const{message:be}=N$4("EXPIRED",`pairing topic: ${me}`);throw new Error(be)}},this.core=e,this.logger=cjs$3.generateChildLogger(ye,this.name),this.pairings=new Ut$1(this.core,this.logger,this.name,this.storagePrefix)}get context(){return cjs$3.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=N$4("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(D$4.message,async e=>{const{topic:ye,message:me}=e;if(!this.pairings.keys.includes(ye)||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(me)))return;const be=await this.core.crypto.decode(ye,me);try{isJsonRpcRequest(be)?(this.core.history.set(ye,be),this.onRelayEventRequest({topic:ye,payload:be})):isJsonRpcResponse(be)&&(await this.core.history.resolve(be),await this.onRelayEventResponse({topic:ye,payload:be}),this.core.history.delete(ye,be.id))}catch(ve){this.logger.error(ve)}})}registerExpirerEvents(){this.core.expirer.on(w$5.expired,async e=>{const{topic:ye}=ut$3(e.target);ye&&this.pairings.keys.includes(ye)&&(await this.deletePairing(ye,!0),this.events.emit("pairing_expire",{topic:ye}))})}},$t$1=class extends h$7{constructor(e,ye){super(e,ye),this.core=e,this.logger=ye,this.records=new Map,this.events=new c$4.EventEmitter,this.name=Et$2,this.version=wt$2,this.cached=[],this.initialized=!1,this.storagePrefix=x$2,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(me=>this.records.set(me.id,me)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(me,be,ve)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:me,request:be,chainId:ve}),this.records.has(be.id))return;const Ee={id:be.id,topic:me,request:{method:be.method,params:be.params||null},chainId:ve,expiry:lt$3(cjs$4.THIRTY_DAYS)};this.records.set(Ee.id,Ee),this.events.emit(R$1.created,Ee)},this.resolve=async me=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:me}),!this.records.has(me.id))return;const be=await this.getRecord(me.id);typeof be.response>"u"&&(be.response=isJsonRpcError(me)?{error:me.error}:{result:me.result},this.records.set(be.id,be),this.events.emit(R$1.updated,be))},this.get=async(me,be)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:me,id:be}),await this.getRecord(be)),this.delete=(me,be)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:be}),this.values.forEach(ve=>{if(ve.topic===me){if(typeof be<"u"&&ve.id!==be)return;this.records.delete(ve.id),this.events.emit(R$1.deleted,ve)}})},this.exists=async(me,be)=>(this.isInitialized(),this.records.has(be)?(await this.getRecord(be)).topic===me:!1),this.on=(me,be)=>{this.events.on(me,be)},this.once=(me,be)=>{this.events.once(me,be)},this.off=(me,be)=>{this.events.off(me,be)},this.removeListener=(me,be)=>{this.events.removeListener(me,be)},this.logger=cjs$3.generateChildLogger(ye,this.name)}get context(){return cjs$3.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(ye=>{if(typeof ye.response<"u")return;const me={topic:ye.topic,request:formatJsonRpcRequest(ye.request.method,ye.request.params,ye.id),chainId:ye.chainId};return e.push(me)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const ye=this.records.get(e);if(!ye){const{message:me}=N$4("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(me)}return ye}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(R$1.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:ye}=N$4("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(ye),new Error(ye)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(R$1.created,e=>{const ye=R$1.created;this.logger.info(`Emitting ${ye}`),this.logger.debug({type:"event",event:ye,record:e}),this.persist()}),this.events.on(R$1.updated,e=>{const ye=R$1.updated;this.logger.info(`Emitting ${ye}`),this.logger.debug({type:"event",event:ye,record:e}),this.persist()}),this.events.on(R$1.deleted,e=>{const ye=R$1.deleted;this.logger.info(`Emitting ${ye}`),this.logger.debug({type:"event",event:ye,record:e}),this.persist()}),this.core.heartbeat.on(cjs$5.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.records.forEach(e=>{cjs$4.toMiliseconds(e.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${e.id}`),this.delete(e.topic,e.id))})}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=N$4("NOT_INITIALIZED",this.name);throw new Error(e)}}},Mt$2=class extends E$3{constructor(e,ye){super(e,ye),this.core=e,this.logger=ye,this.expirations=new Map,this.events=new c$4.EventEmitter,this.name=vt$2,this.version=It$2,this.cached=[],this.initialized=!1,this.storagePrefix=x$2,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(me=>this.expirations.set(me.target,me)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=me=>{try{const be=this.formatTarget(me);return typeof this.getExpiration(be)<"u"}catch{return!1}},this.set=(me,be)=>{this.isInitialized();const ve=this.formatTarget(me),Ee={target:ve,expiry:be};this.expirations.set(ve,Ee),this.checkExpiry(ve,Ee),this.events.emit(w$5.created,{target:ve,expiration:Ee})},this.get=me=>{this.isInitialized();const be=this.formatTarget(me);return this.getExpiration(be)},this.del=me=>{if(this.isInitialized(),this.has(me)){const be=this.formatTarget(me),ve=this.getExpiration(be);this.expirations.delete(be),this.events.emit(w$5.deleted,{target:be,expiration:ve})}},this.on=(me,be)=>{this.events.on(me,be)},this.once=(me,be)=>{this.events.once(me,be)},this.off=(me,be)=>{this.events.off(me,be)},this.removeListener=(me,be)=>{this.events.removeListener(me,be)},this.logger=cjs$3.generateChildLogger(ye,this.name)}get context(){return cjs$3.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return ct$2(e);if(typeof e=="number")return at$4(e);const{message:ye}=N$4("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(ye)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(w$5.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:ye}=N$4("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(ye),new Error(ye)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const ye=this.expirations.get(e);if(!ye){const{message:me}=N$4("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(me),new Error(me)}return ye}checkExpiry(e,ye){const{expiry:me}=ye;cjs$4.toMiliseconds(me)-Date.now()<=0&&this.expire(e,ye)}expire(e,ye){this.expirations.delete(e),this.events.emit(w$5.expired,{target:e,expiration:ye})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,ye)=>this.checkExpiry(ye,e))}registerEventListeners(){this.core.heartbeat.on(cjs$5.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(w$5.created,e=>{const ye=w$5.created;this.logger.info(`Emitting ${ye}`),this.logger.debug({type:"event",event:ye,data:e}),this.persist()}),this.events.on(w$5.expired,e=>{const ye=w$5.expired;this.logger.info(`Emitting ${ye}`),this.logger.debug({type:"event",event:ye,data:e}),this.persist()}),this.events.on(w$5.deleted,e=>{const ye=w$5.deleted;this.logger.info(`Emitting ${ye}`),this.logger.debug({type:"event",event:ye,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=N$4("NOT_INITIALIZED",this.name);throw new Error(e)}}},kt$2=class extends y$3{constructor(e,ye){super(e,ye),this.projectId=e,this.logger=ye,this.name=X$4,this.initialized=!1,this.queue=[],this.verifyDisabled=!1,this.init=async me=>{if(this.verifyDisabled||H$4()||!q$2())return;const be=(me==null?void 0:me.verifyUrl)||Q$4;this.verifyUrl!==be&&this.removeIframe(),this.verifyUrl=be;try{await this.createIframe()}catch(ve){this.logger.warn(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.warn(ve)}if(!this.initialized){this.removeIframe(),this.verifyUrl=ge$1;try{await this.createIframe()}catch(ve){this.logger.error(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.error(ve),this.verifyDisabled=!0}}},this.register=async me=>{this.initialized?this.sendPost(me.attestationId):(this.addToQueue(me.attestationId),await this.init())},this.resolve=async me=>{if(this.isDevEnv)return"";const be=(me==null?void 0:me.verifyUrl)||Q$4;let ve="";try{ve=await this.fetchAttestation(me.attestationId,be)}catch(Ee){this.logger.warn(`failed to resolve attestation: ${me.attestationId} from url: ${be}`),this.logger.warn(Ee),ve=await this.fetchAttestation(me.attestationId,ge$1)}return ve},this.fetchAttestation=async(me,be)=>{var ve;this.logger.info(`resolving attestation: ${me} from url: ${be}`);const Ee=this.startAbortTimer(cjs$4.ONE_SECOND*2),Oe=await fetch(`${be}/attestation/${me}`,{signal:this.abortController.signal});return clearTimeout(Ee),Oe.status===200?(ve=await Oe.json())==null?void 0:ve.origin:""},this.addToQueue=me=>{this.queue.push(me)},this.processQueue=()=>{this.queue.length!==0&&(this.queue.forEach(me=>this.sendPost(me)),this.queue=[])},this.sendPost=me=>{var be;try{if(!this.iframe)return;(be=this.iframe.contentWindow)==null||be.postMessage(me,"*"),this.logger.info(`postMessage sent: ${me} ${this.verifyUrl}`)}catch{}},this.createIframe=async()=>{let me;const be=ve=>{ve.data==="verify_ready"&&(this.initialized=!0,this.processQueue(),window.removeEventListener("message",be),me())};await Promise.race([new Promise(ve=>{if(document.getElementById(X$4))return ve();window.addEventListener("message",be);const Ee=document.createElement("iframe");Ee.id=X$4,Ee.src=`${this.verifyUrl}/${this.projectId}`,Ee.style.display="none",document.body.append(Ee),this.iframe=Ee,me=ve}),new Promise((ve,Ee)=>setTimeout(()=>{window.removeEventListener("message",be),Ee("verify iframe load timeout")},cjs$4.toMiliseconds(cjs$4.FIVE_SECONDS)))])},this.removeIframe=()=>{this.iframe&&(this.iframe.remove(),this.iframe=void 0,this.initialized=!1)},this.logger=cjs$3.generateChildLogger(ye,this.name),this.verifyUrl=Q$4,this.abortController=new AbortController,this.isDevEnv=te$3()&&process.env.IS_VITEST}get context(){return cjs$3.getLoggerContext(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),cjs$4.toMiliseconds(e))}};var Sr$1=Object.defineProperty,Kt$2=Object.getOwnPropertySymbols,Pr$1=Object.prototype.hasOwnProperty,Or$1=Object.prototype.propertyIsEnumerable,Bt$2=(fe,e,ye)=>e in fe?Sr$1(fe,e,{enumerable:!0,configurable:!0,writable:!0,value:ye}):fe[e]=ye,Vt$2=(fe,e)=>{for(var ye in e||(e={}))Pr$1.call(e,ye)&&Bt$2(fe,ye,e[ye]);if(Kt$2)for(var ye of Kt$2(e))Or$1.call(e,ye)&&Bt$2(fe,ye,e[ye]);return fe};let Z$2=class la extends n$2{constructor(e){super(e),this.protocol=ce$4,this.version=Je$2,this.name=W$2,this.events=new c$4.EventEmitter,this.initialized=!1,this.on=(me,be)=>this.events.on(me,be),this.once=(me,be)=>this.events.once(me,be),this.off=(me,be)=>this.events.off(me,be),this.removeListener=(me,be)=>this.events.removeListener(me,be),this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||le$3;const ye=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:cjs$3.pino(cjs$3.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||We$2.logger}));this.logger=cjs$3.generateChildLogger(ye,this.name),this.heartbeat=new cjs$5.HeartBeat,this.crypto=new Rt$1(this,this.logger,e==null?void 0:e.keychain),this.history=new $t$1(this,this.logger),this.expirer=new Mt$2(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new h$8(Vt$2(Vt$2({},Xe$1),e==null?void 0:e.storageOptions)),this.relayer=new At$1({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new Ft$2(this,this.logger),this.verify=new kt$2(this.projectId||"",this.logger)}static async init(e){const ye=new la(e);await ye.initialize();const me=await ye.crypto.getClientId();return await ye.storage.setItem(pt$3,me),ye}get context(){return cjs$3.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}};const xr$1=Z$2,J$1="wc",X$3=2,F$3="client",G$2=`${J$1}@${X$3}:${F$3}:`,M$1={name:F$3,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},H$3="WALLETCONNECT_DEEPLINK_CHOICE",ne$1="proposal",oe$1="Proposal expired",ae$2="session",C$2=cjs$4.SEVEN_DAYS,ce$3="engine",V$3={wc_sessionPropose:{req:{ttl:cjs$4.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:cjs$4.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:cjs$4.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:cjs$4.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:cjs$4.ONE_DAY,prompt:!1,tag:1104},res:{ttl:cjs$4.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:cjs$4.ONE_DAY,prompt:!1,tag:1106},res:{ttl:cjs$4.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:cjs$4.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:cjs$4.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:cjs$4.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:cjs$4.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:cjs$4.ONE_DAY,prompt:!1,tag:1112},res:{ttl:cjs$4.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:cjs$4.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:cjs$4.THIRTY_SECONDS,prompt:!1,tag:1115}}},U$5={min:cjs$4.FIVE_MINUTES,max:cjs$4.SEVEN_DAYS},E$2={idle:"IDLE",active:"ACTIVE"},le$2="request",pe$2=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var rs$1=Object.defineProperty,ns$1=Object.defineProperties,os$2=Object.getOwnPropertyDescriptors,he$2=Object.getOwnPropertySymbols,as$2=Object.prototype.hasOwnProperty,cs$2=Object.prototype.propertyIsEnumerable,de$2=(fe,e,ye)=>e in fe?rs$1(fe,e,{enumerable:!0,configurable:!0,writable:!0,value:ye}):fe[e]=ye,g$4=(fe,e)=>{for(var ye in e||(e={}))as$2.call(e,ye)&&de$2(fe,ye,e[ye]);if(he$2)for(var ye of he$2(e))cs$2.call(e,ye)&&de$2(fe,ye,e[ye]);return fe},b$3=(fe,e)=>ns$1(fe,os$2(e));let ls$2=class extends S$3{constructor(e){super(e),this.name=ce$3,this.events=new c$4,this.initialized=!1,this.ignoredPayloadTypes=[_$4],this.requestQueue={state:E$2.idle,queue:[]},this.sessionRequestQueue={state:E$2.idle,queue:[]},this.requestQueueDelay=cjs$4.ONE_SECOND,this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.client.core.pairing.register({methods:Object.keys(V$3)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},cjs$4.toMiliseconds(this.requestQueueDelay)))},this.connect=async ye=>{await this.isInitialized();const me=b$3(g$4({},ye),{requiredNamespaces:ye.requiredNamespaces||{},optionalNamespaces:ye.optionalNamespaces||{}});await this.isValidConnect(me);const{pairingTopic:be,requiredNamespaces:ve,optionalNamespaces:Ee,sessionProperties:Oe,relays:xe}=me;let gr=be,we,Se=!1;if(gr&&(Se=this.client.core.pairing.pairings.get(gr).active),!gr||!Se){const{topic:qr,uri:Hr}=await this.client.core.pairing.create();gr=qr,we=Hr}const $r=await this.client.core.crypto.generateKeyPair(),Fr=g$4({requiredNamespaces:ve,optionalNamespaces:Ee,relays:xe??[{protocol:at$3}],proposer:{publicKey:$r,metadata:this.client.metadata}},Oe&&{sessionProperties:Oe}),{reject:Br,resolve:Vr,done:oo}=st$2(cjs$4.FIVE_MINUTES,oe$1);if(this.events.once(ft$4("session_connect"),async({error:qr,session:Hr})=>{if(qr)Br(qr);else if(Hr){Hr.self.publicKey=$r;const Yr=b$3(g$4({},Hr),{requiredNamespaces:Hr.requiredNamespaces,optionalNamespaces:Hr.optionalNamespaces});await this.client.session.set(Hr.topic,Yr),await this.setExpiry(Hr.topic,Hr.expiry),gr&&await this.client.core.pairing.updateMetadata({topic:gr,metadata:Hr.peer.metadata}),Vr(Yr)}}),!gr){const{message:qr}=N$4("NO_MATCHING_KEY",`connect() pairing topic: ${gr}`);throw new Error(qr)}const so=await this.sendRequest({topic:gr,method:"wc_sessionPropose",params:Fr}),kr=lt$3(cjs$4.FIVE_MINUTES);return await this.setProposal(so,g$4({id:so,expiry:kr},Fr)),{uri:we,approval:oo}},this.pair=async ye=>(await this.isInitialized(),await this.client.core.pairing.pair(ye)),this.approve=async ye=>{await this.isInitialized(),await this.isValidApprove(ye);const{id:me,relayProtocol:be,namespaces:ve,sessionProperties:Ee}=ye,Oe=this.client.proposal.get(me);let{pairingTopic:xe,proposer:gr,requiredNamespaces:we,optionalNamespaces:Se}=Oe;xe=xe||"",B$3(we)||(we=At$2(ve,"approve()"));const $r=await this.client.core.crypto.generateKeyPair(),Fr=gr.publicKey,Br=await this.client.core.crypto.generateSharedKey($r,Fr);xe&&me&&(await this.client.core.pairing.updateMetadata({topic:xe,metadata:gr.metadata}),await this.sendResult({id:me,topic:xe,result:{relay:{protocol:be??"irn"},responderPublicKey:$r}}),await this.client.proposal.delete(me,U$6("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:xe}));const Vr=g$4({relay:{protocol:be??"irn"},namespaces:ve,requiredNamespaces:we,optionalNamespaces:Se,pairingTopic:xe,controller:{publicKey:$r,metadata:this.client.metadata},expiry:lt$3(C$2)},Ee&&{sessionProperties:Ee});await this.client.core.relayer.subscribe(Br),await this.sendRequest({topic:Br,method:"wc_sessionSettle",params:Vr,throwOnFailedPublish:!0});const oo=b$3(g$4({},Vr),{topic:Br,pairingTopic:xe,acknowledged:!1,self:Vr.controller,peer:{publicKey:gr.publicKey,metadata:gr.metadata},controller:$r});return await this.client.session.set(Br,oo),await this.setExpiry(Br,lt$3(C$2)),{topic:Br,acknowledged:()=>new Promise(so=>setTimeout(()=>so(this.client.session.get(Br)),500))}},this.reject=async ye=>{await this.isInitialized(),await this.isValidReject(ye);const{id:me,reason:be}=ye,{pairingTopic:ve}=this.client.proposal.get(me);ve&&(await this.sendError(me,ve,be),await this.client.proposal.delete(me,U$6("USER_DISCONNECTED")))},this.update=async ye=>{await this.isInitialized(),await this.isValidUpdate(ye);const{topic:me,namespaces:be}=ye,ve=await this.sendRequest({topic:me,method:"wc_sessionUpdate",params:{namespaces:be}}),{done:Ee,resolve:Oe,reject:xe}=st$2();return this.events.once(ft$4("session_update",ve),({error:gr})=>{gr?xe(gr):Oe()}),await this.client.session.update(me,{namespaces:be}),{acknowledged:Ee}},this.extend=async ye=>{await this.isInitialized(),await this.isValidExtend(ye);const{topic:me}=ye,be=await this.sendRequest({topic:me,method:"wc_sessionExtend",params:{}}),{done:ve,resolve:Ee,reject:Oe}=st$2();return this.events.once(ft$4("session_extend",be),({error:xe})=>{xe?Oe(xe):Ee()}),await this.setExpiry(me,lt$3(C$2)),{acknowledged:ve}},this.request=async ye=>{await this.isInitialized(),await this.isValidRequest(ye);const{chainId:me,request:be,topic:ve,expiry:Ee}=ye,Oe=payloadId(),{done:xe,resolve:gr,reject:we}=st$2(Ee);return this.events.once(ft$4("session_request",Oe),({error:Se,result:$r})=>{Se?we(Se):gr($r)}),await Promise.all([new Promise(async Se=>{await this.sendRequest({clientRpcId:Oe,topic:ve,method:"wc_sessionRequest",params:{request:be,chainId:me},expiry:Ee,throwOnFailedPublish:!0}).catch($r=>we($r)),this.client.events.emit("session_request_sent",{topic:ve,request:be,chainId:me,id:Oe}),Se()}),new Promise(async Se=>{const $r=await this.client.core.storage.getItem(H$3);pt$4({id:Oe,topic:ve,wcDeepLink:$r}),Se()}),xe()]).then(Se=>Se[2])},this.respond=async ye=>{await this.isInitialized(),await this.isValidRespond(ye);const{topic:me,response:be}=ye,{id:ve}=be;isJsonRpcResult(be)?await this.sendResult({id:ve,topic:me,result:be.result,throwOnFailedPublish:!0}):isJsonRpcError(be)&&await this.sendError(ve,me,be.error),this.cleanupAfterResponse(ye)},this.ping=async ye=>{await this.isInitialized(),await this.isValidPing(ye);const{topic:me}=ye;if(this.client.session.keys.includes(me)){const be=await this.sendRequest({topic:me,method:"wc_sessionPing",params:{}}),{done:ve,resolve:Ee,reject:Oe}=st$2();this.events.once(ft$4("session_ping",be),({error:xe})=>{xe?Oe(xe):Ee()}),await ve()}else this.client.core.pairing.pairings.keys.includes(me)&&await this.client.core.pairing.ping({topic:me})},this.emit=async ye=>{await this.isInitialized(),await this.isValidEmit(ye);const{topic:me,event:be,chainId:ve}=ye;await this.sendRequest({topic:me,method:"wc_sessionEvent",params:{event:be,chainId:ve}})},this.disconnect=async ye=>{await this.isInitialized(),await this.isValidDisconnect(ye);const{topic:me}=ye;this.client.session.keys.includes(me)?(await this.sendRequest({topic:me,method:"wc_sessionDelete",params:U$6("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession(me)):await this.client.core.pairing.disconnect({topic:me})},this.find=ye=>(this.isInitialized(),this.client.session.getAll().filter(me=>$t$2(me,ye))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=async ye=>{if(ye.pairingTopic)try{const me=this.client.core.pairing.pairings.get(ye.pairingTopic),be=this.client.core.pairing.pairings.getAll().filter(ve=>{var Ee,Oe;return((Ee=ve.peerMetadata)==null?void 0:Ee.url)&&((Oe=ve.peerMetadata)==null?void 0:Oe.url)===ye.peer.metadata.url&&ve.topic&&ve.topic!==me.topic});if(be.length===0)return;this.client.logger.info(`Cleaning up ${be.length} duplicate pairing(s)`),await Promise.all(be.map(ve=>this.client.core.pairing.disconnect({topic:ve.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(me){this.client.logger.error(me)}},this.deleteSession=async(ye,me)=>{const{self:be}=this.client.session.get(ye);await this.client.core.relayer.unsubscribe(ye),this.client.session.delete(ye,U$6("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(be.publicKey)&&await this.client.core.crypto.deleteKeyPair(be.publicKey),this.client.core.crypto.keychain.has(ye)&&await this.client.core.crypto.deleteSymKey(ye),me||this.client.core.expirer.del(ye),this.client.core.storage.removeItem(H$3).catch(ve=>this.client.logger.warn(ve))},this.deleteProposal=async(ye,me)=>{await Promise.all([this.client.proposal.delete(ye,U$6("USER_DISCONNECTED")),me?Promise.resolve():this.client.core.expirer.del(ye)])},this.deletePendingSessionRequest=async(ye,me,be=!1)=>{await Promise.all([this.client.pendingRequest.delete(ye,me),be?Promise.resolve():this.client.core.expirer.del(ye)]),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(ve=>ve.id!==ye),be&&(this.sessionRequestQueue.state=E$2.idle)},this.setExpiry=async(ye,me)=>{this.client.session.keys.includes(ye)&&await this.client.session.update(ye,{expiry:me}),this.client.core.expirer.set(ye,me)},this.setProposal=async(ye,me)=>{await this.client.proposal.set(ye,me),this.client.core.expirer.set(ye,me.expiry)},this.setPendingSessionRequest=async ye=>{const me=V$3.wc_sessionRequest.req.ttl,{id:be,topic:ve,params:Ee}=ye;await this.client.pendingRequest.set(be,{id:be,topic:ve,params:Ee}),me&&this.client.core.expirer.set(be,lt$3(me))},this.sendRequest=async ye=>{const{topic:me,method:be,params:ve,expiry:Ee,relayRpcId:Oe,clientRpcId:xe,throwOnFailedPublish:gr}=ye,we=formatJsonRpcRequest(be,ve,xe);if(q$2()&&pe$2.includes(be)){const Fr=Mn$1(JSON.stringify(we));this.client.core.verify.register({attestationId:Fr})}const Se=await this.client.core.crypto.encode(me,we),$r=V$3[be].req;return Ee&&($r.ttl=Ee),Oe&&($r.id=Oe),this.client.core.history.set(me,we),gr?($r.internal=b$3(g$4({},$r.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(me,Se,$r)):this.client.core.relayer.publish(me,Se,$r).catch(Fr=>this.client.logger.error(Fr)),we.id},this.sendResult=async ye=>{const{id:me,topic:be,result:ve,throwOnFailedPublish:Ee}=ye,Oe=formatJsonRpcResult(me,ve),xe=await this.client.core.crypto.encode(be,Oe),gr=await this.client.core.history.get(be,me),we=V$3[gr.request.method].res;Ee?(we.internal=b$3(g$4({},we.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(be,xe,we)):this.client.core.relayer.publish(be,xe,we).catch(Se=>this.client.logger.error(Se)),await this.client.core.history.resolve(Oe)},this.sendError=async(ye,me,be)=>{const ve=formatJsonRpcError(ye,be),Ee=await this.client.core.crypto.encode(me,ve),Oe=await this.client.core.history.get(me,ye),xe=V$3[Oe.request.method].res;this.client.core.relayer.publish(me,Ee,xe),await this.client.core.history.resolve(ve)},this.cleanup=async()=>{const ye=[],me=[];this.client.session.getAll().forEach(be=>{dt$3(be.expiry)&&ye.push(be.topic)}),this.client.proposal.getAll().forEach(be=>{dt$3(be.expiry)&&me.push(be.id)}),await Promise.all([...ye.map(be=>this.deleteSession(be)),...me.map(be=>this.deleteProposal(be))])},this.onRelayEventRequest=async ye=>{this.requestQueue.queue.push(ye),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state===E$2.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=E$2.active;const ye=this.requestQueue.queue.shift();if(ye)try{this.processRequest(ye),await new Promise(me=>setTimeout(me,300))}catch(me){this.client.logger.warn(me)}}this.requestQueue.state=E$2.idle},this.processRequest=ye=>{const{topic:me,payload:be}=ye,ve=be.method;switch(ve){case"wc_sessionPropose":return this.onSessionProposeRequest(me,be);case"wc_sessionSettle":return this.onSessionSettleRequest(me,be);case"wc_sessionUpdate":return this.onSessionUpdateRequest(me,be);case"wc_sessionExtend":return this.onSessionExtendRequest(me,be);case"wc_sessionPing":return this.onSessionPingRequest(me,be);case"wc_sessionDelete":return this.onSessionDeleteRequest(me,be);case"wc_sessionRequest":return this.onSessionRequest(me,be);case"wc_sessionEvent":return this.onSessionEventRequest(me,be);default:return this.client.logger.info(`Unsupported request method ${ve}`)}},this.onRelayEventResponse=async ye=>{const{topic:me,payload:be}=ye,ve=(await this.client.core.history.get(me,be.id)).request.method;switch(ve){case"wc_sessionPropose":return this.onSessionProposeResponse(me,be);case"wc_sessionSettle":return this.onSessionSettleResponse(me,be);case"wc_sessionUpdate":return this.onSessionUpdateResponse(me,be);case"wc_sessionExtend":return this.onSessionExtendResponse(me,be);case"wc_sessionPing":return this.onSessionPingResponse(me,be);case"wc_sessionRequest":return this.onSessionRequestResponse(me,be);default:return this.client.logger.info(`Unsupported response method ${ve}`)}},this.onRelayEventUnknownPayload=ye=>{const{topic:me}=ye,{message:be}=N$4("MISSING_OR_INVALID",`Decoded payload on topic ${me} is not identifiable as a JSON-RPC request or a response.`);throw new Error(be)},this.onSessionProposeRequest=async(ye,me)=>{const{params:be,id:ve}=me;try{this.isValidConnect(g$4({},me.params));const Ee=lt$3(cjs$4.FIVE_MINUTES),Oe=g$4({id:ve,pairingTopic:ye,expiry:Ee},be);await this.setProposal(ve,Oe);const xe=Mn$1(JSON.stringify(me)),gr=await this.getVerifyContext(xe,Oe.proposer.metadata);this.client.events.emit("session_proposal",{id:ve,params:Oe,verifyContext:gr})}catch(Ee){await this.sendError(ve,ye,Ee),this.client.logger.error(Ee)}},this.onSessionProposeResponse=async(ye,me)=>{const{id:be}=me;if(isJsonRpcResult(me)){const{result:ve}=me;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:ve});const Ee=this.client.proposal.get(be);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:Ee});const Oe=Ee.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:Oe});const xe=ve.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:xe});const gr=await this.client.core.crypto.generateSharedKey(Oe,xe);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:gr});const we=await this.client.core.relayer.subscribe(gr);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:we}),await this.client.core.pairing.activate({topic:ye})}else isJsonRpcError(me)&&(await this.client.proposal.delete(be,U$6("USER_DISCONNECTED")),this.events.emit(ft$4("session_connect"),{error:me.error}))},this.onSessionSettleRequest=async(ye,me)=>{const{id:be,params:ve}=me;try{this.isValidSessionSettleRequest(ve);const{relay:Ee,controller:Oe,expiry:xe,namespaces:gr,requiredNamespaces:we,optionalNamespaces:Se,sessionProperties:$r,pairingTopic:Fr}=me.params,Br=g$4({topic:ye,relay:Ee,expiry:xe,namespaces:gr,acknowledged:!0,pairingTopic:Fr,requiredNamespaces:we,optionalNamespaces:Se,controller:Oe.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:Oe.publicKey,metadata:Oe.metadata}},$r&&{sessionProperties:$r});await this.sendResult({id:me.id,topic:ye,result:!0}),this.events.emit(ft$4("session_connect"),{session:Br}),this.cleanupDuplicatePairings(Br)}catch(Ee){await this.sendError(be,ye,Ee),this.client.logger.error(Ee)}},this.onSessionSettleResponse=async(ye,me)=>{const{id:be}=me;isJsonRpcResult(me)?(await this.client.session.update(ye,{acknowledged:!0}),this.events.emit(ft$4("session_approve",be),{})):isJsonRpcError(me)&&(await this.client.session.delete(ye,U$6("USER_DISCONNECTED")),this.events.emit(ft$4("session_approve",be),{error:me.error}))},this.onSessionUpdateRequest=async(ye,me)=>{const{params:be,id:ve}=me;try{const Ee=`${ye}_session_update`,Oe=er$3.get(Ee);if(Oe&&this.isRequestOutOfSync(Oe,ve)){this.client.logger.info(`Discarding out of sync request - ${ve}`);return}this.isValidUpdate(g$4({topic:ye},be)),await this.client.session.update(ye,{namespaces:be.namespaces}),await this.sendResult({id:ve,topic:ye,result:!0}),this.client.events.emit("session_update",{id:ve,topic:ye,params:be}),er$3.set(Ee,ve)}catch(Ee){await this.sendError(ve,ye,Ee),this.client.logger.error(Ee)}},this.isRequestOutOfSync=(ye,me)=>parseInt(me.toString().slice(0,-3))<=parseInt(ye.toString().slice(0,-3)),this.onSessionUpdateResponse=(ye,me)=>{const{id:be}=me;isJsonRpcResult(me)?this.events.emit(ft$4("session_update",be),{}):isJsonRpcError(me)&&this.events.emit(ft$4("session_update",be),{error:me.error})},this.onSessionExtendRequest=async(ye,me)=>{const{id:be}=me;try{this.isValidExtend({topic:ye}),await this.setExpiry(ye,lt$3(C$2)),await this.sendResult({id:be,topic:ye,result:!0}),this.client.events.emit("session_extend",{id:be,topic:ye})}catch(ve){await this.sendError(be,ye,ve),this.client.logger.error(ve)}},this.onSessionExtendResponse=(ye,me)=>{const{id:be}=me;isJsonRpcResult(me)?this.events.emit(ft$4("session_extend",be),{}):isJsonRpcError(me)&&this.events.emit(ft$4("session_extend",be),{error:me.error})},this.onSessionPingRequest=async(ye,me)=>{const{id:be}=me;try{this.isValidPing({topic:ye}),await this.sendResult({id:be,topic:ye,result:!0}),this.client.events.emit("session_ping",{id:be,topic:ye})}catch(ve){await this.sendError(be,ye,ve),this.client.logger.error(ve)}},this.onSessionPingResponse=(ye,me)=>{const{id:be}=me;setTimeout(()=>{isJsonRpcResult(me)?this.events.emit(ft$4("session_ping",be),{}):isJsonRpcError(me)&&this.events.emit(ft$4("session_ping",be),{error:me.error})},500)},this.onSessionDeleteRequest=async(ye,me)=>{const{id:be}=me;try{this.isValidDisconnect({topic:ye,reason:me.params}),await Promise.all([new Promise(ve=>{this.client.core.relayer.once(D$4.publish,async()=>{ve(await this.deleteSession(ye))})}),this.sendResult({id:be,topic:ye,result:!0})]),this.client.events.emit("session_delete",{id:be,topic:ye})}catch(ve){this.client.logger.error(ve)}},this.onSessionRequest=async(ye,me)=>{const{id:be,params:ve}=me;try{this.isValidRequest(g$4({topic:ye},ve)),await this.setPendingSessionRequest({id:be,topic:ye,params:ve}),this.addSessionRequestToSessionRequestQueue({id:be,topic:ye,params:ve}),await this.processSessionRequestQueue()}catch(Ee){await this.sendError(be,ye,Ee),this.client.logger.error(Ee)}},this.onSessionRequestResponse=(ye,me)=>{const{id:be}=me;isJsonRpcResult(me)?this.events.emit(ft$4("session_request",be),{result:me.result}):isJsonRpcError(me)&&this.events.emit(ft$4("session_request",be),{error:me.error})},this.onSessionEventRequest=async(ye,me)=>{const{id:be,params:ve}=me;try{const Ee=`${ye}_session_event_${ve.event.name}`,Oe=er$3.get(Ee);if(Oe&&this.isRequestOutOfSync(Oe,be)){this.client.logger.info(`Discarding out of sync request - ${be}`);return}this.isValidEmit(g$4({topic:ye},ve)),this.client.events.emit("session_event",{id:be,topic:ye,params:ve}),er$3.set(Ee,be)}catch(Ee){await this.sendError(be,ye,Ee),this.client.logger.error(Ee)}},this.addSessionRequestToSessionRequestQueue=ye=>{this.sessionRequestQueue.queue.push(ye)},this.cleanupAfterResponse=ye=>{this.deletePendingSessionRequest(ye.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=E$2.idle,this.processSessionRequestQueue()},cjs$4.toMiliseconds(this.requestQueueDelay))},this.processSessionRequestQueue=async()=>{if(this.sessionRequestQueue.state===E$2.active){this.client.logger.info("session request queue is already active.");return}const ye=this.sessionRequestQueue.queue[0];if(!ye){this.client.logger.info("session request queue is empty.");return}try{const{id:me,topic:be,params:ve}=ye,Ee=Mn$1(JSON.stringify(formatJsonRpcRequest("wc_sessionRequest",ve,me))),Oe=this.client.session.get(be),xe=await this.getVerifyContext(Ee,Oe.peer.metadata);this.sessionRequestQueue.state=E$2.active,this.client.events.emit("session_request",{id:me,topic:be,params:ve,verifyContext:xe})}catch(me){this.client.logger.error(me)}},this.isValidConnect=async ye=>{if(!xt$3(ye)){const{message:xe}=N$4("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(ye)}`);throw new Error(xe)}const{pairingTopic:me,requiredNamespaces:be,optionalNamespaces:ve,sessionProperties:Ee,relays:Oe}=ye;if(w$6(me)||await this.isValidPairingTopic(me),!Kt$3(Oe,!0)){const{message:xe}=N$4("MISSING_OR_INVALID",`connect() relays: ${Oe}`);throw new Error(xe)}!w$6(be)&&B$3(be)!==0&&this.validateNamespaces(be,"requiredNamespaces"),!w$6(ve)&&B$3(ve)!==0&&this.validateNamespaces(ve,"optionalNamespaces"),w$6(Ee)||this.validateSessionProps(Ee,"sessionProperties")},this.validateNamespaces=(ye,me)=>{const be=Mt$3(ye,"connect()",me);if(be)throw new Error(be.message)},this.isValidApprove=async ye=>{if(!xt$3(ye))throw new Error(N$4("MISSING_OR_INVALID",`approve() params: ${ye}`).message);const{id:me,namespaces:be,relayProtocol:ve,sessionProperties:Ee}=ye;await this.isValidProposalId(me);const Oe=this.client.proposal.get(me),xe=cn$1(be,"approve()");if(xe)throw new Error(xe.message);const gr=un$1(Oe.requiredNamespaces,be,"approve()");if(gr)throw new Error(gr.message);if(!h$6(ve,!0)){const{message:we}=N$4("MISSING_OR_INVALID",`approve() relayProtocol: ${ve}`);throw new Error(we)}w$6(Ee)||this.validateSessionProps(Ee,"sessionProperties")},this.isValidReject=async ye=>{if(!xt$3(ye)){const{message:ve}=N$4("MISSING_OR_INVALID",`reject() params: ${ye}`);throw new Error(ve)}const{id:me,reason:be}=ye;if(await this.isValidProposalId(me),!Ft$3(be)){const{message:ve}=N$4("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(be)}`);throw new Error(ve)}},this.isValidSessionSettleRequest=ye=>{if(!xt$3(ye)){const{message:gr}=N$4("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${ye}`);throw new Error(gr)}const{relay:me,controller:be,namespaces:ve,expiry:Ee}=ye;if(!an$1(me)){const{message:gr}=N$4("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(gr)}const Oe=Vt$3(be,"onSessionSettleRequest()");if(Oe)throw new Error(Oe.message);const xe=cn$1(ve,"onSessionSettleRequest()");if(xe)throw new Error(xe.message);if(dt$3(Ee)){const{message:gr}=N$4("EXPIRED","onSessionSettleRequest()");throw new Error(gr)}},this.isValidUpdate=async ye=>{if(!xt$3(ye)){const{message:xe}=N$4("MISSING_OR_INVALID",`update() params: ${ye}`);throw new Error(xe)}const{topic:me,namespaces:be}=ye;await this.isValidSessionTopic(me);const ve=this.client.session.get(me),Ee=cn$1(be,"update()");if(Ee)throw new Error(Ee.message);const Oe=un$1(ve.requiredNamespaces,be,"update()");if(Oe)throw new Error(Oe.message)},this.isValidExtend=async ye=>{if(!xt$3(ye)){const{message:be}=N$4("MISSING_OR_INVALID",`extend() params: ${ye}`);throw new Error(be)}const{topic:me}=ye;await this.isValidSessionTopic(me)},this.isValidRequest=async ye=>{if(!xt$3(ye)){const{message:xe}=N$4("MISSING_OR_INVALID",`request() params: ${ye}`);throw new Error(xe)}const{topic:me,request:be,chainId:ve,expiry:Ee}=ye;await this.isValidSessionTopic(me);const{namespaces:Oe}=this.client.session.get(me);if(!Gt$2(Oe,ve)){const{message:xe}=N$4("MISSING_OR_INVALID",`request() chainId: ${ve}`);throw new Error(xe)}if(!Ht$2(be)){const{message:xe}=N$4("MISSING_OR_INVALID",`request() ${JSON.stringify(be)}`);throw new Error(xe)}if(!Wt$1(Oe,ve,be.method)){const{message:xe}=N$4("MISSING_OR_INVALID",`request() method: ${be.method}`);throw new Error(xe)}if(Ee&&!Qt$1(Ee,U$5)){const{message:xe}=N$4("MISSING_OR_INVALID",`request() expiry: ${Ee}. Expiry must be a number (in seconds) between ${U$5.min} and ${U$5.max}`);throw new Error(xe)}},this.isValidRespond=async ye=>{if(!xt$3(ye)){const{message:ve}=N$4("MISSING_OR_INVALID",`respond() params: ${ye}`);throw new Error(ve)}const{topic:me,response:be}=ye;if(await this.isValidSessionTopic(me),!qt$2(be)){const{message:ve}=N$4("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(be)}`);throw new Error(ve)}},this.isValidPing=async ye=>{if(!xt$3(ye)){const{message:be}=N$4("MISSING_OR_INVALID",`ping() params: ${ye}`);throw new Error(be)}const{topic:me}=ye;await this.isValidSessionOrPairingTopic(me)},this.isValidEmit=async ye=>{if(!xt$3(ye)){const{message:Oe}=N$4("MISSING_OR_INVALID",`emit() params: ${ye}`);throw new Error(Oe)}const{topic:me,event:be,chainId:ve}=ye;await this.isValidSessionTopic(me);const{namespaces:Ee}=this.client.session.get(me);if(!Gt$2(Ee,ve)){const{message:Oe}=N$4("MISSING_OR_INVALID",`emit() chainId: ${ve}`);throw new Error(Oe)}if(!Bt$3(be)){const{message:Oe}=N$4("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(be)}`);throw new Error(Oe)}if(!zt$3(Ee,ve,be.name)){const{message:Oe}=N$4("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(be)}`);throw new Error(Oe)}},this.isValidDisconnect=async ye=>{if(!xt$3(ye)){const{message:be}=N$4("MISSING_OR_INVALID",`disconnect() params: ${ye}`);throw new Error(be)}const{topic:me}=ye;await this.isValidSessionOrPairingTopic(me)},this.getVerifyContext=async(ye,me)=>{const be={verified:{verifyUrl:me.verifyUrl||Q$4,validation:"UNKNOWN",origin:me.url||""}};try{const ve=await this.client.core.verify.resolve({attestationId:ye,verifyUrl:me.verifyUrl});ve&&(be.verified.origin=ve,be.verified.validation=ve===new URL(me.url).origin?"VALID":"INVALID")}catch(ve){this.client.logger.error(ve)}return this.client.logger.info(`Verify context: ${JSON.stringify(be)}`),be},this.validateSessionProps=(ye,me)=>{Object.values(ye).forEach(be=>{if(!h$6(be,!1)){const{message:ve}=N$4("MISSING_OR_INVALID",`${me} must be in Record<string, string> format. Received: ${JSON.stringify(be)}`);throw new Error(ve)}})}}async isInitialized(){if(!this.initialized){const{message:e}=N$4("NOT_INITIALIZED",this.name);throw new Error(e)}await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(D$4.message,async e=>{const{topic:ye,message:me}=e;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(me)))return;const be=await this.client.core.crypto.decode(ye,me);try{isJsonRpcRequest(be)?(this.client.core.history.set(ye,be),this.onRelayEventRequest({topic:ye,payload:be})):isJsonRpcResponse(be)?(await this.client.core.history.resolve(be),await this.onRelayEventResponse({topic:ye,payload:be}),this.client.core.history.delete(ye,be.id)):this.onRelayEventUnknownPayload({topic:ye,payload:be})}catch(ve){this.client.logger.error(ve)}})}registerExpirerEvents(){this.client.core.expirer.on(w$5.expired,async e=>{const{topic:ye,id:me}=ut$3(e.target);if(me&&this.client.pendingRequest.keys.includes(me))return await this.deletePendingSessionRequest(me,N$4("EXPIRED"),!0);ye?this.client.session.keys.includes(ye)&&(await this.deleteSession(ye,!0),this.client.events.emit("session_expire",{topic:ye})):me&&(await this.deleteProposal(me,!0),this.client.events.emit("proposal_expire",{id:me}))})}isValidPairingTopic(e){if(!h$6(e,!1)){const{message:ye}=N$4("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(ye)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:ye}=N$4("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(ye)}if(dt$3(this.client.core.pairing.pairings.get(e).expiry)){const{message:ye}=N$4("EXPIRED",`pairing topic: ${e}`);throw new Error(ye)}}async isValidSessionTopic(e){if(!h$6(e,!1)){const{message:ye}=N$4("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(ye)}if(!this.client.session.keys.includes(e)){const{message:ye}=N$4("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(ye)}if(dt$3(this.client.session.get(e).expiry)){await this.deleteSession(e);const{message:ye}=N$4("EXPIRED",`session topic: ${e}`);throw new Error(ye)}}async isValidSessionOrPairingTopic(e){if(this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(h$6(e,!1)){const{message:ye}=N$4("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(ye)}else{const{message:ye}=N$4("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(ye)}}async isValidProposalId(e){if(!Lt$3(e)){const{message:ye}=N$4("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(ye)}if(!this.client.proposal.keys.includes(e)){const{message:ye}=N$4("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(ye)}if(dt$3(this.client.proposal.get(e).expiry)){await this.deleteProposal(e);const{message:ye}=N$4("EXPIRED",`proposal id: ${e}`);throw new Error(ye)}}},ps$2=class extends Ut$1{constructor(e,ye){super(e,ye,ne$1,G$2),this.core=e,this.logger=ye}},hs$2=class extends Ut$1{constructor(e,ye){super(e,ye,ae$2,G$2),this.core=e,this.logger=ye}},ds$2=class extends Ut$1{constructor(e,ye){super(e,ye,le$2,G$2,me=>me.id),this.core=e,this.logger=ye}},Q$3=class ua extends b$4{constructor(e){super(e),this.protocol=J$1,this.version=X$3,this.name=M$1.name,this.events=new c$4.EventEmitter,this.on=(me,be)=>this.events.on(me,be),this.once=(me,be)=>this.events.once(me,be),this.off=(me,be)=>this.events.off(me,be),this.removeListener=(me,be)=>this.events.removeListener(me,be),this.removeAllListeners=me=>this.events.removeAllListeners(me),this.connect=async me=>{try{return await this.engine.connect(me)}catch(be){throw this.logger.error(be.message),be}},this.pair=async me=>{try{return await this.engine.pair(me)}catch(be){throw this.logger.error(be.message),be}},this.approve=async me=>{try{return await this.engine.approve(me)}catch(be){throw this.logger.error(be.message),be}},this.reject=async me=>{try{return await this.engine.reject(me)}catch(be){throw this.logger.error(be.message),be}},this.update=async me=>{try{return await this.engine.update(me)}catch(be){throw this.logger.error(be.message),be}},this.extend=async me=>{try{return await this.engine.extend(me)}catch(be){throw this.logger.error(be.message),be}},this.request=async me=>{try{return await this.engine.request(me)}catch(be){throw this.logger.error(be.message),be}},this.respond=async me=>{try{return await this.engine.respond(me)}catch(be){throw this.logger.error(be.message),be}},this.ping=async me=>{try{return await this.engine.ping(me)}catch(be){throw this.logger.error(be.message),be}},this.emit=async me=>{try{return await this.engine.emit(me)}catch(be){throw this.logger.error(be.message),be}},this.disconnect=async me=>{try{return await this.engine.disconnect(me)}catch(be){throw this.logger.error(be.message),be}},this.find=me=>{try{return this.engine.find(me)}catch(be){throw this.logger.error(be.message),be}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(me){throw this.logger.error(me.message),me}},this.name=(e==null?void 0:e.name)||M$1.name,this.metadata=(e==null?void 0:e.metadata)||zn();const ye=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:cjs$3.pino(cjs$3.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||M$1.logger}));this.core=(e==null?void 0:e.core)||new xr$1(e),this.logger=cjs$3.generateChildLogger(ye,this.name),this.session=new hs$2(this.core,this.logger),this.proposal=new ps$2(this.core,this.logger),this.pendingRequest=new ds$2(this.core,this.logger),this.engine=new ls$2(this)}static async init(e){const ye=new ua(e);return await ye.initialize(),ye}get context(){return cjs$3.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};var P$1=Object.defineProperty,x$1=Object.defineProperties,N$3=Object.getOwnPropertyDescriptors,j$1=Object.getOwnPropertySymbols,U$4=Object.prototype.hasOwnProperty,T$2=Object.prototype.propertyIsEnumerable,W$1=(fe,e,ye)=>e in fe?P$1(fe,e,{enumerable:!0,configurable:!0,writable:!0,value:ye}):fe[e]=ye,q$1=(fe,e)=>{for(var ye in e||(e={}))U$4.call(e,ye)&&W$1(fe,ye,e[ye]);if(j$1)for(var ye of j$1(e))T$2.call(e,ye)&&W$1(fe,ye,e[ye]);return fe},A$2=(fe,e)=>x$1(fe,N$3(e)),S$2=(fe,e,ye)=>{if(!e.has(fe))throw TypeError("Cannot "+ye)},a$2=(fe,e,ye)=>(S$2(fe,e,"read from private field"),ye?ye.call(fe):e.get(fe)),l$1=(fe,e,ye)=>{if(e.has(fe))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(fe):e.set(fe,ye)},y$2=(fe,e,ye,me)=>(S$2(fe,e,"write to private field"),me?me.call(fe,ye):e.set(fe,ye),ye),o=(fe,e,ye)=>(S$2(fe,e,"access private method"),ye),h$5,p$3,w$4,i,u$1,_$3,n$1,r,m$2,g$3;let z$1=class{constructor(e){l$1(this,u$1),l$1(this,n$1),l$1(this,m$2),l$1(this,h$5,void 0),l$1(this,p$3,void 0),l$1(this,w$4,void 0),l$1(this,i,void 0),y$2(this,h$5,e),y$2(this,p$3,o(this,u$1,_$3).call(this)),o(this,n$1,r).call(this)}async connect(e){const{requiredNamespaces:ye,optionalNamespaces:me}=e;return new Promise(async(be,ve)=>{await o(this,n$1,r).call(this);const Ee=a$2(this,p$3).subscribeModal(gr=>{gr.open||(Ee(),ve(new Error("Modal closed")))}),{uri:Oe,approval:xe}=await a$2(this,i).connect(e);if(Oe){const gr=new Set;ye&&Object.values(ye).forEach(({chains:we})=>{we&&we.forEach(Se=>gr.add(Se))}),me&&Object.values(me).forEach(({chains:we})=>{we&&we.forEach(Se=>gr.add(Se))}),await a$2(this,p$3).openModal({uri:Oe,chains:Array.from(gr)})}try{const gr=await xe();be(gr)}catch(gr){ve(gr)}finally{Ee(),a$2(this,p$3).closeModal()}})}async disconnect(e){await o(this,n$1,r).call(this),await a$2(this,i).disconnect(e)}async request(e){return await o(this,n$1,r).call(this),await a$2(this,i).request(e)}async getSessions(){return await o(this,n$1,r).call(this),a$2(this,i).session.getAll()}async getSession(){return await o(this,n$1,r).call(this),a$2(this,i).session.getAll().at(-1)}async onSessionEvent(e){await o(this,n$1,r).call(this),a$2(this,i).on("session_event",e)}async offSessionEvent(e){await o(this,n$1,r).call(this),a$2(this,i).off("session_event",e)}async onSessionUpdate(e){await o(this,n$1,r).call(this),a$2(this,i).on("session_update",e)}async offSessionUpdate(e){await o(this,n$1,r).call(this),a$2(this,i).off("session_update",e)}async onSessionDelete(e){await o(this,n$1,r).call(this),a$2(this,i).on("session_delete",e)}async offSessionDelete(e){await o(this,n$1,r).call(this),a$2(this,i).off("session_delete",e)}async onSessionExpire(e){await o(this,n$1,r).call(this),a$2(this,i).on("session_expire",e)}async offSessionExpire(e){await o(this,n$1,r).call(this),a$2(this,i).off("session_expire",e)}};h$5=new WeakMap,p$3=new WeakMap,w$4=new WeakMap,i=new WeakMap,u$1=new WeakSet,_$3=function(){const{modalOptions:fe,projectId:e}=a$2(this,h$5);return new d$2(A$2(q$1({},fe),{projectId:e}))},n$1=new WeakSet,r=async function(){return a$2(this,i)?!0:(!a$2(this,w$4)&&typeof window<"u"&&y$2(this,w$4,o(this,m$2,g$3).call(this)),a$2(this,w$4))},m$2=new WeakSet,g$3=async function(){y$2(this,i,await Q$3.init({metadata:a$2(this,h$5).metadata,projectId:a$2(this,h$5).projectId,relayUrl:a$2(this,h$5).relayUrl}));const fe=await a$2(this,i).core.crypto.getClientId();try{localStorage.setItem("WCM_WALLETCONNECT_CLIENT_ID",fe)}catch{console.info("Unable to set client id")}};const _t$1={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}};function U$3(fe,e){const{message:ye,code:me}=_t$1[fe];return{message:e?`${ye} ${e}`:ye,code:me}}function generateProvider(fe,e,ye){return{async call(me,be){return await ye.request({chainId:fe,topic:e,request:{method:Methods.JsonRpcCall,params:{method:me,params:be}}})},async getNonce(me){return await ye.request({chainId:fe,topic:e,request:{method:Methods.GetNonce,params:{address:me}}})},async getNextNonce(me){return await ye.request({chainId:fe,topic:e,request:{method:Methods.GetNextNonce,params:{address:me}}})},async getAccountRc(me){return await ye.request({chainId:fe,topic:e,request:{method:Methods.GetAccountRc,params:{address:me}}})},async getTransactionsById(me){return await ye.request({chainId:fe,topic:e,request:{method:Methods.GetTransactionsById,params:{transactionIds:me}}})},async getBlocksById(me){return await ye.request({chainId:fe,topic:e,request:{method:Methods.GetBlocksById,params:{blockIds:me}}})},async getHeadInfo(){return await ye.request({chainId:fe,topic:e,request:{method:Methods.GetHeadInfo,params:{}}})},async getChainId(){return await ye.request({chainId:fe,topic:e,request:{method:Methods.GetChainId,params:{}}})},async getBlocks(me,be=1,ve){return await ye.request({chainId:fe,topic:e,request:{method:Methods.GetBlocks,params:{height:me,numBlocks:be,idRef:ve}}})},async getBlock(me){return await ye.request({chainId:fe,topic:e,request:{method:Methods.GetBlock,params:{height:me}}})},async wait(me,be="byBlock",ve=3e4){return await ye.request({chainId:fe,topic:e,request:{method:Methods.WaitForTransaction,params:{transactionId:me,type:be,timeout:ve}}})},async sendTransaction(me,be=!0){const ve=await ye.request({chainId:fe,topic:e,request:{method:Methods.SendTransaction,params:{transaction:me,broadcast:be}}});return ve.wait=async(Ee="byBlock",Oe=6e4)=>await ye.request({chainId:fe,topic:e,request:{method:Methods.WaitForTransaction,params:{transactionId:ve.id,type:Ee,timeout:Oe}}}),ve},async readContract(me){return await ye.request({chainId:fe,topic:e,request:{method:Methods.ReadContract,params:{operation:me}}})},async submitBlock(me){return await ye.request({chainId:fe,topic:e,request:{method:Methods.SubmitBlock,params:{block:me}}})}}}var lib$2={},indexUtils={},utils$1={},src$2={exports:{}};function base$1(fe){if(fe.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),ye=0;ye<e.length;ye++)e[ye]=255;for(var me=0;me<fe.length;me++){var be=fe.charAt(me),ve=be.charCodeAt(0);if(e[ve]!==255)throw new TypeError(be+" is ambiguous");e[ve]=me}var Ee=fe.length,Oe=fe.charAt(0),xe=Math.log(Ee)/Math.log(256),gr=Math.log(256)/Math.log(Ee);function we(Fr){if(Fr instanceof Uint8Array||(ArrayBuffer.isView(Fr)?Fr=new Uint8Array(Fr.buffer,Fr.byteOffset,Fr.byteLength):Array.isArray(Fr)&&(Fr=Uint8Array.from(Fr))),!(Fr instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(Fr.length===0)return"";for(var Br=0,Vr=0,oo=0,so=Fr.length;oo!==so&&Fr[oo]===0;)oo++,Br++;for(var kr=(so-oo)*gr+1>>>0,qr=new Uint8Array(kr);oo!==so;){for(var Hr=Fr[oo],Yr=0,Ur=kr-1;(Hr!==0||Yr<Vr)&&Ur!==-1;Ur--,Yr++)Hr+=256*qr[Ur]>>>0,qr[Ur]=Hr%Ee>>>0,Hr=Hr/Ee>>>0;if(Hr!==0)throw new Error("Non-zero carry");Vr=Yr,oo++}for(var Mr=kr-Vr;Mr!==kr&&qr[Mr]===0;)Mr++;for(var Lr=Oe.repeat(Br);Mr<kr;++Mr)Lr+=fe.charAt(qr[Mr]);return Lr}function Se(Fr){if(typeof Fr!="string")throw new TypeError("Expected String");if(Fr.length===0)return new Uint8Array;var Br=0;if(Fr[Br]!==" "){for(var Vr=0,oo=0;Fr[Br]===Oe;)Vr++,Br++;for(var so=(Fr.length-Br)*xe+1>>>0,kr=new Uint8Array(so);Fr[Br];){var qr=e[Fr.charCodeAt(Br)];if(qr===255)return;for(var Hr=0,Yr=so-1;(qr!==0||Hr<oo)&&Yr!==-1;Yr--,Hr++)qr+=Ee*kr[Yr]>>>0,kr[Yr]=qr%256>>>0,qr=qr/256>>>0;if(qr!==0)throw new Error("Non-zero carry");oo=Hr,Br++}if(Fr[Br]!==" "){for(var Ur=so-oo;Ur!==so&&kr[Ur]===0;)Ur++;for(var Mr=new Uint8Array(Vr+(so-Ur)),Lr=Vr;Ur!==so;)Mr[Lr++]=kr[Ur++];return Mr}}}function $r(Fr){var Br=Se(Fr);if(Br)return Br;throw new Error("Non-base"+Ee+" character")}return{encode:we,decodeUnsafe:Se,decode:$r}}var src$1=base$1;const textDecoder=new TextDecoder,decodeText$1=fe=>textDecoder.decode(fe),textEncoder=new TextEncoder,encodeText$2=fe=>textEncoder.encode(fe);function concat(fe,e){const ye=new Uint8Array(e);let me=0;for(const be of fe)ye.set(be,me),me+=be.length;return ye}var util$9={decodeText:decodeText$1,encodeText:encodeText$2,concat};const{encodeText:encodeText$1}=util$9;let Base$1=class{constructor(e,ye,me,be){this.name=e,this.code=ye,this.codeBuf=encodeText$1(this.code),this.alphabet=be,this.codec=me(be)}encode(e){return this.codec.encode(e)}decode(e){for(const ye of e)if(this.alphabet&&this.alphabet.indexOf(ye)<0)throw new Error(`invalid character '${ye}' in '${e}'`);return this.codec.decode(e)}};var base=Base$1;const decode=(fe,e,ye)=>{const me={};for(let gr=0;gr<e.length;++gr)me[e[gr]]=gr;let be=fe.length;for(;fe[be-1]==="=";)--be;const ve=new Uint8Array(be*ye/8|0);let Ee=0,Oe=0,xe=0;for(let gr=0;gr<be;++gr){const we=me[fe[gr]];if(we===void 0)throw new SyntaxError("Invalid character "+fe[gr]);Oe=Oe<<ye|we,Ee+=ye,Ee>=8&&(Ee-=8,ve[xe++]=255&Oe>>Ee)}if(Ee>=ye||255&Oe<<8-Ee)throw new SyntaxError("Unexpected end of data");return ve},encode=(fe,e,ye)=>{const me=e[e.length-1]==="=",be=(1<<ye)-1;let ve="",Ee=0,Oe=0;for(let xe=0;xe<fe.length;++xe)for(Oe=Oe<<8|fe[xe],Ee+=8;Ee>ye;)Ee-=ye,ve+=e[be&Oe>>Ee];if(Ee&&(ve+=e[be&Oe<<ye-Ee]),me)for(;ve.length*ye&7;)ve+="=";return ve},rfc4648$1=fe=>e=>({encode(ye){return encode(ye,e,fe)},decode(ye){return decode(ye,e,fe)}});var rfc4648_1={rfc4648:rfc4648$1};const baseX=src$1,Base=base,{rfc4648}=rfc4648_1,{decodeText,encodeText}=util$9,identity=()=>({encode:decodeText,decode:encodeText}),constants=[["identity","\0",identity,""],["base2","0",rfc4648(1),"01"],["base8","7",rfc4648(3),"01234567"],["base10","9",baseX,"0123456789"],["base16","f",rfc4648(4),"0123456789abcdef"],["base16upper","F",rfc4648(4),"0123456789ABCDEF"],["base32hex","v",rfc4648(5),"0123456789abcdefghijklmnopqrstuv"],["base32hexupper","V",rfc4648(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV"],["base32hexpad","t",rfc4648(5),"0123456789abcdefghijklmnopqrstuv="],["base32hexpadupper","T",rfc4648(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV="],["base32","b",rfc4648(5),"abcdefghijklmnopqrstuvwxyz234567"],["base32upper","B",rfc4648(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"],["base32pad","c",rfc4648(5),"abcdefghijklmnopqrstuvwxyz234567="],["base32padupper","C",rfc4648(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567="],["base32z","h",rfc4648(5),"ybndrfg8ejkmcpqxot1uwisza345h769"],["base36","k",baseX,"0123456789abcdefghijklmnopqrstuvwxyz"],["base36upper","K",baseX,"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"],["base58btc","z",baseX,"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"],["base58flickr","Z",baseX,"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"],["base64","m",rfc4648(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"],["base64pad","M",rfc4648(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="],["base64url","u",rfc4648(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"],["base64urlpad","U",rfc4648(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_="]],names=constants.reduce((fe,e)=>(fe[e[0]]=new Base(e[0],e[1],e[2],e[3]),fe),{}),codes=constants.reduce((fe,e)=>(fe[e[1]]=names[e[0]],fe),{});var constants_1={names,codes};(function(fe,e){const ye=constants_1,{encodeText:me,decodeText:be,concat:ve}=util$9;function Ee(Vr,oo){if(!oo)throw new Error("requires an encoded Uint8Array");const{name:so,codeBuf:kr}=Se(Vr);return we(so,oo),ve([kr,oo],kr.length+oo.length)}function Oe(Vr,oo){const so=Se(Vr),kr=me(so.encode(oo));return ve([so.codeBuf,kr],so.codeBuf.length+kr.length)}function xe(Vr){Vr instanceof Uint8Array&&(Vr=be(Vr));const oo=Vr[0];return["f","F","v","V","t","T","b","B","c","C","h","k","K"].includes(oo)&&(Vr=Vr.toLowerCase()),Se(Vr[0]).decode(Vr.substring(1))}function gr(Vr){if(Vr instanceof Uint8Array&&(Vr=be(Vr)),Object.prototype.toString.call(Vr)!=="[object String]")return!1;try{return Se(Vr[0]).name}catch{return!1}}function we(Vr,oo){Se(Vr).decode(be(oo))}function Se(Vr){if(Object.prototype.hasOwnProperty.call(ye.names,Vr))return ye.names[Vr];if(Object.prototype.hasOwnProperty.call(ye.codes,Vr))return ye.codes[Vr];throw new Error(`Unsupported encoding: ${Vr}`)}function $r(Vr){return Vr instanceof Uint8Array&&(Vr=be(Vr)),Se(Vr[0])}e=fe.exports=Ee,e.encode=Oe,e.decode=xe,e.isEncoded=gr,e.encoding=Se,e.encodingFromData=$r;const Fr=Object.freeze(ye.names),Br=Object.freeze(ye.codes);e.names=Fr,e.codes=Br})(src$2,src$2.exports);var srcExports$1=src$2.exports,sha256={},_sha2={},_assert={};Object.defineProperty(_assert,"__esModule",{value:!0});_assert.output=_assert.exists=_assert.hash=_assert.bytes=_assert.bool=_assert.number=void 0;function number(fe){if(!Number.isSafeInteger(fe)||fe<0)throw new Error(`Wrong positive integer: ${fe}`)}_assert.number=number;function bool(fe){if(typeof fe!="boolean")throw new Error(`Expected boolean, not ${fe}`)}_assert.bool=bool;function bytes(fe,...e){if(!(fe instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(fe.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${fe.length}`)}_assert.bytes=bytes;function hash(fe){if(typeof fe!="function"||typeof fe.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");number(fe.outputLen),number(fe.blockLen)}_assert.hash=hash;function exists(fe,e=!0){if(fe.destroyed)throw new Error("Hash instance has been destroyed");if(e&&fe.finished)throw new Error("Hash#digest() has already been called")}_assert.exists=exists;function output(fe,e){bytes(fe);const ye=e.outputLen;if(fe.length<ye)throw new Error(`digestInto() expects output buffer of length at least ${ye}`)}_assert.output=output;const assert={number,bool,bytes,hash,exists,output};_assert.default=assert;var utils={},crypto$1={};Object.defineProperty(crypto$1,"__esModule",{value:!0});crypto$1.crypto=void 0;crypto$1.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;(function(fe){/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(fe,"__esModule",{value:!0}),fe.randomBytes=fe.wrapXOFConstructorWithOpts=fe.wrapConstructorWithOpts=fe.wrapConstructor=fe.checkOpts=fe.Hash=fe.concatBytes=fe.toBytes=fe.utf8ToBytes=fe.asyncLoop=fe.nextTick=fe.hexToBytes=fe.bytesToHex=fe.isLE=fe.rotr=fe.createView=fe.u32=fe.u8=void 0;const e=crypto$1,ye=Ur=>Ur instanceof Uint8Array,me=Ur=>new Uint8Array(Ur.buffer,Ur.byteOffset,Ur.byteLength);fe.u8=me;const be=Ur=>new Uint32Array(Ur.buffer,Ur.byteOffset,Math.floor(Ur.byteLength/4));fe.u32=be;const ve=Ur=>new DataView(Ur.buffer,Ur.byteOffset,Ur.byteLength);fe.createView=ve;const Ee=(Ur,Mr)=>Ur<<32-Mr|Ur>>>Mr;if(fe.rotr=Ee,fe.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,!fe.isLE)throw new Error("Non little-endian hardware is not supported");const Oe=Array.from({length:256},(Ur,Mr)=>Mr.toString(16).padStart(2,"0"));function xe(Ur){if(!ye(Ur))throw new Error("Uint8Array expected");let Mr="";for(let Lr=0;Lr<Ur.length;Lr++)Mr+=Oe[Ur[Lr]];return Mr}fe.bytesToHex=xe;function gr(Ur){if(typeof Ur!="string")throw new Error("hex string expected, got "+typeof Ur);const Mr=Ur.length;if(Mr%2)throw new Error("padded hex string expected, got unpadded hex of length "+Mr);const Lr=new Uint8Array(Mr/2);for(let no=0;no<Lr.length;no++){const Xr=no*2,to=Ur.slice(Xr,Xr+2),ao=Number.parseInt(to,16);if(Number.isNaN(ao)||ao<0)throw new Error("Invalid byte sequence");Lr[no]=ao}return Lr}fe.hexToBytes=gr;const we=async()=>{};fe.nextTick=we;async function Se(Ur,Mr,Lr){let no=Date.now();for(let Xr=0;Xr<Ur;Xr++){Lr(Xr);const to=Date.now()-no;to>=0&&to<Mr||(await(0,fe.nextTick)(),no+=to)}}fe.asyncLoop=Se;function $r(Ur){if(typeof Ur!="string")throw new Error(`utf8ToBytes expected string, got ${typeof Ur}`);return new Uint8Array(new TextEncoder().encode(Ur))}fe.utf8ToBytes=$r;function Fr(Ur){if(typeof Ur=="string"&&(Ur=$r(Ur)),!ye(Ur))throw new Error(`expected Uint8Array, got ${typeof Ur}`);return Ur}fe.toBytes=Fr;function Br(...Ur){const Mr=new Uint8Array(Ur.reduce((no,Xr)=>no+Xr.length,0));let Lr=0;return Ur.forEach(no=>{if(!ye(no))throw new Error("Uint8Array expected");Mr.set(no,Lr),Lr+=no.length}),Mr}fe.concatBytes=Br;class Vr{clone(){return this._cloneInto()}}fe.Hash=Vr;const oo=Ur=>Object.prototype.toString.call(Ur)==="[object Object]"&&Ur.constructor===Object;function so(Ur,Mr){if(Mr!==void 0&&(typeof Mr!="object"||!oo(Mr)))throw new Error("Options should be object or undefined");return Object.assign(Ur,Mr)}fe.checkOpts=so;function kr(Ur){const Mr=no=>Ur().update(Fr(no)).digest(),Lr=Ur();return Mr.outputLen=Lr.outputLen,Mr.blockLen=Lr.blockLen,Mr.create=()=>Ur(),Mr}fe.wrapConstructor=kr;function qr(Ur){const Mr=(no,Xr)=>Ur(Xr).update(Fr(no)).digest(),Lr=Ur({});return Mr.outputLen=Lr.outputLen,Mr.blockLen=Lr.blockLen,Mr.create=no=>Ur(no),Mr}fe.wrapConstructorWithOpts=qr;function Hr(Ur){const Mr=(no,Xr)=>Ur(Xr).update(Fr(no)).digest(),Lr=Ur({});return Mr.outputLen=Lr.outputLen,Mr.blockLen=Lr.blockLen,Mr.create=no=>Ur(no),Mr}fe.wrapXOFConstructorWithOpts=Hr;function Yr(Ur=32){if(e.crypto&&typeof e.crypto.getRandomValues=="function")return e.crypto.getRandomValues(new Uint8Array(Ur));throw new Error("crypto.getRandomValues must be defined")}fe.randomBytes=Yr})(utils);Object.defineProperty(_sha2,"__esModule",{value:!0});_sha2.SHA2=void 0;const _assert_js_1=_assert,utils_js_1$2=utils;function setBigUint64(fe,e,ye,me){if(typeof fe.setBigUint64=="function")return fe.setBigUint64(e,ye,me);const be=BigInt(32),ve=BigInt(4294967295),Ee=Number(ye>>be&ve),Oe=Number(ye&ve),xe=me?4:0,gr=me?0:4;fe.setUint32(e+xe,Ee,me),fe.setUint32(e+gr,Oe,me)}class SHA2 extends utils_js_1$2.Hash{constructor(e,ye,me,be){super(),this.blockLen=e,this.outputLen=ye,this.padOffset=me,this.isLE=be,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,utils_js_1$2.createView)(this.buffer)}update(e){_assert_js_1.default.exists(this);const{view:ye,buffer:me,blockLen:be}=this;e=(0,utils_js_1$2.toBytes)(e);const ve=e.length;for(let Ee=0;Ee<ve;){const Oe=Math.min(be-this.pos,ve-Ee);if(Oe===be){const xe=(0,utils_js_1$2.createView)(e);for(;be<=ve-Ee;Ee+=be)this.process(xe,Ee);continue}me.set(e.subarray(Ee,Ee+Oe),this.pos),this.pos+=Oe,Ee+=Oe,this.pos===be&&(this.process(ye,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){_assert_js_1.default.exists(this),_assert_js_1.default.output(e,this),this.finished=!0;const{buffer:ye,view:me,blockLen:be,isLE:ve}=this;let{pos:Ee}=this;ye[Ee++]=128,this.buffer.subarray(Ee).fill(0),this.padOffset>be-Ee&&(this.process(me,0),Ee=0);for(let Se=Ee;Se<be;Se++)ye[Se]=0;setBigUint64(me,be-8,BigInt(this.length*8),ve),this.process(me,0);const Oe=(0,utils_js_1$2.createView)(e),xe=this.outputLen;if(xe%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const gr=xe/4,we=this.get();if(gr>we.length)throw new Error("_sha2: outputLen bigger than state");for(let Se=0;Se<gr;Se++)Oe.setUint32(4*Se,we[Se],ve)}digest(){const{buffer:e,outputLen:ye}=this;this.digestInto(e);const me=e.slice(0,ye);return this.destroy(),me}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:ye,buffer:me,length:be,finished:ve,destroyed:Ee,pos:Oe}=this;return e.length=be,e.pos=Oe,e.finished=ve,e.destroyed=Ee,be%ye&&e.buffer.set(me),e}}_sha2.SHA2=SHA2;Object.defineProperty(sha256,"__esModule",{value:!0});sha256.sha224=sha256.sha256=void 0;const _sha2_js_1$1=_sha2,utils_js_1$1=utils,Chi=(fe,e,ye)=>fe&e^~fe&ye,Maj=(fe,e,ye)=>fe&e^fe&ye^e&ye,SHA256_K=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),IV=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),SHA256_W=new Uint32Array(64);class SHA256 extends _sha2_js_1$1.SHA2{constructor(){super(64,32,8,!1),this.A=IV[0]|0,this.B=IV[1]|0,this.C=IV[2]|0,this.D=IV[3]|0,this.E=IV[4]|0,this.F=IV[5]|0,this.G=IV[6]|0,this.H=IV[7]|0}get(){const{A:e,B:ye,C:me,D:be,E:ve,F:Ee,G:Oe,H:xe}=this;return[e,ye,me,be,ve,Ee,Oe,xe]}set(e,ye,me,be,ve,Ee,Oe,xe){this.A=e|0,this.B=ye|0,this.C=me|0,this.D=be|0,this.E=ve|0,this.F=Ee|0,this.G=Oe|0,this.H=xe|0}process(e,ye){for(let Se=0;Se<16;Se++,ye+=4)SHA256_W[Se]=e.getUint32(ye,!1);for(let Se=16;Se<64;Se++){const $r=SHA256_W[Se-15],Fr=SHA256_W[Se-2],Br=(0,utils_js_1$1.rotr)($r,7)^(0,utils_js_1$1.rotr)($r,18)^$r>>>3,Vr=(0,utils_js_1$1.rotr)(Fr,17)^(0,utils_js_1$1.rotr)(Fr,19)^Fr>>>10;SHA256_W[Se]=Vr+SHA256_W[Se-7]+Br+SHA256_W[Se-16]|0}let{A:me,B:be,C:ve,D:Ee,E:Oe,F:xe,G:gr,H:we}=this;for(let Se=0;Se<64;Se++){const $r=(0,utils_js_1$1.rotr)(Oe,6)^(0,utils_js_1$1.rotr)(Oe,11)^(0,utils_js_1$1.rotr)(Oe,25),Fr=we+$r+Chi(Oe,xe,gr)+SHA256_K[Se]+SHA256_W[Se]|0,Vr=((0,utils_js_1$1.rotr)(me,2)^(0,utils_js_1$1.rotr)(me,13)^(0,utils_js_1$1.rotr)(me,22))+Maj(me,be,ve)|0;we=gr,gr=xe,xe=Oe,Oe=Ee+Fr|0,Ee=ve,ve=be,be=me,me=Fr+Vr|0}me=me+this.A|0,be=be+this.B|0,ve=ve+this.C|0,Ee=Ee+this.D|0,Oe=Oe+this.E|0,xe=xe+this.F|0,gr=gr+this.G|0,we=we+this.H|0,this.set(me,be,ve,Ee,Oe,xe,gr,we)}roundClean(){SHA256_W.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class SHA224 extends SHA256{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}sha256.sha256=(0,utils_js_1$1.wrapConstructor)(()=>new SHA256);sha256.sha224=(0,utils_js_1$1.wrapConstructor)(()=>new SHA224);var ripemd160={};Object.defineProperty(ripemd160,"__esModule",{value:!0});ripemd160.ripemd160=ripemd160.RIPEMD160=void 0;const _sha2_js_1=_sha2,utils_js_1=utils,Rho=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),Id=Uint8Array.from({length:16},(fe,e)=>e),Pi=Id.map(fe=>(9*fe+5)%16);let idxL=[Id],idxR=[Pi];for(let fe=0;fe<4;fe++)for(let e of[idxL,idxR])e.push(e[fe].map(ye=>Rho[ye]));const shifts=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(fe=>new Uint8Array(fe)),shiftsL=idxL.map((fe,e)=>fe.map(ye=>shifts[e][ye])),shiftsR=idxR.map((fe,e)=>fe.map(ye=>shifts[e][ye])),Kl=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),Kr=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),rotl=(fe,e)=>fe<<e|fe>>>32-e;function f$1(fe,e,ye,me){return fe===0?e^ye^me:fe===1?e&ye|~e&me:fe===2?(e|~ye)^me:fe===3?e&me|ye&~me:e^(ye|~me)}const BUF=new Uint32Array(16);class RIPEMD160 extends _sha2_js_1.SHA2{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:e,h1:ye,h2:me,h3:be,h4:ve}=this;return[e,ye,me,be,ve]}set(e,ye,me,be,ve){this.h0=e|0,this.h1=ye|0,this.h2=me|0,this.h3=be|0,this.h4=ve|0}process(e,ye){for(let Fr=0;Fr<16;Fr++,ye+=4)BUF[Fr]=e.getUint32(ye,!0);let me=this.h0|0,be=me,ve=this.h1|0,Ee=ve,Oe=this.h2|0,xe=Oe,gr=this.h3|0,we=gr,Se=this.h4|0,$r=Se;for(let Fr=0;Fr<5;Fr++){const Br=4-Fr,Vr=Kl[Fr],oo=Kr[Fr],so=idxL[Fr],kr=idxR[Fr],qr=shiftsL[Fr],Hr=shiftsR[Fr];for(let Yr=0;Yr<16;Yr++){const Ur=rotl(me+f$1(Fr,ve,Oe,gr)+BUF[so[Yr]]+Vr,qr[Yr])+Se|0;me=Se,Se=gr,gr=rotl(Oe,10)|0,Oe=ve,ve=Ur}for(let Yr=0;Yr<16;Yr++){const Ur=rotl(be+f$1(Br,Ee,xe,we)+BUF[kr[Yr]]+oo,Hr[Yr])+$r|0;be=$r,$r=we,we=rotl(xe,10)|0,xe=Ee,Ee=Ur}}this.set(this.h1+Oe+we|0,this.h2+gr+$r|0,this.h3+Se+be|0,this.h4+me+Ee|0,this.h0+ve+xe|0)}roundClean(){BUF.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}ripemd160.RIPEMD160=RIPEMD160;ripemd160.ripemd160=(0,utils_js_1.wrapConstructor)(()=>new RIPEMD160);const nested$1={koinos:{nested:{contracts:{nested:{token:{options:{go_package:"github.com/koinos/koinos-proto-golang/koinos/contracts/token"},nested:{name_arguments:{fields:{}},name_result:{fields:{value:{type:"string",id:1}}},symbol_arguments:{fields:{}},symbol_result:{fields:{value:{type:"string",id:1}}},decimals_arguments:{fields:{}},decimals_result:{fields:{value:{type:"uint32",id:1}}},total_supply_arguments:{fields:{}},total_supply_result:{fields:{value:{type:"uint64",id:1,options:{jstype:"JS_STRING"}}}},balance_of_arguments:{fields:{owner:{type:"bytes",id:1,options:{"(btype)":"ADDRESS"}}}},balance_of_result:{fields:{value:{type:"uint64",id:1,options:{jstype:"JS_STRING"}}}},transfer_arguments:{fields:{from:{type:"bytes",id:1,options:{"(btype)":"ADDRESS"}},to:{type:"bytes",id:2,options:{"(btype)":"ADDRESS"}},value:{type:"uint64",id:3,options:{jstype:"JS_STRING"}}}},transfer_result:{fields:{}},mint_arguments:{fields:{to:{type:"bytes",id:1,options:{"(btype)":"ADDRESS"}},value:{type:"uint64",id:2,options:{jstype:"JS_STRING"}}}},mint_result:{fields:{}},burn_arguments:{fields:{from:{type:"bytes",id:1,options:{"(btype)":"ADDRESS"}},value:{type:"uint64",id:2,options:{jstype:"JS_STRING"}}}},burn_result:{fields:{}},balance_object:{fields:{value:{type:"uint64",id:1,options:{jstype:"JS_STRING"}}}},mana_balance_object:{fields:{balance:{type:"uint64",id:1,options:{jstype:"JS_STRING"}},mana:{type:"uint64",id:2,options:{jstype:"JS_STRING"}},last_mana_update:{type:"uint64",id:3,options:{jstype:"JS_STRING"}}}},burn_event:{fields:{from:{type:"bytes",id:1,options:{"(btype)":"ADDRESS"}},value:{type:"uint64",id:2,options:{jstype:"JS_STRING"}}}},mint_event:{fields:{to:{type:"bytes",id:1,options:{"(btype)":"ADDRESS"}},value:{type:"uint64",id:2,options:{jstype:"JS_STRING"}}}},transfer_event:{fields:{from:{type:"bytes",id:1,options:{"(btype)":"ADDRESS"}},to:{type:"bytes",id:2,options:{"(btype)":"ADDRESS"}},value:{type:"uint64",id:3,options:{jstype:"JS_STRING"}}}}}}}}}}},require$$3$1={nested:nested$1};var __createBinding$3=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(fe,e,ye,me){me===void 0&&(me=ye);var be=Object.getOwnPropertyDescriptor(e,ye);(!be||("get"in be?!e.__esModule:be.writable||be.configurable))&&(be={enumerable:!0,get:function(){return e[ye]}}),Object.defineProperty(fe,me,be)}:function(fe,e,ye,me){me===void 0&&(me=ye),fe[me]=e[ye]}),__setModuleDefault$3=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(fe,e){Object.defineProperty(fe,"default",{enumerable:!0,value:e})}:function(fe,e){fe.default=e}),__importStar$3=commonjsGlobal&&commonjsGlobal.__importStar||function(fe){if(fe&&fe.__esModule)return fe;var e={};if(fe!=null)for(var ye in fe)ye!=="default"&&Object.prototype.hasOwnProperty.call(fe,ye)&&__createBinding$3(e,fe,ye);return __setModuleDefault$3(e,fe),e},__importDefault$2=commonjsGlobal&&commonjsGlobal.__importDefault||function(fe){return fe&&fe.__esModule?fe:{default:fe}};Object.defineProperty(utils$1,"__esModule",{value:!0});utils$1.tokenAbi=utils$1.btypeEncode=utils$1.btypeDecode=utils$1.btypeEncodeValue=utils$1.btypeDecodeValue=utils$1.parseUnits=utils$1.formatUnits=utils$1.isChecksumWif=utils$1.isChecksumAddress=utils$1.isChecksum=utils$1.bitcoinAddress=utils$1.bitcoinDecode=utils$1.bitcoinEncode=utils$1.calculateMerkleRoot=utils$1.decodeBase64=utils$1.multihash=utils$1.encodeBase64=utils$1.decodeBase64url=utils$1.encodeBase64url=utils$1.decodeBase58=utils$1.encodeBase58=utils$1.toHexString=utils$1.toUint8Array=void 0;const multibase=__importStar$3(srcExports$1),sha256_1$2=sha256,ripemd160_1=ripemd160,token_proto_json_1=__importDefault$2(require$$3$1);function toUint8Array(fe){const e=fe.match(/[\dA-F]{2}/gi);if(!e)throw new Error("Invalid hex");return new Uint8Array(e.map(ye=>parseInt(ye,16)))}utils$1.toUint8Array=toUint8Array;function toHexString(fe){return Array.from(fe).map(e=>`0${Number(e).toString(16)}`.slice(-2)).join("")}utils$1.toHexString=toHexString;function encodeBase58(fe){return new TextDecoder().decode(multibase.encode("z",fe)).slice(1)}utils$1.encodeBase58=encodeBase58;function decodeBase58(fe){return multibase.decode(`z${fe}`)}utils$1.decodeBase58=decodeBase58;function encodeBase64url(fe){return new TextDecoder().decode(multibase.encode("U",fe)).slice(1)}utils$1.encodeBase64url=encodeBase64url;function decodeBase64url(fe){return multibase.decode(`U${fe}`)}utils$1.decodeBase64url=decodeBase64url;function encodeBase64(fe){return new TextDecoder().decode(multibase.encode("M",fe)).slice(1)}utils$1.encodeBase64=encodeBase64;function multihash(fe,e="sha2-256"){switch(e){case"sha2-256":return new Uint8Array([18,fe.length,...fe]);default:throw new Error(`multihash code ${e} not supported`)}}utils$1.multihash=multihash;function decodeBase64(fe){return multibase.decode(`M${fe}`)}utils$1.decodeBase64=decodeBase64;function calculateMerkleRoot(fe){if(!fe.length)return(0,sha256_1$2.sha256)(new Uint8Array);for(;fe.length>1;){for(let e=0;e<fe.length;e+=2)if(e+1<fe.length){const ye=fe[e],me=fe[e+1],be=(0,sha256_1$2.sha256)(new Uint8Array([...ye,...me]));fe[e/2]=new Uint8Array(be)}else fe[e/2]=fe[e];fe=fe.slice(0,Math.ceil(fe.length/2))}return fe[0]}utils$1.calculateMerkleRoot=calculateMerkleRoot;function bitcoinEncode(fe,e,ye=!1){let me,be,ve;e==="public"?(me=new Uint8Array(25),be=new Uint8Array(21),me[0]=0,be[0]=0,ve=21):(ye?(me=new Uint8Array(38),be=new Uint8Array(34),ve=34,me[33]=1,be[33]=1):(me=new Uint8Array(37),be=new Uint8Array(33),ve=33),me[0]=128,be[0]=128),be.set(fe,1);const Ee=(0,sha256_1$2.sha256)(be),Oe=(0,sha256_1$2.sha256)(Ee),xe=new Uint8Array(4);return xe.set(Oe.slice(0,4)),me.set(fe,1),me.set(xe,ve),encodeBase58(me)}utils$1.bitcoinEncode=bitcoinEncode;function bitcoinDecode(fe){const e=decodeBase58(fe),ye=new Uint8Array(32),me=new Uint8Array(4);return ye.set(e.slice(1,33)),fe[0]!=="5"?me.set(e.slice(34,38)):me.set(e.slice(33,37)),ye}utils$1.bitcoinDecode=bitcoinDecode;function bitcoinAddress(fe){const e=(0,sha256_1$2.sha256)(fe),ye=(0,ripemd160_1.ripemd160)(e);return bitcoinEncode(ye,"public")}utils$1.bitcoinAddress=bitcoinAddress;function isChecksum(fe){const e=fe.length-4,ye=new Uint8Array(e);ye.set(fe.slice(0,e));const me=new Uint8Array(4);me.set(fe.slice(e));const be=(0,sha256_1$2.sha256)((0,sha256_1$2.sha256)(ye));for(let ve=0;ve<4;ve+=1)if(me[ve]!==be[ve])return!1;return!0}utils$1.isChecksum=isChecksum;function isChecksumAddress(fe){const e=typeof fe=="string"?decodeBase58(fe):fe;return e.length!==25||e[0]!==0?!1:isChecksum(e)}utils$1.isChecksumAddress=isChecksumAddress;function isChecksumWif(fe){const e=typeof fe=="string"?decodeBase58(fe):fe;return e.length!==37&&e.length!==38||e.length===38&&e[33]!==1||e[0]!==128?!1:isChecksum(e)}utils$1.isChecksumWif=isChecksumWif;function formatUnits(fe,e){let ye=typeof fe=="string"?fe:BigInt(fe).toString();const me=ye[0]==="-"?"-":"";ye=ye.replace("-","").padStart(e+1,"0");const be=ye.substring(0,ye.length-e).replace(/^0+(?=\d)/,""),ve=ye.substring(ye.length-e);return`${me}${be}.${ve}`.replace(/(\.0+)?(0+)$/,"")}utils$1.formatUnits=formatUnits;function parseUnits(fe,e){const ye=fe[0]==="-"?"-":"";let[me,be]=fe.replace("-","").replace(",",".").split(".");if(be||(be=""),be=be.padEnd(e,"0"),be.length>e){const ve=be.substring(e);be=be.substring(0,e),ve.startsWith("5")&&(be=(BigInt(be)+BigInt(1)).toString())}return`${ye}${`${me}${be}`.replace(/^0+(?=\d)/,"")}`}utils$1.parseUnits=parseUnits;function copyValue(fe){return typeof fe=="string"||typeof fe=="number"?fe:JSON.parse(JSON.stringify(fe))}function btypeDecodeValue(fe,e,ye){if(e.type!=="bytes")return copyValue(fe);const me=fe;if(!e.btype)return decodeBase64url(me);switch(e.btype){case"BASE58":return decodeBase58(me);case"CONTRACT_ID":case"ADDRESS":const be=decodeBase58(me);if(ye&&!isChecksumAddress(be))throw new Error(`${me} is an invalid address`);return be;case"BASE64":return decodeBase64url(me);case"HEX":case"BLOCK_ID":case"TRANSACTION_ID":return toUint8Array(me.slice(2));default:throw new Error(`unknown btype ${e.btype}`)}}utils$1.btypeDecodeValue=btypeDecodeValue;function btypeEncodeValue(fe,e,ye){if(e.type!=="bytes")return copyValue(fe);const me=fe;if(!e.btype)return encodeBase64url(me);switch(e.btype){case"BASE58":return encodeBase58(me);case"CONTRACT_ID":case"ADDRESS":const be=encodeBase58(me);if(ye&&!isChecksumAddress(me))throw new Error(`${be} is an invalid address`);return be;case"BASE64":return encodeBase64url(me);case"HEX":case"BLOCK_ID":case"TRANSACTION_ID":return`0x${toHexString(me)}`;default:throw new Error(`unknown btype ${e.btype}`)}}utils$1.btypeEncodeValue=btypeEncodeValue;function btypeDecode(fe,e,ye){if(typeof fe!="object")return fe;const me={};return Object.keys(e).forEach(be=>{fe[be]&&(e[be].rule==="repeated"?me[be]=fe[be].map(ve=>e[be].subtypes?btypeDecode(ve,e[be].subtypes,ye):btypeDecodeValue(ve,e[be],ye)):e[be].subtypes?me[be]=btypeDecode(fe[be],e[be].subtypes,ye):me[be]=btypeDecodeValue(fe[be],e[be],ye))}),me}utils$1.btypeDecode=btypeDecode;function btypeEncode(fe,e,ye){if(typeof fe!="object")return fe;const me={};return Object.keys(e).forEach(be=>{fe[be]&&(e[be].rule==="repeated"?me[be]=fe[be].map(ve=>e[be].subtypes?btypeEncode(ve,e[be].subtypes,ye):btypeEncodeValue(ve,e[be],ye)):e[be].subtypes?me[be]=btypeEncode(fe[be],e[be].subtypes,ye):me[be]=btypeEncodeValue(fe[be],e[be],ye))}),me}utils$1.btypeEncode=btypeEncode;utils$1.tokenAbi={methods:{name:{entry_point:2191741823,argument:"name_arguments",return:"name_result",read_only:!0},symbol:{entry_point:3077209249,argument:"symbol_arguments",return:"symbol_result",read_only:!0},decimals:{entry_point:4001430831,argument:"decimals_arguments",return:"decimals_result",read_only:!0},totalSupply:{entry_point:2967091508,argument:"total_supply_arguments",return:"total_supply_result",read_only:!0},balanceOf:{entry_point:1550980247,argument:"balance_of_arguments",return:"balance_of_result",read_only:!0,default_output:{value:"0"}},transfer:{entry_point:670398154,argument:"transfer_arguments",return:"transfer_result"},mint:{entry_point:3698268091,argument:"mint_arguments",return:"mint_result"},burn:{entry_point:2241834181,argument:"burn_arguments",return:"burn_result"}},koilib_types:token_proto_json_1.default};var utilsNode={},Serializer$1={},src={exports:{}},indexLight={exports:{}},indexMinimal={},minimal$1={},aspromise=asPromise$1;function asPromise$1(fe,e){for(var ye=new Array(arguments.length-1),me=0,be=2,ve=!0;be<arguments.length;)ye[me++]=arguments[be++];return new Promise(function(Oe,xe){ye[me]=function(we){if(ve)if(ve=!1,we)xe(we);else{for(var Se=new Array(arguments.length-1),$r=0;$r<Se.length;)Se[$r++]=arguments[$r];Oe.apply(null,Se)}};try{fe.apply(e||null,ye)}catch(gr){ve&&(ve=!1,xe(gr))}})}var base64$1={};(function(fe){var e=fe;e.length=function(Oe){var xe=Oe.length;if(!xe)return 0;for(var gr=0;--xe%4>1&&Oe.charAt(xe)==="=";)++gr;return Math.ceil(Oe.length*3)/4-gr};for(var ye=new Array(64),me=new Array(123),be=0;be<64;)me[ye[be]=be<26?be+65:be<52?be+71:be<62?be-4:be-59|43]=be++;e.encode=function(Oe,xe,gr){for(var we=null,Se=[],$r=0,Fr=0,Br;xe<gr;){var Vr=Oe[xe++];switch(Fr){case 0:Se[$r++]=ye[Vr>>2],Br=(Vr&3)<<4,Fr=1;break;case 1:Se[$r++]=ye[Br|Vr>>4],Br=(Vr&15)<<2,Fr=2;break;case 2:Se[$r++]=ye[Br|Vr>>6],Se[$r++]=ye[Vr&63],Fr=0;break}$r>8191&&((we||(we=[])).push(String.fromCharCode.apply(String,Se)),$r=0)}return Fr&&(Se[$r++]=ye[Br],Se[$r++]=61,Fr===1&&(Se[$r++]=61)),we?($r&&we.push(String.fromCharCode.apply(String,Se.slice(0,$r))),we.join("")):String.fromCharCode.apply(String,Se.slice(0,$r))};var ve="invalid encoding";e.decode=function(Oe,xe,gr){for(var we=gr,Se=0,$r,Fr=0;Fr<Oe.length;){var Br=Oe.charCodeAt(Fr++);if(Br===61&&Se>1)break;if((Br=me[Br])===void 0)throw Error(ve);switch(Se){case 0:$r=Br,Se=1;break;case 1:xe[gr++]=$r<<2|(Br&48)>>4,$r=Br,Se=2;break;case 2:xe[gr++]=($r&15)<<4|(Br&60)>>2,$r=Br,Se=3;break;case 3:xe[gr++]=($r&3)<<6|Br,Se=0;break}}if(Se===1)throw Error(ve);return gr-we},e.test=function(Oe){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(Oe)}})(base64$1);var eventemitter=EventEmitter;function EventEmitter(){this._listeners={}}EventEmitter.prototype.on=function(e,ye,me){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:ye,ctx:me||this}),this};EventEmitter.prototype.off=function(e,ye){if(e===void 0)this._listeners={};else if(ye===void 0)this._listeners[e]=[];else for(var me=this._listeners[e],be=0;be<me.length;)me[be].fn===ye?me.splice(be,1):++be;return this};EventEmitter.prototype.emit=function(e){var ye=this._listeners[e];if(ye){for(var me=[],be=1;be<arguments.length;)me.push(arguments[be++]);for(be=0;be<ye.length;)ye[be].fn.apply(ye[be++].ctx,me)}return this};var float=factory(factory);function factory(fe){return typeof Float32Array<"u"?function(){var e=new Float32Array([-0]),ye=new Uint8Array(e.buffer),me=ye[3]===128;function be(xe,gr,we){e[0]=xe,gr[we]=ye[0],gr[we+1]=ye[1],gr[we+2]=ye[2],gr[we+3]=ye[3]}function ve(xe,gr,we){e[0]=xe,gr[we]=ye[3],gr[we+1]=ye[2],gr[we+2]=ye[1],gr[we+3]=ye[0]}fe.writeFloatLE=me?be:ve,fe.writeFloatBE=me?ve:be;function Ee(xe,gr){return ye[0]=xe[gr],ye[1]=xe[gr+1],ye[2]=xe[gr+2],ye[3]=xe[gr+3],e[0]}function Oe(xe,gr){return ye[3]=xe[gr],ye[2]=xe[gr+1],ye[1]=xe[gr+2],ye[0]=xe[gr+3],e[0]}fe.readFloatLE=me?Ee:Oe,fe.readFloatBE=me?Oe:Ee}():function(){function e(me,be,ve,Ee){var Oe=be<0?1:0;if(Oe&&(be=-be),be===0)me(1/be>0?0:2147483648,ve,Ee);else if(isNaN(be))me(2143289344,ve,Ee);else if(be>34028234663852886e22)me((Oe<<31|2139095040)>>>0,ve,Ee);else if(be<11754943508222875e-54)me((Oe<<31|Math.round(be/1401298464324817e-60))>>>0,ve,Ee);else{var xe=Math.floor(Math.log(be)/Math.LN2),gr=Math.round(be*Math.pow(2,-xe)*8388608)&8388607;me((Oe<<31|xe+127<<23|gr)>>>0,ve,Ee)}}fe.writeFloatLE=e.bind(null,writeUintLE),fe.writeFloatBE=e.bind(null,writeUintBE);function ye(me,be,ve){var Ee=me(be,ve),Oe=(Ee>>31)*2+1,xe=Ee>>>23&255,gr=Ee&8388607;return xe===255?gr?NaN:Oe*(1/0):xe===0?Oe*1401298464324817e-60*gr:Oe*Math.pow(2,xe-150)*(gr+8388608)}fe.readFloatLE=ye.bind(null,readUintLE),fe.readFloatBE=ye.bind(null,readUintBE)}(),typeof Float64Array<"u"?function(){var e=new Float64Array([-0]),ye=new Uint8Array(e.buffer),me=ye[7]===128;function be(xe,gr,we){e[0]=xe,gr[we]=ye[0],gr[we+1]=ye[1],gr[we+2]=ye[2],gr[we+3]=ye[3],gr[we+4]=ye[4],gr[we+5]=ye[5],gr[we+6]=ye[6],gr[we+7]=ye[7]}function ve(xe,gr,we){e[0]=xe,gr[we]=ye[7],gr[we+1]=ye[6],gr[we+2]=ye[5],gr[we+3]=ye[4],gr[we+4]=ye[3],gr[we+5]=ye[2],gr[we+6]=ye[1],gr[we+7]=ye[0]}fe.writeDoubleLE=me?be:ve,fe.writeDoubleBE=me?ve:be;function Ee(xe,gr){return ye[0]=xe[gr],ye[1]=xe[gr+1],ye[2]=xe[gr+2],ye[3]=xe[gr+3],ye[4]=xe[gr+4],ye[5]=xe[gr+5],ye[6]=xe[gr+6],ye[7]=xe[gr+7],e[0]}function Oe(xe,gr){return ye[7]=xe[gr],ye[6]=xe[gr+1],ye[5]=xe[gr+2],ye[4]=xe[gr+3],ye[3]=xe[gr+4],ye[2]=xe[gr+5],ye[1]=xe[gr+6],ye[0]=xe[gr+7],e[0]}fe.readDoubleLE=me?Ee:Oe,fe.readDoubleBE=me?Oe:Ee}():function(){function e(me,be,ve,Ee,Oe,xe){var gr=Ee<0?1:0;if(gr&&(Ee=-Ee),Ee===0)me(0,Oe,xe+be),me(1/Ee>0?0:2147483648,Oe,xe+ve);else if(isNaN(Ee))me(0,Oe,xe+be),me(2146959360,Oe,xe+ve);else if(Ee>17976931348623157e292)me(0,Oe,xe+be),me((gr<<31|2146435072)>>>0,Oe,xe+ve);else{var we;if(Ee<22250738585072014e-324)we=Ee/5e-324,me(we>>>0,Oe,xe+be),me((gr<<31|we/4294967296)>>>0,Oe,xe+ve);else{var Se=Math.floor(Math.log(Ee)/Math.LN2);Se===1024&&(Se=1023),we=Ee*Math.pow(2,-Se),me(we*4503599627370496>>>0,Oe,xe+be),me((gr<<31|Se+1023<<20|we*1048576&1048575)>>>0,Oe,xe+ve)}}}fe.writeDoubleLE=e.bind(null,writeUintLE,0,4),fe.writeDoubleBE=e.bind(null,writeUintBE,4,0);function ye(me,be,ve,Ee,Oe){var xe=me(Ee,Oe+be),gr=me(Ee,Oe+ve),we=(gr>>31)*2+1,Se=gr>>>20&2047,$r=4294967296*(gr&1048575)+xe;return Se===2047?$r?NaN:we*(1/0):Se===0?we*5e-324*$r:we*Math.pow(2,Se-1075)*($r+4503599627370496)}fe.readDoubleLE=ye.bind(null,readUintLE,0,4),fe.readDoubleBE=ye.bind(null,readUintBE,4,0)}(),fe}function writeUintLE(fe,e,ye){e[ye]=fe&255,e[ye+1]=fe>>>8&255,e[ye+2]=fe>>>16&255,e[ye+3]=fe>>>24}function writeUintBE(fe,e,ye){e[ye]=fe>>>24,e[ye+1]=fe>>>16&255,e[ye+2]=fe>>>8&255,e[ye+3]=fe&255}function readUintLE(fe,e){return(fe[e]|fe[e+1]<<8|fe[e+2]<<16|fe[e+3]<<24)>>>0}function readUintBE(fe,e){return(fe[e]<<24|fe[e+1]<<16|fe[e+2]<<8|fe[e+3])>>>0}var inquire_1=inquire$1;function inquire$1(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(fe){}return null}var utf8$2={};(function(fe){var e=fe;e.length=function(me){for(var be=0,ve=0,Ee=0;Ee<me.length;++Ee)ve=me.charCodeAt(Ee),ve<128?be+=1:ve<2048?be+=2:(ve&64512)===55296&&(me.charCodeAt(Ee+1)&64512)===56320?(++Ee,be+=4):be+=3;return be},e.read=function(me,be,ve){var Ee=ve-be;if(Ee<1)return"";for(var Oe=null,xe=[],gr=0,we;be<ve;)we=me[be++],we<128?xe[gr++]=we:we>191&&we<224?xe[gr++]=(we&31)<<6|me[be++]&63:we>239&&we<365?(we=((we&7)<<18|(me[be++]&63)<<12|(me[be++]&63)<<6|me[be++]&63)-65536,xe[gr++]=55296+(we>>10),xe[gr++]=56320+(we&1023)):xe[gr++]=(we&15)<<12|(me[be++]&63)<<6|me[be++]&63,gr>8191&&((Oe||(Oe=[])).push(String.fromCharCode.apply(String,xe)),gr=0);return Oe?(gr&&Oe.push(String.fromCharCode.apply(String,xe.slice(0,gr))),Oe.join("")):String.fromCharCode.apply(String,xe.slice(0,gr))},e.write=function(me,be,ve){for(var Ee=ve,Oe,xe,gr=0;gr<me.length;++gr)Oe=me.charCodeAt(gr),Oe<128?be[ve++]=Oe:Oe<2048?(be[ve++]=Oe>>6|192,be[ve++]=Oe&63|128):(Oe&64512)===55296&&((xe=me.charCodeAt(gr+1))&64512)===56320?(Oe=65536+((Oe&1023)<<10)+(xe&1023),++gr,be[ve++]=Oe>>18|240,be[ve++]=Oe>>12&63|128,be[ve++]=Oe>>6&63|128,be[ve++]=Oe&63|128):(be[ve++]=Oe>>12|224,be[ve++]=Oe>>6&63|128,be[ve++]=Oe&63|128);return ve-Ee}})(utf8$2);var pool_1=pool;function pool(fe,e,ye){var me=ye||8192,be=me>>>1,ve=null,Ee=me;return function(xe){if(xe<1||xe>be)return fe(xe);Ee+xe>me&&(ve=fe(me),Ee=0);var gr=e.call(ve,Ee,Ee+=xe);return Ee&7&&(Ee=(Ee|7)+1),gr}}var longbits,hasRequiredLongbits;function requireLongbits(){if(hasRequiredLongbits)return longbits;hasRequiredLongbits=1,longbits=e;var fe=requireMinimal$1();function e(ve,Ee){this.lo=ve>>>0,this.hi=Ee>>>0}var ye=e.zero=new e(0,0);ye.toNumber=function(){return 0},ye.zzEncode=ye.zzDecode=function(){return this},ye.length=function(){return 1};var me=e.zeroHash="\0\0\0\0\0\0\0\0";e.fromNumber=function(Ee){if(Ee===0)return ye;var Oe=Ee<0;Oe&&(Ee=-Ee);var xe=Ee>>>0,gr=(Ee-xe)/4294967296>>>0;return Oe&&(gr=~gr>>>0,xe=~xe>>>0,++xe>4294967295&&(xe=0,++gr>4294967295&&(gr=0))),new e(xe,gr)},e.from=function(Ee){if(typeof Ee=="number")return e.fromNumber(Ee);if(fe.isString(Ee))if(fe.Long)Ee=fe.Long.fromString(Ee);else return e.fromNumber(parseInt(Ee,10));return Ee.low||Ee.high?new e(Ee.low>>>0,Ee.high>>>0):ye},e.prototype.toNumber=function(Ee){if(!Ee&&this.hi>>>31){var Oe=~this.lo+1>>>0,xe=~this.hi>>>0;return Oe||(xe=xe+1>>>0),-(Oe+xe*4294967296)}return this.lo+this.hi*4294967296},e.prototype.toLong=function(Ee){return fe.Long?new fe.Long(this.lo|0,this.hi|0,!!Ee):{low:this.lo|0,high:this.hi|0,unsigned:!!Ee}};var be=String.prototype.charCodeAt;return e.fromHash=function(Ee){return Ee===me?ye:new e((be.call(Ee,0)|be.call(Ee,1)<<8|be.call(Ee,2)<<16|be.call(Ee,3)<<24)>>>0,(be.call(Ee,4)|be.call(Ee,5)<<8|be.call(Ee,6)<<16|be.call(Ee,7)<<24)>>>0)},e.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},e.prototype.zzEncode=function(){var Ee=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^Ee)>>>0,this.lo=(this.lo<<1^Ee)>>>0,this},e.prototype.zzDecode=function(){var Ee=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^Ee)>>>0,this.hi=(this.hi>>>1^Ee)>>>0,this},e.prototype.length=function(){var Ee=this.lo,Oe=(this.lo>>>28|this.hi<<4)>>>0,xe=this.hi>>>24;return xe===0?Oe===0?Ee<16384?Ee<128?1:2:Ee<2097152?3:4:Oe<16384?Oe<128?5:6:Oe<2097152?7:8:xe<128?9:10},longbits}var hasRequiredMinimal$1;function requireMinimal$1(){return hasRequiredMinimal$1||(hasRequiredMinimal$1=1,function(fe){var e=fe;e.asPromise=aspromise,e.base64=base64$1,e.EventEmitter=eventemitter,e.float=float,e.inquire=inquire_1,e.utf8=utf8$2,e.pool=pool_1,e.LongBits=requireLongbits(),e.isNode=!!(typeof commonjsGlobal<"u"&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),e.global=e.isNode&&commonjsGlobal||typeof window<"u"&&window||typeof self<"u"&&self||commonjsGlobal,e.emptyArray=Object.freeze?Object.freeze([]):[],e.emptyObject=Object.freeze?Object.freeze({}):{},e.isInteger=Number.isInteger||function(ve){return typeof ve=="number"&&isFinite(ve)&&Math.floor(ve)===ve},e.isString=function(ve){return typeof ve=="string"||ve instanceof String},e.isObject=function(ve){return ve&&typeof ve=="object"},e.isset=e.isSet=function(ve,Ee){var Oe=ve[Ee];return Oe!=null&&ve.hasOwnProperty(Ee)?typeof Oe!="object"||(Array.isArray(Oe)?Oe.length:Object.keys(Oe).length)>0:!1},e.Buffer=function(){try{var be=e.inquire("buffer").Buffer;return be.prototype.utf8Write?be:null}catch{return null}}(),e._Buffer_from=null,e._Buffer_allocUnsafe=null,e.newBuffer=function(ve){return typeof ve=="number"?e.Buffer?e._Buffer_allocUnsafe(ve):new e.Array(ve):e.Buffer?e._Buffer_from(ve):typeof Uint8Array>"u"?ve:new Uint8Array(ve)},e.Array=typeof Uint8Array<"u"?Uint8Array:Array,e.Long=e.global.dcodeIO&&e.global.dcodeIO.Long||e.global.Long||e.inquire("long"),e.key2Re=/^true|false|0|1$/,e.key32Re=/^-?(?:0|[1-9][0-9]*)$/,e.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,e.longToHash=function(ve){return ve?e.LongBits.from(ve).toHash():e.LongBits.zeroHash},e.longFromHash=function(ve,Ee){var Oe=e.LongBits.fromHash(ve);return e.Long?e.Long.fromBits(Oe.lo,Oe.hi,Ee):Oe.toNumber(!!Ee)};function ye(be,ve,Ee){for(var Oe=Object.keys(ve),xe=0;xe<Oe.length;++xe)(be[Oe[xe]]===void 0||!Ee)&&(be[Oe[xe]]=ve[Oe[xe]]);return be}e.merge=ye,e.lcFirst=function(ve){return ve.charAt(0).toLowerCase()+ve.substring(1)};function me(be){function ve(Ee,Oe){if(!(this instanceof ve))return new ve(Ee,Oe);Object.defineProperty(this,"message",{get:function(){return Ee}}),Error.captureStackTrace?Error.captureStackTrace(this,ve):Object.defineProperty(this,"stack",{value:new Error().stack||""}),Oe&&ye(this,Oe)}return ve.prototype=Object.create(Error.prototype,{constructor:{value:ve,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return be},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),ve}e.newError=me,e.ProtocolError=me("ProtocolError"),e.oneOfGetter=function(ve){for(var Ee={},Oe=0;Oe<ve.length;++Oe)Ee[ve[Oe]]=1;return function(){for(var xe=Object.keys(this),gr=xe.length-1;gr>-1;--gr)if(Ee[xe[gr]]===1&&this[xe[gr]]!==void 0&&this[xe[gr]]!==null)return xe[gr]}},e.oneOfSetter=function(ve){return function(Ee){for(var Oe=0;Oe<ve.length;++Oe)ve[Oe]!==Ee&&delete this[ve[Oe]]}},e.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},e._configure=function(){var be=e.Buffer;if(!be){e._Buffer_from=e._Buffer_allocUnsafe=null;return}e._Buffer_from=be.from!==Uint8Array.from&&be.from||function(Ee,Oe){return new be(Ee,Oe)},e._Buffer_allocUnsafe=be.allocUnsafe||function(Ee){return new be(Ee)}}}(minimal$1)),minimal$1}var writer=Writer$1,util$8=requireMinimal$1(),BufferWriter$1,LongBits$1=util$8.LongBits,base64=util$8.base64,utf8$1=util$8.utf8;function Op(fe,e,ye){this.fn=fe,this.len=e,this.next=void 0,this.val=ye}function noop(){}function State(fe){this.head=fe.head,this.tail=fe.tail,this.len=fe.len,this.next=fe.states}function Writer$1(){this.len=0,this.head=new Op(noop,0,0),this.tail=this.head,this.states=null}var create$1=function fe(){return util$8.Buffer?function(){return(Writer$1.create=function(){return new BufferWriter$1})()}:function(){return new Writer$1}};Writer$1.create=create$1();Writer$1.alloc=function fe(e){return new util$8.Array(e)};util$8.Array!==Array&&(Writer$1.alloc=util$8.pool(Writer$1.alloc,util$8.Array.prototype.subarray));Writer$1.prototype._push=function fe(e,ye,me){return this.tail=this.tail.next=new Op(e,ye,me),this.len+=ye,this};function writeByte(fe,e,ye){e[ye]=fe&255}function writeVarint32(fe,e,ye){for(;fe>127;)e[ye++]=fe&127|128,fe>>>=7;e[ye]=fe}function VarintOp(fe,e){this.len=fe,this.next=void 0,this.val=e}VarintOp.prototype=Object.create(Op.prototype);VarintOp.prototype.fn=writeVarint32;Writer$1.prototype.uint32=function fe(e){return this.len+=(this.tail=this.tail.next=new VarintOp((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this};Writer$1.prototype.int32=function fe(e){return e<0?this._push(writeVarint64,10,LongBits$1.fromNumber(e)):this.uint32(e)};Writer$1.prototype.sint32=function fe(e){return this.uint32((e<<1^e>>31)>>>0)};function writeVarint64(fe,e,ye){for(;fe.hi;)e[ye++]=fe.lo&127|128,fe.lo=(fe.lo>>>7|fe.hi<<25)>>>0,fe.hi>>>=7;for(;fe.lo>127;)e[ye++]=fe.lo&127|128,fe.lo=fe.lo>>>7;e[ye++]=fe.lo}Writer$1.prototype.uint64=function fe(e){var ye=LongBits$1.from(e);return this._push(writeVarint64,ye.length(),ye)};Writer$1.prototype.int64=Writer$1.prototype.uint64;Writer$1.prototype.sint64=function fe(e){var ye=LongBits$1.from(e).zzEncode();return this._push(writeVarint64,ye.length(),ye)};Writer$1.prototype.bool=function fe(e){return this._push(writeByte,1,e?1:0)};function writeFixed32(fe,e,ye){e[ye]=fe&255,e[ye+1]=fe>>>8&255,e[ye+2]=fe>>>16&255,e[ye+3]=fe>>>24}Writer$1.prototype.fixed32=function fe(e){return this._push(writeFixed32,4,e>>>0)};Writer$1.prototype.sfixed32=Writer$1.prototype.fixed32;Writer$1.prototype.fixed64=function fe(e){var ye=LongBits$1.from(e);return this._push(writeFixed32,4,ye.lo)._push(writeFixed32,4,ye.hi)};Writer$1.prototype.sfixed64=Writer$1.prototype.fixed64;Writer$1.prototype.float=function fe(e){return this._push(util$8.float.writeFloatLE,4,e)};Writer$1.prototype.double=function fe(e){return this._push(util$8.float.writeDoubleLE,8,e)};var writeBytes=util$8.Array.prototype.set?function fe(e,ye,me){ye.set(e,me)}:function fe(e,ye,me){for(var be=0;be<e.length;++be)ye[me+be]=e[be]};Writer$1.prototype.bytes=function fe(e){var ye=e.length>>>0;if(!ye)return this._push(writeByte,1,0);if(util$8.isString(e)){var me=Writer$1.alloc(ye=base64.length(e));base64.decode(e,me,0),e=me}return this.uint32(ye)._push(writeBytes,ye,e)};Writer$1.prototype.string=function fe(e){var ye=utf8$1.length(e);return ye?this.uint32(ye)._push(utf8$1.write,ye,e):this._push(writeByte,1,0)};Writer$1.prototype.fork=function fe(){return this.states=new State(this),this.head=this.tail=new Op(noop,0,0),this.len=0,this};Writer$1.prototype.reset=function fe(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop,0,0),this.len=0),this};Writer$1.prototype.ldelim=function fe(){var e=this.head,ye=this.tail,me=this.len;return this.reset().uint32(me),me&&(this.tail.next=e.next,this.tail=ye,this.len+=me),this};Writer$1.prototype.finish=function fe(){for(var e=this.head.next,ye=this.constructor.alloc(this.len),me=0;e;)e.fn(e.val,ye,me),me+=e.len,e=e.next;return ye};Writer$1._configure=function(fe){BufferWriter$1=fe,Writer$1.create=create$1(),BufferWriter$1._configure()};var writer_buffer=BufferWriter,Writer=writer;(BufferWriter.prototype=Object.create(Writer.prototype)).constructor=BufferWriter;var util$7=requireMinimal$1();function BufferWriter(){Writer.call(this)}BufferWriter._configure=function(){BufferWriter.alloc=util$7._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=util$7.Buffer&&util$7.Buffer.prototype instanceof Uint8Array&&util$7.Buffer.prototype.set.name==="set"?function(e,ye,me){ye.set(e,me)}:function(e,ye,me){if(e.copy)e.copy(ye,me,0,e.length);else for(var be=0;be<e.length;)ye[me++]=e[be++]}};BufferWriter.prototype.bytes=function fe(e){util$7.isString(e)&&(e=util$7._Buffer_from(e,"base64"));var ye=e.length>>>0;return this.uint32(ye),ye&&this._push(BufferWriter.writeBytesBuffer,ye,e),this};function writeStringBuffer(fe,e,ye){fe.length<40?util$7.utf8.write(fe,e,ye):e.utf8Write?e.utf8Write(fe,ye):e.write(fe,ye)}BufferWriter.prototype.string=function fe(e){var ye=util$7.Buffer.byteLength(e);return this.uint32(ye),ye&&this._push(writeStringBuffer,ye,e),this};BufferWriter._configure();var reader=Reader$1,util$6=requireMinimal$1(),BufferReader$1,LongBits=util$6.LongBits,utf8=util$6.utf8;function indexOutOfRange(fe,e){return RangeError("index out of range: "+fe.pos+" + "+(e||1)+" > "+fe.len)}function Reader$1(fe){this.buf=fe,this.pos=0,this.len=fe.length}var create_array=typeof Uint8Array<"u"?function fe(e){if(e instanceof Uint8Array||Array.isArray(e))return new Reader$1(e);throw Error("illegal buffer")}:function fe(e){if(Array.isArray(e))return new Reader$1(e);throw Error("illegal buffer")},create=function fe(){return util$6.Buffer?function(ye){return(Reader$1.create=function(be){return util$6.Buffer.isBuffer(be)?new BufferReader$1(be):create_array(be)})(ye)}:create_array};Reader$1.create=create();Reader$1.prototype._slice=util$6.Array.prototype.subarray||util$6.Array.prototype.slice;Reader$1.prototype.uint32=function fe(){var e=4294967295;return function(){if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return e}}();Reader$1.prototype.int32=function fe(){return this.uint32()|0};Reader$1.prototype.sint32=function fe(){var e=this.uint32();return e>>>1^-(e&1)|0};function readLongVarint(){var fe=new LongBits(0,0),e=0;if(this.len-this.pos>4){for(;e<4;++e)if(fe.lo=(fe.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return fe;if(fe.lo=(fe.lo|(this.buf[this.pos]&127)<<28)>>>0,fe.hi=(fe.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return fe;e=0}else{for(;e<3;++e){if(this.pos>=this.len)throw indexOutOfRange(this);if(fe.lo=(fe.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return fe}return fe.lo=(fe.lo|(this.buf[this.pos++]&127)<<e*7)>>>0,fe}if(this.len-this.pos>4){for(;e<5;++e)if(fe.hi=(fe.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return fe}else for(;e<5;++e){if(this.pos>=this.len)throw indexOutOfRange(this);if(fe.hi=(fe.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return fe}throw Error("invalid varint encoding")}Reader$1.prototype.bool=function fe(){return this.uint32()!==0};function readFixed32_end(fe,e){return(fe[e-4]|fe[e-3]<<8|fe[e-2]<<16|fe[e-1]<<24)>>>0}Reader$1.prototype.fixed32=function fe(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)};Reader$1.prototype.sfixed32=function fe(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)|0};function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader$1.prototype.float=function fe(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var e=util$6.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e};Reader$1.prototype.double=function fe(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var e=util$6.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e};Reader$1.prototype.bytes=function fe(){var e=this.uint32(),ye=this.pos,me=this.pos+e;if(me>this.len)throw indexOutOfRange(this,e);if(this.pos+=e,Array.isArray(this.buf))return this.buf.slice(ye,me);if(ye===me){var be=util$6.Buffer;return be?be.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,ye,me)};Reader$1.prototype.string=function fe(){var e=this.bytes();return utf8.read(e,0,e.length)};Reader$1.prototype.skip=function fe(e){if(typeof e=="number"){if(this.pos+e>this.len)throw indexOutOfRange(this,e);this.pos+=e}else do if(this.pos>=this.len)throw indexOutOfRange(this);while(this.buf[this.pos++]&128);return this};Reader$1.prototype.skipType=function(fe){switch(fe){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(fe=this.uint32()&7)!==4;)this.skipType(fe);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+fe+" at offset "+this.pos)}return this};Reader$1._configure=function(fe){BufferReader$1=fe,Reader$1.create=create(),BufferReader$1._configure();var e=util$6.Long?"toLong":"toNumber";util$6.merge(Reader$1.prototype,{int64:function(){return readLongVarint.call(this)[e](!1)},uint64:function(){return readLongVarint.call(this)[e](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[e](!1)},fixed64:function(){return readFixed64.call(this)[e](!0)},sfixed64:function(){return readFixed64.call(this)[e](!1)}})};var reader_buffer=BufferReader,Reader=reader;(BufferReader.prototype=Object.create(Reader.prototype)).constructor=BufferReader;var util$5=requireMinimal$1();function BufferReader(fe){Reader.call(this,fe)}BufferReader._configure=function(){util$5.Buffer&&(BufferReader.prototype._slice=util$5.Buffer.prototype.slice)};BufferReader.prototype.string=function fe(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))};BufferReader._configure();var rpc={},service$1=Service$1,util$4=requireMinimal$1();(Service$1.prototype=Object.create(util$4.EventEmitter.prototype)).constructor=Service$1;function Service$1(fe,e,ye){if(typeof fe!="function")throw TypeError("rpcImpl must be a function");util$4.EventEmitter.call(this),this.rpcImpl=fe,this.requestDelimited=!!e,this.responseDelimited=!!ye}Service$1.prototype.rpcCall=function fe(e,ye,me,be,ve){if(!be)throw TypeError("request must be specified");var Ee=this;if(!ve)return util$4.asPromise(fe,Ee,e,ye,me,be);if(!Ee.rpcImpl){setTimeout(function(){ve(Error("already ended"))},0);return}try{return Ee.rpcImpl(e,ye[Ee.requestDelimited?"encodeDelimited":"encode"](be).finish(),function(xe,gr){if(xe)return Ee.emit("error",xe,e),ve(xe);if(gr===null){Ee.end(!0);return}if(!(gr instanceof me))try{gr=me[Ee.responseDelimited?"decodeDelimited":"decode"](gr)}catch(we){return Ee.emit("error",we,e),ve(we)}return Ee.emit("data",gr,e),ve(null,gr)})}catch(Oe){Ee.emit("error",Oe,e),setTimeout(function(){ve(Oe)},0);return}};Service$1.prototype.end=function fe(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};(function(fe){var e=fe;e.Service=service$1})(rpc);var roots={};(function(fe){var e=fe;e.build="minimal",e.Writer=writer,e.BufferWriter=writer_buffer,e.Reader=reader,e.BufferReader=reader_buffer,e.util=requireMinimal$1(),e.rpc=rpc,e.roots=roots,e.configure=ye;function ye(){e.util._configure(),e.Writer._configure(e.BufferWriter),e.Reader._configure(e.BufferReader)}ye()})(indexMinimal);var util$3={exports:{}},codegen_1=codegen;function codegen(fe,e){typeof fe=="string"&&(e=fe,fe=void 0);var ye=[];function me(ve){if(typeof ve!="string"){var Ee=be();if(codegen.verbose&&console.log("codegen: "+Ee),Ee="return "+Ee,ve){for(var Oe=Object.keys(ve),xe=new Array(Oe.length+1),gr=new Array(Oe.length),we=0;we<Oe.length;)xe[we]=Oe[we],gr[we]=ve[Oe[we++]];return xe[we]=Ee,Function.apply(null,xe).apply(null,gr)}return Function(Ee)()}for(var Se=new Array(arguments.length-1),$r=0;$r<Se.length;)Se[$r]=arguments[++$r];if($r=0,ve=ve.replace(/%([%dfijs])/g,function(Br,Vr){var oo=Se[$r++];switch(Vr){case"d":case"f":return String(Number(oo));case"i":return String(Math.floor(oo));case"j":return JSON.stringify(oo);case"s":return String(oo)}return"%"}),$r!==Se.length)throw Error("parameter count mismatch");return ye.push(ve),me}function be(ve){return"function "+(ve||e||"")+"("+(fe&&fe.join(",")||"")+`){
  `+ye.join(`
  `)+`
}`}return me.toString=be,me}codegen.verbose=!1;var fetch_1=fetch$1,asPromise=aspromise,inquire=inquire_1,fs$1=inquire("fs");function fetch$1(fe,e,ye){return typeof e=="function"?(ye=e,e={}):e||(e={}),ye?!e.xhr&&fs$1&&fs$1.readFile?fs$1.readFile(fe,function(be,ve){return be&&typeof XMLHttpRequest<"u"?fetch$1.xhr(fe,e,ye):be?ye(be):ye(null,e.binary?ve:ve.toString("utf8"))}):fetch$1.xhr(fe,e,ye):asPromise(fetch$1,this,fe,e)}fetch$1.xhr=function fe(e,ye,me){var be=new XMLHttpRequest;be.onreadystatechange=function(){if(be.readyState===4){if(be.status!==0&&be.status!==200)return me(Error("status "+be.status));if(ye.binary){var Ee=be.response;if(!Ee){Ee=[];for(var Oe=0;Oe<be.responseText.length;++Oe)Ee.push(be.responseText.charCodeAt(Oe)&255)}return me(null,typeof Uint8Array<"u"?new Uint8Array(Ee):Ee)}return me(null,be.responseText)}},ye.binary&&("overrideMimeType"in be&&be.overrideMimeType("text/plain; charset=x-user-defined"),be.responseType="arraybuffer"),be.open("GET",e),be.send()};var path={};(function(fe){var e=fe,ye=e.isAbsolute=function(ve){return/^(?:\/|\w+:)/.test(ve)},me=e.normalize=function(ve){ve=ve.replace(/\\/g,"/").replace(/\/{2,}/g,"/");var Ee=ve.split("/"),Oe=ye(ve),xe="";Oe&&(xe=Ee.shift()+"/");for(var gr=0;gr<Ee.length;)Ee[gr]===".."?gr>0&&Ee[gr-1]!==".."?Ee.splice(--gr,2):Oe?Ee.splice(gr,1):++gr:Ee[gr]==="."?Ee.splice(gr,1):++gr;return xe+Ee.join("/")};e.resolve=function(ve,Ee,Oe){return Oe||(Ee=me(Ee)),ye(Ee)?Ee:(Oe||(ve=me(ve)),(ve=ve.replace(/(?:\/|^)[^/]+$/,"")).length?me(ve+"/"+Ee):Ee)}})(path);var types$1={},hasRequiredTypes;function requireTypes(){return hasRequiredTypes||(hasRequiredTypes=1,function(fe){var e=fe,ye=requireUtil(),me=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function be(ve,Ee){var Oe=0,xe={};for(Ee|=0;Oe<ve.length;)xe[me[Oe+Ee]]=ve[Oe++];return xe}e.basic=be([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),e.defaults=be([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",ye.emptyArray,null]),e.long=be([0,0,0,1,1],7),e.mapKey=be([0,0,0,5,5,0,0,0,1,1,0,2],2),e.packed=be([1,5,0,0,0,5,5,0,0,0,1,1,0])}(types$1)),types$1}var field,hasRequiredField;function requireField(){if(hasRequiredField)return field;hasRequiredField=1,field=Ee;var fe=requireObject();((Ee.prototype=Object.create(fe.prototype)).constructor=Ee).className="Field";var e=require_enum(),ye=requireTypes(),me=requireUtil(),be,ve=/^required|optional|repeated$/;Ee.fromJSON=function(xe,gr){return new Ee(xe,gr.id,gr.type,gr.rule,gr.extend,gr.options,gr.comment)};function Ee(Oe,xe,gr,we,Se,$r,Fr){if(me.isObject(we)?(Fr=Se,$r=we,we=Se=void 0):me.isObject(Se)&&(Fr=$r,$r=Se,Se=void 0),fe.call(this,Oe,$r),!me.isInteger(xe)||xe<0)throw TypeError("id must be a non-negative integer");if(!me.isString(gr))throw TypeError("type must be a string");if(we!==void 0&&!ve.test(we=we.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(Se!==void 0&&!me.isString(Se))throw TypeError("extend must be a string");we==="proto3_optional"&&(we="optional"),this.rule=we&&we!=="optional"?we:void 0,this.type=gr,this.id=xe,this.extend=Se||void 0,this.required=we==="required",this.optional=!this.required,this.repeated=we==="repeated",this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=me.Long?ye.long[gr]!==void 0:!1,this.bytes=gr==="bytes",this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null,this.comment=Fr}return Object.defineProperty(Ee.prototype,"packed",{get:function(){return this._packed===null&&(this._packed=this.getOption("packed")!==!1),this._packed}}),Ee.prototype.setOption=function(xe,gr,we){return xe==="packed"&&(this._packed=null),fe.prototype.setOption.call(this,xe,gr,we)},Ee.prototype.toJSON=function(xe){var gr=xe?!!xe.keepComments:!1;return me.toObject(["rule",this.rule!=="optional"&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",gr?this.comment:void 0])},Ee.prototype.resolve=function(){if(this.resolved)return this;if((this.typeDefault=ye.defaults[this.type])===void 0?(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof be?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]):this.options&&this.options.proto3_optional&&(this.typeDefault=null),this.options&&this.options.default!=null&&(this.typeDefault=this.options.default,this.resolvedType instanceof e&&typeof this.typeDefault=="string"&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&((this.options.packed===!0||this.options.packed!==void 0&&this.resolvedType&&!(this.resolvedType instanceof e))&&delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long)this.typeDefault=me.Long.fromNumber(this.typeDefault,this.type.charAt(0)==="u"),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&typeof this.typeDefault=="string"){var xe;me.base64.test(this.typeDefault)?me.base64.decode(this.typeDefault,xe=me.newBuffer(me.base64.length(this.typeDefault)),0):me.utf8.write(this.typeDefault,xe=me.newBuffer(me.utf8.length(this.typeDefault)),0),this.typeDefault=xe}return this.map?this.defaultValue=me.emptyObject:this.repeated?this.defaultValue=me.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof be&&(this.parent.ctor.prototype[this.name]=this.defaultValue),fe.prototype.resolve.call(this)},Ee.d=function(xe,gr,we,Se){return typeof gr=="function"?gr=me.decorateType(gr).name:gr&&typeof gr=="object"&&(gr=me.decorateEnum(gr).name),function(Fr,Br){me.decorateType(Fr.constructor).add(new Ee(Br,xe,gr,we,{default:Se}))}},Ee._configure=function(xe){be=xe},field}var oneof,hasRequiredOneof;function requireOneof(){if(hasRequiredOneof)return oneof;hasRequiredOneof=1,oneof=me;var fe=requireObject();((me.prototype=Object.create(fe.prototype)).constructor=me).className="OneOf";var e=requireField(),ye=requireUtil();function me(ve,Ee,Oe,xe){if(Array.isArray(Ee)||(Oe=Ee,Ee=void 0),fe.call(this,ve,Oe),!(Ee===void 0||Array.isArray(Ee)))throw TypeError("fieldNames must be an Array");this.oneof=Ee||[],this.fieldsArray=[],this.comment=xe}me.fromJSON=function(Ee,Oe){return new me(Ee,Oe.oneof,Oe.options,Oe.comment)},me.prototype.toJSON=function(Ee){var Oe=Ee?!!Ee.keepComments:!1;return ye.toObject(["options",this.options,"oneof",this.oneof,"comment",Oe?this.comment:void 0])};function be(ve){if(ve.parent)for(var Ee=0;Ee<ve.fieldsArray.length;++Ee)ve.fieldsArray[Ee].parent||ve.parent.add(ve.fieldsArray[Ee])}return me.prototype.add=function(Ee){if(!(Ee instanceof e))throw TypeError("field must be a Field");return Ee.parent&&Ee.parent!==this.parent&&Ee.parent.remove(Ee),this.oneof.push(Ee.name),this.fieldsArray.push(Ee),Ee.partOf=this,be(this),this},me.prototype.remove=function(Ee){if(!(Ee instanceof e))throw TypeError("field must be a Field");var Oe=this.fieldsArray.indexOf(Ee);if(Oe<0)throw Error(Ee+" is not a member of "+this);return this.fieldsArray.splice(Oe,1),Oe=this.oneof.indexOf(Ee.name),Oe>-1&&this.oneof.splice(Oe,1),Ee.partOf=null,this},me.prototype.onAdd=function(Ee){fe.prototype.onAdd.call(this,Ee);for(var Oe=this,xe=0;xe<this.oneof.length;++xe){var gr=Ee.get(this.oneof[xe]);gr&&!gr.partOf&&(gr.partOf=Oe,Oe.fieldsArray.push(gr))}be(this)},me.prototype.onRemove=function(Ee){for(var Oe=0,xe;Oe<this.fieldsArray.length;++Oe)(xe=this.fieldsArray[Oe]).parent&&xe.parent.remove(xe);fe.prototype.onRemove.call(this,Ee)},me.d=function(){for(var Ee=new Array(arguments.length),Oe=0;Oe<arguments.length;)Ee[Oe]=arguments[Oe++];return function(gr,we){ye.decorateType(gr.constructor).add(new me(we,Ee)),Object.defineProperty(gr,we,{get:ye.oneOfGetter(Ee),set:ye.oneOfSetter(Ee)})}},oneof}var namespace,hasRequiredNamespace;function requireNamespace(){if(hasRequiredNamespace)return namespace;hasRequiredNamespace=1,namespace=xe;var fe=requireObject();((xe.prototype=Object.create(fe.prototype)).constructor=xe).className="Namespace";var e=requireField(),ye=requireUtil(),me=requireOneof(),be,ve,Ee;xe.fromJSON=function(Se,$r){return new xe(Se,$r.options).addJSON($r.nested)};function Oe(we,Se){if(we&&we.length){for(var $r={},Fr=0;Fr<we.length;++Fr)$r[we[Fr].name]=we[Fr].toJSON(Se);return $r}}xe.arrayToJSON=Oe,xe.isReservedId=function(Se,$r){if(Se){for(var Fr=0;Fr<Se.length;++Fr)if(typeof Se[Fr]!="string"&&Se[Fr][0]<=$r&&Se[Fr][1]>$r)return!0}return!1},xe.isReservedName=function(Se,$r){if(Se){for(var Fr=0;Fr<Se.length;++Fr)if(Se[Fr]===$r)return!0}return!1};function xe(we,Se){fe.call(this,we,Se),this.nested=void 0,this._nestedArray=null}function gr(we){return we._nestedArray=null,we}return Object.defineProperty(xe.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=ye.toArray(this.nested))}}),xe.prototype.toJSON=function(Se){return ye.toObject(["options",this.options,"nested",Oe(this.nestedArray,Se)])},xe.prototype.addJSON=function(Se){var $r=this;if(Se)for(var Fr=Object.keys(Se),Br=0,Vr;Br<Fr.length;++Br)Vr=Se[Fr[Br]],$r.add((Vr.fields!==void 0?be.fromJSON:Vr.values!==void 0?Ee.fromJSON:Vr.methods!==void 0?ve.fromJSON:Vr.id!==void 0?e.fromJSON:xe.fromJSON)(Fr[Br],Vr));return this},xe.prototype.get=function(Se){return this.nested&&this.nested[Se]||null},xe.prototype.getEnum=function(Se){if(this.nested&&this.nested[Se]instanceof Ee)return this.nested[Se].values;throw Error("no such enum: "+Se)},xe.prototype.add=function(Se){if(!(Se instanceof e&&Se.extend!==void 0||Se instanceof be||Se instanceof me||Se instanceof Ee||Se instanceof ve||Se instanceof xe))throw TypeError("object must be a valid nested object");if(!this.nested)this.nested={};else{var $r=this.get(Se.name);if($r)if($r instanceof xe&&Se instanceof xe&&!($r instanceof be||$r instanceof ve)){for(var Fr=$r.nestedArray,Br=0;Br<Fr.length;++Br)Se.add(Fr[Br]);this.remove($r),this.nested||(this.nested={}),Se.setOptions($r.options,!0)}else throw Error("duplicate name '"+Se.name+"' in "+this)}return this.nested[Se.name]=Se,Se.onAdd(this),gr(this)},xe.prototype.remove=function(Se){if(!(Se instanceof fe))throw TypeError("object must be a ReflectionObject");if(Se.parent!==this)throw Error(Se+" is not a member of "+this);return delete this.nested[Se.name],Object.keys(this.nested).length||(this.nested=void 0),Se.onRemove(this),gr(this)},xe.prototype.define=function(Se,$r){if(ye.isString(Se))Se=Se.split(".");else if(!Array.isArray(Se))throw TypeError("illegal path");if(Se&&Se.length&&Se[0]==="")throw Error("path must be relative");for(var Fr=this;Se.length>0;){var Br=Se.shift();if(Fr.nested&&Fr.nested[Br]){if(Fr=Fr.nested[Br],!(Fr instanceof xe))throw Error("path conflicts with non-namespace objects")}else Fr.add(Fr=new xe(Br))}return $r&&Fr.addJSON($r),Fr},xe.prototype.resolveAll=function(){for(var Se=this.nestedArray,$r=0;$r<Se.length;)Se[$r]instanceof xe?Se[$r++].resolveAll():Se[$r++].resolve();return this.resolve()},xe.prototype.lookup=function(Se,$r,Fr){if(typeof $r=="boolean"?(Fr=$r,$r=void 0):$r&&!Array.isArray($r)&&($r=[$r]),ye.isString(Se)&&Se.length){if(Se===".")return this.root;Se=Se.split(".")}else if(!Se.length)return this;if(Se[0]==="")return this.root.lookup(Se.slice(1),$r);var Br=this.get(Se[0]);if(Br){if(Se.length===1){if(!$r||$r.indexOf(Br.constructor)>-1)return Br}else if(Br instanceof xe&&(Br=Br.lookup(Se.slice(1),$r,!0)))return Br}else for(var Vr=0;Vr<this.nestedArray.length;++Vr)if(this._nestedArray[Vr]instanceof xe&&(Br=this._nestedArray[Vr].lookup(Se,$r,!0)))return Br;return this.parent===null||Fr?null:this.parent.lookup(Se,$r)},xe.prototype.lookupType=function(Se){var $r=this.lookup(Se,[be]);if(!$r)throw Error("no such type: "+Se);return $r},xe.prototype.lookupEnum=function(Se){var $r=this.lookup(Se,[Ee]);if(!$r)throw Error("no such Enum '"+Se+"' in "+this);return $r},xe.prototype.lookupTypeOrEnum=function(Se){var $r=this.lookup(Se,[be,Ee]);if(!$r)throw Error("no such Type or Enum '"+Se+"' in "+this);return $r},xe.prototype.lookupService=function(Se){var $r=this.lookup(Se,[ve]);if(!$r)throw Error("no such Service '"+Se+"' in "+this);return $r},xe._configure=function(we,Se,$r){be=we,ve=Se,Ee=$r},namespace}var mapfield,hasRequiredMapfield;function requireMapfield(){if(hasRequiredMapfield)return mapfield;hasRequiredMapfield=1,mapfield=me;var fe=requireField();((me.prototype=Object.create(fe.prototype)).constructor=me).className="MapField";var e=requireTypes(),ye=requireUtil();function me(be,ve,Ee,Oe,xe,gr){if(fe.call(this,be,ve,Oe,void 0,void 0,xe,gr),!ye.isString(Ee))throw TypeError("keyType must be a string");this.keyType=Ee,this.resolvedKeyType=null,this.map=!0}return me.fromJSON=function(ve,Ee){return new me(ve,Ee.id,Ee.keyType,Ee.type,Ee.options,Ee.comment)},me.prototype.toJSON=function(ve){var Ee=ve?!!ve.keepComments:!1;return ye.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",Ee?this.comment:void 0])},me.prototype.resolve=function(){if(this.resolved)return this;if(e.mapKey[this.keyType]===void 0)throw Error("invalid key type: "+this.keyType);return fe.prototype.resolve.call(this)},me.d=function(ve,Ee,Oe){return typeof Oe=="function"?Oe=ye.decorateType(Oe).name:Oe&&typeof Oe=="object"&&(Oe=ye.decorateEnum(Oe).name),function(gr,we){ye.decorateType(gr.constructor).add(new me(we,ve,Ee,Oe))}},mapfield}var method,hasRequiredMethod;function requireMethod(){if(hasRequiredMethod)return method;hasRequiredMethod=1,method=ye;var fe=requireObject();((ye.prototype=Object.create(fe.prototype)).constructor=ye).className="Method";var e=requireUtil();function ye(me,be,ve,Ee,Oe,xe,gr,we,Se){if(e.isObject(Oe)?(gr=Oe,Oe=xe=void 0):e.isObject(xe)&&(gr=xe,xe=void 0),!(be===void 0||e.isString(be)))throw TypeError("type must be a string");if(!e.isString(ve))throw TypeError("requestType must be a string");if(!e.isString(Ee))throw TypeError("responseType must be a string");fe.call(this,me,gr),this.type=be||"rpc",this.requestType=ve,this.requestStream=Oe?!0:void 0,this.responseType=Ee,this.responseStream=xe?!0:void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=we,this.parsedOptions=Se}return ye.fromJSON=function(be,ve){return new ye(be,ve.type,ve.requestType,ve.responseType,ve.requestStream,ve.responseStream,ve.options,ve.comment,ve.parsedOptions)},ye.prototype.toJSON=function(be){var ve=be?!!be.keepComments:!1;return e.toObject(["type",this.type!=="rpc"&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",ve?this.comment:void 0,"parsedOptions",this.parsedOptions])},ye.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),fe.prototype.resolve.call(this))},method}var service,hasRequiredService;function requireService(){if(hasRequiredService)return service;hasRequiredService=1,service=be;var fe=requireNamespace();((be.prototype=Object.create(fe.prototype)).constructor=be).className="Service";var e=requireMethod(),ye=requireUtil(),me=rpc;function be(Ee,Oe){fe.call(this,Ee,Oe),this.methods={},this._methodsArray=null}be.fromJSON=function(Oe,xe){var gr=new be(Oe,xe.options);if(xe.methods)for(var we=Object.keys(xe.methods),Se=0;Se<we.length;++Se)gr.add(e.fromJSON(we[Se],xe.methods[we[Se]]));return xe.nested&&gr.addJSON(xe.nested),gr.comment=xe.comment,gr},be.prototype.toJSON=function(Oe){var xe=fe.prototype.toJSON.call(this,Oe),gr=Oe?!!Oe.keepComments:!1;return ye.toObject(["options",xe&&xe.options||void 0,"methods",fe.arrayToJSON(this.methodsArray,Oe)||{},"nested",xe&&xe.nested||void 0,"comment",gr?this.comment:void 0])},Object.defineProperty(be.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=ye.toArray(this.methods))}});function ve(Ee){return Ee._methodsArray=null,Ee}return be.prototype.get=function(Oe){return this.methods[Oe]||fe.prototype.get.call(this,Oe)},be.prototype.resolveAll=function(){for(var Oe=this.methodsArray,xe=0;xe<Oe.length;++xe)Oe[xe].resolve();return fe.prototype.resolve.call(this)},be.prototype.add=function(Oe){if(this.get(Oe.name))throw Error("duplicate name '"+Oe.name+"' in "+this);return Oe instanceof e?(this.methods[Oe.name]=Oe,Oe.parent=this,ve(this)):fe.prototype.add.call(this,Oe)},be.prototype.remove=function(Oe){if(Oe instanceof e){if(this.methods[Oe.name]!==Oe)throw Error(Oe+" is not a member of "+this);return delete this.methods[Oe.name],Oe.parent=null,ve(this)}return fe.prototype.remove.call(this,Oe)},be.prototype.create=function(Oe,xe,gr){for(var we=new me.Service(Oe,xe,gr),Se=0,$r;Se<this.methodsArray.length;++Se){var Fr=ye.lcFirst(($r=this._methodsArray[Se]).resolve().name).replace(/[^$\w_]/g,"");we[Fr]=ye.codegen(["r","c"],ye.isReserved(Fr)?Fr+"_":Fr)("return this.rpcCall(m,q,s,r,c)")({m:$r,q:$r.resolvedRequestType.ctor,s:$r.resolvedResponseType.ctor})}return we},service}var message=Message,util$2=requireMinimal$1();function Message(fe){if(fe)for(var e=Object.keys(fe),ye=0;ye<e.length;++ye)this[e[ye]]=fe[e[ye]]}Message.create=function fe(e){return this.$type.create(e)};Message.encode=function fe(e,ye){return this.$type.encode(e,ye)};Message.encodeDelimited=function fe(e,ye){return this.$type.encodeDelimited(e,ye)};Message.decode=function fe(e){return this.$type.decode(e)};Message.decodeDelimited=function fe(e){return this.$type.decodeDelimited(e)};Message.verify=function fe(e){return this.$type.verify(e)};Message.fromObject=function fe(e){return this.$type.fromObject(e)};Message.toObject=function fe(e,ye){return this.$type.toObject(e,ye)};Message.prototype.toJSON=function fe(){return this.$type.toObject(this,util$2.toJSONOptions)};var decoder_1,hasRequiredDecoder;function requireDecoder(){if(hasRequiredDecoder)return decoder_1;hasRequiredDecoder=1,decoder_1=be;var fe=require_enum(),e=requireTypes(),ye=requireUtil();function me(ve){return"missing required '"+ve.name+"'"}function be(ve){var Ee=ye.codegen(["r","l"],ve.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(ve.fieldsArray.filter(function($r){return $r.map}).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");ve.group&&Ee("if((t&7)===4)")("break"),Ee("switch(t>>>3){");for(var Oe=0;Oe<ve.fieldsArray.length;++Oe){var xe=ve._fieldsArray[Oe].resolve(),gr=xe.resolvedType instanceof fe?"int32":xe.type,we="m"+ye.safeProp(xe.name);Ee("case %i: {",xe.id),xe.map?(Ee("if(%s===util.emptyObject)",we)("%s={}",we)("var c2 = r.uint32()+r.pos"),e.defaults[xe.keyType]!==void 0?Ee("k=%j",e.defaults[xe.keyType]):Ee("k=null"),e.defaults[gr]!==void 0?Ee("value=%j",e.defaults[gr]):Ee("value=null"),Ee("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",xe.keyType)("case 2:"),e.basic[gr]===void 0?Ee("value=types[%i].decode(r,r.uint32())",Oe):Ee("value=r.%s()",gr),Ee("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),e.long[xe.keyType]!==void 0?Ee('%s[typeof k==="object"?util.longToHash(k):k]=value',we):Ee("%s[k]=value",we)):xe.repeated?(Ee("if(!(%s&&%s.length))",we,we)("%s=[]",we),e.packed[gr]!==void 0&&Ee("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",we,gr)("}else"),e.basic[gr]===void 0?Ee(xe.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",we,Oe):Ee("%s.push(r.%s())",we,gr)):e.basic[gr]===void 0?Ee(xe.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",we,Oe):Ee("%s=r.%s()",we,gr),Ee("break")("}")}for(Ee("default:")("r.skipType(t&7)")("break")("}")("}"),Oe=0;Oe<ve._fieldsArray.length;++Oe){var Se=ve._fieldsArray[Oe];Se.required&&Ee("if(!m.hasOwnProperty(%j))",Se.name)("throw util.ProtocolError(%j,{instance:m})",me(Se))}return Ee("return m")}return decoder_1}var verifier_1,hasRequiredVerifier;function requireVerifier(){if(hasRequiredVerifier)return verifier_1;hasRequiredVerifier=1,verifier_1=ve;var fe=require_enum(),e=requireUtil();function ye(Ee,Oe){return Ee.name+": "+Oe+(Ee.repeated&&Oe!=="array"?"[]":Ee.map&&Oe!=="object"?"{k:"+Ee.keyType+"}":"")+" expected"}function me(Ee,Oe,xe,gr){if(Oe.resolvedType)if(Oe.resolvedType instanceof fe){Ee("switch(%s){",gr)("default:")("return%j",ye(Oe,"enum value"));for(var we=Object.keys(Oe.resolvedType.values),Se=0;Se<we.length;++Se)Ee("case %i:",Oe.resolvedType.values[we[Se]]);Ee("break")("}")}else Ee("{")("var e=types[%i].verify(%s);",xe,gr)("if(e)")("return%j+e",Oe.name+".")("}");else switch(Oe.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":Ee("if(!util.isInteger(%s))",gr)("return%j",ye(Oe,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":Ee("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",gr,gr,gr,gr)("return%j",ye(Oe,"integer|Long"));break;case"float":case"double":Ee('if(typeof %s!=="number")',gr)("return%j",ye(Oe,"number"));break;case"bool":Ee('if(typeof %s!=="boolean")',gr)("return%j",ye(Oe,"boolean"));break;case"string":Ee("if(!util.isString(%s))",gr)("return%j",ye(Oe,"string"));break;case"bytes":Ee('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',gr,gr,gr)("return%j",ye(Oe,"buffer"));break}return Ee}function be(Ee,Oe,xe){switch(Oe.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":Ee("if(!util.key32Re.test(%s))",xe)("return%j",ye(Oe,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":Ee("if(!util.key64Re.test(%s))",xe)("return%j",ye(Oe,"integer|Long key"));break;case"bool":Ee("if(!util.key2Re.test(%s))",xe)("return%j",ye(Oe,"boolean key"));break}return Ee}function ve(Ee){var Oe=e.codegen(["m"],Ee.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),xe=Ee.oneofsArray,gr={};xe.length&&Oe("var p={}");for(var we=0;we<Ee.fieldsArray.length;++we){var Se=Ee._fieldsArray[we].resolve(),$r="m"+e.safeProp(Se.name);if(Se.optional&&Oe("if(%s!=null&&m.hasOwnProperty(%j)){",$r,Se.name),Se.map)Oe("if(!util.isObject(%s))",$r)("return%j",ye(Se,"object"))("var k=Object.keys(%s)",$r)("for(var i=0;i<k.length;++i){"),be(Oe,Se,"k[i]"),me(Oe,Se,we,$r+"[k[i]]")("}");else if(Se.repeated)Oe("if(!Array.isArray(%s))",$r)("return%j",ye(Se,"array"))("for(var i=0;i<%s.length;++i){",$r),me(Oe,Se,we,$r+"[i]")("}");else{if(Se.partOf){var Fr=e.safeProp(Se.partOf.name);gr[Se.partOf.name]===1&&Oe("if(p%s===1)",Fr)("return%j",Se.partOf.name+": multiple values"),gr[Se.partOf.name]=1,Oe("p%s=1",Fr)}me(Oe,Se,we,$r)}Se.optional&&Oe("}")}return Oe("return null")}return verifier_1}var converter={},hasRequiredConverter;function requireConverter(){return hasRequiredConverter||(hasRequiredConverter=1,function(fe){var e=fe,ye=require_enum(),me=requireUtil();function be(Ee,Oe,xe,gr){var we=!1;if(Oe.resolvedType)if(Oe.resolvedType instanceof ye){Ee("switch(d%s){",gr);for(var Se=Oe.resolvedType.values,$r=Object.keys(Se),Fr=0;Fr<$r.length;++Fr)Se[$r[Fr]]===Oe.typeDefault&&!we&&(Ee("default:")('if(typeof(d%s)==="number"){m%s=d%s;break}',gr,gr,gr),Oe.repeated||Ee("break"),we=!0),Ee("case%j:",$r[Fr])("case %i:",Se[$r[Fr]])("m%s=%j",gr,Se[$r[Fr]])("break");Ee("}")}else Ee('if(typeof d%s!=="object")',gr)("throw TypeError(%j)",Oe.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",gr,xe,gr);else{var Br=!1;switch(Oe.type){case"double":case"float":Ee("m%s=Number(d%s)",gr,gr);break;case"uint32":case"fixed32":Ee("m%s=d%s>>>0",gr,gr);break;case"int32":case"sint32":case"sfixed32":Ee("m%s=d%s|0",gr,gr);break;case"uint64":Br=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":Ee("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",gr,gr,Br)('else if(typeof d%s==="string")',gr)("m%s=parseInt(d%s,10)",gr,gr)('else if(typeof d%s==="number")',gr)("m%s=d%s",gr,gr)('else if(typeof d%s==="object")',gr)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",gr,gr,gr,Br?"true":"");break;case"bytes":Ee('if(typeof d%s==="string")',gr)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",gr,gr,gr)("else if(d%s.length >= 0)",gr)("m%s=d%s",gr,gr);break;case"string":Ee("m%s=String(d%s)",gr,gr);break;case"bool":Ee("m%s=Boolean(d%s)",gr,gr);break}}return Ee}e.fromObject=function(Oe){var xe=Oe.fieldsArray,gr=me.codegen(["d"],Oe.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!xe.length)return gr("return new this.ctor");gr("var m=new this.ctor");for(var we=0;we<xe.length;++we){var Se=xe[we].resolve(),$r=me.safeProp(Se.name);Se.map?(gr("if(d%s){",$r)('if(typeof d%s!=="object")',$r)("throw TypeError(%j)",Se.fullName+": object expected")("m%s={}",$r)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",$r),be(gr,Se,we,$r+"[ks[i]]")("}")("}")):Se.repeated?(gr("if(d%s){",$r)("if(!Array.isArray(d%s))",$r)("throw TypeError(%j)",Se.fullName+": array expected")("m%s=[]",$r)("for(var i=0;i<d%s.length;++i){",$r),be(gr,Se,we,$r+"[i]")("}")("}")):(Se.resolvedType instanceof ye||gr("if(d%s!=null){",$r),be(gr,Se,we,$r),Se.resolvedType instanceof ye||gr("}"))}return gr("return m")};function ve(Ee,Oe,xe,gr){if(Oe.resolvedType)Oe.resolvedType instanceof ye?Ee("d%s=o.enums===String?(types[%i].values[m%s]===undefined?m%s:types[%i].values[m%s]):m%s",gr,xe,gr,gr,xe,gr,gr):Ee("d%s=types[%i].toObject(m%s,o)",gr,xe,gr);else{var we=!1;switch(Oe.type){case"double":case"float":Ee("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",gr,gr,gr,gr);break;case"uint64":we=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":Ee('if(typeof m%s==="number")',gr)("d%s=o.longs===String?String(m%s):m%s",gr,gr,gr)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",gr,gr,gr,gr,we?"true":"",gr);break;case"bytes":Ee("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",gr,gr,gr,gr,gr);break;default:Ee("d%s=m%s",gr,gr);break}}return Ee}e.toObject=function(Oe){var xe=Oe.fieldsArray.slice().sort(me.compareFieldsById);if(!xe.length)return me.codegen()("return {}");for(var gr=me.codegen(["m","o"],Oe.name+"$toObject")("if(!o)")("o={}")("var d={}"),we=[],Se=[],$r=[],Fr=0;Fr<xe.length;++Fr)xe[Fr].partOf||(xe[Fr].resolve().repeated?we:xe[Fr].map?Se:$r).push(xe[Fr]);if(we.length){for(gr("if(o.arrays||o.defaults){"),Fr=0;Fr<we.length;++Fr)gr("d%s=[]",me.safeProp(we[Fr].name));gr("}")}if(Se.length){for(gr("if(o.objects||o.defaults){"),Fr=0;Fr<Se.length;++Fr)gr("d%s={}",me.safeProp(Se[Fr].name));gr("}")}if($r.length){for(gr("if(o.defaults){"),Fr=0;Fr<$r.length;++Fr){var Br=$r[Fr],Vr=me.safeProp(Br.name);if(Br.resolvedType instanceof ye)gr("d%s=o.enums===String?%j:%j",Vr,Br.resolvedType.valuesById[Br.typeDefault],Br.typeDefault);else if(Br.long)gr("if(util.Long){")("var n=new util.Long(%i,%i,%j)",Br.typeDefault.low,Br.typeDefault.high,Br.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",Vr)("}else")("d%s=o.longs===String?%j:%i",Vr,Br.typeDefault.toString(),Br.typeDefault.toNumber());else if(Br.bytes){var oo="["+Array.prototype.slice.call(Br.typeDefault).join(",")+"]";gr("if(o.bytes===String)d%s=%j",Vr,String.fromCharCode.apply(String,Br.typeDefault))("else{")("d%s=%s",Vr,oo)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",Vr,Vr)("}")}else gr("d%s=%j",Vr,Br.typeDefault)}gr("}")}var so=!1;for(Fr=0;Fr<xe.length;++Fr){var Br=xe[Fr],kr=Oe._fieldsArray.indexOf(Br),Vr=me.safeProp(Br.name);Br.map?(so||(so=!0,gr("var ks2")),gr("if(m%s&&(ks2=Object.keys(m%s)).length){",Vr,Vr)("d%s={}",Vr)("for(var j=0;j<ks2.length;++j){"),ve(gr,Br,kr,Vr+"[ks2[j]]")("}")):Br.repeated?(gr("if(m%s&&m%s.length){",Vr,Vr)("d%s=[]",Vr)("for(var j=0;j<m%s.length;++j){",Vr),ve(gr,Br,kr,Vr+"[j]")("}")):(gr("if(m%s!=null&&m.hasOwnProperty(%j)){",Vr,Br.name),ve(gr,Br,kr,Vr),Br.partOf&&gr("if(o.oneofs)")("d%s=%j",me.safeProp(Br.partOf.name),Br.name)),gr("}")}return gr("return d")}}(converter)),converter}var wrappers={};(function(fe){var e=fe,ye=message;e[".google.protobuf.Any"]={fromObject:function(me){if(me&&me["@type"]){var be=me["@type"].substring(me["@type"].lastIndexOf("/")+1),ve=this.lookup(be);if(ve){var Ee=me["@type"].charAt(0)==="."?me["@type"].slice(1):me["@type"];return Ee.indexOf("/")===-1&&(Ee="/"+Ee),this.create({type_url:Ee,value:ve.encode(ve.fromObject(me)).finish()})}}return this.fromObject(me)},toObject:function(me,be){var ve="type.googleapis.com/",Ee="",Oe="";if(be&&be.json&&me.type_url&&me.value){Oe=me.type_url.substring(me.type_url.lastIndexOf("/")+1),Ee=me.type_url.substring(0,me.type_url.lastIndexOf("/")+1);var xe=this.lookup(Oe);xe&&(me=xe.decode(me.value))}if(!(me instanceof this.ctor)&&me instanceof ye){var gr=me.$type.toObject(me,be),we=me.$type.fullName[0]==="."?me.$type.fullName.slice(1):me.$type.fullName;return Ee===""&&(Ee=ve),Oe=Ee+we,gr["@type"]=Oe,gr}return this.toObject(me,be)}}})(wrappers);var type,hasRequiredType;function requireType(){if(hasRequiredType)return type;hasRequiredType=1,type=Vr;var fe=requireNamespace();((Vr.prototype=Object.create(fe.prototype)).constructor=Vr).className="Type";var e=require_enum(),ye=requireOneof(),me=requireField(),be=requireMapfield(),ve=requireService(),Ee=message,Oe=reader,xe=writer,gr=requireUtil(),we=requireEncoder(),Se=requireDecoder(),$r=requireVerifier(),Fr=requireConverter(),Br=wrappers;function Vr(so,kr){fe.call(this,so,kr),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}Object.defineProperties(Vr.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var so=Object.keys(this.fields),kr=0;kr<so.length;++kr){var qr=this.fields[so[kr]],Hr=qr.id;if(this._fieldsById[Hr])throw Error("duplicate id "+Hr+" in "+this);this._fieldsById[Hr]=qr}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=gr.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=gr.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=Vr.generateConstructor(this)())},set:function(so){var kr=so.prototype;kr instanceof Ee||((so.prototype=new Ee).constructor=so,gr.merge(so.prototype,kr)),so.$type=so.prototype.$type=this,gr.merge(so,Ee,!0),this._ctor=so;for(var qr=0;qr<this.fieldsArray.length;++qr)this._fieldsArray[qr].resolve();var Hr={};for(qr=0;qr<this.oneofsArray.length;++qr)Hr[this._oneofsArray[qr].resolve().name]={get:gr.oneOfGetter(this._oneofsArray[qr].oneof),set:gr.oneOfSetter(this._oneofsArray[qr].oneof)};qr&&Object.defineProperties(so.prototype,Hr)}}}),Vr.generateConstructor=function(kr){for(var qr=gr.codegen(["p"],kr.name),Hr=0,Yr;Hr<kr.fieldsArray.length;++Hr)(Yr=kr._fieldsArray[Hr]).map?qr("this%s={}",gr.safeProp(Yr.name)):Yr.repeated&&qr("this%s=[]",gr.safeProp(Yr.name));return qr("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")};function oo(so){return so._fieldsById=so._fieldsArray=so._oneofsArray=null,delete so.encode,delete so.decode,delete so.verify,so}return Vr.fromJSON=function(kr,qr){var Hr=new Vr(kr,qr.options);Hr.extensions=qr.extensions,Hr.reserved=qr.reserved;for(var Yr=Object.keys(qr.fields),Ur=0;Ur<Yr.length;++Ur)Hr.add((typeof qr.fields[Yr[Ur]].keyType<"u"?be.fromJSON:me.fromJSON)(Yr[Ur],qr.fields[Yr[Ur]]));if(qr.oneofs)for(Yr=Object.keys(qr.oneofs),Ur=0;Ur<Yr.length;++Ur)Hr.add(ye.fromJSON(Yr[Ur],qr.oneofs[Yr[Ur]]));if(qr.nested)for(Yr=Object.keys(qr.nested),Ur=0;Ur<Yr.length;++Ur){var Mr=qr.nested[Yr[Ur]];Hr.add((Mr.id!==void 0?me.fromJSON:Mr.fields!==void 0?Vr.fromJSON:Mr.values!==void 0?e.fromJSON:Mr.methods!==void 0?ve.fromJSON:fe.fromJSON)(Yr[Ur],Mr))}return qr.extensions&&qr.extensions.length&&(Hr.extensions=qr.extensions),qr.reserved&&qr.reserved.length&&(Hr.reserved=qr.reserved),qr.group&&(Hr.group=!0),qr.comment&&(Hr.comment=qr.comment),Hr},Vr.prototype.toJSON=function(kr){var qr=fe.prototype.toJSON.call(this,kr),Hr=kr?!!kr.keepComments:!1;return gr.toObject(["options",qr&&qr.options||void 0,"oneofs",fe.arrayToJSON(this.oneofsArray,kr),"fields",fe.arrayToJSON(this.fieldsArray.filter(function(Yr){return!Yr.declaringField}),kr)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",qr&&qr.nested||void 0,"comment",Hr?this.comment:void 0])},Vr.prototype.resolveAll=function(){for(var kr=this.fieldsArray,qr=0;qr<kr.length;)kr[qr++].resolve();var Hr=this.oneofsArray;for(qr=0;qr<Hr.length;)Hr[qr++].resolve();return fe.prototype.resolveAll.call(this)},Vr.prototype.get=function(kr){return this.fields[kr]||this.oneofs&&this.oneofs[kr]||this.nested&&this.nested[kr]||null},Vr.prototype.add=function(kr){if(this.get(kr.name))throw Error("duplicate name '"+kr.name+"' in "+this);if(kr instanceof me&&kr.extend===void 0){if(this._fieldsById?this._fieldsById[kr.id]:this.fieldsById[kr.id])throw Error("duplicate id "+kr.id+" in "+this);if(this.isReservedId(kr.id))throw Error("id "+kr.id+" is reserved in "+this);if(this.isReservedName(kr.name))throw Error("name '"+kr.name+"' is reserved in "+this);return kr.parent&&kr.parent.remove(kr),this.fields[kr.name]=kr,kr.message=this,kr.onAdd(this),oo(this)}return kr instanceof ye?(this.oneofs||(this.oneofs={}),this.oneofs[kr.name]=kr,kr.onAdd(this),oo(this)):fe.prototype.add.call(this,kr)},Vr.prototype.remove=function(kr){if(kr instanceof me&&kr.extend===void 0){if(!this.fields||this.fields[kr.name]!==kr)throw Error(kr+" is not a member of "+this);return delete this.fields[kr.name],kr.parent=null,kr.onRemove(this),oo(this)}if(kr instanceof ye){if(!this.oneofs||this.oneofs[kr.name]!==kr)throw Error(kr+" is not a member of "+this);return delete this.oneofs[kr.name],kr.parent=null,kr.onRemove(this),oo(this)}return fe.prototype.remove.call(this,kr)},Vr.prototype.isReservedId=function(kr){return fe.isReservedId(this.reserved,kr)},Vr.prototype.isReservedName=function(kr){return fe.isReservedName(this.reserved,kr)},Vr.prototype.create=function(kr){return new this.ctor(kr)},Vr.prototype.setup=function(){for(var kr=this.fullName,qr=[],Hr=0;Hr<this.fieldsArray.length;++Hr)qr.push(this._fieldsArray[Hr].resolve().resolvedType);this.encode=we(this)({Writer:xe,types:qr,util:gr}),this.decode=Se(this)({Reader:Oe,types:qr,util:gr}),this.verify=$r(this)({types:qr,util:gr}),this.fromObject=Fr.fromObject(this)({types:qr,util:gr}),this.toObject=Fr.toObject(this)({types:qr,util:gr});var Yr=Br[kr];if(Yr){var Ur=Object.create(this);Ur.fromObject=this.fromObject,this.fromObject=Yr.fromObject.bind(Ur),Ur.toObject=this.toObject,this.toObject=Yr.toObject.bind(Ur)}return this},Vr.prototype.encode=function(kr,qr){return this.setup().encode(kr,qr)},Vr.prototype.encodeDelimited=function(kr,qr){return this.encode(kr,qr&&qr.len?qr.fork():qr).ldelim()},Vr.prototype.decode=function(kr,qr){return this.setup().decode(kr,qr)},Vr.prototype.decodeDelimited=function(kr){return kr instanceof Oe||(kr=Oe.create(kr)),this.decode(kr,kr.uint32())},Vr.prototype.verify=function(kr){return this.setup().verify(kr)},Vr.prototype.fromObject=function(kr){return this.setup().fromObject(kr)},Vr.prototype.toObject=function(kr,qr){return this.setup().toObject(kr,qr)},Vr.d=function(kr){return function(Hr){gr.decorateType(Hr,kr)}},type}var root,hasRequiredRoot;function requireRoot(){if(hasRequiredRoot)return root;hasRequiredRoot=1,root=xe;var fe=requireNamespace();((xe.prototype=Object.create(fe.prototype)).constructor=xe).className="Root";var e=requireField(),ye=require_enum(),me=requireOneof(),be=requireUtil(),ve,Ee,Oe;function xe($r){fe.call(this,"",$r),this.deferred=[],this.files=[]}xe.fromJSON=function(Fr,Br){return Br||(Br=new xe),Fr.options&&Br.setOptions(Fr.options),Br.addJSON(Fr.nested)},xe.prototype.resolvePath=be.path.resolve,xe.prototype.fetch=be.fetch;function gr(){}xe.prototype.load=function $r(Fr,Br,Vr){typeof Br=="function"&&(Vr=Br,Br=void 0);var oo=this;if(!Vr)return be.asPromise($r,oo,Fr,Br);var so=Vr===gr;function kr(no,Xr){if(Vr){var to=Vr;if(Vr=null,so)throw no;to(no,Xr)}}function qr(no){var Xr=no.lastIndexOf("google/protobuf/");if(Xr>-1){var to=no.substring(Xr);if(to in Oe)return to}return null}function Hr(no,Xr){try{if(be.isString(Xr)&&Xr.charAt(0)==="{"&&(Xr=JSON.parse(Xr)),!be.isString(Xr))oo.setOptions(Xr.options).addJSON(Xr.nested);else{Ee.filename=no;var to=Ee(Xr,oo,Br),ao,bo=0;if(to.imports)for(;bo<to.imports.length;++bo)(ao=qr(to.imports[bo])||oo.resolvePath(no,to.imports[bo]))&&Yr(ao);if(to.weakImports)for(bo=0;bo<to.weakImports.length;++bo)(ao=qr(to.weakImports[bo])||oo.resolvePath(no,to.weakImports[bo]))&&Yr(ao,!0)}}catch(Wr){kr(Wr)}!so&&!Ur&&kr(null,oo)}function Yr(no,Xr){if(no=qr(no)||no,!(oo.files.indexOf(no)>-1)){if(oo.files.push(no),no in Oe){so?Hr(no,Oe[no]):(++Ur,setTimeout(function(){--Ur,Hr(no,Oe[no])}));return}if(so){var to;try{to=be.fs.readFileSync(no).toString("utf8")}catch(ao){Xr||kr(ao);return}Hr(no,to)}else++Ur,oo.fetch(no,function(ao,bo){if(--Ur,!!Vr){if(ao){Xr?Ur||kr(null,oo):kr(ao);return}Hr(no,bo)}})}}var Ur=0;be.isString(Fr)&&(Fr=[Fr]);for(var Mr=0,Lr;Mr<Fr.length;++Mr)(Lr=oo.resolvePath("",Fr[Mr]))&&Yr(Lr);if(so)return oo;Ur||kr(null,oo)},xe.prototype.loadSync=function(Fr,Br){if(!be.isNode)throw Error("not supported");return this.load(Fr,Br,gr)},xe.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map(function(Fr){return"'extend "+Fr.extend+"' in "+Fr.parent.fullName}).join(", "));return fe.prototype.resolveAll.call(this)};var we=/^[A-Z]/;function Se($r,Fr){var Br=Fr.parent.lookup(Fr.extend);if(Br){var Vr=new e(Fr.fullName,Fr.id,Fr.type,Fr.rule,void 0,Fr.options);return Br.get(Vr.name)||(Vr.declaringField=Fr,Fr.extensionField=Vr,Br.add(Vr)),!0}return!1}return xe.prototype._handleAdd=function(Fr){if(Fr instanceof e)Fr.extend!==void 0&&!Fr.extensionField&&(Se(this,Fr)||this.deferred.push(Fr));else if(Fr instanceof ye)we.test(Fr.name)&&(Fr.parent[Fr.name]=Fr.values);else if(!(Fr instanceof me)){if(Fr instanceof ve)for(var Br=0;Br<this.deferred.length;)Se(this,this.deferred[Br])?this.deferred.splice(Br,1):++Br;for(var Vr=0;Vr<Fr.nestedArray.length;++Vr)this._handleAdd(Fr._nestedArray[Vr]);we.test(Fr.name)&&(Fr.parent[Fr.name]=Fr)}},xe.prototype._handleRemove=function(Fr){if(Fr instanceof e){if(Fr.extend!==void 0)if(Fr.extensionField)Fr.extensionField.parent.remove(Fr.extensionField),Fr.extensionField=null;else{var Br=this.deferred.indexOf(Fr);Br>-1&&this.deferred.splice(Br,1)}}else if(Fr instanceof ye)we.test(Fr.name)&&delete Fr.parent[Fr.name];else if(Fr instanceof fe){for(var Vr=0;Vr<Fr.nestedArray.length;++Vr)this._handleRemove(Fr._nestedArray[Vr]);we.test(Fr.name)&&delete Fr.parent[Fr.name]}},xe._configure=function($r,Fr,Br){ve=$r,Ee=Fr,Oe=Br},root}var hasRequiredUtil;function requireUtil(){if(hasRequiredUtil)return util$3.exports;hasRequiredUtil=1;var fe=util$3.exports=requireMinimal$1(),e=roots,ye,me;fe.codegen=codegen_1,fe.fetch=fetch_1,fe.path=path,fe.fs=fe.inquire("fs"),fe.toArray=function(gr){if(gr){for(var we=Object.keys(gr),Se=new Array(we.length),$r=0;$r<we.length;)Se[$r]=gr[we[$r++]];return Se}return[]},fe.toObject=function(gr){for(var we={},Se=0;Se<gr.length;){var $r=gr[Se++],Fr=gr[Se++];Fr!==void 0&&(we[$r]=Fr)}return we};var be=/\\/g,ve=/"/g;fe.isReserved=function(gr){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(gr)},fe.safeProp=function(gr){return!/^[$\w_]+$/.test(gr)||fe.isReserved(gr)?'["'+gr.replace(be,"\\\\").replace(ve,'\\"')+'"]':"."+gr},fe.ucFirst=function(gr){return gr.charAt(0).toUpperCase()+gr.substring(1)};var Ee=/_([a-z])/g;fe.camelCase=function(gr){return gr.substring(0,1)+gr.substring(1).replace(Ee,function(we,Se){return Se.toUpperCase()})},fe.compareFieldsById=function(gr,we){return gr.id-we.id},fe.decorateType=function(gr,we){if(gr.$type)return we&&gr.$type.name!==we&&(fe.decorateRoot.remove(gr.$type),gr.$type.name=we,fe.decorateRoot.add(gr.$type)),gr.$type;ye||(ye=requireType());var Se=new ye(we||gr.name);return fe.decorateRoot.add(Se),Se.ctor=gr,Object.defineProperty(gr,"$type",{value:Se,enumerable:!1}),Object.defineProperty(gr.prototype,"$type",{value:Se,enumerable:!1}),Se};var Oe=0;return fe.decorateEnum=function(gr){if(gr.$type)return gr.$type;me||(me=require_enum());var we=new me("Enum"+Oe++,gr);return fe.decorateRoot.add(we),Object.defineProperty(gr,"$type",{value:we,enumerable:!1}),we},fe.setProperty=function(gr,we,Se){function $r(Fr,Br,Vr){var oo=Br.shift();if(oo==="__proto__"||oo==="prototype")return Fr;if(Br.length>0)Fr[oo]=$r(Fr[oo]||{},Br,Vr);else{var so=Fr[oo];so&&(Vr=[].concat(so).concat(Vr)),Fr[oo]=Vr}return Fr}if(typeof gr!="object")throw TypeError("dst must be an object");if(!we)throw TypeError("path must be specified");return we=we.split("."),$r(gr,we,Se)},Object.defineProperty(fe,"decorateRoot",{get:function(){return e.decorated||(e.decorated=new(requireRoot()))}}),util$3.exports}var object,hasRequiredObject;function requireObject(){if(hasRequiredObject)return object;hasRequiredObject=1,object=ye,ye.className="ReflectionObject";var fe=requireUtil(),e;function ye(me,be){if(!fe.isString(me))throw TypeError("name must be a string");if(be&&!fe.isObject(be))throw TypeError("options must be an object");this.options=be,this.parsedOptions=null,this.name=me,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}return Object.defineProperties(ye.prototype,{root:{get:function(){for(var me=this;me.parent!==null;)me=me.parent;return me}},fullName:{get:function(){for(var me=[this.name],be=this.parent;be;)me.unshift(be.name),be=be.parent;return me.join(".")}}}),ye.prototype.toJSON=function(){throw Error()},ye.prototype.onAdd=function(be){this.parent&&this.parent!==be&&this.parent.remove(this),this.parent=be,this.resolved=!1;var ve=be.root;ve instanceof e&&ve._handleAdd(this)},ye.prototype.onRemove=function(be){var ve=be.root;ve instanceof e&&ve._handleRemove(this),this.parent=null,this.resolved=!1},ye.prototype.resolve=function(){return this.resolved?this:(this.root instanceof e&&(this.resolved=!0),this)},ye.prototype.getOption=function(be){if(this.options)return this.options[be]},ye.prototype.setOption=function(be,ve,Ee){return(!Ee||!this.options||this.options[be]===void 0)&&((this.options||(this.options={}))[be]=ve),this},ye.prototype.setParsedOption=function(be,ve,Ee){this.parsedOptions||(this.parsedOptions=[]);var Oe=this.parsedOptions;if(Ee){var xe=Oe.find(function(Se){return Object.prototype.hasOwnProperty.call(Se,be)});if(xe){var gr=xe[be];fe.setProperty(gr,Ee,ve)}else xe={},xe[be]=fe.setProperty({},Ee,ve),Oe.push(xe)}else{var we={};we[be]=ve,Oe.push(we)}return this},ye.prototype.setOptions=function(be,ve){if(be)for(var Ee=Object.keys(be),Oe=0;Oe<Ee.length;++Oe)this.setOption(Ee[Oe],be[Ee[Oe]],ve);return this},ye.prototype.toString=function(){var be=this.constructor.className,ve=this.fullName;return ve.length?be+" "+ve:be},ye._configure=function(me){e=me},object}var _enum,hasRequired_enum;function require_enum(){if(hasRequired_enum)return _enum;hasRequired_enum=1,_enum=me;var fe=requireObject();((me.prototype=Object.create(fe.prototype)).constructor=me).className="Enum";var e=requireNamespace(),ye=requireUtil();function me(be,ve,Ee,Oe,xe,gr){if(fe.call(this,be,Ee),ve&&typeof ve!="object")throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=Oe,this.comments=xe||{},this.valuesOptions=gr,this.reserved=void 0,ve)for(var we=Object.keys(ve),Se=0;Se<we.length;++Se)typeof ve[we[Se]]=="number"&&(this.valuesById[this.values[we[Se]]=ve[we[Se]]]=we[Se])}return me.fromJSON=function(ve,Ee){var Oe=new me(ve,Ee.values,Ee.options,Ee.comment,Ee.comments);return Oe.reserved=Ee.reserved,Oe},me.prototype.toJSON=function(ve){var Ee=ve?!!ve.keepComments:!1;return ye.toObject(["options",this.options,"valuesOptions",this.valuesOptions,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",Ee?this.comment:void 0,"comments",Ee?this.comments:void 0])},me.prototype.add=function(ve,Ee,Oe,xe){if(!ye.isString(ve))throw TypeError("name must be a string");if(!ye.isInteger(Ee))throw TypeError("id must be an integer");if(this.values[ve]!==void 0)throw Error("duplicate name '"+ve+"' in "+this);if(this.isReservedId(Ee))throw Error("id "+Ee+" is reserved in "+this);if(this.isReservedName(ve))throw Error("name '"+ve+"' is reserved in "+this);if(this.valuesById[Ee]!==void 0){if(!(this.options&&this.options.allow_alias))throw Error("duplicate id "+Ee+" in "+this);this.values[ve]=Ee}else this.valuesById[this.values[ve]=Ee]=ve;return xe&&(this.valuesOptions===void 0&&(this.valuesOptions={}),this.valuesOptions[ve]=xe||null),this.comments[ve]=Oe||null,this},me.prototype.remove=function(ve){if(!ye.isString(ve))throw TypeError("name must be a string");var Ee=this.values[ve];if(Ee==null)throw Error("name '"+ve+"' does not exist in "+this);return delete this.valuesById[Ee],delete this.values[ve],delete this.comments[ve],this.valuesOptions&&delete this.valuesOptions[ve],this},me.prototype.isReservedId=function(ve){return e.isReservedId(this.reserved,ve)},me.prototype.isReservedName=function(ve){return e.isReservedName(this.reserved,ve)},_enum}var encoder_1,hasRequiredEncoder;function requireEncoder(){if(hasRequiredEncoder)return encoder_1;hasRequiredEncoder=1,encoder_1=be;var fe=require_enum(),e=requireTypes(),ye=requireUtil();function me(ve,Ee,Oe,xe){return Ee.resolvedType.group?ve("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",Oe,xe,(Ee.id<<3|3)>>>0,(Ee.id<<3|4)>>>0):ve("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",Oe,xe,(Ee.id<<3|2)>>>0)}function be(ve){for(var Ee=ye.codegen(["m","w"],ve.name+"$encode")("if(!w)")("w=Writer.create()"),Oe,xe,gr=ve.fieldsArray.slice().sort(ye.compareFieldsById),Oe=0;Oe<gr.length;++Oe){var we=gr[Oe].resolve(),Se=ve._fieldsArray.indexOf(we),$r=we.resolvedType instanceof fe?"int32":we.type,Fr=e.basic[$r];xe="m"+ye.safeProp(we.name),we.map?(Ee("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",xe,we.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",xe)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(we.id<<3|2)>>>0,8|e.mapKey[we.keyType],we.keyType),Fr===void 0?Ee("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",Se,xe):Ee(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|Fr,$r,xe),Ee("}")("}")):we.repeated?(Ee("if(%s!=null&&%s.length){",xe,xe),we.packed&&e.packed[$r]!==void 0?Ee("w.uint32(%i).fork()",(we.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",xe)("w.%s(%s[i])",$r,xe)("w.ldelim()"):(Ee("for(var i=0;i<%s.length;++i)",xe),Fr===void 0?me(Ee,we,Se,xe+"[i]"):Ee("w.uint32(%i).%s(%s[i])",(we.id<<3|Fr)>>>0,$r,xe)),Ee("}")):(we.optional&&Ee("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",xe,we.name),Fr===void 0?me(Ee,we,Se,xe):Ee("w.uint32(%i).%s(%s)",(we.id<<3|Fr)>>>0,$r,xe))}return Ee("return w")}return encoder_1}var protobuf$1=indexLight.exports=indexMinimal;protobuf$1.build="light";function load(fe,e,ye){return typeof e=="function"?(ye=e,e=new protobuf$1.Root):e||(e=new protobuf$1.Root),e.load(fe,ye)}protobuf$1.load=load;function loadSync(fe,e){return e||(e=new protobuf$1.Root),e.loadSync(fe)}protobuf$1.loadSync=loadSync;protobuf$1.encoder=requireEncoder();protobuf$1.decoder=requireDecoder();protobuf$1.verifier=requireVerifier();protobuf$1.converter=requireConverter();protobuf$1.ReflectionObject=requireObject();protobuf$1.Namespace=requireNamespace();protobuf$1.Root=requireRoot();protobuf$1.Enum=require_enum();protobuf$1.Type=requireType();protobuf$1.Field=requireField();protobuf$1.OneOf=requireOneof();protobuf$1.MapField=requireMapfield();protobuf$1.Service=requireService();protobuf$1.Method=requireMethod();protobuf$1.Message=message;protobuf$1.wrappers=wrappers;protobuf$1.types=requireTypes();protobuf$1.util=requireUtil();protobuf$1.ReflectionObject._configure(protobuf$1.Root);protobuf$1.Namespace._configure(protobuf$1.Type,protobuf$1.Service,protobuf$1.Enum);protobuf$1.Root._configure(protobuf$1.Type);protobuf$1.Field._configure(protobuf$1.Type);var indexLightExports=indexLight.exports,tokenize_1=tokenize$1,delimRe=/[\s{}=;:[\],'"()<>]/g,stringDoubleRe=/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,stringSingleRe=/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,setCommentRe=/^ *[*/]+ */,setCommentAltRe=/^\s*\*?\/*/,setCommentSplitRe=/\n/g,whitespaceRe=/\s/,unescapeRe=/\\(.?)/g,unescapeMap={0:"\0",r:"\r",n:`
`,t:"	"};function unescape(fe){return fe.replace(unescapeRe,function(e,ye){switch(ye){case"\\":case"":return ye;default:return unescapeMap[ye]||""}})}tokenize$1.unescape=unescape;function tokenize$1(fe,e){fe=fe.toString();var ye=0,me=fe.length,be=1,ve=0,Ee={},Oe=[],xe=null;function gr(Hr){return Error("illegal "+Hr+" (line "+be+")")}function we(){var Hr=xe==="'"?stringSingleRe:stringDoubleRe;Hr.lastIndex=ye-1;var Yr=Hr.exec(fe);if(!Yr)throw gr("string");return ye=Hr.lastIndex,oo(xe),xe=null,unescape(Yr[1])}function Se(Hr){return fe.charAt(Hr)}function $r(Hr,Yr,Ur){var Mr={type:fe.charAt(Hr++),lineEmpty:!1,leading:Ur},Lr;e?Lr=2:Lr=3;var no=Hr-Lr,Xr;do if(--no<0||(Xr=fe.charAt(no))===`
`){Mr.lineEmpty=!0;break}while(Xr===" "||Xr==="	");for(var to=fe.substring(Hr,Yr).split(setCommentSplitRe),ao=0;ao<to.length;++ao)to[ao]=to[ao].replace(e?setCommentAltRe:setCommentRe,"").trim();Mr.text=to.join(`
`).trim(),Ee[be]=Mr,ve=be}function Fr(Hr){var Yr=Br(Hr),Ur=fe.substring(Hr,Yr),Mr=/^\s*\/\//.test(Ur);return Mr}function Br(Hr){for(var Yr=Hr;Yr<me&&Se(Yr)!==`
`;)Yr++;return Yr}function Vr(){if(Oe.length>0)return Oe.shift();if(xe)return we();var Hr,Yr,Ur,Mr,Lr,no=ye===0;do{if(ye===me)return null;for(Hr=!1;whitespaceRe.test(Ur=Se(ye));)if(Ur===`
`&&(no=!0,++be),++ye===me)return null;if(Se(ye)==="/"){if(++ye===me)throw gr("comment");if(Se(ye)==="/")if(e){if(Mr=ye,Lr=!1,Fr(ye-1)){Lr=!0;do if(ye=Br(ye),ye===me||(ye++,!no))break;while(Fr(ye))}else ye=Math.min(me,Br(ye)+1);Lr&&($r(Mr,ye,no),no=!0),be++,Hr=!0}else{for(Lr=Se(Mr=ye+1)==="/";Se(++ye)!==`
`;)if(ye===me)return null;++ye,Lr&&($r(Mr,ye-1,no),no=!0),++be,Hr=!0}else if((Ur=Se(ye))==="*"){Mr=ye+1,Lr=e||Se(Mr)==="*";do{if(Ur===`
`&&++be,++ye===me)throw gr("comment");Yr=Ur,Ur=Se(ye)}while(Yr!=="*"||Ur!=="/");++ye,Lr&&($r(Mr,ye-2,no),no=!0),Hr=!0}else return"/"}}while(Hr);var Xr=ye;delimRe.lastIndex=0;var to=delimRe.test(Se(Xr++));if(!to)for(;Xr<me&&!delimRe.test(Se(Xr));)++Xr;var ao=fe.substring(ye,ye=Xr);return(ao==='"'||ao==="'")&&(xe=ao),ao}function oo(Hr){Oe.push(Hr)}function so(){if(!Oe.length){var Hr=Vr();if(Hr===null)return null;oo(Hr)}return Oe[0]}function kr(Hr,Yr){var Ur=so(),Mr=Ur===Hr;if(Mr)return Vr(),!0;if(!Yr)throw gr("token '"+Ur+"', '"+Hr+"' expected");return!1}function qr(Hr){var Yr=null,Ur;return Hr===void 0?(Ur=Ee[be-1],delete Ee[be-1],Ur&&(e||Ur.type==="*"||Ur.lineEmpty)&&(Yr=Ur.leading?Ur.text:null)):(ve<Hr&&so(),Ur=Ee[Hr],delete Ee[Hr],Ur&&!Ur.lineEmpty&&(e||Ur.type==="/")&&(Yr=Ur.leading?null:Ur.text)),Yr}return Object.defineProperty({next:Vr,peek:so,push:oo,skip:kr,cmnt:qr},"line",{get:function(){return be}})}var parse_1=parse;parse.filename=null;parse.defaults={keepCase:!1};var tokenize=tokenize_1,Root=requireRoot(),Type=requireType(),Field=requireField(),MapField=requireMapfield(),OneOf=requireOneof(),Enum=require_enum(),Service=requireService(),Method=requireMethod(),types=requireTypes(),util$1=requireUtil(),base10Re=/^[1-9][0-9]*$/,base10NegRe=/^-?[1-9][0-9]*$/,base16Re=/^0[x][0-9a-fA-F]+$/,base16NegRe=/^-?0[x][0-9a-fA-F]+$/,base8Re=/^0[0-7]+$/,base8NegRe=/^-?0[0-7]+$/,numberRe=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/,nameRe=/^[a-zA-Z_][a-zA-Z_0-9]*$/,typeRefRe=/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)(?:\.[a-zA-Z_][a-zA-Z_0-9]*)*$/,fqTypeRefRe=/^(?:\.[a-zA-Z_][a-zA-Z_0-9]*)+$/;function parse(fe,e,ye){e instanceof Root||(ye=e,e=new Root),ye||(ye=parse.defaults);var me=ye.preferTrailingComment||!1,be=tokenize(fe,ye.alternateCommentMode||!1),ve=be.next,Ee=be.push,Oe=be.peek,xe=be.skip,gr=be.cmnt,we=!0,Se,$r,Fr,Br,Vr=!1,oo=e,so=ye.keepCase?function(Qr){return Qr}:util$1.camelCase;function kr(Qr,jr,Zr){var wo=parse.filename;return Zr||(parse.filename=null),Error("illegal "+(jr||"token")+" '"+Qr+"' ("+(wo?wo+", ":"")+"line "+be.line+")")}function qr(){var Qr=[],jr;do{if((jr=ve())!=='"'&&jr!=="'")throw kr(jr);Qr.push(ve()),xe(jr),jr=Oe()}while(jr==='"'||jr==="'");return Qr.join("")}function Hr(Qr){var jr=ve();switch(jr){case"'":case'"':return Ee(jr),qr();case"true":case"TRUE":return!0;case"false":case"FALSE":return!1}try{return Ur(jr,!0)}catch{if(Qr&&typeRefRe.test(jr))return jr;throw kr(jr,"value")}}function Yr(Qr,jr){var Zr,wo;do jr&&((Zr=Oe())==='"'||Zr==="'")?Qr.push(qr()):Qr.push([wo=Mr(ve()),xe("to",!0)?Mr(ve()):wo]);while(xe(",",!0));xe(";")}function Ur(Qr,jr){var Zr=1;switch(Qr.charAt(0)==="-"&&(Zr=-1,Qr=Qr.substring(1)),Qr){case"inf":case"INF":case"Inf":return Zr*(1/0);case"nan":case"NAN":case"Nan":case"NaN":return NaN;case"0":return 0}if(base10Re.test(Qr))return Zr*parseInt(Qr,10);if(base16Re.test(Qr))return Zr*parseInt(Qr,16);if(base8Re.test(Qr))return Zr*parseInt(Qr,8);if(numberRe.test(Qr))return Zr*parseFloat(Qr);throw kr(Qr,"number",jr)}function Mr(Qr,jr){switch(Qr){case"max":case"MAX":case"Max":return 536870911;case"0":return 0}if(!jr&&Qr.charAt(0)==="-")throw kr(Qr,"id");if(base10NegRe.test(Qr))return parseInt(Qr,10);if(base16NegRe.test(Qr))return parseInt(Qr,16);if(base8NegRe.test(Qr))return parseInt(Qr,8);throw kr(Qr,"id")}function Lr(){if(Se!==void 0)throw kr("package");if(Se=ve(),!typeRefRe.test(Se))throw kr(Se,"name");oo=oo.define(Se),xe(";")}function no(){var Qr=Oe(),jr;switch(Qr){case"weak":jr=Fr||(Fr=[]),ve();break;case"public":ve();default:jr=$r||($r=[]);break}Qr=qr(),xe(";"),jr.push(Qr)}function Xr(){if(xe("="),Br=qr(),Vr=Br==="proto3",!Vr&&Br!=="proto2")throw kr(Br,"syntax");xe(";")}function to(Qr,jr){switch(jr){case"option":return yo(Qr,jr),xe(";"),!0;case"message":return bo(Qr,jr),!0;case"enum":return mo(Qr,jr),!0;case"service":return Po(Qr,jr),!0;case"extend":return ho(Qr,jr),!0}return!1}function ao(Qr,jr,Zr){var wo=be.line;if(Qr&&(typeof Qr.comment!="string"&&(Qr.comment=gr()),Qr.filename=parse.filename),xe("{",!0)){for(var Eo;(Eo=ve())!=="}";)jr(Eo);xe(";",!0)}else Zr&&Zr(),xe(";"),Qr&&(typeof Qr.comment!="string"||me)&&(Qr.comment=gr(wo)||Qr.comment)}function bo(Qr,jr){if(!nameRe.test(jr=ve()))throw kr(jr,"type name");var Zr=new Type(jr);ao(Zr,function(Eo){if(!to(Zr,Eo))switch(Eo){case"map":fo(Zr);break;case"required":case"repeated":Wr(Zr,Eo);break;case"optional":Vr?Wr(Zr,"proto3_optional"):Wr(Zr,"optional");break;case"oneof":vo(Zr,Eo);break;case"extensions":Yr(Zr.extensions||(Zr.extensions=[]));break;case"reserved":Yr(Zr.reserved||(Zr.reserved=[]),!0);break;default:if(!Vr||!typeRefRe.test(Eo))throw kr(Eo);Ee(Eo),Wr(Zr,"optional");break}}),Qr.add(Zr)}function Wr(Qr,jr,Zr){var wo=ve();if(wo==="group"){Jr(Qr,jr);return}for(;wo.endsWith(".")||Oe().startsWith(".");)wo+=ve();if(!typeRefRe.test(wo))throw kr(wo,"type");var Eo=ve();if(!nameRe.test(Eo))throw kr(Eo,"name");Eo=so(Eo),xe("=");var Ao=new Field(Eo,Mr(ve()),wo,jr,Zr);if(ao(Ao,function(ko){if(ko==="option")yo(Ao,ko),xe(";");else throw kr(ko)},function(){No(Ao)}),jr==="proto3_optional"){var Co=new OneOf("_"+Eo);Ao.setOption("proto3_optional",!0),Co.add(Ao),Qr.add(Co)}else Qr.add(Ao);!Vr&&Ao.repeated&&(types.packed[wo]!==void 0||types.basic[wo]===void 0)&&Ao.setOption("packed",!1,!0)}function Jr(Qr,jr){var Zr=ve();if(!nameRe.test(Zr))throw kr(Zr,"name");var wo=util$1.lcFirst(Zr);Zr===wo&&(Zr=util$1.ucFirst(Zr)),xe("=");var Eo=Mr(ve()),Ao=new Type(Zr);Ao.group=!0;var Co=new Field(wo,Eo,Zr,jr);Co.filename=parse.filename,ao(Ao,function(ko){switch(ko){case"option":yo(Ao,ko),xe(";");break;case"required":case"repeated":Wr(Ao,ko);break;case"optional":Vr?Wr(Ao,"proto3_optional"):Wr(Ao,"optional");break;case"message":bo(Ao,ko);break;case"enum":mo(Ao,ko);break;default:throw kr(ko)}}),Qr.add(Ao).add(Co)}function fo(Qr){xe("<");var jr=ve();if(types.mapKey[jr]===void 0)throw kr(jr,"type");xe(",");var Zr=ve();if(!typeRefRe.test(Zr))throw kr(Zr,"type");xe(">");var wo=ve();if(!nameRe.test(wo))throw kr(wo,"name");xe("=");var Eo=new MapField(so(wo),Mr(ve()),jr,Zr);ao(Eo,function(Co){if(Co==="option")yo(Eo,Co),xe(";");else throw kr(Co)},function(){No(Eo)}),Qr.add(Eo)}function vo(Qr,jr){if(!nameRe.test(jr=ve()))throw kr(jr,"name");var Zr=new OneOf(so(jr));ao(Zr,function(Eo){Eo==="option"?(yo(Zr,Eo),xe(";")):(Ee(Eo),Wr(Zr,"optional"))}),Qr.add(Zr)}function mo(Qr,jr){if(!nameRe.test(jr=ve()))throw kr(jr,"name");var Zr=new Enum(jr);ao(Zr,function(Eo){switch(Eo){case"option":yo(Zr,Eo),xe(";");break;case"reserved":Yr(Zr.reserved||(Zr.reserved=[]),!0);break;default:po(Zr,Eo)}}),Qr.add(Zr)}function po(Qr,jr){if(!nameRe.test(jr))throw kr(jr,"name");xe("=");var Zr=Mr(ve(),!0),wo={options:void 0};wo.setOption=function(Eo,Ao){this.options===void 0&&(this.options={}),this.options[Eo]=Ao},ao(wo,function(Ao){if(Ao==="option")yo(wo,Ao),xe(";");else throw kr(Ao)},function(){No(wo)}),Qr.add(jr,Zr,wo.comment,wo.options)}function yo(Qr,jr){var Zr=xe("(",!0);if(!typeRefRe.test(jr=ve()))throw kr(jr,"name");var wo=jr,Eo=wo,Ao;Zr&&(xe(")"),wo="("+wo+")",Eo=wo,jr=Oe(),fqTypeRefRe.test(jr)&&(Ao=jr.slice(1),wo+=jr,ve())),xe("=");var Co=Oo(Qr,wo);go(Qr,Eo,Co,Ao)}function Oo(Qr,jr){if(xe("{",!0)){for(var Zr={};!xe("}",!0);){if(!nameRe.test(co=ve()))throw kr(co,"name");if(co===null)throw kr(co,"end of input");var wo,Eo=co;if(xe(":",!0),Oe()==="{")wo=Oo(Qr,jr+"."+co);else if(Oe()==="["){wo=[];var Ao;if(xe("[",!0)){do Ao=Hr(!0),wo.push(Ao);while(xe(",",!0));xe("]"),typeof Ao<"u"&&Io(Qr,jr+"."+co,Ao)}}else wo=Hr(!0),Io(Qr,jr+"."+co,wo);var Co=Zr[Eo];Co&&(wo=[].concat(Co).concat(wo)),Zr[Eo]=wo,xe(",",!0),xe(";",!0)}return Zr}var Uo=Hr(!0);return Io(Qr,jr,Uo),Uo}function Io(Qr,jr,Zr){Qr.setOption&&Qr.setOption(jr,Zr)}function go(Qr,jr,Zr,wo){Qr.setParsedOption&&Qr.setParsedOption(jr,Zr,wo)}function No(Qr){if(xe("[",!0)){do yo(Qr,"option");while(xe(",",!0));xe("]")}return Qr}function Po(Qr,jr){if(!nameRe.test(jr=ve()))throw kr(jr,"service name");var Zr=new Service(jr);ao(Zr,function(Eo){if(!to(Zr,Eo))if(Eo==="rpc")Bo(Zr,Eo);else throw kr(Eo)}),Qr.add(Zr)}function Bo(Qr,jr){var Zr=gr(),wo=jr;if(!nameRe.test(jr=ve()))throw kr(jr,"name");var Eo=jr,Ao,Co,Uo,ko;if(xe("("),xe("stream",!0)&&(Co=!0),!typeRefRe.test(jr=ve())||(Ao=jr,xe(")"),xe("returns"),xe("("),xe("stream",!0)&&(ko=!0),!typeRefRe.test(jr=ve())))throw kr(jr);Uo=jr,xe(")");var si=new Method(Eo,wo,Ao,Uo,Co,ko);si.comment=Zr,ao(si,function(Go){if(Go==="option")yo(si,Go),xe(";");else throw kr(Go)}),Qr.add(si)}function ho(Qr,jr){if(!typeRefRe.test(jr=ve()))throw kr(jr,"reference");var Zr=jr;ao(null,function(Eo){switch(Eo){case"required":case"repeated":Wr(Qr,Eo,Zr);break;case"optional":Vr?Wr(Qr,"proto3_optional",Zr):Wr(Qr,"optional",Zr);break;default:if(!Vr||!typeRefRe.test(Eo))throw kr(Eo);Ee(Eo),Wr(Qr,"optional",Zr);break}})}for(var co;(co=ve())!==null;)switch(co){case"package":if(!we)throw kr(co);Lr();break;case"import":if(!we)throw kr(co);no();break;case"syntax":if(!we)throw kr(co);Xr();break;case"option":yo(oo,co),xe(";");break;default:if(to(oo,co)){we=!1;continue}throw kr(co)}return parse.filename=null,{package:Se,imports:$r,weakImports:Fr,syntax:Br,root:e}}var common_1=common,commonRe=/\/|\./;function common(fe,e){commonRe.test(fe)||(fe="google/protobuf/"+fe+".proto",e={nested:{google:{nested:{protobuf:{nested:e}}}}}),common[fe]=e}common("any",{Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}}});var timeType;common("duration",{Duration:timeType={fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}}});common("timestamp",{Timestamp:timeType});common("empty",{Empty:{fields:{}}});common("struct",{Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}}});common("wrappers",{DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}}});common("field_mask",{FieldMask:{fields:{paths:{rule:"repeated",type:"string",id:1}}}});common.get=function fe(e){return common[e]||null};var protobuf=src.exports=indexLightExports;protobuf.build="full";protobuf.tokenize=tokenize_1;protobuf.parse=parse_1;protobuf.common=common_1;protobuf.Root._configure(protobuf.Type,protobuf.parse,protobuf.common);var srcExports=src.exports,protobufjs=srcExports,lib$1={},descriptor_pb={},googleProtobuf={};(function(exports){var $jscomp=$jscomp||{};$jscomp.scope={},$jscomp.findInternal=function(fe,e,ye){fe instanceof String&&(fe=String(fe));for(var me=fe.length,be=0;be<me;be++){var ve=fe[be];if(e.call(ye,ve,be,fe))return{i:be,v:ve}}return{i:-1,v:void 0}},$jscomp.ASSUME_ES5=!1,$jscomp.ASSUME_NO_NATIVE_MAP=!1,$jscomp.ASSUME_NO_NATIVE_SET=!1,$jscomp.SIMPLE_FROUND_POLYFILL=!1,$jscomp.defineProperty=$jscomp.ASSUME_ES5||typeof Object.defineProperties=="function"?Object.defineProperty:function(fe,e,ye){fe!=Array.prototype&&fe!=Object.prototype&&(fe[e]=ye.value)},$jscomp.getGlobal=function(fe){return typeof window<"u"&&window===fe?fe:typeof commonjsGlobal<"u"&&commonjsGlobal!=null?commonjsGlobal:fe},$jscomp.global=$jscomp.getGlobal(commonjsGlobal),$jscomp.polyfill=function(fe,e,ye,me){if(e){for(ye=$jscomp.global,fe=fe.split("."),me=0;me<fe.length-1;me++){var be=fe[me];be in ye||(ye[be]={}),ye=ye[be]}fe=fe[fe.length-1],me=ye[fe],e=e(me),e!=me&&e!=null&&$jscomp.defineProperty(ye,fe,{configurable:!0,writable:!0,value:e})}},$jscomp.polyfill("Array.prototype.findIndex",function(fe){return fe||function(e,ye){return $jscomp.findInternal(this,e,ye).i}},"es6","es3"),$jscomp.checkStringArgs=function(fe,e,ye){if(fe==null)throw new TypeError("The 'this' value for String.prototype."+ye+" must not be null or undefined");if(e instanceof RegExp)throw new TypeError("First argument to String.prototype."+ye+" must not be a regular expression");return fe+""},$jscomp.polyfill("String.prototype.endsWith",function(fe){return fe||function(e,ye){var me=$jscomp.checkStringArgs(this,e,"endsWith");e+="",ye===void 0&&(ye=me.length),ye=Math.max(0,Math.min(ye|0,me.length));for(var be=e.length;0<be&&0<ye;)if(me[--ye]!=e[--be])return!1;return 0>=be}},"es6","es3"),$jscomp.polyfill("Array.prototype.find",function(fe){return fe||function(e,ye){return $jscomp.findInternal(this,e,ye).v}},"es6","es3"),$jscomp.polyfill("String.prototype.startsWith",function(fe){return fe||function(e,ye){var me=$jscomp.checkStringArgs(this,e,"startsWith");e+="";var be=me.length,ve=e.length;ye=Math.max(0,Math.min(ye|0,me.length));for(var Ee=0;Ee<ve&&ye<be;)if(me[ye++]!=e[Ee++])return!1;return Ee>=ve}},"es6","es3"),$jscomp.polyfill("String.prototype.repeat",function(fe){return fe||function(e){var ye=$jscomp.checkStringArgs(this,null,"repeat");if(0>e||1342177279<e)throw new RangeError("Invalid count value");e|=0;for(var me="";e;)e&1&&(me+=ye),(e>>>=1)&&(ye+=ye);return me}},"es6","es3");var COMPILED=!0,goog=goog||{};goog.global=commonjsGlobal||self,goog.exportPath_=function(fe,e,ye){fe=fe.split("."),ye=ye||goog.global,fe[0]in ye||typeof ye.execScript>"u"||ye.execScript("var "+fe[0]);for(var me;fe.length&&(me=fe.shift());)fe.length||e===void 0?ye=ye[me]&&ye[me]!==Object.prototype[me]?ye[me]:ye[me]={}:ye[me]=e},goog.define=function(fe,e){return e},goog.FEATURESET_YEAR=2012,goog.DEBUG=!0,goog.LOCALE="en",goog.TRUSTED_SITE=!0,goog.STRICT_MODE_COMPATIBLE=!1,goog.DISALLOW_TEST_ONLY_CODE=!goog.DEBUG,goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING=!1,goog.provide=function(fe){if(goog.isInModuleLoader_())throw Error("goog.provide cannot be used within a module.");goog.constructNamespace_(fe)},goog.constructNamespace_=function(fe,e){goog.exportPath_(fe,e)},goog.getScriptNonce=function(fe){return fe&&fe!=goog.global?goog.getScriptNonce_(fe.document):(goog.cspNonce_===null&&(goog.cspNonce_=goog.getScriptNonce_(goog.global.document)),goog.cspNonce_)},goog.NONCE_PATTERN_=/^[\w+/_-]+[=]{0,2}$/,goog.cspNonce_=null,goog.getScriptNonce_=function(fe){return(fe=fe.querySelector&&fe.querySelector("script[nonce]"))&&(fe=fe.nonce||fe.getAttribute("nonce"))&&goog.NONCE_PATTERN_.test(fe)?fe:""},goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/,goog.module=function(fe){if(typeof fe!="string"||!fe||fe.search(goog.VALID_MODULE_RE_)==-1)throw Error("Invalid module identifier");if(!goog.isInGoogModuleLoader_())throw Error("Module "+fe+" has been loaded incorrectly. Note, modules cannot be loaded as normal scripts. They require some kind of pre-processing step. You're likely trying to load a module via a script tag or as a part of a concatenated bundle without rewriting the module. For more info see: https://github.com/google/closure-library/wiki/goog.module:-an-ES6-module-like-alternative-to-goog.provide.");if(goog.moduleLoaderState_.moduleName)throw Error("goog.module may only be called once per module.");goog.moduleLoaderState_.moduleName=fe},goog.module.get=function(fe){return goog.module.getInternal_(fe)},goog.module.getInternal_=function(fe){return null},goog.ModuleType={ES6:"es6",GOOG:"goog"},goog.moduleLoaderState_=null,goog.isInModuleLoader_=function(){return goog.isInGoogModuleLoader_()||goog.isInEs6ModuleLoader_()},goog.isInGoogModuleLoader_=function(){return!!goog.moduleLoaderState_&&goog.moduleLoaderState_.type==goog.ModuleType.GOOG},goog.isInEs6ModuleLoader_=function(){if(goog.moduleLoaderState_&&goog.moduleLoaderState_.type==goog.ModuleType.ES6)return!0;var fe=goog.global.$jscomp;return fe?typeof fe.getCurrentModulePath!="function"?!1:!!fe.getCurrentModulePath():!1},goog.module.declareLegacyNamespace=function(){goog.moduleLoaderState_.declareLegacyNamespace=!0},goog.declareModuleId=function(fe){if(goog.moduleLoaderState_)goog.moduleLoaderState_.moduleName=fe;else{var e=goog.global.$jscomp;if(!e||typeof e.getCurrentModulePath!="function")throw Error('Module with namespace "'+fe+'" has been loaded incorrectly.');e=e.require(e.getCurrentModulePath()),goog.loadedModules_[fe]={exports:e,type:goog.ModuleType.ES6,moduleId:fe}}},goog.setTestOnly=function(fe){if(goog.DISALLOW_TEST_ONLY_CODE)throw fe=fe||"",Error("Importing test-only code into non-debug environment"+(fe?": "+fe:"."))},goog.forwardDeclare=function(fe){},goog.getObjectByName=function(fe,e){fe=fe.split("."),e=e||goog.global;for(var ye=0;ye<fe.length;ye++)if(e=e[fe[ye]],e==null)return null;return e},goog.globalize=function(fe,e){e=e||goog.global;for(var ye in fe)e[ye]=fe[ye]},goog.addDependency=function(fe,e,ye,me){},goog.ENABLE_DEBUG_LOADER=!0,goog.logToConsole_=function(fe){goog.global.console&&goog.global.console.error(fe)},goog.require=function(fe){},goog.requireType=function(fe){return{}},goog.basePath="",goog.nullFunction=function(){},goog.abstractMethod=function(){throw Error("unimplemented abstract method")},goog.addSingletonGetter=function(fe){fe.instance_=void 0,fe.getInstance=function(){return fe.instance_?fe.instance_:(goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=fe),fe.instance_=new fe)}},goog.instantiatedSingletons_=[],goog.LOAD_MODULE_USING_EVAL=!0,goog.SEAL_MODULE_EXPORTS=goog.DEBUG,goog.loadedModules_={},goog.DEPENDENCIES_ENABLED=!COMPILED,goog.TRANSPILE="detect",goog.ASSUME_ES_MODULES_TRANSPILED=!1,goog.TRANSPILE_TO_LANGUAGE="",goog.TRANSPILER="transpile.js",goog.hasBadLetScoping=null,goog.useSafari10Workaround=function(){if(goog.hasBadLetScoping==null){try{var a=!eval('"use strict";let x = 1; function f() { return typeof x; };f() == "number";')}catch(fe){a=!1}goog.hasBadLetScoping=a}return goog.hasBadLetScoping},goog.workaroundSafari10EvalBug=function(fe){return"(function(){"+fe+`
;})();
`},goog.loadModule=function(fe){var e=goog.moduleLoaderState_;try{if(goog.moduleLoaderState_={moduleName:"",declareLegacyNamespace:!1,type:goog.ModuleType.GOOG},goog.isFunction(fe))var ye=fe.call(void 0,{});else if(typeof fe=="string")goog.useSafari10Workaround()&&(fe=goog.workaroundSafari10EvalBug(fe)),ye=goog.loadModuleFromSource_.call(void 0,fe);else throw Error("Invalid module definition");var me=goog.moduleLoaderState_.moduleName;if(typeof me=="string"&&me)goog.moduleLoaderState_.declareLegacyNamespace?goog.constructNamespace_(me,ye):goog.SEAL_MODULE_EXPORTS&&Object.seal&&typeof ye=="object"&&ye!=null&&Object.seal(ye),goog.loadedModules_[me]={exports:ye,type:goog.ModuleType.GOOG,moduleId:goog.moduleLoaderState_.moduleName};else throw Error('Invalid module name "'+me+'"')}finally{goog.moduleLoaderState_=e}},goog.loadModuleFromSource_=function(a){return eval(a),{}},goog.normalizePath_=function(fe){fe=fe.split("/");for(var e=0;e<fe.length;)fe[e]=="."?fe.splice(e,1):e&&fe[e]==".."&&fe[e-1]&&fe[e-1]!=".."?fe.splice(--e,2):e++;return fe.join("/")},goog.loadFileSync_=function(fe){if(goog.global.CLOSURE_LOAD_FILE_SYNC)return goog.global.CLOSURE_LOAD_FILE_SYNC(fe);try{var e=new goog.global.XMLHttpRequest;return e.open("get",fe,!1),e.send(),e.status==0||e.status==200?e.responseText:null}catch{return null}},goog.transpile_=function(fe,e,ye){var me=goog.global.$jscomp;me||(goog.global.$jscomp=me={});var be=me.transpile;if(!be){var ve=goog.basePath+goog.TRANSPILER,Ee=goog.loadFileSync_(ve);if(Ee){if(function(){(0,eval)(Ee+`
//# sourceURL=`+ve)}.call(goog.global),goog.global.$gwtExport&&goog.global.$gwtExport.$jscomp&&!goog.global.$gwtExport.$jscomp.transpile)throw Error('The transpiler did not properly export the "transpile" method. $gwtExport: '+JSON.stringify(goog.global.$gwtExport));goog.global.$jscomp.transpile=goog.global.$gwtExport.$jscomp.transpile,me=goog.global.$jscomp,be=me.transpile}}return be||(be=me.transpile=function(Oe,xe){return goog.logToConsole_(xe+" requires transpilation but no transpiler was found."),Oe}),be(fe,e,ye)},goog.typeOf=function(fe){var e=typeof fe;if(e=="object")if(fe){if(fe instanceof Array)return"array";if(fe instanceof Object)return e;var ye=Object.prototype.toString.call(fe);if(ye=="[object Window]")return"object";if(ye=="[object Array]"||typeof fe.length=="number"&&typeof fe.splice<"u"&&typeof fe.propertyIsEnumerable<"u"&&!fe.propertyIsEnumerable("splice"))return"array";if(ye=="[object Function]"||typeof fe.call<"u"&&typeof fe.propertyIsEnumerable<"u"&&!fe.propertyIsEnumerable("call"))return"function"}else return"null";else if(e=="function"&&typeof fe.call>"u")return"object";return e},goog.isArray=function(fe){return goog.typeOf(fe)=="array"},goog.isArrayLike=function(fe){var e=goog.typeOf(fe);return e=="array"||e=="object"&&typeof fe.length=="number"},goog.isDateLike=function(fe){return goog.isObject(fe)&&typeof fe.getFullYear=="function"},goog.isFunction=function(fe){return goog.typeOf(fe)=="function"},goog.isObject=function(fe){var e=typeof fe;return e=="object"&&fe!=null||e=="function"},goog.getUid=function(fe){return Object.prototype.hasOwnProperty.call(fe,goog.UID_PROPERTY_)&&fe[goog.UID_PROPERTY_]||(fe[goog.UID_PROPERTY_]=++goog.uidCounter_)},goog.hasUid=function(fe){return!!fe[goog.UID_PROPERTY_]},goog.removeUid=function(fe){fe!==null&&"removeAttribute"in fe&&fe.removeAttribute(goog.UID_PROPERTY_);try{delete fe[goog.UID_PROPERTY_]}catch{}},goog.UID_PROPERTY_="closure_uid_"+(1e9*Math.random()>>>0),goog.uidCounter_=0,goog.getHashCode=goog.getUid,goog.removeHashCode=goog.removeUid,goog.cloneObject=function(fe){var e=goog.typeOf(fe);if(e=="object"||e=="array"){if(typeof fe.clone=="function")return fe.clone();e=e=="array"?[]:{};for(var ye in fe)e[ye]=goog.cloneObject(fe[ye]);return e}return fe},goog.bindNative_=function(fe,e,ye){return fe.call.apply(fe.bind,arguments)},goog.bindJs_=function(fe,e,ye){if(!fe)throw Error();if(2<arguments.length){var me=Array.prototype.slice.call(arguments,2);return function(){var be=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(be,me),fe.apply(e,be)}}return function(){return fe.apply(e,arguments)}},goog.bind=function(fe,e,ye){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_,goog.bind.apply(null,arguments)},goog.partial=function(fe,e){var ye=Array.prototype.slice.call(arguments,1);return function(){var me=ye.slice();return me.push.apply(me,arguments),fe.apply(this,me)}},goog.mixin=function(fe,e){for(var ye in e)fe[ye]=e[ye]},goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date},goog.globalEval=function(fe){if(goog.global.execScript)goog.global.execScript(fe,"JavaScript");else if(goog.global.eval){if(goog.evalWorksForGlobals_==null){try{goog.global.eval("var _evalTest_ = 1;")}catch{}if(typeof goog.global._evalTest_<"u"){try{delete goog.global._evalTest_}catch{}goog.evalWorksForGlobals_=!0}else goog.evalWorksForGlobals_=!1}if(goog.evalWorksForGlobals_)goog.global.eval(fe);else{var e=goog.global.document,ye=e.createElement("script");ye.type="text/javascript",ye.defer=!1,ye.appendChild(e.createTextNode(fe)),e.head.appendChild(ye),e.head.removeChild(ye)}}else throw Error("goog.globalEval not available")},goog.evalWorksForGlobals_=null,goog.getCssName=function(fe,e){if(String(fe).charAt(0)==".")throw Error('className passed in goog.getCssName must not start with ".". You passed: '+fe);var ye=function(be){return goog.cssNameMapping_[be]||be},me=function(be){be=be.split("-");for(var ve=[],Ee=0;Ee<be.length;Ee++)ve.push(ye(be[Ee]));return ve.join("-")};return me=goog.cssNameMapping_?goog.cssNameMappingStyle_=="BY_WHOLE"?ye:me:function(be){return be},fe=e?fe+"-"+me(e):me(fe),goog.global.CLOSURE_CSS_NAME_MAP_FN?goog.global.CLOSURE_CSS_NAME_MAP_FN(fe):fe},goog.setCssNameMapping=function(fe,e){goog.cssNameMapping_=fe,goog.cssNameMappingStyle_=e},goog.getMsg=function(fe,e,ye){return ye&&ye.html&&(fe=fe.replace(/</g,"&lt;")),e&&(fe=fe.replace(/\{\$([^}]+)}/g,function(me,be){return e!=null&&be in e?e[be]:me})),fe},goog.getMsgWithFallback=function(fe,e){return fe},goog.exportSymbol=function(fe,e,ye){goog.exportPath_(fe,e,ye)},goog.exportProperty=function(fe,e,ye){fe[e]=ye},goog.inherits=function(fe,e){function ye(){}ye.prototype=e.prototype,fe.superClass_=e.prototype,fe.prototype=new ye,fe.prototype.constructor=fe,fe.base=function(me,be,ve){for(var Ee=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)Ee[Oe-2]=arguments[Oe];return e.prototype[be].apply(me,Ee)}},goog.scope=function(fe){if(goog.isInModuleLoader_())throw Error("goog.scope is not supported within a module.");fe.call(goog.global)},goog.defineClass=function(fe,e){var ye=e.constructor,me=e.statics;return ye&&ye!=Object.prototype.constructor||(ye=function(){throw Error("cannot instantiate an interface (no constructor defined).")}),ye=goog.defineClass.createSealingConstructor_(ye,fe),fe&&goog.inherits(ye,fe),delete e.constructor,delete e.statics,goog.defineClass.applyProperties_(ye.prototype,e),me!=null&&(me instanceof Function?me(ye):goog.defineClass.applyProperties_(ye,me)),ye},goog.defineClass.SEAL_CLASS_INSTANCES=goog.DEBUG,goog.defineClass.createSealingConstructor_=function(fe,e){if(!goog.defineClass.SEAL_CLASS_INSTANCES)return fe;var ye=!goog.defineClass.isUnsealable_(e),me=function(){var be=fe.apply(this,arguments)||this;return be[goog.UID_PROPERTY_]=be[goog.UID_PROPERTY_],this.constructor===me&&ye&&Object.seal instanceof Function&&Object.seal(be),be};return me},goog.defineClass.isUnsealable_=function(fe){return fe&&fe.prototype&&fe.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]},goog.defineClass.OBJECT_PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),goog.defineClass.applyProperties_=function(fe,e){for(var ye in e)Object.prototype.hasOwnProperty.call(e,ye)&&(fe[ye]=e[ye]);for(var me=0;me<goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length;me++)ye=goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[me],Object.prototype.hasOwnProperty.call(e,ye)&&(fe[ye]=e[ye])},goog.tagUnsealableClass=function(fe){},goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_="goog_defineClass_legacy_unsealable",goog.TRUSTED_TYPES_POLICY_NAME="",goog.identity_=function(fe){return fe},goog.createTrustedTypesPolicy=function(fe){var e=null,ye=goog.global.trustedTypes||goog.global.TrustedTypes;if(!ye||!ye.createPolicy)return e;try{e=ye.createPolicy(fe,{createHTML:goog.identity_,createScript:goog.identity_,createScriptURL:goog.identity_,createURL:goog.identity_})}catch(me){goog.logToConsole_(me.message)}return e},goog.TRUSTED_TYPES_POLICY_=goog.TRUSTED_TYPES_POLICY_NAME?goog.createTrustedTypesPolicy(goog.TRUSTED_TYPES_POLICY_NAME+"#base"):null,goog.object={},goog.object.is=function(fe,e){return fe===e?fe!==0||1/fe===1/e:fe!==fe&&e!==e},goog.object.forEach=function(fe,e,ye){for(var me in fe)e.call(ye,fe[me],me,fe)},goog.object.filter=function(fe,e,ye){var me={},be;for(be in fe)e.call(ye,fe[be],be,fe)&&(me[be]=fe[be]);return me},goog.object.map=function(fe,e,ye){var me={},be;for(be in fe)me[be]=e.call(ye,fe[be],be,fe);return me},goog.object.some=function(fe,e,ye){for(var me in fe)if(e.call(ye,fe[me],me,fe))return!0;return!1},goog.object.every=function(fe,e,ye){for(var me in fe)if(!e.call(ye,fe[me],me,fe))return!1;return!0},goog.object.getCount=function(fe){var e=0,ye;for(ye in fe)e++;return e},goog.object.getAnyKey=function(fe){for(var e in fe)return e},goog.object.getAnyValue=function(fe){for(var e in fe)return fe[e]},goog.object.contains=function(fe,e){return goog.object.containsValue(fe,e)},goog.object.getValues=function(fe){var e=[],ye=0,me;for(me in fe)e[ye++]=fe[me];return e},goog.object.getKeys=function(fe){var e=[],ye=0,me;for(me in fe)e[ye++]=me;return e},goog.object.getValueByKeys=function(fe,e){var ye=goog.isArrayLike(e),me=ye?e:arguments;for(ye=ye?0:1;ye<me.length;ye++){if(fe==null)return;fe=fe[me[ye]]}return fe},goog.object.containsKey=function(fe,e){return fe!==null&&e in fe},goog.object.containsValue=function(fe,e){for(var ye in fe)if(fe[ye]==e)return!0;return!1},goog.object.findKey=function(fe,e,ye){for(var me in fe)if(e.call(ye,fe[me],me,fe))return me},goog.object.findValue=function(fe,e,ye){return(e=goog.object.findKey(fe,e,ye))&&fe[e]},goog.object.isEmpty=function(fe){for(var e in fe)return!1;return!0},goog.object.clear=function(fe){for(var e in fe)delete fe[e]},goog.object.remove=function(fe,e){var ye;return(ye=e in fe)&&delete fe[e],ye},goog.object.add=function(fe,e,ye){if(fe!==null&&e in fe)throw Error('The object already contains the key "'+e+'"');goog.object.set(fe,e,ye)},goog.object.get=function(fe,e,ye){return fe!==null&&e in fe?fe[e]:ye},goog.object.set=function(fe,e,ye){fe[e]=ye},goog.object.setIfUndefined=function(fe,e,ye){return e in fe?fe[e]:fe[e]=ye},goog.object.setWithReturnValueIfNotSet=function(fe,e,ye){return e in fe?fe[e]:(ye=ye(),fe[e]=ye)},goog.object.equals=function(fe,e){for(var ye in fe)if(!(ye in e)||fe[ye]!==e[ye])return!1;for(var me in e)if(!(me in fe))return!1;return!0},goog.object.clone=function(fe){var e={},ye;for(ye in fe)e[ye]=fe[ye];return e},goog.object.unsafeClone=function(fe){var e=goog.typeOf(fe);if(e=="object"||e=="array"){if(goog.isFunction(fe.clone))return fe.clone();e=e=="array"?[]:{};for(var ye in fe)e[ye]=goog.object.unsafeClone(fe[ye]);return e}return fe},goog.object.transpose=function(fe){var e={},ye;for(ye in fe)e[fe[ye]]=ye;return e},goog.object.PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),goog.object.extend=function(fe,e){for(var ye,me,be=1;be<arguments.length;be++){me=arguments[be];for(ye in me)fe[ye]=me[ye];for(var ve=0;ve<goog.object.PROTOTYPE_FIELDS_.length;ve++)ye=goog.object.PROTOTYPE_FIELDS_[ve],Object.prototype.hasOwnProperty.call(me,ye)&&(fe[ye]=me[ye])}},goog.object.create=function(fe){var e=arguments.length;if(e==1&&Array.isArray(arguments[0]))return goog.object.create.apply(null,arguments[0]);if(e%2)throw Error("Uneven number of arguments");for(var ye={},me=0;me<e;me+=2)ye[arguments[me]]=arguments[me+1];return ye},goog.object.createSet=function(fe){var e=arguments.length;if(e==1&&Array.isArray(arguments[0]))return goog.object.createSet.apply(null,arguments[0]);for(var ye={},me=0;me<e;me++)ye[arguments[me]]=!0;return ye},goog.object.createImmutableView=function(fe){var e=fe;return Object.isFrozen&&!Object.isFrozen(fe)&&(e=Object.create(fe),Object.freeze(e)),e},goog.object.isImmutableView=function(fe){return!!Object.isFrozen&&Object.isFrozen(fe)},goog.object.getAllPropertyNames=function(fe,e,ye){if(!fe)return[];if(!Object.getOwnPropertyNames||!Object.getPrototypeOf)return goog.object.getKeys(fe);for(var me={};fe&&(fe!==Object.prototype||e)&&(fe!==Function.prototype||ye);){for(var be=Object.getOwnPropertyNames(fe),ve=0;ve<be.length;ve++)me[be[ve]]=!0;fe=Object.getPrototypeOf(fe)}return goog.object.getKeys(me)},goog.object.getSuperClass=function(fe){return(fe=Object.getPrototypeOf(fe.prototype))&&fe.constructor};var jspb={asserts:{}};jspb.asserts.doAssertFailure=function(fe,e,ye,me){var be="Assertion failed";if(ye){be+=": "+ye;var ve=me}else fe&&(be+=": "+fe,ve=e);throw Error(""+be,ve||[])},jspb.asserts.assert=function(fe,e,ye){for(var me=[],be=2;be<arguments.length;++be)me[be-2]=arguments[be];return fe||jspb.asserts.doAssertFailure("",null,e,me),fe},jspb.asserts.assertString=function(fe,e,ye){for(var me=[],be=2;be<arguments.length;++be)me[be-2]=arguments[be];return typeof fe!="string"&&jspb.asserts.doAssertFailure("Expected string but got %s: %s.",[goog.typeOf(fe),fe],e,me),fe},jspb.asserts.assertArray=function(fe,e,ye){for(var me=[],be=2;be<arguments.length;++be)me[be-2]=arguments[be];return Array.isArray(fe)||jspb.asserts.doAssertFailure("Expected array but got %s: %s.",[goog.typeOf(fe),fe],e,me),fe},jspb.asserts.fail=function(fe,e){for(var ye=[],me=1;me<arguments.length;++me)ye[me-1]=arguments[me];throw Error("Failure"+(fe?": "+fe:""),ye)},jspb.asserts.assertInstanceof=function(fe,e,ye,me){for(var be=[],ve=3;ve<arguments.length;++ve)be[ve-3]=arguments[ve];return fe instanceof e||jspb.asserts.doAssertFailure("Expected instanceof %s but got %s.",[jspb.asserts.getType(e),jspb.asserts.getType(fe)],ye,be),fe},jspb.asserts.getType=function(fe){return fe instanceof Function?fe.displayName||fe.name||"unknown type name":fe instanceof Object?fe.constructor.displayName||fe.constructor.name||Object.prototype.toString.call(fe):fe===null?"null":typeof fe},jspb.BinaryConstants={},jspb.ConstBinaryMessage=function(){},jspb.BinaryMessage=function(){},jspb.BinaryConstants.FieldType={INVALID:-1,DOUBLE:1,FLOAT:2,INT64:3,UINT64:4,INT32:5,FIXED64:6,FIXED32:7,BOOL:8,STRING:9,GROUP:10,MESSAGE:11,BYTES:12,UINT32:13,ENUM:14,SFIXED32:15,SFIXED64:16,SINT32:17,SINT64:18,FHASH64:30,VHASH64:31},jspb.BinaryConstants.WireType={INVALID:-1,VARINT:0,FIXED64:1,DELIMITED:2,START_GROUP:3,END_GROUP:4,FIXED32:5},jspb.BinaryConstants.FieldTypeToWireType=function(fe){var e=jspb.BinaryConstants.FieldType,ye=jspb.BinaryConstants.WireType;switch(fe){case e.INT32:case e.INT64:case e.UINT32:case e.UINT64:case e.SINT32:case e.SINT64:case e.BOOL:case e.ENUM:case e.VHASH64:return ye.VARINT;case e.DOUBLE:case e.FIXED64:case e.SFIXED64:case e.FHASH64:return ye.FIXED64;case e.STRING:case e.MESSAGE:case e.BYTES:return ye.DELIMITED;case e.FLOAT:case e.FIXED32:case e.SFIXED32:return ye.FIXED32;default:return ye.INVALID}},jspb.BinaryConstants.INVALID_FIELD_NUMBER=-1,jspb.BinaryConstants.FLOAT32_EPS=1401298464324817e-60,jspb.BinaryConstants.FLOAT32_MIN=11754943508222875e-54,jspb.BinaryConstants.FLOAT32_MAX=34028234663852886e22,jspb.BinaryConstants.FLOAT64_EPS=5e-324,jspb.BinaryConstants.FLOAT64_MIN=22250738585072014e-324,jspb.BinaryConstants.FLOAT64_MAX=17976931348623157e292,jspb.BinaryConstants.TWO_TO_20=1048576,jspb.BinaryConstants.TWO_TO_23=8388608,jspb.BinaryConstants.TWO_TO_31=2147483648,jspb.BinaryConstants.TWO_TO_32=4294967296,jspb.BinaryConstants.TWO_TO_52=4503599627370496,jspb.BinaryConstants.TWO_TO_63=9223372036854776e3,jspb.BinaryConstants.TWO_TO_64=18446744073709552e3,jspb.BinaryConstants.ZERO_HASH="\0\0\0\0\0\0\0\0",goog.debug={},goog.debug.Error=function(fe){if(Error.captureStackTrace)Error.captureStackTrace(this,goog.debug.Error);else{var e=Error().stack;e&&(this.stack=e)}fe&&(this.message=String(fe)),this.reportErrorToServer=!0},goog.inherits(goog.debug.Error,Error),goog.debug.Error.prototype.name="CustomError",goog.dom={},goog.dom.NodeType={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12},goog.asserts={},goog.asserts.ENABLE_ASSERTS=goog.DEBUG,goog.asserts.AssertionError=function(fe,e){goog.debug.Error.call(this,goog.asserts.subs_(fe,e)),this.messagePattern=fe},goog.inherits(goog.asserts.AssertionError,goog.debug.Error),goog.asserts.AssertionError.prototype.name="AssertionError",goog.asserts.DEFAULT_ERROR_HANDLER=function(fe){throw fe},goog.asserts.errorHandler_=goog.asserts.DEFAULT_ERROR_HANDLER,goog.asserts.subs_=function(fe,e){fe=fe.split("%s");for(var ye="",me=fe.length-1,be=0;be<me;be++)ye+=fe[be]+(be<e.length?e[be]:"%s");return ye+fe[me]},goog.asserts.doAssertFailure_=function(fe,e,ye,me){var be="Assertion failed";if(ye){be+=": "+ye;var ve=me}else fe&&(be+=": "+fe,ve=e);fe=new goog.asserts.AssertionError(""+be,ve||[]),goog.asserts.errorHandler_(fe)},goog.asserts.setErrorHandler=function(fe){goog.asserts.ENABLE_ASSERTS&&(goog.asserts.errorHandler_=fe)},goog.asserts.assert=function(fe,e,ye){return goog.asserts.ENABLE_ASSERTS&&!fe&&goog.asserts.doAssertFailure_("",null,e,Array.prototype.slice.call(arguments,2)),fe},goog.asserts.assertExists=function(fe,e,ye){return goog.asserts.ENABLE_ASSERTS&&fe==null&&goog.asserts.doAssertFailure_("Expected to exist: %s.",[fe],e,Array.prototype.slice.call(arguments,2)),fe},goog.asserts.fail=function(fe,e){goog.asserts.ENABLE_ASSERTS&&goog.asserts.errorHandler_(new goog.asserts.AssertionError("Failure"+(fe?": "+fe:""),Array.prototype.slice.call(arguments,1)))},goog.asserts.assertNumber=function(fe,e,ye){return goog.asserts.ENABLE_ASSERTS&&typeof fe!="number"&&goog.asserts.doAssertFailure_("Expected number but got %s: %s.",[goog.typeOf(fe),fe],e,Array.prototype.slice.call(arguments,2)),fe},goog.asserts.assertString=function(fe,e,ye){return goog.asserts.ENABLE_ASSERTS&&typeof fe!="string"&&goog.asserts.doAssertFailure_("Expected string but got %s: %s.",[goog.typeOf(fe),fe],e,Array.prototype.slice.call(arguments,2)),fe},goog.asserts.assertFunction=function(fe,e,ye){return goog.asserts.ENABLE_ASSERTS&&!goog.isFunction(fe)&&goog.asserts.doAssertFailure_("Expected function but got %s: %s.",[goog.typeOf(fe),fe],e,Array.prototype.slice.call(arguments,2)),fe},goog.asserts.assertObject=function(fe,e,ye){return goog.asserts.ENABLE_ASSERTS&&!goog.isObject(fe)&&goog.asserts.doAssertFailure_("Expected object but got %s: %s.",[goog.typeOf(fe),fe],e,Array.prototype.slice.call(arguments,2)),fe},goog.asserts.assertArray=function(fe,e,ye){return goog.asserts.ENABLE_ASSERTS&&!Array.isArray(fe)&&goog.asserts.doAssertFailure_("Expected array but got %s: %s.",[goog.typeOf(fe),fe],e,Array.prototype.slice.call(arguments,2)),fe},goog.asserts.assertBoolean=function(fe,e,ye){return goog.asserts.ENABLE_ASSERTS&&typeof fe!="boolean"&&goog.asserts.doAssertFailure_("Expected boolean but got %s: %s.",[goog.typeOf(fe),fe],e,Array.prototype.slice.call(arguments,2)),fe},goog.asserts.assertElement=function(fe,e,ye){return!goog.asserts.ENABLE_ASSERTS||goog.isObject(fe)&&fe.nodeType==goog.dom.NodeType.ELEMENT||goog.asserts.doAssertFailure_("Expected Element but got %s: %s.",[goog.typeOf(fe),fe],e,Array.prototype.slice.call(arguments,2)),fe},goog.asserts.assertInstanceof=function(fe,e,ye,me){return!goog.asserts.ENABLE_ASSERTS||fe instanceof e||goog.asserts.doAssertFailure_("Expected instanceof %s but got %s.",[goog.asserts.getType_(e),goog.asserts.getType_(fe)],ye,Array.prototype.slice.call(arguments,3)),fe},goog.asserts.assertFinite=function(fe,e,ye){return!goog.asserts.ENABLE_ASSERTS||typeof fe=="number"&&isFinite(fe)||goog.asserts.doAssertFailure_("Expected %s to be a finite number but it is not.",[fe],e,Array.prototype.slice.call(arguments,2)),fe},goog.asserts.assertObjectPrototypeIsIntact=function(){for(var fe in Object.prototype)goog.asserts.fail(fe+" should not be enumerable in Object.prototype.")},goog.asserts.getType_=function(fe){return fe instanceof Function?fe.displayName||fe.name||"unknown type name":fe instanceof Object?fe.constructor.displayName||fe.constructor.name||Object.prototype.toString.call(fe):fe===null?"null":typeof fe},goog.array={},goog.NATIVE_ARRAY_PROTOTYPES=goog.TRUSTED_SITE,goog.array.ASSUME_NATIVE_FUNCTIONS=2012<goog.FEATURESET_YEAR,goog.array.peek=function(fe){return fe[fe.length-1]},goog.array.last=goog.array.peek,goog.array.indexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.indexOf)?function(fe,e,ye){return goog.asserts.assert(fe.length!=null),Array.prototype.indexOf.call(fe,e,ye)}:function(fe,e,ye){if(ye=ye==null?0:0>ye?Math.max(0,fe.length+ye):ye,typeof fe=="string")return typeof e!="string"||e.length!=1?-1:fe.indexOf(e,ye);for(;ye<fe.length;ye++)if(ye in fe&&fe[ye]===e)return ye;return-1},goog.array.lastIndexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.lastIndexOf)?function(fe,e,ye){return goog.asserts.assert(fe.length!=null),Array.prototype.lastIndexOf.call(fe,e,ye??fe.length-1)}:function(fe,e,ye){if(ye=ye??fe.length-1,0>ye&&(ye=Math.max(0,fe.length+ye)),typeof fe=="string")return typeof e!="string"||e.length!=1?-1:fe.lastIndexOf(e,ye);for(;0<=ye;ye--)if(ye in fe&&fe[ye]===e)return ye;return-1},goog.array.forEach=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.forEach)?function(fe,e,ye){goog.asserts.assert(fe.length!=null),Array.prototype.forEach.call(fe,e,ye)}:function(fe,e,ye){for(var me=fe.length,be=typeof fe=="string"?fe.split(""):fe,ve=0;ve<me;ve++)ve in be&&e.call(ye,be[ve],ve,fe)},goog.array.forEachRight=function(fe,e,ye){var me=fe.length,be=typeof fe=="string"?fe.split(""):fe;for(--me;0<=me;--me)me in be&&e.call(ye,be[me],me,fe)},goog.array.filter=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.filter)?function(fe,e,ye){return goog.asserts.assert(fe.length!=null),Array.prototype.filter.call(fe,e,ye)}:function(fe,e,ye){for(var me=fe.length,be=[],ve=0,Ee=typeof fe=="string"?fe.split(""):fe,Oe=0;Oe<me;Oe++)if(Oe in Ee){var xe=Ee[Oe];e.call(ye,xe,Oe,fe)&&(be[ve++]=xe)}return be},goog.array.map=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.map)?function(fe,e,ye){return goog.asserts.assert(fe.length!=null),Array.prototype.map.call(fe,e,ye)}:function(fe,e,ye){for(var me=fe.length,be=Array(me),ve=typeof fe=="string"?fe.split(""):fe,Ee=0;Ee<me;Ee++)Ee in ve&&(be[Ee]=e.call(ye,ve[Ee],Ee,fe));return be},goog.array.reduce=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.reduce)?function(fe,e,ye,me){return goog.asserts.assert(fe.length!=null),me&&(e=goog.bind(e,me)),Array.prototype.reduce.call(fe,e,ye)}:function(fe,e,ye,me){var be=ye;return goog.array.forEach(fe,function(ve,Ee){be=e.call(me,be,ve,Ee,fe)}),be},goog.array.reduceRight=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.reduceRight)?function(fe,e,ye,me){return goog.asserts.assert(fe.length!=null),goog.asserts.assert(e!=null),me&&(e=goog.bind(e,me)),Array.prototype.reduceRight.call(fe,e,ye)}:function(fe,e,ye,me){var be=ye;return goog.array.forEachRight(fe,function(ve,Ee){be=e.call(me,be,ve,Ee,fe)}),be},goog.array.some=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.some)?function(fe,e,ye){return goog.asserts.assert(fe.length!=null),Array.prototype.some.call(fe,e,ye)}:function(fe,e,ye){for(var me=fe.length,be=typeof fe=="string"?fe.split(""):fe,ve=0;ve<me;ve++)if(ve in be&&e.call(ye,be[ve],ve,fe))return!0;return!1},goog.array.every=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.every)?function(fe,e,ye){return goog.asserts.assert(fe.length!=null),Array.prototype.every.call(fe,e,ye)}:function(fe,e,ye){for(var me=fe.length,be=typeof fe=="string"?fe.split(""):fe,ve=0;ve<me;ve++)if(ve in be&&!e.call(ye,be[ve],ve,fe))return!1;return!0},goog.array.count=function(fe,e,ye){var me=0;return goog.array.forEach(fe,function(be,ve,Ee){e.call(ye,be,ve,Ee)&&++me},ye),me},goog.array.find=function(fe,e,ye){return e=goog.array.findIndex(fe,e,ye),0>e?null:typeof fe=="string"?fe.charAt(e):fe[e]},goog.array.findIndex=function(fe,e,ye){for(var me=fe.length,be=typeof fe=="string"?fe.split(""):fe,ve=0;ve<me;ve++)if(ve in be&&e.call(ye,be[ve],ve,fe))return ve;return-1},goog.array.findRight=function(fe,e,ye){return e=goog.array.findIndexRight(fe,e,ye),0>e?null:typeof fe=="string"?fe.charAt(e):fe[e]},goog.array.findIndexRight=function(fe,e,ye){var me=fe.length,be=typeof fe=="string"?fe.split(""):fe;for(--me;0<=me;me--)if(me in be&&e.call(ye,be[me],me,fe))return me;return-1},goog.array.contains=function(fe,e){return 0<=goog.array.indexOf(fe,e)},goog.array.isEmpty=function(fe){return fe.length==0},goog.array.clear=function(fe){if(!Array.isArray(fe))for(var e=fe.length-1;0<=e;e--)delete fe[e];fe.length=0},goog.array.insert=function(fe,e){goog.array.contains(fe,e)||fe.push(e)},goog.array.insertAt=function(fe,e,ye){goog.array.splice(fe,ye,0,e)},goog.array.insertArrayAt=function(fe,e,ye){goog.partial(goog.array.splice,fe,ye,0).apply(null,e)},goog.array.insertBefore=function(fe,e,ye){var me;arguments.length==2||0>(me=goog.array.indexOf(fe,ye))?fe.push(e):goog.array.insertAt(fe,e,me)},goog.array.remove=function(fe,e){e=goog.array.indexOf(fe,e);var ye;return(ye=0<=e)&&goog.array.removeAt(fe,e),ye},goog.array.removeLast=function(fe,e){return e=goog.array.lastIndexOf(fe,e),0<=e?(goog.array.removeAt(fe,e),!0):!1},goog.array.removeAt=function(fe,e){return goog.asserts.assert(fe.length!=null),Array.prototype.splice.call(fe,e,1).length==1},goog.array.removeIf=function(fe,e,ye){return e=goog.array.findIndex(fe,e,ye),0<=e?(goog.array.removeAt(fe,e),!0):!1},goog.array.removeAllIf=function(fe,e,ye){var me=0;return goog.array.forEachRight(fe,function(be,ve){e.call(ye,be,ve,fe)&&goog.array.removeAt(fe,ve)&&me++}),me},goog.array.concat=function(fe){return Array.prototype.concat.apply([],arguments)},goog.array.join=function(fe){return Array.prototype.concat.apply([],arguments)},goog.array.toArray=function(fe){var e=fe.length;if(0<e){for(var ye=Array(e),me=0;me<e;me++)ye[me]=fe[me];return ye}return[]},goog.array.clone=goog.array.toArray,goog.array.extend=function(fe,e){for(var ye=1;ye<arguments.length;ye++){var me=arguments[ye];if(goog.isArrayLike(me)){var be=fe.length||0,ve=me.length||0;fe.length=be+ve;for(var Ee=0;Ee<ve;Ee++)fe[be+Ee]=me[Ee]}else fe.push(me)}},goog.array.splice=function(fe,e,ye,me){return goog.asserts.assert(fe.length!=null),Array.prototype.splice.apply(fe,goog.array.slice(arguments,1))},goog.array.slice=function(fe,e,ye){return goog.asserts.assert(fe.length!=null),2>=arguments.length?Array.prototype.slice.call(fe,e):Array.prototype.slice.call(fe,e,ye)},goog.array.removeDuplicates=function(fe,e,ye){e=e||fe;var me=function(xe){return goog.isObject(xe)?"o"+goog.getUid(xe):(typeof xe).charAt(0)+xe};ye=ye||me,me={};for(var be=0,ve=0;ve<fe.length;){var Ee=fe[ve++],Oe=ye(Ee);Object.prototype.hasOwnProperty.call(me,Oe)||(me[Oe]=!0,e[be++]=Ee)}e.length=be},goog.array.binarySearch=function(fe,e,ye){return goog.array.binarySearch_(fe,ye||goog.array.defaultCompare,!1,e)},goog.array.binarySelect=function(fe,e,ye){return goog.array.binarySearch_(fe,e,!0,void 0,ye)},goog.array.binarySearch_=function(fe,e,ye,me,be){for(var ve=0,Ee=fe.length,Oe;ve<Ee;){var xe=ve+(Ee-ve>>>1),gr=ye?e.call(be,fe[xe],xe,fe):e(me,fe[xe]);0<gr?ve=xe+1:(Ee=xe,Oe=!gr)}return Oe?ve:-ve-1},goog.array.sort=function(fe,e){fe.sort(e||goog.array.defaultCompare)},goog.array.stableSort=function(fe,e){for(var ye=Array(fe.length),me=0;me<fe.length;me++)ye[me]={index:me,value:fe[me]};var be=e||goog.array.defaultCompare;for(goog.array.sort(ye,function(ve,Ee){return be(ve.value,Ee.value)||ve.index-Ee.index}),me=0;me<fe.length;me++)fe[me]=ye[me].value},goog.array.sortByKey=function(fe,e,ye){var me=ye||goog.array.defaultCompare;goog.array.sort(fe,function(be,ve){return me(e(be),e(ve))})},goog.array.sortObjectsByKey=function(fe,e,ye){goog.array.sortByKey(fe,function(me){return me[e]},ye)},goog.array.isSorted=function(fe,e,ye){e=e||goog.array.defaultCompare;for(var me=1;me<fe.length;me++){var be=e(fe[me-1],fe[me]);if(0<be||be==0&&ye)return!1}return!0},goog.array.equals=function(fe,e,ye){if(!goog.isArrayLike(fe)||!goog.isArrayLike(e)||fe.length!=e.length)return!1;var me=fe.length;ye=ye||goog.array.defaultCompareEquality;for(var be=0;be<me;be++)if(!ye(fe[be],e[be]))return!1;return!0},goog.array.compare3=function(fe,e,ye){ye=ye||goog.array.defaultCompare;for(var me=Math.min(fe.length,e.length),be=0;be<me;be++){var ve=ye(fe[be],e[be]);if(ve!=0)return ve}return goog.array.defaultCompare(fe.length,e.length)},goog.array.defaultCompare=function(fe,e){return fe>e?1:fe<e?-1:0},goog.array.inverseDefaultCompare=function(fe,e){return-goog.array.defaultCompare(fe,e)},goog.array.defaultCompareEquality=function(fe,e){return fe===e},goog.array.binaryInsert=function(fe,e,ye){return ye=goog.array.binarySearch(fe,e,ye),0>ye?(goog.array.insertAt(fe,e,-(ye+1)),!0):!1},goog.array.binaryRemove=function(fe,e,ye){return e=goog.array.binarySearch(fe,e,ye),0<=e?goog.array.removeAt(fe,e):!1},goog.array.bucket=function(fe,e,ye){for(var me={},be=0;be<fe.length;be++){var ve=fe[be],Ee=e.call(ye,ve,be,fe);Ee!==void 0&&(me[Ee]||(me[Ee]=[])).push(ve)}return me},goog.array.toObject=function(fe,e,ye){var me={};return goog.array.forEach(fe,function(be,ve){me[e.call(ye,be,ve,fe)]=be}),me},goog.array.range=function(fe,e,ye){var me=[],be=0,ve=fe;if(ye=ye||1,e!==void 0&&(be=fe,ve=e),0>ye*(ve-be))return[];if(0<ye)for(fe=be;fe<ve;fe+=ye)me.push(fe);else for(fe=be;fe>ve;fe+=ye)me.push(fe);return me},goog.array.repeat=function(fe,e){for(var ye=[],me=0;me<e;me++)ye[me]=fe;return ye},goog.array.flatten=function(fe){for(var e=[],ye=0;ye<arguments.length;ye++){var me=arguments[ye];if(Array.isArray(me))for(var be=0;be<me.length;be+=8192){var ve=goog.array.slice(me,be,be+8192);ve=goog.array.flatten.apply(null,ve);for(var Ee=0;Ee<ve.length;Ee++)e.push(ve[Ee])}else e.push(me)}return e},goog.array.rotate=function(fe,e){return goog.asserts.assert(fe.length!=null),fe.length&&(e%=fe.length,0<e?Array.prototype.unshift.apply(fe,fe.splice(-e,e)):0>e&&Array.prototype.push.apply(fe,fe.splice(0,-e))),fe},goog.array.moveItem=function(fe,e,ye){goog.asserts.assert(0<=e&&e<fe.length),goog.asserts.assert(0<=ye&&ye<fe.length),e=Array.prototype.splice.call(fe,e,1),Array.prototype.splice.call(fe,ye,0,e[0])},goog.array.zip=function(fe){if(!arguments.length)return[];for(var e=[],ye=arguments[0].length,me=1;me<arguments.length;me++)arguments[me].length<ye&&(ye=arguments[me].length);for(me=0;me<ye;me++){for(var be=[],ve=0;ve<arguments.length;ve++)be.push(arguments[ve][me]);e.push(be)}return e},goog.array.shuffle=function(fe,e){e=e||Math.random;for(var ye=fe.length-1;0<ye;ye--){var me=Math.floor(e()*(ye+1)),be=fe[ye];fe[ye]=fe[me],fe[me]=be}},goog.array.copyByIndex=function(fe,e){var ye=[];return goog.array.forEach(e,function(me){ye.push(fe[me])}),ye},goog.array.concatMap=function(fe,e,ye){return goog.array.concat.apply([],goog.array.map(fe,e,ye))},goog.crypt={},goog.crypt.stringToByteArray=function(fe){for(var e=[],ye=0,me=0;me<fe.length;me++){var be=fe.charCodeAt(me);255<be&&(e[ye++]=be&255,be>>=8),e[ye++]=be}return e},goog.crypt.byteArrayToString=function(fe){if(8192>=fe.length)return String.fromCharCode.apply(null,fe);for(var e="",ye=0;ye<fe.length;ye+=8192){var me=goog.array.slice(fe,ye,ye+8192);e+=String.fromCharCode.apply(null,me)}return e},goog.crypt.byteArrayToHex=function(fe,e){return goog.array.map(fe,function(ye){return ye=ye.toString(16),1<ye.length?ye:"0"+ye}).join(e||"")},goog.crypt.hexToByteArray=function(fe){goog.asserts.assert(fe.length%2==0,"Key string length must be multiple of 2");for(var e=[],ye=0;ye<fe.length;ye+=2)e.push(parseInt(fe.substring(ye,ye+2),16));return e},goog.crypt.stringToUtf8ByteArray=function(fe){for(var e=[],ye=0,me=0;me<fe.length;me++){var be=fe.charCodeAt(me);128>be?e[ye++]=be:(2048>be?e[ye++]=be>>6|192:((be&64512)==55296&&me+1<fe.length&&(fe.charCodeAt(me+1)&64512)==56320?(be=65536+((be&1023)<<10)+(fe.charCodeAt(++me)&1023),e[ye++]=be>>18|240,e[ye++]=be>>12&63|128):e[ye++]=be>>12|224,e[ye++]=be>>6&63|128),e[ye++]=be&63|128)}return e},goog.crypt.utf8ByteArrayToString=function(fe){for(var e=[],ye=0,me=0;ye<fe.length;){var be=fe[ye++];if(128>be)e[me++]=String.fromCharCode(be);else if(191<be&&224>be){var ve=fe[ye++];e[me++]=String.fromCharCode((be&31)<<6|ve&63)}else if(239<be&&365>be){ve=fe[ye++];var Ee=fe[ye++],Oe=fe[ye++];be=((be&7)<<18|(ve&63)<<12|(Ee&63)<<6|Oe&63)-65536,e[me++]=String.fromCharCode(55296+(be>>10)),e[me++]=String.fromCharCode(56320+(be&1023))}else ve=fe[ye++],Ee=fe[ye++],e[me++]=String.fromCharCode((be&15)<<12|(ve&63)<<6|Ee&63)}return e.join("")},goog.crypt.xorByteArray=function(fe,e){goog.asserts.assert(fe.length==e.length,"XOR array lengths must match");for(var ye=[],me=0;me<fe.length;me++)ye.push(fe[me]^e[me]);return ye},goog.dom.asserts={},goog.dom.asserts.assertIsLocation=function(fe){if(goog.asserts.ENABLE_ASSERTS){var e=goog.dom.asserts.getWindow_(fe);e&&(!fe||!(fe instanceof e.Location)&&fe instanceof e.Element)&&goog.asserts.fail("Argument is not a Location (or a non-Element mock); got: %s",goog.dom.asserts.debugStringForType_(fe))}return fe},goog.dom.asserts.assertIsElementType_=function(fe,e){if(goog.asserts.ENABLE_ASSERTS){var ye=goog.dom.asserts.getWindow_(fe);ye&&typeof ye[e]<"u"&&(fe&&(fe instanceof ye[e]||!(fe instanceof ye.Location||fe instanceof ye.Element))||goog.asserts.fail("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,goog.dom.asserts.debugStringForType_(fe)))}return fe},goog.dom.asserts.assertIsHTMLAnchorElement=function(fe){return goog.dom.asserts.assertIsElementType_(fe,"HTMLAnchorElement")},goog.dom.asserts.assertIsHTMLButtonElement=function(fe){return goog.dom.asserts.assertIsElementType_(fe,"HTMLButtonElement")},goog.dom.asserts.assertIsHTMLLinkElement=function(fe){return goog.dom.asserts.assertIsElementType_(fe,"HTMLLinkElement")},goog.dom.asserts.assertIsHTMLImageElement=function(fe){return goog.dom.asserts.assertIsElementType_(fe,"HTMLImageElement")},goog.dom.asserts.assertIsHTMLAudioElement=function(fe){return goog.dom.asserts.assertIsElementType_(fe,"HTMLAudioElement")},goog.dom.asserts.assertIsHTMLVideoElement=function(fe){return goog.dom.asserts.assertIsElementType_(fe,"HTMLVideoElement")},goog.dom.asserts.assertIsHTMLInputElement=function(fe){return goog.dom.asserts.assertIsElementType_(fe,"HTMLInputElement")},goog.dom.asserts.assertIsHTMLTextAreaElement=function(fe){return goog.dom.asserts.assertIsElementType_(fe,"HTMLTextAreaElement")},goog.dom.asserts.assertIsHTMLCanvasElement=function(fe){return goog.dom.asserts.assertIsElementType_(fe,"HTMLCanvasElement")},goog.dom.asserts.assertIsHTMLEmbedElement=function(fe){return goog.dom.asserts.assertIsElementType_(fe,"HTMLEmbedElement")},goog.dom.asserts.assertIsHTMLFormElement=function(fe){return goog.dom.asserts.assertIsElementType_(fe,"HTMLFormElement")},goog.dom.asserts.assertIsHTMLFrameElement=function(fe){return goog.dom.asserts.assertIsElementType_(fe,"HTMLFrameElement")},goog.dom.asserts.assertIsHTMLIFrameElement=function(fe){return goog.dom.asserts.assertIsElementType_(fe,"HTMLIFrameElement")},goog.dom.asserts.assertIsHTMLObjectElement=function(fe){return goog.dom.asserts.assertIsElementType_(fe,"HTMLObjectElement")},goog.dom.asserts.assertIsHTMLScriptElement=function(fe){return goog.dom.asserts.assertIsElementType_(fe,"HTMLScriptElement")},goog.dom.asserts.debugStringForType_=function(fe){if(goog.isObject(fe))try{return fe.constructor.displayName||fe.constructor.name||Object.prototype.toString.call(fe)}catch{return"<object could not be stringified>"}else return fe===void 0?"undefined":fe===null?"null":typeof fe},goog.dom.asserts.getWindow_=function(fe){try{var e=fe&&fe.ownerDocument,ye=e&&(e.defaultView||e.parentWindow);if(ye=ye||goog.global,ye.Element&&ye.Location)return ye}catch{}return null},goog.functions={},goog.functions.constant=function(fe){return function(){return fe}},goog.functions.FALSE=function(){return!1},goog.functions.TRUE=function(){return!0},goog.functions.NULL=function(){return null},goog.functions.identity=function(fe,e){return fe},goog.functions.error=function(fe){return function(){throw Error(fe)}},goog.functions.fail=function(fe){return function(){throw fe}},goog.functions.lock=function(fe,e){return e=e||0,function(){return fe.apply(this,Array.prototype.slice.call(arguments,0,e))}},goog.functions.nth=function(fe){return function(){return arguments[fe]}},goog.functions.partialRight=function(fe,e){var ye=Array.prototype.slice.call(arguments,1);return function(){var me=Array.prototype.slice.call(arguments);return me.push.apply(me,ye),fe.apply(this,me)}},goog.functions.withReturnValue=function(fe,e){return goog.functions.sequence(fe,goog.functions.constant(e))},goog.functions.equalTo=function(fe,e){return function(ye){return e?fe==ye:fe===ye}},goog.functions.compose=function(fe,e){var ye=arguments,me=ye.length;return function(){var be;me&&(be=ye[me-1].apply(this,arguments));for(var ve=me-2;0<=ve;ve--)be=ye[ve].call(this,be);return be}},goog.functions.sequence=function(fe){var e=arguments,ye=e.length;return function(){for(var me,be=0;be<ye;be++)me=e[be].apply(this,arguments);return me}},goog.functions.and=function(fe){var e=arguments,ye=e.length;return function(){for(var me=0;me<ye;me++)if(!e[me].apply(this,arguments))return!1;return!0}},goog.functions.or=function(fe){var e=arguments,ye=e.length;return function(){for(var me=0;me<ye;me++)if(e[me].apply(this,arguments))return!0;return!1}},goog.functions.not=function(fe){return function(){return!fe.apply(this,arguments)}},goog.functions.create=function(fe,e){var ye=function(){};return ye.prototype=fe.prototype,ye=new ye,fe.apply(ye,Array.prototype.slice.call(arguments,1)),ye},goog.functions.CACHE_RETURN_VALUE=!0,goog.functions.cacheReturnValue=function(fe){var e=!1,ye;return function(){return goog.functions.CACHE_RETURN_VALUE?(e||(ye=fe(),e=!0),ye):fe()}},goog.functions.once=function(fe){var e=fe;return function(){if(e){var ye=e;e=null,ye()}}},goog.functions.debounce=function(fe,e,ye){var me=0;return function(be){goog.global.clearTimeout(me);var ve=arguments;me=goog.global.setTimeout(function(){fe.apply(ye,ve)},e)}},goog.functions.throttle=function(fe,e,ye){var me=0,be=!1,ve=[],Ee=function(){me=0,be&&(be=!1,Oe())},Oe=function(){me=goog.global.setTimeout(Ee,e),fe.apply(ye,ve)};return function(xe){ve=arguments,me?be=!0:Oe()}},goog.functions.rateLimit=function(fe,e,ye){var me=0,be=function(){me=0};return function(ve){me||(me=goog.global.setTimeout(be,e),fe.apply(ye,arguments))}},goog.dom.HtmlElement=function(){},goog.dom.TagName=function(fe){this.tagName_=fe},goog.dom.TagName.prototype.toString=function(){return this.tagName_},goog.dom.TagName.A=new goog.dom.TagName("A"),goog.dom.TagName.ABBR=new goog.dom.TagName("ABBR"),goog.dom.TagName.ACRONYM=new goog.dom.TagName("ACRONYM"),goog.dom.TagName.ADDRESS=new goog.dom.TagName("ADDRESS"),goog.dom.TagName.APPLET=new goog.dom.TagName("APPLET"),goog.dom.TagName.AREA=new goog.dom.TagName("AREA"),goog.dom.TagName.ARTICLE=new goog.dom.TagName("ARTICLE"),goog.dom.TagName.ASIDE=new goog.dom.TagName("ASIDE"),goog.dom.TagName.AUDIO=new goog.dom.TagName("AUDIO"),goog.dom.TagName.B=new goog.dom.TagName("B"),goog.dom.TagName.BASE=new goog.dom.TagName("BASE"),goog.dom.TagName.BASEFONT=new goog.dom.TagName("BASEFONT"),goog.dom.TagName.BDI=new goog.dom.TagName("BDI"),goog.dom.TagName.BDO=new goog.dom.TagName("BDO"),goog.dom.TagName.BIG=new goog.dom.TagName("BIG"),goog.dom.TagName.BLOCKQUOTE=new goog.dom.TagName("BLOCKQUOTE"),goog.dom.TagName.BODY=new goog.dom.TagName("BODY"),goog.dom.TagName.BR=new goog.dom.TagName("BR"),goog.dom.TagName.BUTTON=new goog.dom.TagName("BUTTON"),goog.dom.TagName.CANVAS=new goog.dom.TagName("CANVAS"),goog.dom.TagName.CAPTION=new goog.dom.TagName("CAPTION"),goog.dom.TagName.CENTER=new goog.dom.TagName("CENTER"),goog.dom.TagName.CITE=new goog.dom.TagName("CITE"),goog.dom.TagName.CODE=new goog.dom.TagName("CODE"),goog.dom.TagName.COL=new goog.dom.TagName("COL"),goog.dom.TagName.COLGROUP=new goog.dom.TagName("COLGROUP"),goog.dom.TagName.COMMAND=new goog.dom.TagName("COMMAND"),goog.dom.TagName.DATA=new goog.dom.TagName("DATA"),goog.dom.TagName.DATALIST=new goog.dom.TagName("DATALIST"),goog.dom.TagName.DD=new goog.dom.TagName("DD"),goog.dom.TagName.DEL=new goog.dom.TagName("DEL"),goog.dom.TagName.DETAILS=new goog.dom.TagName("DETAILS"),goog.dom.TagName.DFN=new goog.dom.TagName("DFN"),goog.dom.TagName.DIALOG=new goog.dom.TagName("DIALOG"),goog.dom.TagName.DIR=new goog.dom.TagName("DIR"),goog.dom.TagName.DIV=new goog.dom.TagName("DIV"),goog.dom.TagName.DL=new goog.dom.TagName("DL"),goog.dom.TagName.DT=new goog.dom.TagName("DT"),goog.dom.TagName.EM=new goog.dom.TagName("EM"),goog.dom.TagName.EMBED=new goog.dom.TagName("EMBED"),goog.dom.TagName.FIELDSET=new goog.dom.TagName("FIELDSET"),goog.dom.TagName.FIGCAPTION=new goog.dom.TagName("FIGCAPTION"),goog.dom.TagName.FIGURE=new goog.dom.TagName("FIGURE"),goog.dom.TagName.FONT=new goog.dom.TagName("FONT"),goog.dom.TagName.FOOTER=new goog.dom.TagName("FOOTER"),goog.dom.TagName.FORM=new goog.dom.TagName("FORM"),goog.dom.TagName.FRAME=new goog.dom.TagName("FRAME"),goog.dom.TagName.FRAMESET=new goog.dom.TagName("FRAMESET"),goog.dom.TagName.H1=new goog.dom.TagName("H1"),goog.dom.TagName.H2=new goog.dom.TagName("H2"),goog.dom.TagName.H3=new goog.dom.TagName("H3"),goog.dom.TagName.H4=new goog.dom.TagName("H4"),goog.dom.TagName.H5=new goog.dom.TagName("H5"),goog.dom.TagName.H6=new goog.dom.TagName("H6"),goog.dom.TagName.HEAD=new goog.dom.TagName("HEAD"),goog.dom.TagName.HEADER=new goog.dom.TagName("HEADER"),goog.dom.TagName.HGROUP=new goog.dom.TagName("HGROUP"),goog.dom.TagName.HR=new goog.dom.TagName("HR"),goog.dom.TagName.HTML=new goog.dom.TagName("HTML"),goog.dom.TagName.I=new goog.dom.TagName("I"),goog.dom.TagName.IFRAME=new goog.dom.TagName("IFRAME"),goog.dom.TagName.IMG=new goog.dom.TagName("IMG"),goog.dom.TagName.INPUT=new goog.dom.TagName("INPUT"),goog.dom.TagName.INS=new goog.dom.TagName("INS"),goog.dom.TagName.ISINDEX=new goog.dom.TagName("ISINDEX"),goog.dom.TagName.KBD=new goog.dom.TagName("KBD"),goog.dom.TagName.KEYGEN=new goog.dom.TagName("KEYGEN"),goog.dom.TagName.LABEL=new goog.dom.TagName("LABEL"),goog.dom.TagName.LEGEND=new goog.dom.TagName("LEGEND"),goog.dom.TagName.LI=new goog.dom.TagName("LI"),goog.dom.TagName.LINK=new goog.dom.TagName("LINK"),goog.dom.TagName.MAIN=new goog.dom.TagName("MAIN"),goog.dom.TagName.MAP=new goog.dom.TagName("MAP"),goog.dom.TagName.MARK=new goog.dom.TagName("MARK"),goog.dom.TagName.MATH=new goog.dom.TagName("MATH"),goog.dom.TagName.MENU=new goog.dom.TagName("MENU"),goog.dom.TagName.MENUITEM=new goog.dom.TagName("MENUITEM"),goog.dom.TagName.META=new goog.dom.TagName("META"),goog.dom.TagName.METER=new goog.dom.TagName("METER"),goog.dom.TagName.NAV=new goog.dom.TagName("NAV"),goog.dom.TagName.NOFRAMES=new goog.dom.TagName("NOFRAMES"),goog.dom.TagName.NOSCRIPT=new goog.dom.TagName("NOSCRIPT"),goog.dom.TagName.OBJECT=new goog.dom.TagName("OBJECT"),goog.dom.TagName.OL=new goog.dom.TagName("OL"),goog.dom.TagName.OPTGROUP=new goog.dom.TagName("OPTGROUP"),goog.dom.TagName.OPTION=new goog.dom.TagName("OPTION"),goog.dom.TagName.OUTPUT=new goog.dom.TagName("OUTPUT"),goog.dom.TagName.P=new goog.dom.TagName("P"),goog.dom.TagName.PARAM=new goog.dom.TagName("PARAM"),goog.dom.TagName.PICTURE=new goog.dom.TagName("PICTURE"),goog.dom.TagName.PRE=new goog.dom.TagName("PRE"),goog.dom.TagName.PROGRESS=new goog.dom.TagName("PROGRESS"),goog.dom.TagName.Q=new goog.dom.TagName("Q"),goog.dom.TagName.RP=new goog.dom.TagName("RP"),goog.dom.TagName.RT=new goog.dom.TagName("RT"),goog.dom.TagName.RTC=new goog.dom.TagName("RTC"),goog.dom.TagName.RUBY=new goog.dom.TagName("RUBY"),goog.dom.TagName.S=new goog.dom.TagName("S"),goog.dom.TagName.SAMP=new goog.dom.TagName("SAMP"),goog.dom.TagName.SCRIPT=new goog.dom.TagName("SCRIPT"),goog.dom.TagName.SECTION=new goog.dom.TagName("SECTION"),goog.dom.TagName.SELECT=new goog.dom.TagName("SELECT"),goog.dom.TagName.SMALL=new goog.dom.TagName("SMALL"),goog.dom.TagName.SOURCE=new goog.dom.TagName("SOURCE"),goog.dom.TagName.SPAN=new goog.dom.TagName("SPAN"),goog.dom.TagName.STRIKE=new goog.dom.TagName("STRIKE"),goog.dom.TagName.STRONG=new goog.dom.TagName("STRONG"),goog.dom.TagName.STYLE=new goog.dom.TagName("STYLE"),goog.dom.TagName.SUB=new goog.dom.TagName("SUB"),goog.dom.TagName.SUMMARY=new goog.dom.TagName("SUMMARY"),goog.dom.TagName.SUP=new goog.dom.TagName("SUP"),goog.dom.TagName.SVG=new goog.dom.TagName("SVG"),goog.dom.TagName.TABLE=new goog.dom.TagName("TABLE"),goog.dom.TagName.TBODY=new goog.dom.TagName("TBODY"),goog.dom.TagName.TD=new goog.dom.TagName("TD"),goog.dom.TagName.TEMPLATE=new goog.dom.TagName("TEMPLATE"),goog.dom.TagName.TEXTAREA=new goog.dom.TagName("TEXTAREA"),goog.dom.TagName.TFOOT=new goog.dom.TagName("TFOOT"),goog.dom.TagName.TH=new goog.dom.TagName("TH"),goog.dom.TagName.THEAD=new goog.dom.TagName("THEAD"),goog.dom.TagName.TIME=new goog.dom.TagName("TIME"),goog.dom.TagName.TITLE=new goog.dom.TagName("TITLE"),goog.dom.TagName.TR=new goog.dom.TagName("TR"),goog.dom.TagName.TRACK=new goog.dom.TagName("TRACK"),goog.dom.TagName.TT=new goog.dom.TagName("TT"),goog.dom.TagName.U=new goog.dom.TagName("U"),goog.dom.TagName.UL=new goog.dom.TagName("UL"),goog.dom.TagName.VAR=new goog.dom.TagName("VAR"),goog.dom.TagName.VIDEO=new goog.dom.TagName("VIDEO"),goog.dom.TagName.WBR=new goog.dom.TagName("WBR"),goog.dom.tags={},goog.dom.tags.VOID_TAGS_={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},goog.dom.tags.isVoidTag=function(fe){return goog.dom.tags.VOID_TAGS_[fe]===!0},goog.html={},goog.html.trustedtypes={},goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY=goog.TRUSTED_TYPES_POLICY_NAME?goog.createTrustedTypesPolicy(goog.TRUSTED_TYPES_POLICY_NAME+"#html"):null,goog.string={},goog.string.TypedString=function(){},goog.string.Const=function(fe,e){this.stringConstValueWithSecurityContract__googStringSecurityPrivate_=fe===goog.string.Const.GOOG_STRING_CONSTRUCTOR_TOKEN_PRIVATE_&&e||"",this.STRING_CONST_TYPE_MARKER__GOOG_STRING_SECURITY_PRIVATE_=goog.string.Const.TYPE_MARKER_},goog.string.Const.prototype.implementsGoogStringTypedString=!0,goog.string.Const.prototype.getTypedStringValue=function(){return this.stringConstValueWithSecurityContract__googStringSecurityPrivate_},goog.DEBUG&&(goog.string.Const.prototype.toString=function(){return"Const{"+this.stringConstValueWithSecurityContract__googStringSecurityPrivate_+"}"}),goog.string.Const.unwrap=function(fe){return fe instanceof goog.string.Const&&fe.constructor===goog.string.Const&&fe.STRING_CONST_TYPE_MARKER__GOOG_STRING_SECURITY_PRIVATE_===goog.string.Const.TYPE_MARKER_?fe.stringConstValueWithSecurityContract__googStringSecurityPrivate_:(goog.asserts.fail("expected object of type Const, got '"+fe+"'"),"type_error:Const")},goog.string.Const.from=function(fe){return new goog.string.Const(goog.string.Const.GOOG_STRING_CONSTRUCTOR_TOKEN_PRIVATE_,fe)},goog.string.Const.TYPE_MARKER_={},goog.string.Const.GOOG_STRING_CONSTRUCTOR_TOKEN_PRIVATE_={},goog.string.Const.EMPTY=goog.string.Const.from(""),goog.html.SafeScript=function(){this.privateDoNotAccessOrElseSafeScriptWrappedValue_="",this.SAFE_SCRIPT_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeScript.prototype.implementsGoogStringTypedString=!0,goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeScript.fromConstant=function(fe){return fe=goog.string.Const.unwrap(fe),fe.length===0?goog.html.SafeScript.EMPTY:goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(fe)},goog.html.SafeScript.fromConstantAndArgs=function(fe,e){for(var ye=[],me=1;me<arguments.length;me++)ye.push(goog.html.SafeScript.stringify_(arguments[me]));return goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse("("+goog.string.Const.unwrap(fe)+")("+ye.join(", ")+");")},goog.html.SafeScript.fromJson=function(fe){return goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(goog.html.SafeScript.stringify_(fe))},goog.html.SafeScript.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeScriptWrappedValue_.toString()},goog.DEBUG&&(goog.html.SafeScript.prototype.toString=function(){return"SafeScript{"+this.privateDoNotAccessOrElseSafeScriptWrappedValue_+"}"}),goog.html.SafeScript.unwrap=function(fe){return goog.html.SafeScript.unwrapTrustedScript(fe).toString()},goog.html.SafeScript.unwrapTrustedScript=function(fe){return fe instanceof goog.html.SafeScript&&fe.constructor===goog.html.SafeScript&&fe.SAFE_SCRIPT_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?fe.privateDoNotAccessOrElseSafeScriptWrappedValue_:(goog.asserts.fail("expected object of type SafeScript, got '"+fe+"' of type "+goog.typeOf(fe)),"type_error:SafeScript")},goog.html.SafeScript.stringify_=function(fe){return JSON.stringify(fe).replace(/</g,"\\x3c")},goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse=function(fe){return new goog.html.SafeScript().initSecurityPrivateDoNotAccessOrElse_(fe)},goog.html.SafeScript.prototype.initSecurityPrivateDoNotAccessOrElse_=function(fe){return this.privateDoNotAccessOrElseSafeScriptWrappedValue_=goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY?goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createScript(fe):fe,this},goog.html.SafeScript.EMPTY=goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(""),goog.fs={},goog.fs.url={},goog.fs.url.createObjectUrl=function(fe){return goog.fs.url.getUrlObject_().createObjectURL(fe)},goog.fs.url.revokeObjectUrl=function(fe){goog.fs.url.getUrlObject_().revokeObjectURL(fe)},goog.fs.url.UrlObject_=function(){},goog.fs.url.UrlObject_.prototype.createObjectURL=function(fe){},goog.fs.url.UrlObject_.prototype.revokeObjectURL=function(fe){},goog.fs.url.getUrlObject_=function(){var fe=goog.fs.url.findUrlObject_();if(fe!=null)return fe;throw Error("This browser doesn't seem to support blob URLs")},goog.fs.url.findUrlObject_=function(){return goog.global.URL!==void 0&&goog.global.URL.createObjectURL!==void 0?goog.global.URL:goog.global.webkitURL!==void 0&&goog.global.webkitURL.createObjectURL!==void 0?goog.global.webkitURL:goog.global.createObjectURL!==void 0?goog.global:null},goog.fs.url.browserSupportsObjectUrls=function(){return goog.fs.url.findUrlObject_()!=null},goog.fs.blob={},goog.fs.blob.getBlob=function(fe){var e=goog.global.BlobBuilder||goog.global.WebKitBlobBuilder;if(e!==void 0){e=new e;for(var ye=0;ye<arguments.length;ye++)e.append(arguments[ye]);return e.getBlob()}return goog.fs.blob.getBlobWithProperties(goog.array.toArray(arguments))},goog.fs.blob.getBlobWithProperties=function(fe,e,ye){var me=goog.global.BlobBuilder||goog.global.WebKitBlobBuilder;if(me!==void 0){me=new me;for(var be=0;be<fe.length;be++)me.append(fe[be],ye);return me.getBlob(e)}if(goog.global.Blob!==void 0)return me={},e&&(me.type=e),ye&&(me.endings=ye),new Blob(fe,me);throw Error("This browser doesn't seem to support creating Blobs")},goog.i18n={},goog.i18n.bidi={},goog.i18n.bidi.FORCE_RTL=!1,goog.i18n.bidi.IS_RTL=goog.i18n.bidi.FORCE_RTL||(goog.LOCALE.substring(0,2).toLowerCase()=="ar"||goog.LOCALE.substring(0,2).toLowerCase()=="fa"||goog.LOCALE.substring(0,2).toLowerCase()=="he"||goog.LOCALE.substring(0,2).toLowerCase()=="iw"||goog.LOCALE.substring(0,2).toLowerCase()=="ps"||goog.LOCALE.substring(0,2).toLowerCase()=="sd"||goog.LOCALE.substring(0,2).toLowerCase()=="ug"||goog.LOCALE.substring(0,2).toLowerCase()=="ur"||goog.LOCALE.substring(0,2).toLowerCase()=="yi")&&(goog.LOCALE.length==2||goog.LOCALE.substring(2,3)=="-"||goog.LOCALE.substring(2,3)=="_")||3<=goog.LOCALE.length&&goog.LOCALE.substring(0,3).toLowerCase()=="ckb"&&(goog.LOCALE.length==3||goog.LOCALE.substring(3,4)=="-"||goog.LOCALE.substring(3,4)=="_")||7<=goog.LOCALE.length&&(goog.LOCALE.substring(2,3)=="-"||goog.LOCALE.substring(2,3)=="_")&&(goog.LOCALE.substring(3,7).toLowerCase()=="adlm"||goog.LOCALE.substring(3,7).toLowerCase()=="arab"||goog.LOCALE.substring(3,7).toLowerCase()=="hebr"||goog.LOCALE.substring(3,7).toLowerCase()=="nkoo"||goog.LOCALE.substring(3,7).toLowerCase()=="rohg"||goog.LOCALE.substring(3,7).toLowerCase()=="thaa")||8<=goog.LOCALE.length&&(goog.LOCALE.substring(3,4)=="-"||goog.LOCALE.substring(3,4)=="_")&&(goog.LOCALE.substring(4,8).toLowerCase()=="adlm"||goog.LOCALE.substring(4,8).toLowerCase()=="arab"||goog.LOCALE.substring(4,8).toLowerCase()=="hebr"||goog.LOCALE.substring(4,8).toLowerCase()=="nkoo"||goog.LOCALE.substring(4,8).toLowerCase()=="rohg"||goog.LOCALE.substring(4,8).toLowerCase()=="thaa"),goog.i18n.bidi.Format={LRE:"‪",RLE:"‫",PDF:"‬",LRM:"‎",RLM:"‏"},goog.i18n.bidi.Dir={LTR:1,RTL:-1,NEUTRAL:0},goog.i18n.bidi.RIGHT="right",goog.i18n.bidi.LEFT="left",goog.i18n.bidi.I18N_RIGHT=goog.i18n.bidi.IS_RTL?goog.i18n.bidi.LEFT:goog.i18n.bidi.RIGHT,goog.i18n.bidi.I18N_LEFT=goog.i18n.bidi.IS_RTL?goog.i18n.bidi.RIGHT:goog.i18n.bidi.LEFT,goog.i18n.bidi.toDir=function(fe,e){return typeof fe=="number"?0<fe?goog.i18n.bidi.Dir.LTR:0>fe?goog.i18n.bidi.Dir.RTL:e?null:goog.i18n.bidi.Dir.NEUTRAL:fe==null?null:fe?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR},goog.i18n.bidi.ltrChars_="A-Za-zÀ-ÖØ-öø-ʸ̀-֐ऀ-῿‎Ⰰ-\uD801\uD804-\uD839\uD83C-\uDBFF豈-﬜︀-﹯﻽-￿",goog.i18n.bidi.rtlChars_="֑-ۯۺ-ࣿ‏\uD802-\uD803\uD83A-\uD83Bיִ-﷿ﹰ-ﻼ",goog.i18n.bidi.htmlSkipReg_=/<[^>]*>|&[^;]+;/g,goog.i18n.bidi.stripHtmlIfNeeded_=function(fe,e){return e?fe.replace(goog.i18n.bidi.htmlSkipReg_,""):fe},goog.i18n.bidi.rtlCharReg_=new RegExp("["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.ltrCharReg_=new RegExp("["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.hasAnyRtl=function(fe,e){return goog.i18n.bidi.rtlCharReg_.test(goog.i18n.bidi.stripHtmlIfNeeded_(fe,e))},goog.i18n.bidi.hasRtlChar=goog.i18n.bidi.hasAnyRtl,goog.i18n.bidi.hasAnyLtr=function(fe,e){return goog.i18n.bidi.ltrCharReg_.test(goog.i18n.bidi.stripHtmlIfNeeded_(fe,e))},goog.i18n.bidi.ltrRe_=new RegExp("^["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.rtlRe_=new RegExp("^["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.isRtlChar=function(fe){return goog.i18n.bidi.rtlRe_.test(fe)},goog.i18n.bidi.isLtrChar=function(fe){return goog.i18n.bidi.ltrRe_.test(fe)},goog.i18n.bidi.isNeutralChar=function(fe){return!goog.i18n.bidi.isLtrChar(fe)&&!goog.i18n.bidi.isRtlChar(fe)},goog.i18n.bidi.ltrDirCheckRe_=new RegExp("^[^"+goog.i18n.bidi.rtlChars_+"]*["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.rtlDirCheckRe_=new RegExp("^[^"+goog.i18n.bidi.ltrChars_+"]*["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.startsWithRtl=function(fe,e){return goog.i18n.bidi.rtlDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(fe,e))},goog.i18n.bidi.isRtlText=goog.i18n.bidi.startsWithRtl,goog.i18n.bidi.startsWithLtr=function(fe,e){return goog.i18n.bidi.ltrDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(fe,e))},goog.i18n.bidi.isLtrText=goog.i18n.bidi.startsWithLtr,goog.i18n.bidi.isRequiredLtrRe_=/^http:\/\/.*/,goog.i18n.bidi.isNeutralText=function(fe,e){return fe=goog.i18n.bidi.stripHtmlIfNeeded_(fe,e),goog.i18n.bidi.isRequiredLtrRe_.test(fe)||!goog.i18n.bidi.hasAnyLtr(fe)&&!goog.i18n.bidi.hasAnyRtl(fe)},goog.i18n.bidi.ltrExitDirCheckRe_=new RegExp("["+goog.i18n.bidi.ltrChars_+"][^"+goog.i18n.bidi.rtlChars_+"]*$"),goog.i18n.bidi.rtlExitDirCheckRe_=new RegExp("["+goog.i18n.bidi.rtlChars_+"][^"+goog.i18n.bidi.ltrChars_+"]*$"),goog.i18n.bidi.endsWithLtr=function(fe,e){return goog.i18n.bidi.ltrExitDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(fe,e))},goog.i18n.bidi.isLtrExitText=goog.i18n.bidi.endsWithLtr,goog.i18n.bidi.endsWithRtl=function(fe,e){return goog.i18n.bidi.rtlExitDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(fe,e))},goog.i18n.bidi.isRtlExitText=goog.i18n.bidi.endsWithRtl,goog.i18n.bidi.rtlLocalesRe_=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i,goog.i18n.bidi.isRtlLanguage=function(fe){return goog.i18n.bidi.rtlLocalesRe_.test(fe)},goog.i18n.bidi.bracketGuardTextRe_=/(\(.*?\)+)|(\[.*?\]+)|(\{.*?\}+)|(<.*?>+)/g,goog.i18n.bidi.guardBracketInText=function(fe,e){return e=(e===void 0?goog.i18n.bidi.hasAnyRtl(fe):e)?goog.i18n.bidi.Format.RLM:goog.i18n.bidi.Format.LRM,fe.replace(goog.i18n.bidi.bracketGuardTextRe_,e+"$&"+e)},goog.i18n.bidi.enforceRtlInHtml=function(fe){return fe.charAt(0)=="<"?fe.replace(/<\w+/,"$& dir=rtl"):`
<span dir=rtl>`+fe+"</span>"},goog.i18n.bidi.enforceRtlInText=function(fe){return goog.i18n.bidi.Format.RLE+fe+goog.i18n.bidi.Format.PDF},goog.i18n.bidi.enforceLtrInHtml=function(fe){return fe.charAt(0)=="<"?fe.replace(/<\w+/,"$& dir=ltr"):`
<span dir=ltr>`+fe+"</span>"},goog.i18n.bidi.enforceLtrInText=function(fe){return goog.i18n.bidi.Format.LRE+fe+goog.i18n.bidi.Format.PDF},goog.i18n.bidi.dimensionsRe_=/:\s*([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)/g,goog.i18n.bidi.leftRe_=/left/gi,goog.i18n.bidi.rightRe_=/right/gi,goog.i18n.bidi.tempRe_=/%%%%/g,goog.i18n.bidi.mirrorCSS=function(fe){return fe.replace(goog.i18n.bidi.dimensionsRe_,":$1 $4 $3 $2").replace(goog.i18n.bidi.leftRe_,"%%%%").replace(goog.i18n.bidi.rightRe_,goog.i18n.bidi.LEFT).replace(goog.i18n.bidi.tempRe_,goog.i18n.bidi.RIGHT)},goog.i18n.bidi.doubleQuoteSubstituteRe_=/([\u0591-\u05f2])"/g,goog.i18n.bidi.singleQuoteSubstituteRe_=/([\u0591-\u05f2])'/g,goog.i18n.bidi.normalizeHebrewQuote=function(fe){return fe.replace(goog.i18n.bidi.doubleQuoteSubstituteRe_,"$1״").replace(goog.i18n.bidi.singleQuoteSubstituteRe_,"$1׳")},goog.i18n.bidi.wordSeparatorRe_=/\s+/,goog.i18n.bidi.hasNumeralsRe_=/[\d\u06f0-\u06f9]/,goog.i18n.bidi.rtlDetectionThreshold_=.4,goog.i18n.bidi.estimateDirection=function(fe,e){var ye=0,me=0,be=!1;for(fe=goog.i18n.bidi.stripHtmlIfNeeded_(fe,e).split(goog.i18n.bidi.wordSeparatorRe_),e=0;e<fe.length;e++){var ve=fe[e];goog.i18n.bidi.startsWithRtl(ve)?(ye++,me++):goog.i18n.bidi.isRequiredLtrRe_.test(ve)?be=!0:goog.i18n.bidi.hasAnyLtr(ve)?me++:goog.i18n.bidi.hasNumeralsRe_.test(ve)&&(be=!0)}return me==0?be?goog.i18n.bidi.Dir.LTR:goog.i18n.bidi.Dir.NEUTRAL:ye/me>goog.i18n.bidi.rtlDetectionThreshold_?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR},goog.i18n.bidi.detectRtlDirectionality=function(fe,e){return goog.i18n.bidi.estimateDirection(fe,e)==goog.i18n.bidi.Dir.RTL},goog.i18n.bidi.setElementDirAndAlign=function(fe,e){fe&&(e=goog.i18n.bidi.toDir(e))&&(fe.style.textAlign=e==goog.i18n.bidi.Dir.RTL?goog.i18n.bidi.RIGHT:goog.i18n.bidi.LEFT,fe.dir=e==goog.i18n.bidi.Dir.RTL?"rtl":"ltr")},goog.i18n.bidi.setElementDirByTextDirectionality=function(fe,e){switch(goog.i18n.bidi.estimateDirection(e)){case goog.i18n.bidi.Dir.LTR:fe.dir="ltr";break;case goog.i18n.bidi.Dir.RTL:fe.dir="rtl";break;default:fe.removeAttribute("dir")}},goog.i18n.bidi.DirectionalString=function(){},goog.html.TrustedResourceUrl=function(fe,e){this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_=fe===goog.html.TrustedResourceUrl.CONSTRUCTOR_TOKEN_PRIVATE_&&e||"",this.TRUSTED_RESOURCE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.TrustedResourceUrl.prototype.implementsGoogStringTypedString=!0,goog.html.TrustedResourceUrl.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_.toString()},goog.html.TrustedResourceUrl.prototype.implementsGoogI18nBidiDirectionalString=!0,goog.html.TrustedResourceUrl.prototype.getDirection=function(){return goog.i18n.bidi.Dir.LTR},goog.html.TrustedResourceUrl.prototype.cloneWithParams=function(fe,e){var ye=goog.html.TrustedResourceUrl.unwrap(this);ye=goog.html.TrustedResourceUrl.URL_PARAM_PARSER_.exec(ye);var me=ye[3]||"";return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(ye[1]+goog.html.TrustedResourceUrl.stringifyParams_("?",ye[2]||"",fe)+goog.html.TrustedResourceUrl.stringifyParams_("#",me,e))},goog.DEBUG&&(goog.html.TrustedResourceUrl.prototype.toString=function(){return"TrustedResourceUrl{"+this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_+"}"}),goog.html.TrustedResourceUrl.unwrap=function(fe){return goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(fe).toString()},goog.html.TrustedResourceUrl.unwrapTrustedScriptURL=function(fe){return fe instanceof goog.html.TrustedResourceUrl&&fe.constructor===goog.html.TrustedResourceUrl&&fe.TRUSTED_RESOURCE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?fe.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_:(goog.asserts.fail("expected object of type TrustedResourceUrl, got '"+fe+"' of type "+goog.typeOf(fe)),"type_error:TrustedResourceUrl")},goog.html.TrustedResourceUrl.format=function(fe,e){var ye=goog.string.Const.unwrap(fe);if(!goog.html.TrustedResourceUrl.BASE_URL_.test(ye))throw Error("Invalid TrustedResourceUrl format: "+ye);return fe=ye.replace(goog.html.TrustedResourceUrl.FORMAT_MARKER_,function(me,be){if(!Object.prototype.hasOwnProperty.call(e,be))throw Error('Found marker, "'+be+'", in format string, "'+ye+'", but no valid label mapping found in args: '+JSON.stringify(e));return me=e[be],me instanceof goog.string.Const?goog.string.Const.unwrap(me):encodeURIComponent(String(me))}),goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(fe)},goog.html.TrustedResourceUrl.FORMAT_MARKER_=/%{(\w+)}/g,goog.html.TrustedResourceUrl.BASE_URL_=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,goog.html.TrustedResourceUrl.URL_PARAM_PARSER_=/^([^?#]*)(\?[^#]*)?(#[\s\S]*)?/,goog.html.TrustedResourceUrl.formatWithParams=function(fe,e,ye,me){return goog.html.TrustedResourceUrl.format(fe,e).cloneWithParams(ye,me)},goog.html.TrustedResourceUrl.fromConstant=function(fe){return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(goog.string.Const.unwrap(fe))},goog.html.TrustedResourceUrl.fromConstants=function(fe){for(var e="",ye=0;ye<fe.length;ye++)e+=goog.string.Const.unwrap(fe[ye]);return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.TrustedResourceUrl.fromSafeScript=function(fe){return fe=goog.fs.blob.getBlobWithProperties([goog.html.SafeScript.unwrap(fe)],"text/javascript"),fe=goog.fs.url.createObjectUrl(fe),goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(fe)},goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse=function(fe){return fe=goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY?goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createScriptURL(fe):fe,new goog.html.TrustedResourceUrl(goog.html.TrustedResourceUrl.CONSTRUCTOR_TOKEN_PRIVATE_,fe)},goog.html.TrustedResourceUrl.stringifyParams_=function(fe,e,ye){if(ye==null)return e;if(typeof ye=="string")return ye?fe+encodeURIComponent(ye):"";for(var me in ye){var be=ye[me];be=Array.isArray(be)?be:[be];for(var ve=0;ve<be.length;ve++){var Ee=be[ve];Ee!=null&&(e||(e=fe),e+=(e.length>fe.length?"&":"")+encodeURIComponent(me)+"="+encodeURIComponent(String(Ee)))}}return e},goog.html.TrustedResourceUrl.CONSTRUCTOR_TOKEN_PRIVATE_={},goog.string.internal={},goog.string.internal.startsWith=function(fe,e){return fe.lastIndexOf(e,0)==0},goog.string.internal.endsWith=function(fe,e){var ye=fe.length-e.length;return 0<=ye&&fe.indexOf(e,ye)==ye},goog.string.internal.caseInsensitiveStartsWith=function(fe,e){return goog.string.internal.caseInsensitiveCompare(e,fe.substr(0,e.length))==0},goog.string.internal.caseInsensitiveEndsWith=function(fe,e){return goog.string.internal.caseInsensitiveCompare(e,fe.substr(fe.length-e.length,e.length))==0},goog.string.internal.caseInsensitiveEquals=function(fe,e){return fe.toLowerCase()==e.toLowerCase()},goog.string.internal.isEmptyOrWhitespace=function(fe){return/^[\s\xa0]*$/.test(fe)},goog.string.internal.trim=goog.TRUSTED_SITE&&String.prototype.trim?function(fe){return fe.trim()}:function(fe){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(fe)[1]},goog.string.internal.caseInsensitiveCompare=function(fe,e){return fe=String(fe).toLowerCase(),e=String(e).toLowerCase(),fe<e?-1:fe==e?0:1},goog.string.internal.newLineToBr=function(fe,e){return fe.replace(/(\r\n|\r|\n)/g,e?"<br />":"<br>")},goog.string.internal.htmlEscape=function(fe,e){if(e)fe=fe.replace(goog.string.internal.AMP_RE_,"&amp;").replace(goog.string.internal.LT_RE_,"&lt;").replace(goog.string.internal.GT_RE_,"&gt;").replace(goog.string.internal.QUOT_RE_,"&quot;").replace(goog.string.internal.SINGLE_QUOTE_RE_,"&#39;").replace(goog.string.internal.NULL_RE_,"&#0;");else{if(!goog.string.internal.ALL_RE_.test(fe))return fe;fe.indexOf("&")!=-1&&(fe=fe.replace(goog.string.internal.AMP_RE_,"&amp;")),fe.indexOf("<")!=-1&&(fe=fe.replace(goog.string.internal.LT_RE_,"&lt;")),fe.indexOf(">")!=-1&&(fe=fe.replace(goog.string.internal.GT_RE_,"&gt;")),fe.indexOf('"')!=-1&&(fe=fe.replace(goog.string.internal.QUOT_RE_,"&quot;")),fe.indexOf("'")!=-1&&(fe=fe.replace(goog.string.internal.SINGLE_QUOTE_RE_,"&#39;")),fe.indexOf("\0")!=-1&&(fe=fe.replace(goog.string.internal.NULL_RE_,"&#0;"))}return fe},goog.string.internal.AMP_RE_=/&/g,goog.string.internal.LT_RE_=/</g,goog.string.internal.GT_RE_=/>/g,goog.string.internal.QUOT_RE_=/"/g,goog.string.internal.SINGLE_QUOTE_RE_=/'/g,goog.string.internal.NULL_RE_=/\x00/g,goog.string.internal.ALL_RE_=/[\x00&<>"']/,goog.string.internal.whitespaceEscape=function(fe,e){return goog.string.internal.newLineToBr(fe.replace(/  /g," &#160;"),e)},goog.string.internal.contains=function(fe,e){return fe.indexOf(e)!=-1},goog.string.internal.caseInsensitiveContains=function(fe,e){return goog.string.internal.contains(fe.toLowerCase(),e.toLowerCase())},goog.string.internal.compareVersions=function(fe,e){var ye=0;fe=goog.string.internal.trim(String(fe)).split("."),e=goog.string.internal.trim(String(e)).split(".");for(var me=Math.max(fe.length,e.length),be=0;ye==0&&be<me;be++){var ve=fe[be]||"",Ee=e[be]||"";do{if(ve=/(\d*)(\D*)(.*)/.exec(ve)||["","","",""],Ee=/(\d*)(\D*)(.*)/.exec(Ee)||["","","",""],ve[0].length==0&&Ee[0].length==0)break;ye=ve[1].length==0?0:parseInt(ve[1],10);var Oe=Ee[1].length==0?0:parseInt(Ee[1],10);ye=goog.string.internal.compareElements_(ye,Oe)||goog.string.internal.compareElements_(ve[2].length==0,Ee[2].length==0)||goog.string.internal.compareElements_(ve[2],Ee[2]),ve=ve[3],Ee=Ee[3]}while(ye==0)}return ye},goog.string.internal.compareElements_=function(fe,e){return fe<e?-1:fe>e?1:0},goog.html.SafeUrl=function(fe,e){this.privateDoNotAccessOrElseSafeUrlWrappedValue_=fe===goog.html.SafeUrl.CONSTRUCTOR_TOKEN_PRIVATE_&&e||"",this.SAFE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeUrl.INNOCUOUS_STRING="about:invalid#zClosurez",goog.html.SafeUrl.prototype.implementsGoogStringTypedString=!0,goog.html.SafeUrl.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeUrlWrappedValue_.toString()},goog.html.SafeUrl.prototype.implementsGoogI18nBidiDirectionalString=!0,goog.html.SafeUrl.prototype.getDirection=function(){return goog.i18n.bidi.Dir.LTR},goog.DEBUG&&(goog.html.SafeUrl.prototype.toString=function(){return"SafeUrl{"+this.privateDoNotAccessOrElseSafeUrlWrappedValue_+"}"}),goog.html.SafeUrl.unwrap=function(fe){return fe instanceof goog.html.SafeUrl&&fe.constructor===goog.html.SafeUrl&&fe.SAFE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?fe.privateDoNotAccessOrElseSafeUrlWrappedValue_:(goog.asserts.fail("expected object of type SafeUrl, got '"+fe+"' of type "+goog.typeOf(fe)),"type_error:SafeUrl")},goog.html.SafeUrl.fromConstant=function(fe){return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(goog.string.Const.unwrap(fe))},goog.html.SAFE_MIME_TYPE_PATTERN_=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,goog.html.SafeUrl.isSafeMimeType=function(fe){return goog.html.SAFE_MIME_TYPE_PATTERN_.test(fe)},goog.html.SafeUrl.fromBlob=function(fe){return fe=goog.html.SafeUrl.isSafeMimeType(fe.type)?goog.fs.url.createObjectUrl(fe):goog.html.SafeUrl.INNOCUOUS_STRING,goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(fe)},goog.html.SafeUrl.fromMediaSource=function(fe){return goog.asserts.assert("MediaSource"in goog.global,"No support for MediaSource"),fe=fe instanceof MediaSource?goog.fs.url.createObjectUrl(fe):goog.html.SafeUrl.INNOCUOUS_STRING,goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(fe)},goog.html.DATA_URL_PATTERN_=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,goog.html.SafeUrl.fromDataUrl=function(fe){fe=fe.replace(/(%0A|%0D)/g,"");var e=fe.match(goog.html.DATA_URL_PATTERN_);return e=e&&goog.html.SafeUrl.isSafeMimeType(e[1]),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e?fe:goog.html.SafeUrl.INNOCUOUS_STRING)},goog.html.SafeUrl.fromTelUrl=function(fe){return goog.string.internal.caseInsensitiveStartsWith(fe,"tel:")||(fe=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(fe)},goog.html.SIP_URL_PATTERN_=/^sip[s]?:[+a-z0-9_.!$%&'*\/=^`{|}~-]+@([a-z0-9-]+\.)+[a-z0-9]{2,63}$/i,goog.html.SafeUrl.fromSipUrl=function(fe){return goog.html.SIP_URL_PATTERN_.test(decodeURIComponent(fe))||(fe=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(fe)},goog.html.SafeUrl.fromFacebookMessengerUrl=function(fe){return goog.string.internal.caseInsensitiveStartsWith(fe,"fb-messenger://share")||(fe=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(fe)},goog.html.SafeUrl.fromWhatsAppUrl=function(fe){return goog.string.internal.caseInsensitiveStartsWith(fe,"whatsapp://send")||(fe=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(fe)},goog.html.SafeUrl.fromSmsUrl=function(fe){return goog.string.internal.caseInsensitiveStartsWith(fe,"sms:")&&goog.html.SafeUrl.isSmsUrlBodyValid_(fe)||(fe=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(fe)},goog.html.SafeUrl.isSmsUrlBodyValid_=function(fe){var e=fe.indexOf("#");if(0<e&&(fe=fe.substring(0,e)),e=fe.match(/[?&]body=/gi),!e)return!0;if(1<e.length)return!1;if(fe=fe.match(/[?&]body=([^&]*)/)[1],!fe)return!0;try{decodeURIComponent(fe)}catch{return!1}return/^(?:[a-z0-9\-_.~]|%[0-9a-f]{2})+$/i.test(fe)},goog.html.SafeUrl.fromSshUrl=function(fe){return goog.string.internal.caseInsensitiveStartsWith(fe,"ssh://")||(fe=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(fe)},goog.html.SafeUrl.sanitizeChromeExtensionUrl=function(fe,e){return goog.html.SafeUrl.sanitizeExtensionUrl_(/^chrome-extension:\/\/([^\/]+)\//,fe,e)},goog.html.SafeUrl.sanitizeFirefoxExtensionUrl=function(fe,e){return goog.html.SafeUrl.sanitizeExtensionUrl_(/^moz-extension:\/\/([^\/]+)\//,fe,e)},goog.html.SafeUrl.sanitizeEdgeExtensionUrl=function(fe,e){return goog.html.SafeUrl.sanitizeExtensionUrl_(/^ms-browser-extension:\/\/([^\/]+)\//,fe,e)},goog.html.SafeUrl.sanitizeExtensionUrl_=function(fe,e,ye){return(fe=fe.exec(e))?(fe=fe[1],(ye instanceof goog.string.Const?[goog.string.Const.unwrap(ye)]:ye.map(function(me){return goog.string.Const.unwrap(me)})).indexOf(fe)==-1&&(e=goog.html.SafeUrl.INNOCUOUS_STRING)):e=goog.html.SafeUrl.INNOCUOUS_STRING,goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.SafeUrl.fromTrustedResourceUrl=function(fe){return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(goog.html.TrustedResourceUrl.unwrap(fe))},goog.html.SAFE_URL_PATTERN_=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i,goog.html.SafeUrl.SAFE_URL_PATTERN=goog.html.SAFE_URL_PATTERN_,goog.html.SafeUrl.sanitize=function(fe){return fe instanceof goog.html.SafeUrl?fe:(fe=typeof fe=="object"&&fe.implementsGoogStringTypedString?fe.getTypedStringValue():String(fe),goog.html.SAFE_URL_PATTERN_.test(fe)||(fe=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(fe))},goog.html.SafeUrl.sanitizeAssertUnchanged=function(fe,e){return fe instanceof goog.html.SafeUrl?fe:(fe=typeof fe=="object"&&fe.implementsGoogStringTypedString?fe.getTypedStringValue():String(fe),e&&/^data:/i.test(fe)&&(e=goog.html.SafeUrl.fromDataUrl(fe),e.getTypedStringValue()==fe)?e:(goog.asserts.assert(goog.html.SAFE_URL_PATTERN_.test(fe),"%s does not match the safe URL pattern",fe)||(fe=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(fe)))},goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse=function(fe){return new goog.html.SafeUrl(goog.html.SafeUrl.CONSTRUCTOR_TOKEN_PRIVATE_,fe)},goog.html.SafeUrl.ABOUT_BLANK=goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse("about:blank"),goog.html.SafeUrl.CONSTRUCTOR_TOKEN_PRIVATE_={},goog.html.SafeStyle=function(){this.privateDoNotAccessOrElseSafeStyleWrappedValue_="",this.SAFE_STYLE_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeStyle.prototype.implementsGoogStringTypedString=!0,goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeStyle.fromConstant=function(fe){return fe=goog.string.Const.unwrap(fe),fe.length===0?goog.html.SafeStyle.EMPTY:(goog.asserts.assert(goog.string.internal.endsWith(fe,";"),"Last character of style string is not ';': "+fe),goog.asserts.assert(goog.string.internal.contains(fe,":"),`Style string must contain at least one ':', to specify a "name: value" pair: `+fe),goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(fe))},goog.html.SafeStyle.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeStyleWrappedValue_},goog.DEBUG&&(goog.html.SafeStyle.prototype.toString=function(){return"SafeStyle{"+this.privateDoNotAccessOrElseSafeStyleWrappedValue_+"}"}),goog.html.SafeStyle.unwrap=function(fe){return fe instanceof goog.html.SafeStyle&&fe.constructor===goog.html.SafeStyle&&fe.SAFE_STYLE_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?fe.privateDoNotAccessOrElseSafeStyleWrappedValue_:(goog.asserts.fail("expected object of type SafeStyle, got '"+fe+"' of type "+goog.typeOf(fe)),"type_error:SafeStyle")},goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse=function(fe){return new goog.html.SafeStyle().initSecurityPrivateDoNotAccessOrElse_(fe)},goog.html.SafeStyle.prototype.initSecurityPrivateDoNotAccessOrElse_=function(fe){return this.privateDoNotAccessOrElseSafeStyleWrappedValue_=fe,this},goog.html.SafeStyle.EMPTY=goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(""),goog.html.SafeStyle.INNOCUOUS_STRING="zClosurez",goog.html.SafeStyle.create=function(fe){var e="",ye;for(ye in fe){if(!/^[-_a-zA-Z0-9]+$/.test(ye))throw Error("Name allows only [-_a-zA-Z0-9], got: "+ye);var me=fe[ye];me!=null&&(me=Array.isArray(me)?goog.array.map(me,goog.html.SafeStyle.sanitizePropertyValue_).join(" "):goog.html.SafeStyle.sanitizePropertyValue_(me),e+=ye+":"+me+";")}return e?goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(e):goog.html.SafeStyle.EMPTY},goog.html.SafeStyle.sanitizePropertyValue_=function(fe){if(fe instanceof goog.html.SafeUrl)return'url("'+goog.html.SafeUrl.unwrap(fe).replace(/</g,"%3c").replace(/[\\"]/g,"\\$&")+'")';if(fe=fe instanceof goog.string.Const?goog.string.Const.unwrap(fe):goog.html.SafeStyle.sanitizePropertyValueString_(String(fe)),/[{;}]/.test(fe))throw new goog.asserts.AssertionError("Value does not allow [{;}], got: %s.",[fe]);return fe},goog.html.SafeStyle.sanitizePropertyValueString_=function(fe){var e=fe.replace(goog.html.SafeStyle.FUNCTIONS_RE_,"$1").replace(goog.html.SafeStyle.FUNCTIONS_RE_,"$1").replace(goog.html.SafeStyle.URL_RE_,"url");if(goog.html.SafeStyle.VALUE_RE_.test(e)){if(goog.html.SafeStyle.COMMENT_RE_.test(fe))return goog.asserts.fail("String value disallows comments, got: "+fe),goog.html.SafeStyle.INNOCUOUS_STRING;if(!goog.html.SafeStyle.hasBalancedQuotes_(fe))return goog.asserts.fail("String value requires balanced quotes, got: "+fe),goog.html.SafeStyle.INNOCUOUS_STRING;if(!goog.html.SafeStyle.hasBalancedSquareBrackets_(fe))return goog.asserts.fail("String value requires balanced square brackets and one identifier per pair of brackets, got: "+fe),goog.html.SafeStyle.INNOCUOUS_STRING}else return goog.asserts.fail("String value allows only "+goog.html.SafeStyle.VALUE_ALLOWED_CHARS_+" and simple functions, got: "+fe),goog.html.SafeStyle.INNOCUOUS_STRING;return goog.html.SafeStyle.sanitizeUrl_(fe)},goog.html.SafeStyle.hasBalancedQuotes_=function(fe){for(var e=!0,ye=!0,me=0;me<fe.length;me++){var be=fe.charAt(me);be=="'"&&ye?e=!e:be=='"'&&e&&(ye=!ye)}return e&&ye},goog.html.SafeStyle.hasBalancedSquareBrackets_=function(fe){for(var e=!0,ye=/^[-_a-zA-Z0-9]$/,me=0;me<fe.length;me++){var be=fe.charAt(me);if(be=="]"){if(e)return!1;e=!0}else if(be=="["){if(!e)return!1;e=!1}else if(!e&&!ye.test(be))return!1}return e},goog.html.SafeStyle.VALUE_ALLOWED_CHARS_=`[-,."'%_!# a-zA-Z0-9\\[\\]]`,goog.html.SafeStyle.VALUE_RE_=new RegExp("^"+goog.html.SafeStyle.VALUE_ALLOWED_CHARS_+"+$"),goog.html.SafeStyle.URL_RE_=/\b(url\([ \t\n]*)('[ -&(-\[\]-~]*'|"[ !#-\[\]-~]*"|[!#-&*-\[\]-~]*)([ \t\n]*\))/g,goog.html.SafeStyle.ALLOWED_FUNCTIONS_="calc cubic-bezier fit-content hsl hsla linear-gradient matrix minmax repeat rgb rgba (rotate|scale|translate)(X|Y|Z|3d)?".split(" "),goog.html.SafeStyle.FUNCTIONS_RE_=new RegExp("\\b("+goog.html.SafeStyle.ALLOWED_FUNCTIONS_.join("|")+")\\([-+*/0-9a-z.%\\[\\], ]+\\)","g"),goog.html.SafeStyle.COMMENT_RE_=/\/\*/,goog.html.SafeStyle.sanitizeUrl_=function(fe){return fe.replace(goog.html.SafeStyle.URL_RE_,function(e,ye,me,be){var ve="";return me=me.replace(/^(['"])(.*)\1$/,function(Ee,Oe,xe){return ve=Oe,xe}),e=goog.html.SafeUrl.sanitize(me).getTypedStringValue(),ye+ve+e+ve+be})},goog.html.SafeStyle.concat=function(fe){var e="",ye=function(me){Array.isArray(me)?goog.array.forEach(me,ye):e+=goog.html.SafeStyle.unwrap(me)};return goog.array.forEach(arguments,ye),e?goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(e):goog.html.SafeStyle.EMPTY},goog.html.SafeStyleSheet=function(){this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_="",this.SAFE_STYLE_SHEET_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeStyleSheet.prototype.implementsGoogStringTypedString=!0,goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeStyleSheet.createRule=function(fe,e){if(goog.string.internal.contains(fe,"<"))throw Error("Selector does not allow '<', got: "+fe);var ye=fe.replace(/('|")((?!\1)[^\r\n\f\\]|\\[\s\S])*\1/g,"");if(!/^[-_a-zA-Z0-9#.:* ,>+~[\]()=^$|]+$/.test(ye))throw Error("Selector allows only [-_a-zA-Z0-9#.:* ,>+~[\\]()=^$|] and strings, got: "+fe);if(!goog.html.SafeStyleSheet.hasBalancedBrackets_(ye))throw Error("() and [] in selector must be balanced, got: "+fe);return e instanceof goog.html.SafeStyle||(e=goog.html.SafeStyle.create(e)),fe=fe+"{"+goog.html.SafeStyle.unwrap(e).replace(/</g,"\\3C ")+"}",goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(fe)},goog.html.SafeStyleSheet.hasBalancedBrackets_=function(fe){for(var e={"(":")","[":"]"},ye=[],me=0;me<fe.length;me++){var be=fe[me];if(e[be])ye.push(e[be]);else if(goog.object.contains(e,be)&&ye.pop()!=be)return!1}return ye.length==0},goog.html.SafeStyleSheet.concat=function(fe){var e="",ye=function(me){Array.isArray(me)?goog.array.forEach(me,ye):e+=goog.html.SafeStyleSheet.unwrap(me)};return goog.array.forEach(arguments,ye),goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(e)},goog.html.SafeStyleSheet.fromConstant=function(fe){return fe=goog.string.Const.unwrap(fe),fe.length===0?goog.html.SafeStyleSheet.EMPTY:(goog.asserts.assert(!goog.string.internal.contains(fe,"<"),"Forbidden '<' character in style sheet string: "+fe),goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(fe))},goog.html.SafeStyleSheet.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_},goog.DEBUG&&(goog.html.SafeStyleSheet.prototype.toString=function(){return"SafeStyleSheet{"+this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_+"}"}),goog.html.SafeStyleSheet.unwrap=function(fe){return fe instanceof goog.html.SafeStyleSheet&&fe.constructor===goog.html.SafeStyleSheet&&fe.SAFE_STYLE_SHEET_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?fe.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_:(goog.asserts.fail("expected object of type SafeStyleSheet, got '"+fe+"' of type "+goog.typeOf(fe)),"type_error:SafeStyleSheet")},goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse=function(fe){return new goog.html.SafeStyleSheet().initSecurityPrivateDoNotAccessOrElse_(fe)},goog.html.SafeStyleSheet.prototype.initSecurityPrivateDoNotAccessOrElse_=function(fe){return this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_=fe,this},goog.html.SafeStyleSheet.EMPTY=goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(""),goog.labs={},goog.labs.userAgent={},goog.labs.userAgent.util={},goog.labs.userAgent.util.getNativeUserAgentString_=function(){var fe=goog.labs.userAgent.util.getNavigator_();return fe&&(fe=fe.userAgent)?fe:""},goog.labs.userAgent.util.getNavigator_=function(){return goog.global.navigator},goog.labs.userAgent.util.userAgent_=goog.labs.userAgent.util.getNativeUserAgentString_(),goog.labs.userAgent.util.setUserAgent=function(fe){goog.labs.userAgent.util.userAgent_=fe||goog.labs.userAgent.util.getNativeUserAgentString_()},goog.labs.userAgent.util.getUserAgent=function(){return goog.labs.userAgent.util.userAgent_},goog.labs.userAgent.util.matchUserAgent=function(fe){var e=goog.labs.userAgent.util.getUserAgent();return goog.string.internal.contains(e,fe)},goog.labs.userAgent.util.matchUserAgentIgnoreCase=function(fe){var e=goog.labs.userAgent.util.getUserAgent();return goog.string.internal.caseInsensitiveContains(e,fe)},goog.labs.userAgent.util.extractVersionTuples=function(fe){for(var e=/(\w[\w ]+)\/([^\s]+)\s*(?:\((.*?)\))?/g,ye=[],me;me=e.exec(fe);)ye.push([me[1],me[2],me[3]||void 0]);return ye},goog.labs.userAgent.browser={},goog.labs.userAgent.browser.matchOpera_=function(){return goog.labs.userAgent.util.matchUserAgent("Opera")},goog.labs.userAgent.browser.matchIE_=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")},goog.labs.userAgent.browser.matchEdgeHtml_=function(){return goog.labs.userAgent.util.matchUserAgent("Edge")},goog.labs.userAgent.browser.matchEdgeChromium_=function(){return goog.labs.userAgent.util.matchUserAgent("Edg/")},goog.labs.userAgent.browser.matchOperaChromium_=function(){return goog.labs.userAgent.util.matchUserAgent("OPR")},goog.labs.userAgent.browser.matchFirefox_=function(){return goog.labs.userAgent.util.matchUserAgent("Firefox")||goog.labs.userAgent.util.matchUserAgent("FxiOS")},goog.labs.userAgent.browser.matchSafari_=function(){return goog.labs.userAgent.util.matchUserAgent("Safari")&&!(goog.labs.userAgent.browser.matchChrome_()||goog.labs.userAgent.browser.matchCoast_()||goog.labs.userAgent.browser.matchOpera_()||goog.labs.userAgent.browser.matchEdgeHtml_()||goog.labs.userAgent.browser.matchEdgeChromium_()||goog.labs.userAgent.browser.matchOperaChromium_()||goog.labs.userAgent.browser.matchFirefox_()||goog.labs.userAgent.browser.isSilk()||goog.labs.userAgent.util.matchUserAgent("Android"))},goog.labs.userAgent.browser.matchCoast_=function(){return goog.labs.userAgent.util.matchUserAgent("Coast")},goog.labs.userAgent.browser.matchIosWebview_=function(){return(goog.labs.userAgent.util.matchUserAgent("iPad")||goog.labs.userAgent.util.matchUserAgent("iPhone"))&&!goog.labs.userAgent.browser.matchSafari_()&&!goog.labs.userAgent.browser.matchChrome_()&&!goog.labs.userAgent.browser.matchCoast_()&&!goog.labs.userAgent.browser.matchFirefox_()&&goog.labs.userAgent.util.matchUserAgent("AppleWebKit")},goog.labs.userAgent.browser.matchChrome_=function(){return(goog.labs.userAgent.util.matchUserAgent("Chrome")||goog.labs.userAgent.util.matchUserAgent("CriOS"))&&!goog.labs.userAgent.browser.matchEdgeHtml_()},goog.labs.userAgent.browser.matchAndroidBrowser_=function(){return goog.labs.userAgent.util.matchUserAgent("Android")&&!(goog.labs.userAgent.browser.isChrome()||goog.labs.userAgent.browser.isFirefox()||goog.labs.userAgent.browser.isOpera()||goog.labs.userAgent.browser.isSilk())},goog.labs.userAgent.browser.isOpera=goog.labs.userAgent.browser.matchOpera_,goog.labs.userAgent.browser.isIE=goog.labs.userAgent.browser.matchIE_,goog.labs.userAgent.browser.isEdge=goog.labs.userAgent.browser.matchEdgeHtml_,goog.labs.userAgent.browser.isEdgeChromium=goog.labs.userAgent.browser.matchEdgeChromium_,goog.labs.userAgent.browser.isOperaChromium=goog.labs.userAgent.browser.matchOperaChromium_,goog.labs.userAgent.browser.isFirefox=goog.labs.userAgent.browser.matchFirefox_,goog.labs.userAgent.browser.isSafari=goog.labs.userAgent.browser.matchSafari_,goog.labs.userAgent.browser.isCoast=goog.labs.userAgent.browser.matchCoast_,goog.labs.userAgent.browser.isIosWebview=goog.labs.userAgent.browser.matchIosWebview_,goog.labs.userAgent.browser.isChrome=goog.labs.userAgent.browser.matchChrome_,goog.labs.userAgent.browser.isAndroidBrowser=goog.labs.userAgent.browser.matchAndroidBrowser_,goog.labs.userAgent.browser.isSilk=function(){return goog.labs.userAgent.util.matchUserAgent("Silk")},goog.labs.userAgent.browser.getVersion=function(){function fe(be){return be=goog.array.find(be,me),ye[be]||""}var e=goog.labs.userAgent.util.getUserAgent();if(goog.labs.userAgent.browser.isIE())return goog.labs.userAgent.browser.getIEVersion_(e);e=goog.labs.userAgent.util.extractVersionTuples(e);var ye={};goog.array.forEach(e,function(be){ye[be[0]]=be[1]});var me=goog.partial(goog.object.containsKey,ye);return goog.labs.userAgent.browser.isOpera()?fe(["Version","Opera"]):goog.labs.userAgent.browser.isEdge()?fe(["Edge"]):goog.labs.userAgent.browser.isEdgeChromium()?fe(["Edg"]):goog.labs.userAgent.browser.isChrome()?fe(["Chrome","CriOS","HeadlessChrome"]):(e=e[2])&&e[1]||""},goog.labs.userAgent.browser.isVersionOrHigher=function(fe){return 0<=goog.string.internal.compareVersions(goog.labs.userAgent.browser.getVersion(),fe)},goog.labs.userAgent.browser.getIEVersion_=function(fe){var e=/rv: *([\d\.]*)/.exec(fe);if(e&&e[1])return e[1];e="";var ye=/MSIE +([\d\.]+)/.exec(fe);if(ye&&ye[1])if(fe=/Trident\/(\d.\d)/.exec(fe),ye[1]=="7.0")if(fe&&fe[1])switch(fe[1]){case"4.0":e="8.0";break;case"5.0":e="9.0";break;case"6.0":e="10.0";break;case"7.0":e="11.0"}else e="7.0";else e=ye[1];return e},goog.html.SafeHtml=function(){this.privateDoNotAccessOrElseSafeHtmlWrappedValue_="",this.SAFE_HTML_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_,this.dir_=null},goog.html.SafeHtml.ENABLE_ERROR_MESSAGES=goog.DEBUG,goog.html.SafeHtml.SUPPORT_STYLE_ATTRIBUTE=!0,goog.html.SafeHtml.prototype.implementsGoogI18nBidiDirectionalString=!0,goog.html.SafeHtml.prototype.getDirection=function(){return this.dir_},goog.html.SafeHtml.prototype.implementsGoogStringTypedString=!0,goog.html.SafeHtml.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeHtmlWrappedValue_.toString()},goog.DEBUG&&(goog.html.SafeHtml.prototype.toString=function(){return"SafeHtml{"+this.privateDoNotAccessOrElseSafeHtmlWrappedValue_+"}"}),goog.html.SafeHtml.unwrap=function(fe){return goog.html.SafeHtml.unwrapTrustedHTML(fe).toString()},goog.html.SafeHtml.unwrapTrustedHTML=function(fe){return fe instanceof goog.html.SafeHtml&&fe.constructor===goog.html.SafeHtml&&fe.SAFE_HTML_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?fe.privateDoNotAccessOrElseSafeHtmlWrappedValue_:(goog.asserts.fail("expected object of type SafeHtml, got '"+fe+"' of type "+goog.typeOf(fe)),"type_error:SafeHtml")},goog.html.SafeHtml.htmlEscape=function(fe){if(fe instanceof goog.html.SafeHtml)return fe;var e=typeof fe=="object",ye=null;return e&&fe.implementsGoogI18nBidiDirectionalString&&(ye=fe.getDirection()),fe=e&&fe.implementsGoogStringTypedString?fe.getTypedStringValue():String(fe),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.internal.htmlEscape(fe),ye)},goog.html.SafeHtml.htmlEscapePreservingNewlines=function(fe){return fe instanceof goog.html.SafeHtml?fe:(fe=goog.html.SafeHtml.htmlEscape(fe),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.internal.newLineToBr(goog.html.SafeHtml.unwrap(fe)),fe.getDirection()))},goog.html.SafeHtml.htmlEscapePreservingNewlinesAndSpaces=function(fe){return fe instanceof goog.html.SafeHtml?fe:(fe=goog.html.SafeHtml.htmlEscape(fe),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.internal.whitespaceEscape(goog.html.SafeHtml.unwrap(fe)),fe.getDirection()))},goog.html.SafeHtml.from=goog.html.SafeHtml.htmlEscape,goog.html.SafeHtml.comment=function(fe){return goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("<!--"+goog.string.internal.htmlEscape(fe)+"-->",null)},goog.html.SafeHtml.VALID_NAMES_IN_TAG_=/^[a-zA-Z0-9-]+$/,goog.html.SafeHtml.URL_ATTRIBUTES_={action:!0,cite:!0,data:!0,formaction:!0,href:!0,manifest:!0,poster:!0,src:!0},goog.html.SafeHtml.NOT_ALLOWED_TAG_NAMES_={APPLET:!0,BASE:!0,EMBED:!0,IFRAME:!0,LINK:!0,MATH:!0,META:!0,OBJECT:!0,SCRIPT:!0,STYLE:!0,SVG:!0,TEMPLATE:!0},goog.html.SafeHtml.create=function(fe,e,ye){return goog.html.SafeHtml.verifyTagName(String(fe)),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse(String(fe),e,ye)},goog.html.SafeHtml.verifyTagName=function(fe){if(!goog.html.SafeHtml.VALID_NAMES_IN_TAG_.test(fe))throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?"Invalid tag name <"+fe+">.":"");if(fe.toUpperCase()in goog.html.SafeHtml.NOT_ALLOWED_TAG_NAMES_)throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?"Tag name <"+fe+"> is not allowed for SafeHtml.":"")},goog.html.SafeHtml.createIframe=function(fe,e,ye,me){fe&&goog.html.TrustedResourceUrl.unwrap(fe);var be={};return be.src=fe||null,be.srcdoc=e&&goog.html.SafeHtml.unwrap(e),fe=goog.html.SafeHtml.combineAttributes(be,{sandbox:""},ye),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("iframe",fe,me)},goog.html.SafeHtml.createSandboxIframe=function(fe,e,ye,me){if(!goog.html.SafeHtml.canUseSandboxIframe())throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?"The browser does not support sandboxed iframes.":"");var be={};return be.src=fe?goog.html.SafeUrl.unwrap(goog.html.SafeUrl.sanitize(fe)):null,be.srcdoc=e||null,be.sandbox="",fe=goog.html.SafeHtml.combineAttributes(be,{},ye),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("iframe",fe,me)},goog.html.SafeHtml.canUseSandboxIframe=function(){return goog.global.HTMLIFrameElement&&"sandbox"in goog.global.HTMLIFrameElement.prototype},goog.html.SafeHtml.createScriptSrc=function(fe,e){return goog.html.TrustedResourceUrl.unwrap(fe),fe=goog.html.SafeHtml.combineAttributes({src:fe},{},e),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("script",fe)},goog.html.SafeHtml.createScript=function(fe,e){for(var ye in e){var me=ye.toLowerCase();if(me=="language"||me=="src"||me=="text"||me=="type")throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Cannot set "'+me+'" attribute':"")}for(ye="",fe=goog.array.concat(fe),me=0;me<fe.length;me++)ye+=goog.html.SafeScript.unwrap(fe[me]);return fe=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(ye,goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("script",e,fe)},goog.html.SafeHtml.createStyle=function(fe,e){e=goog.html.SafeHtml.combineAttributes({type:"text/css"},{},e);var ye="";fe=goog.array.concat(fe);for(var me=0;me<fe.length;me++)ye+=goog.html.SafeStyleSheet.unwrap(fe[me]);return fe=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(ye,goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("style",e,fe)},goog.html.SafeHtml.createMetaRefresh=function(fe,e){return fe=goog.html.SafeUrl.unwrap(goog.html.SafeUrl.sanitize(fe)),(goog.labs.userAgent.browser.isIE()||goog.labs.userAgent.browser.isEdge())&&goog.string.internal.contains(fe,";")&&(fe="'"+fe.replace(/'/g,"%27")+"'"),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("meta",{"http-equiv":"refresh",content:(e||0)+"; url="+fe})},goog.html.SafeHtml.getAttrNameAndValue_=function(fe,e,ye){if(ye instanceof goog.string.Const)ye=goog.string.Const.unwrap(ye);else if(e.toLowerCase()=="style")if(goog.html.SafeHtml.SUPPORT_STYLE_ATTRIBUTE)ye=goog.html.SafeHtml.getStyleValue_(ye);else throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Attribute "style" not supported.':"");else{if(/^on/i.test(e))throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Attribute "'+e+'" requires goog.string.Const value, "'+ye+'" given.':"");if(e.toLowerCase()in goog.html.SafeHtml.URL_ATTRIBUTES_)if(ye instanceof goog.html.TrustedResourceUrl)ye=goog.html.TrustedResourceUrl.unwrap(ye);else if(ye instanceof goog.html.SafeUrl)ye=goog.html.SafeUrl.unwrap(ye);else if(typeof ye=="string")ye=goog.html.SafeUrl.sanitize(ye).getTypedStringValue();else throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Attribute "'+e+'" on tag "'+fe+'" requires goog.html.SafeUrl, goog.string.Const, or string, value "'+ye+'" given.':"")}return ye.implementsGoogStringTypedString&&(ye=ye.getTypedStringValue()),goog.asserts.assert(typeof ye=="string"||typeof ye=="number","String or number value expected, got "+typeof ye+" with value: "+ye),e+'="'+goog.string.internal.htmlEscape(String(ye))+'"'},goog.html.SafeHtml.getStyleValue_=function(fe){if(!goog.isObject(fe))throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'The "style" attribute requires goog.html.SafeStyle or map of style properties, '+typeof fe+" given: "+fe:"");return fe instanceof goog.html.SafeStyle||(fe=goog.html.SafeStyle.create(fe)),goog.html.SafeStyle.unwrap(fe)},goog.html.SafeHtml.createWithDir=function(fe,e,ye,me){return e=goog.html.SafeHtml.create(e,ye,me),e.dir_=fe,e},goog.html.SafeHtml.join=function(fe,e){fe=goog.html.SafeHtml.htmlEscape(fe);var ye=fe.getDirection(),me=[],be=function(ve){Array.isArray(ve)?goog.array.forEach(ve,be):(ve=goog.html.SafeHtml.htmlEscape(ve),me.push(goog.html.SafeHtml.unwrap(ve)),ve=ve.getDirection(),ye==goog.i18n.bidi.Dir.NEUTRAL?ye=ve:ve!=goog.i18n.bidi.Dir.NEUTRAL&&ye!=ve&&(ye=null))};return goog.array.forEach(e,be),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(me.join(goog.html.SafeHtml.unwrap(fe)),ye)},goog.html.SafeHtml.concat=function(fe){return goog.html.SafeHtml.join(goog.html.SafeHtml.EMPTY,Array.prototype.slice.call(arguments))},goog.html.SafeHtml.concatWithDir=function(fe,e){var ye=goog.html.SafeHtml.concat(goog.array.slice(arguments,1));return ye.dir_=fe,ye},goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse=function(fe,e){return new goog.html.SafeHtml().initSecurityPrivateDoNotAccessOrElse_(fe,e)},goog.html.SafeHtml.prototype.initSecurityPrivateDoNotAccessOrElse_=function(fe,e){return this.privateDoNotAccessOrElseSafeHtmlWrappedValue_=goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY?goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createHTML(fe):fe,this.dir_=e,this},goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse=function(fe,e,ye){var me=null,be="<"+fe+goog.html.SafeHtml.stringifyAttributes(fe,e);return ye==null?ye=[]:Array.isArray(ye)||(ye=[ye]),goog.dom.tags.isVoidTag(fe.toLowerCase())?(goog.asserts.assert(!ye.length,"Void tag <"+fe+"> does not allow content."),be+=">"):(me=goog.html.SafeHtml.concat(ye),be+=">"+goog.html.SafeHtml.unwrap(me)+"</"+fe+">",me=me.getDirection()),(fe=e&&e.dir)&&(me=/^(ltr|rtl|auto)$/i.test(fe)?goog.i18n.bidi.Dir.NEUTRAL:null),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(be,me)},goog.html.SafeHtml.stringifyAttributes=function(fe,e){var ye="";if(e)for(var me in e){if(!goog.html.SafeHtml.VALID_NAMES_IN_TAG_.test(me))throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Invalid attribute name "'+me+'".':"");var be=e[me];be!=null&&(ye+=" "+goog.html.SafeHtml.getAttrNameAndValue_(fe,me,be))}return ye},goog.html.SafeHtml.combineAttributes=function(fe,e,ye){var me={},be;for(be in fe)goog.asserts.assert(be.toLowerCase()==be,"Must be lower case"),me[be]=fe[be];for(be in e)goog.asserts.assert(be.toLowerCase()==be,"Must be lower case"),me[be]=e[be];if(ye)for(be in ye){var ve=be.toLowerCase();if(ve in fe)throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Cannot override "'+ve+'" attribute, got "'+be+'" with value "'+ye[be]+'"':"");ve in e&&delete me[ve],me[be]=ye[be]}return me},goog.html.SafeHtml.DOCTYPE_HTML=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("<!DOCTYPE html>",goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.EMPTY=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("",goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.BR=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("<br>",goog.i18n.bidi.Dir.NEUTRAL),goog.html.uncheckedconversions={},goog.html.uncheckedconversions.safeHtmlFromStringKnownToSatisfyTypeContract=function(fe,e,ye){return goog.asserts.assertString(goog.string.Const.unwrap(fe),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(fe)),"must provide non-empty justification"),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(e,ye||null)},goog.html.uncheckedconversions.safeScriptFromStringKnownToSatisfyTypeContract=function(fe,e){return goog.asserts.assertString(goog.string.Const.unwrap(fe),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(fe)),"must provide non-empty justification"),goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(e)},goog.html.uncheckedconversions.safeStyleFromStringKnownToSatisfyTypeContract=function(fe,e){return goog.asserts.assertString(goog.string.Const.unwrap(fe),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(fe)),"must provide non-empty justification"),goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(e)},goog.html.uncheckedconversions.safeStyleSheetFromStringKnownToSatisfyTypeContract=function(fe,e){return goog.asserts.assertString(goog.string.Const.unwrap(fe),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(fe)),"must provide non-empty justification"),goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(e)},goog.html.uncheckedconversions.safeUrlFromStringKnownToSatisfyTypeContract=function(fe,e){return goog.asserts.assertString(goog.string.Const.unwrap(fe),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(fe)),"must provide non-empty justification"),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.uncheckedconversions.trustedResourceUrlFromStringKnownToSatisfyTypeContract=function(fe,e){return goog.asserts.assertString(goog.string.Const.unwrap(fe),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(fe)),"must provide non-empty justification"),goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(e)},goog.dom.safe={},goog.dom.safe.InsertAdjacentHtmlPosition={AFTERBEGIN:"afterbegin",AFTEREND:"afterend",BEFOREBEGIN:"beforebegin",BEFOREEND:"beforeend"},goog.dom.safe.insertAdjacentHtml=function(fe,e,ye){fe.insertAdjacentHTML(e,goog.html.SafeHtml.unwrapTrustedHTML(ye))},goog.dom.safe.SET_INNER_HTML_DISALLOWED_TAGS_={MATH:!0,SCRIPT:!0,STYLE:!0,SVG:!0,TEMPLATE:!0},goog.dom.safe.isInnerHtmlCleanupRecursive_=goog.functions.cacheReturnValue(function(){if(goog.DEBUG&&typeof document>"u")return!1;var fe=document.createElement("div"),e=document.createElement("div");return e.appendChild(document.createElement("div")),fe.appendChild(e),goog.DEBUG&&!fe.firstChild?!1:(e=fe.firstChild.firstChild,fe.innerHTML=goog.html.SafeHtml.unwrapTrustedHTML(goog.html.SafeHtml.EMPTY),!e.parentElement)}),goog.dom.safe.unsafeSetInnerHtmlDoNotUseOrElse=function(fe,e){if(goog.dom.safe.isInnerHtmlCleanupRecursive_())for(;fe.lastChild;)fe.removeChild(fe.lastChild);fe.innerHTML=goog.html.SafeHtml.unwrapTrustedHTML(e)},goog.dom.safe.setInnerHtml=function(fe,e){if(goog.asserts.ENABLE_ASSERTS){var ye=fe.tagName.toUpperCase();if(goog.dom.safe.SET_INNER_HTML_DISALLOWED_TAGS_[ye])throw Error("goog.dom.safe.setInnerHtml cannot be used to set content of "+fe.tagName+".")}goog.dom.safe.unsafeSetInnerHtmlDoNotUseOrElse(fe,e)},goog.dom.safe.setOuterHtml=function(fe,e){fe.outerHTML=goog.html.SafeHtml.unwrapTrustedHTML(e)},goog.dom.safe.setFormElementAction=function(fe,e){e=e instanceof goog.html.SafeUrl?e:goog.html.SafeUrl.sanitizeAssertUnchanged(e),goog.dom.asserts.assertIsHTMLFormElement(fe).action=goog.html.SafeUrl.unwrap(e)},goog.dom.safe.setButtonFormAction=function(fe,e){e=e instanceof goog.html.SafeUrl?e:goog.html.SafeUrl.sanitizeAssertUnchanged(e),goog.dom.asserts.assertIsHTMLButtonElement(fe).formAction=goog.html.SafeUrl.unwrap(e)},goog.dom.safe.setInputFormAction=function(fe,e){e=e instanceof goog.html.SafeUrl?e:goog.html.SafeUrl.sanitizeAssertUnchanged(e),goog.dom.asserts.assertIsHTMLInputElement(fe).formAction=goog.html.SafeUrl.unwrap(e)},goog.dom.safe.setStyle=function(fe,e){fe.style.cssText=goog.html.SafeStyle.unwrap(e)},goog.dom.safe.documentWrite=function(fe,e){fe.write(goog.html.SafeHtml.unwrapTrustedHTML(e))},goog.dom.safe.setAnchorHref=function(fe,e){goog.dom.asserts.assertIsHTMLAnchorElement(fe),e=e instanceof goog.html.SafeUrl?e:goog.html.SafeUrl.sanitizeAssertUnchanged(e),fe.href=goog.html.SafeUrl.unwrap(e)},goog.dom.safe.setImageSrc=function(fe,e){if(goog.dom.asserts.assertIsHTMLImageElement(fe),!(e instanceof goog.html.SafeUrl)){var ye=/^data:image\//i.test(e);e=goog.html.SafeUrl.sanitizeAssertUnchanged(e,ye)}fe.src=goog.html.SafeUrl.unwrap(e)},goog.dom.safe.setAudioSrc=function(fe,e){if(goog.dom.asserts.assertIsHTMLAudioElement(fe),!(e instanceof goog.html.SafeUrl)){var ye=/^data:audio\//i.test(e);e=goog.html.SafeUrl.sanitizeAssertUnchanged(e,ye)}fe.src=goog.html.SafeUrl.unwrap(e)},goog.dom.safe.setVideoSrc=function(fe,e){if(goog.dom.asserts.assertIsHTMLVideoElement(fe),!(e instanceof goog.html.SafeUrl)){var ye=/^data:video\//i.test(e);e=goog.html.SafeUrl.sanitizeAssertUnchanged(e,ye)}fe.src=goog.html.SafeUrl.unwrap(e)},goog.dom.safe.setEmbedSrc=function(fe,e){goog.dom.asserts.assertIsHTMLEmbedElement(fe),fe.src=goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(e)},goog.dom.safe.setFrameSrc=function(fe,e){goog.dom.asserts.assertIsHTMLFrameElement(fe),fe.src=goog.html.TrustedResourceUrl.unwrap(e)},goog.dom.safe.setIframeSrc=function(fe,e){goog.dom.asserts.assertIsHTMLIFrameElement(fe),fe.src=goog.html.TrustedResourceUrl.unwrap(e)},goog.dom.safe.setIframeSrcdoc=function(fe,e){goog.dom.asserts.assertIsHTMLIFrameElement(fe),fe.srcdoc=goog.html.SafeHtml.unwrapTrustedHTML(e)},goog.dom.safe.setLinkHrefAndRel=function(fe,e,ye){goog.dom.asserts.assertIsHTMLLinkElement(fe),fe.rel=ye,goog.string.internal.caseInsensitiveContains(ye,"stylesheet")?(goog.asserts.assert(e instanceof goog.html.TrustedResourceUrl,'URL must be TrustedResourceUrl because "rel" contains "stylesheet"'),fe.href=goog.html.TrustedResourceUrl.unwrap(e)):fe.href=e instanceof goog.html.TrustedResourceUrl?goog.html.TrustedResourceUrl.unwrap(e):e instanceof goog.html.SafeUrl?goog.html.SafeUrl.unwrap(e):goog.html.SafeUrl.unwrap(goog.html.SafeUrl.sanitizeAssertUnchanged(e))},goog.dom.safe.setObjectData=function(fe,e){goog.dom.asserts.assertIsHTMLObjectElement(fe),fe.data=goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(e)},goog.dom.safe.setScriptSrc=function(fe,e){goog.dom.asserts.assertIsHTMLScriptElement(fe),fe.src=goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(e),(e=goog.getScriptNonce())&&fe.setAttribute("nonce",e)},goog.dom.safe.setScriptContent=function(fe,e){goog.dom.asserts.assertIsHTMLScriptElement(fe),fe.text=goog.html.SafeScript.unwrapTrustedScript(e),(e=goog.getScriptNonce())&&fe.setAttribute("nonce",e)},goog.dom.safe.setLocationHref=function(fe,e){goog.dom.asserts.assertIsLocation(fe),e=e instanceof goog.html.SafeUrl?e:goog.html.SafeUrl.sanitizeAssertUnchanged(e),fe.href=goog.html.SafeUrl.unwrap(e)},goog.dom.safe.assignLocation=function(fe,e){goog.dom.asserts.assertIsLocation(fe),e=e instanceof goog.html.SafeUrl?e:goog.html.SafeUrl.sanitizeAssertUnchanged(e),fe.assign(goog.html.SafeUrl.unwrap(e))},goog.dom.safe.replaceLocation=function(fe,e){e=e instanceof goog.html.SafeUrl?e:goog.html.SafeUrl.sanitizeAssertUnchanged(e),fe.replace(goog.html.SafeUrl.unwrap(e))},goog.dom.safe.openInWindow=function(fe,e,ye,me,be){return fe=fe instanceof goog.html.SafeUrl?fe:goog.html.SafeUrl.sanitizeAssertUnchanged(fe),e=e||goog.global,ye=ye instanceof goog.string.Const?goog.string.Const.unwrap(ye):ye||"",e.open(goog.html.SafeUrl.unwrap(fe),ye,me,be)},goog.dom.safe.parseFromStringHtml=function(fe,e){return goog.dom.safe.parseFromString(fe,e,"text/html")},goog.dom.safe.parseFromString=function(fe,e,ye){return fe.parseFromString(goog.html.SafeHtml.unwrapTrustedHTML(e),ye)},goog.dom.safe.createImageFromBlob=function(fe){if(!/^image\/.*/g.test(fe.type))throw Error("goog.dom.safe.createImageFromBlob only accepts MIME type image/.*.");var e=goog.global.URL.createObjectURL(fe);return fe=new goog.global.Image,fe.onload=function(){goog.global.URL.revokeObjectURL(e)},goog.dom.safe.setImageSrc(fe,goog.html.uncheckedconversions.safeUrlFromStringKnownToSatisfyTypeContract(goog.string.Const.from("Image blob URL."),e)),fe},goog.string.DETECT_DOUBLE_ESCAPING=!1,goog.string.FORCE_NON_DOM_HTML_UNESCAPING=!1,goog.string.Unicode={NBSP:" "},goog.string.startsWith=goog.string.internal.startsWith,goog.string.endsWith=goog.string.internal.endsWith,goog.string.caseInsensitiveStartsWith=goog.string.internal.caseInsensitiveStartsWith,goog.string.caseInsensitiveEndsWith=goog.string.internal.caseInsensitiveEndsWith,goog.string.caseInsensitiveEquals=goog.string.internal.caseInsensitiveEquals,goog.string.subs=function(fe,e){for(var ye=fe.split("%s"),me="",be=Array.prototype.slice.call(arguments,1);be.length&&1<ye.length;)me+=ye.shift()+be.shift();return me+ye.join("%s")},goog.string.collapseWhitespace=function(fe){return fe.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"")},goog.string.isEmptyOrWhitespace=goog.string.internal.isEmptyOrWhitespace,goog.string.isEmptyString=function(fe){return fe.length==0},goog.string.isEmpty=goog.string.isEmptyOrWhitespace,goog.string.isEmptyOrWhitespaceSafe=function(fe){return goog.string.isEmptyOrWhitespace(goog.string.makeSafe(fe))},goog.string.isEmptySafe=goog.string.isEmptyOrWhitespaceSafe,goog.string.isBreakingWhitespace=function(fe){return!/[^\t\n\r ]/.test(fe)},goog.string.isAlpha=function(fe){return!/[^a-zA-Z]/.test(fe)},goog.string.isNumeric=function(fe){return!/[^0-9]/.test(fe)},goog.string.isAlphaNumeric=function(fe){return!/[^a-zA-Z0-9]/.test(fe)},goog.string.isSpace=function(fe){return fe==" "},goog.string.isUnicodeChar=function(fe){return fe.length==1&&" "<=fe&&"~">=fe||""<=fe&&"�">=fe},goog.string.stripNewlines=function(fe){return fe.replace(/(\r\n|\r|\n)+/g," ")},goog.string.canonicalizeNewlines=function(fe){return fe.replace(/(\r\n|\r|\n)/g,`
`)},goog.string.normalizeWhitespace=function(fe){return fe.replace(/\xa0|\s/g," ")},goog.string.normalizeSpaces=function(fe){return fe.replace(/\xa0|[ \t]+/g," ")},goog.string.collapseBreakingSpaces=function(fe){return fe.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")},goog.string.trim=goog.string.internal.trim,goog.string.trimLeft=function(fe){return fe.replace(/^[\s\xa0]+/,"")},goog.string.trimRight=function(fe){return fe.replace(/[\s\xa0]+$/,"")},goog.string.caseInsensitiveCompare=goog.string.internal.caseInsensitiveCompare,goog.string.numberAwareCompare_=function(fe,e,ye){if(fe==e)return 0;if(!fe)return-1;if(!e)return 1;for(var me=fe.toLowerCase().match(ye),be=e.toLowerCase().match(ye),ve=Math.min(me.length,be.length),Ee=0;Ee<ve;Ee++){ye=me[Ee];var Oe=be[Ee];if(ye!=Oe)return fe=parseInt(ye,10),!isNaN(fe)&&(e=parseInt(Oe,10),!isNaN(e)&&fe-e)?fe-e:ye<Oe?-1:1}return me.length!=be.length?me.length-be.length:fe<e?-1:1},goog.string.intAwareCompare=function(fe,e){return goog.string.numberAwareCompare_(fe,e,/\d+|\D+/g)},goog.string.floatAwareCompare=function(fe,e){return goog.string.numberAwareCompare_(fe,e,/\d+|\.\d+|\D+/g)},goog.string.numerateCompare=goog.string.floatAwareCompare,goog.string.urlEncode=function(fe){return encodeURIComponent(String(fe))},goog.string.urlDecode=function(fe){return decodeURIComponent(fe.replace(/\+/g," "))},goog.string.newLineToBr=goog.string.internal.newLineToBr,goog.string.htmlEscape=function(fe,e){return fe=goog.string.internal.htmlEscape(fe,e),goog.string.DETECT_DOUBLE_ESCAPING&&(fe=fe.replace(goog.string.E_RE_,"&#101;")),fe},goog.string.E_RE_=/e/g,goog.string.unescapeEntities=function(fe){return goog.string.contains(fe,"&")?!goog.string.FORCE_NON_DOM_HTML_UNESCAPING&&"document"in goog.global?goog.string.unescapeEntitiesUsingDom_(fe):goog.string.unescapePureXmlEntities_(fe):fe},goog.string.unescapeEntitiesWithDocument=function(fe,e){return goog.string.contains(fe,"&")?goog.string.unescapeEntitiesUsingDom_(fe,e):fe},goog.string.unescapeEntitiesUsingDom_=function(fe,e){var ye={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'},me=e?e.createElement("div"):goog.global.document.createElement("div");return fe.replace(goog.string.HTML_ENTITY_PATTERN_,function(be,ve){var Ee=ye[be];return Ee||(ve.charAt(0)=="#"&&(ve=+("0"+ve.substr(1)),isNaN(ve)||(Ee=String.fromCharCode(ve))),Ee||(goog.dom.safe.setInnerHtml(me,goog.html.uncheckedconversions.safeHtmlFromStringKnownToSatisfyTypeContract(goog.string.Const.from("Single HTML entity."),be+" ")),Ee=me.firstChild.nodeValue.slice(0,-1)),ye[be]=Ee)})},goog.string.unescapePureXmlEntities_=function(fe){return fe.replace(/&([^;]+);/g,function(e,ye){switch(ye){case"amp":return"&";case"lt":return"<";case"gt":return">";case"quot":return'"';default:return ye.charAt(0)!="#"||(ye=+("0"+ye.substr(1)),isNaN(ye))?e:String.fromCharCode(ye)}})},goog.string.HTML_ENTITY_PATTERN_=/&([^;\s<&]+);?/g,goog.string.whitespaceEscape=function(fe,e){return goog.string.newLineToBr(fe.replace(/  /g," &#160;"),e)},goog.string.preserveSpaces=function(fe){return fe.replace(/(^|[\n ]) /g,"$1"+goog.string.Unicode.NBSP)},goog.string.stripQuotes=function(fe,e){for(var ye=e.length,me=0;me<ye;me++){var be=ye==1?e:e.charAt(me);if(fe.charAt(0)==be&&fe.charAt(fe.length-1)==be)return fe.substring(1,fe.length-1)}return fe},goog.string.truncate=function(fe,e,ye){return ye&&(fe=goog.string.unescapeEntities(fe)),fe.length>e&&(fe=fe.substring(0,e-3)+"..."),ye&&(fe=goog.string.htmlEscape(fe)),fe},goog.string.truncateMiddle=function(fe,e,ye,me){if(ye&&(fe=goog.string.unescapeEntities(fe)),me&&fe.length>e){me>e&&(me=e);var be=fe.length-me;fe=fe.substring(0,e-me)+"..."+fe.substring(be)}else fe.length>e&&(me=Math.floor(e/2),be=fe.length-me,fe=fe.substring(0,me+e%2)+"..."+fe.substring(be));return ye&&(fe=goog.string.htmlEscape(fe)),fe},goog.string.specialEscapeChars_={"\0":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\x0B",'"':'\\"',"\\":"\\\\","<":"\\u003C"},goog.string.jsEscapeCache_={"'":"\\'"},goog.string.quote=function(fe){fe=String(fe);for(var e=['"'],ye=0;ye<fe.length;ye++){var me=fe.charAt(ye),be=me.charCodeAt(0);e[ye+1]=goog.string.specialEscapeChars_[me]||(31<be&&127>be?me:goog.string.escapeChar(me))}return e.push('"'),e.join("")},goog.string.escapeString=function(fe){for(var e=[],ye=0;ye<fe.length;ye++)e[ye]=goog.string.escapeChar(fe.charAt(ye));return e.join("")},goog.string.escapeChar=function(fe){if(fe in goog.string.jsEscapeCache_)return goog.string.jsEscapeCache_[fe];if(fe in goog.string.specialEscapeChars_)return goog.string.jsEscapeCache_[fe]=goog.string.specialEscapeChars_[fe];var e=fe.charCodeAt(0);if(31<e&&127>e)var ye=fe;else 256>e?(ye="\\x",(16>e||256<e)&&(ye+="0")):(ye="\\u",4096>e&&(ye+="0")),ye+=e.toString(16).toUpperCase();return goog.string.jsEscapeCache_[fe]=ye},goog.string.contains=goog.string.internal.contains,goog.string.caseInsensitiveContains=goog.string.internal.caseInsensitiveContains,goog.string.countOf=function(fe,e){return fe&&e?fe.split(e).length-1:0},goog.string.removeAt=function(fe,e,ye){var me=fe;return 0<=e&&e<fe.length&&0<ye&&(me=fe.substr(0,e)+fe.substr(e+ye,fe.length-e-ye)),me},goog.string.remove=function(fe,e){return fe.replace(e,"")},goog.string.removeAll=function(fe,e){return e=new RegExp(goog.string.regExpEscape(e),"g"),fe.replace(e,"")},goog.string.replaceAll=function(fe,e,ye){return e=new RegExp(goog.string.regExpEscape(e),"g"),fe.replace(e,ye.replace(/\$/g,"$$$$"))},goog.string.regExpEscape=function(fe){return String(fe).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},goog.string.repeat=String.prototype.repeat?function(fe,e){return fe.repeat(e)}:function(fe,e){return Array(e+1).join(fe)},goog.string.padNumber=function(fe,e,ye){return fe=ye!==void 0?fe.toFixed(ye):String(fe),ye=fe.indexOf("."),ye==-1&&(ye=fe.length),goog.string.repeat("0",Math.max(0,e-ye))+fe},goog.string.makeSafe=function(fe){return fe==null?"":String(fe)},goog.string.buildString=function(fe){return Array.prototype.join.call(arguments,"")},goog.string.getRandomString=function(){return Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^goog.now()).toString(36)},goog.string.compareVersions=goog.string.internal.compareVersions,goog.string.hashCode=function(fe){for(var e=0,ye=0;ye<fe.length;++ye)e=31*e+fe.charCodeAt(ye)>>>0;return e},goog.string.uniqueStringCounter_=2147483648*Math.random()|0,goog.string.createUniqueString=function(){return"goog_"+goog.string.uniqueStringCounter_++},goog.string.toNumber=function(fe){var e=Number(fe);return e==0&&goog.string.isEmptyOrWhitespace(fe)?NaN:e},goog.string.isLowerCamelCase=function(fe){return/^[a-z]+([A-Z][a-z]*)*$/.test(fe)},goog.string.isUpperCamelCase=function(fe){return/^([A-Z][a-z]*)+$/.test(fe)},goog.string.toCamelCase=function(fe){return String(fe).replace(/\-([a-z])/g,function(e,ye){return ye.toUpperCase()})},goog.string.toSelectorCase=function(fe){return String(fe).replace(/([A-Z])/g,"-$1").toLowerCase()},goog.string.toTitleCase=function(fe,e){return e=typeof e=="string"?goog.string.regExpEscape(e):"\\s",fe.replace(new RegExp("(^"+(e?"|["+e+"]+":"")+")([a-z])","g"),function(ye,me,be){return me+be.toUpperCase()})},goog.string.capitalize=function(fe){return String(fe.charAt(0)).toUpperCase()+String(fe.substr(1)).toLowerCase()},goog.string.parseInt=function(fe){return isFinite(fe)&&(fe=String(fe)),typeof fe=="string"?/^\s*-?0x/i.test(fe)?parseInt(fe,16):parseInt(fe,10):NaN},goog.string.splitLimit=function(fe,e,ye){fe=fe.split(e);for(var me=[];0<ye&&fe.length;)me.push(fe.shift()),ye--;return fe.length&&me.push(fe.join(e)),me},goog.string.lastComponent=function(fe,e){if(e)typeof e=="string"&&(e=[e]);else return fe;for(var ye=-1,me=0;me<e.length;me++)if(e[me]!=""){var be=fe.lastIndexOf(e[me]);be>ye&&(ye=be)}return ye==-1?fe:fe.slice(ye+1)},goog.string.editDistance=function(fe,e){var ye=[],me=[];if(fe==e)return 0;if(!fe.length||!e.length)return Math.max(fe.length,e.length);for(var be=0;be<e.length+1;be++)ye[be]=be;for(be=0;be<fe.length;be++){me[0]=be+1;for(var ve=0;ve<e.length;ve++)me[ve+1]=Math.min(me[ve]+1,ye[ve+1]+1,ye[ve]+ +(fe[be]!=e[ve]));for(ve=0;ve<ye.length;ve++)ye[ve]=me[ve]}return me[e.length]},goog.labs.userAgent.engine={},goog.labs.userAgent.engine.isPresto=function(){return goog.labs.userAgent.util.matchUserAgent("Presto")},goog.labs.userAgent.engine.isTrident=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")},goog.labs.userAgent.engine.isEdge=function(){return goog.labs.userAgent.util.matchUserAgent("Edge")},goog.labs.userAgent.engine.isWebKit=function(){return goog.labs.userAgent.util.matchUserAgentIgnoreCase("WebKit")&&!goog.labs.userAgent.engine.isEdge()},goog.labs.userAgent.engine.isGecko=function(){return goog.labs.userAgent.util.matchUserAgent("Gecko")&&!goog.labs.userAgent.engine.isWebKit()&&!goog.labs.userAgent.engine.isTrident()&&!goog.labs.userAgent.engine.isEdge()},goog.labs.userAgent.engine.getVersion=function(){var fe=goog.labs.userAgent.util.getUserAgent();if(fe){fe=goog.labs.userAgent.util.extractVersionTuples(fe);var e=goog.labs.userAgent.engine.getEngineTuple_(fe);if(e)return e[0]=="Gecko"?goog.labs.userAgent.engine.getVersionForKey_(fe,"Firefox"):e[1];fe=fe[0];var ye;if(fe&&(ye=fe[2])&&(ye=/Trident\/([^\s;]+)/.exec(ye)))return ye[1]}return""},goog.labs.userAgent.engine.getEngineTuple_=function(fe){if(!goog.labs.userAgent.engine.isEdge())return fe[1];for(var e=0;e<fe.length;e++){var ye=fe[e];if(ye[0]=="Edge")return ye}},goog.labs.userAgent.engine.isVersionOrHigher=function(fe){return 0<=goog.string.compareVersions(goog.labs.userAgent.engine.getVersion(),fe)},goog.labs.userAgent.engine.getVersionForKey_=function(fe,e){return(fe=goog.array.find(fe,function(ye){return e==ye[0]}))&&fe[1]||""},goog.labs.userAgent.platform={},goog.labs.userAgent.platform.isAndroid=function(){return goog.labs.userAgent.util.matchUserAgent("Android")},goog.labs.userAgent.platform.isIpod=function(){return goog.labs.userAgent.util.matchUserAgent("iPod")},goog.labs.userAgent.platform.isIphone=function(){return goog.labs.userAgent.util.matchUserAgent("iPhone")&&!goog.labs.userAgent.util.matchUserAgent("iPod")&&!goog.labs.userAgent.util.matchUserAgent("iPad")},goog.labs.userAgent.platform.isIpad=function(){return goog.labs.userAgent.util.matchUserAgent("iPad")},goog.labs.userAgent.platform.isIos=function(){return goog.labs.userAgent.platform.isIphone()||goog.labs.userAgent.platform.isIpad()||goog.labs.userAgent.platform.isIpod()},goog.labs.userAgent.platform.isMacintosh=function(){return goog.labs.userAgent.util.matchUserAgent("Macintosh")},goog.labs.userAgent.platform.isLinux=function(){return goog.labs.userAgent.util.matchUserAgent("Linux")},goog.labs.userAgent.platform.isWindows=function(){return goog.labs.userAgent.util.matchUserAgent("Windows")},goog.labs.userAgent.platform.isChromeOS=function(){return goog.labs.userAgent.util.matchUserAgent("CrOS")},goog.labs.userAgent.platform.isChromecast=function(){return goog.labs.userAgent.util.matchUserAgent("CrKey")},goog.labs.userAgent.platform.isKaiOS=function(){return goog.labs.userAgent.util.matchUserAgentIgnoreCase("KaiOS")},goog.labs.userAgent.platform.getVersion=function(){var fe=goog.labs.userAgent.util.getUserAgent(),e="";return goog.labs.userAgent.platform.isWindows()?(e=/Windows (?:NT|Phone) ([0-9.]+)/,e=(fe=e.exec(fe))?fe[1]:"0.0"):goog.labs.userAgent.platform.isIos()?(e=/(?:iPhone|iPod|iPad|CPU)\s+OS\s+(\S+)/,e=(fe=e.exec(fe))&&fe[1].replace(/_/g,".")):goog.labs.userAgent.platform.isMacintosh()?(e=/Mac OS X ([0-9_.]+)/,e=(fe=e.exec(fe))?fe[1].replace(/_/g,"."):"10"):goog.labs.userAgent.platform.isKaiOS()?(e=/(?:KaiOS)\/(\S+)/i,e=(fe=e.exec(fe))&&fe[1]):goog.labs.userAgent.platform.isAndroid()?(e=/Android\s+([^\);]+)(\)|;)/,e=(fe=e.exec(fe))&&fe[1]):goog.labs.userAgent.platform.isChromeOS()&&(e=/(?:CrOS\s+(?:i686|x86_64)\s+([0-9.]+))/,e=(fe=e.exec(fe))&&fe[1]),e||""},goog.labs.userAgent.platform.isVersionOrHigher=function(fe){return 0<=goog.string.compareVersions(goog.labs.userAgent.platform.getVersion(),fe)},goog.reflect={},goog.reflect.object=function(fe,e){return e},goog.reflect.objectProperty=function(fe,e){return fe},goog.reflect.sinkValue=function(fe){return goog.reflect.sinkValue[" "](fe),fe},goog.reflect.sinkValue[" "]=goog.nullFunction,goog.reflect.canAccessProperty=function(fe,e){try{return goog.reflect.sinkValue(fe[e]),!0}catch{}return!1},goog.reflect.cache=function(fe,e,ye,me){return me=me?me(e):e,Object.prototype.hasOwnProperty.call(fe,me)?fe[me]:fe[me]=ye(e)},goog.userAgent={},goog.userAgent.ASSUME_IE=!1,goog.userAgent.ASSUME_EDGE=!1,goog.userAgent.ASSUME_GECKO=!1,goog.userAgent.ASSUME_WEBKIT=!1,goog.userAgent.ASSUME_MOBILE_WEBKIT=!1,goog.userAgent.ASSUME_OPERA=!1,goog.userAgent.ASSUME_ANY_VERSION=!1,goog.userAgent.BROWSER_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_EDGE||goog.userAgent.ASSUME_GECKO||goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_OPERA,goog.userAgent.getUserAgentString=function(){return goog.labs.userAgent.util.getUserAgent()},goog.userAgent.getNavigatorTyped=function(){return goog.global.navigator||null},goog.userAgent.getNavigator=function(){return goog.userAgent.getNavigatorTyped()},goog.userAgent.OPERA=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_OPERA:goog.labs.userAgent.browser.isOpera(),goog.userAgent.IE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_IE:goog.labs.userAgent.browser.isIE(),goog.userAgent.EDGE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_EDGE:goog.labs.userAgent.engine.isEdge(),goog.userAgent.EDGE_OR_IE=goog.userAgent.EDGE||goog.userAgent.IE,goog.userAgent.GECKO=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_GECKO:goog.labs.userAgent.engine.isGecko(),goog.userAgent.WEBKIT=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_MOBILE_WEBKIT:goog.labs.userAgent.engine.isWebKit(),goog.userAgent.isMobile_=function(){return goog.userAgent.WEBKIT&&goog.labs.userAgent.util.matchUserAgent("Mobile")},goog.userAgent.MOBILE=goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.isMobile_(),goog.userAgent.SAFARI=goog.userAgent.WEBKIT,goog.userAgent.determinePlatform_=function(){var fe=goog.userAgent.getNavigatorTyped();return fe&&fe.platform||""},goog.userAgent.PLATFORM=goog.userAgent.determinePlatform_(),goog.userAgent.ASSUME_MAC=!1,goog.userAgent.ASSUME_WINDOWS=!1,goog.userAgent.ASSUME_LINUX=!1,goog.userAgent.ASSUME_X11=!1,goog.userAgent.ASSUME_ANDROID=!1,goog.userAgent.ASSUME_IPHONE=!1,goog.userAgent.ASSUME_IPAD=!1,goog.userAgent.ASSUME_IPOD=!1,goog.userAgent.ASSUME_KAIOS=!1,goog.userAgent.PLATFORM_KNOWN_=goog.userAgent.ASSUME_MAC||goog.userAgent.ASSUME_WINDOWS||goog.userAgent.ASSUME_LINUX||goog.userAgent.ASSUME_X11||goog.userAgent.ASSUME_ANDROID||goog.userAgent.ASSUME_IPHONE||goog.userAgent.ASSUME_IPAD||goog.userAgent.ASSUME_IPOD,goog.userAgent.MAC=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_MAC:goog.labs.userAgent.platform.isMacintosh(),goog.userAgent.WINDOWS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_WINDOWS:goog.labs.userAgent.platform.isWindows(),goog.userAgent.isLegacyLinux_=function(){return goog.labs.userAgent.platform.isLinux()||goog.labs.userAgent.platform.isChromeOS()},goog.userAgent.LINUX=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_LINUX:goog.userAgent.isLegacyLinux_(),goog.userAgent.isX11_=function(){var fe=goog.userAgent.getNavigatorTyped();return!!fe&&goog.string.contains(fe.appVersion||"","X11")},goog.userAgent.X11=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_X11:goog.userAgent.isX11_(),goog.userAgent.ANDROID=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_ANDROID:goog.labs.userAgent.platform.isAndroid(),goog.userAgent.IPHONE=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPHONE:goog.labs.userAgent.platform.isIphone(),goog.userAgent.IPAD=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPAD:goog.labs.userAgent.platform.isIpad(),goog.userAgent.IPOD=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPOD:goog.labs.userAgent.platform.isIpod(),goog.userAgent.IOS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPHONE||goog.userAgent.ASSUME_IPAD||goog.userAgent.ASSUME_IPOD:goog.labs.userAgent.platform.isIos(),goog.userAgent.KAIOS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_KAIOS:goog.labs.userAgent.platform.isKaiOS(),goog.userAgent.determineVersion_=function(){var fe="",e=goog.userAgent.getVersionRegexResult_();return e&&(fe=e?e[1]:""),goog.userAgent.IE&&(e=goog.userAgent.getDocumentMode_(),e!=null&&e>parseFloat(fe))?String(e):fe},goog.userAgent.getVersionRegexResult_=function(){var fe=goog.userAgent.getUserAgentString();if(goog.userAgent.GECKO)return/rv:([^\);]+)(\)|;)/.exec(fe);if(goog.userAgent.EDGE)return/Edge\/([\d\.]+)/.exec(fe);if(goog.userAgent.IE)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(fe);if(goog.userAgent.WEBKIT)return/WebKit\/(\S+)/.exec(fe);if(goog.userAgent.OPERA)return/(?:Version)[ \/]?(\S+)/.exec(fe)},goog.userAgent.getDocumentMode_=function(){var fe=goog.global.document;return fe?fe.documentMode:void 0},goog.userAgent.VERSION=goog.userAgent.determineVersion_(),goog.userAgent.compare=function(fe,e){return goog.string.compareVersions(fe,e)},goog.userAgent.isVersionOrHigherCache_={},goog.userAgent.isVersionOrHigher=function(fe){return goog.userAgent.ASSUME_ANY_VERSION||goog.reflect.cache(goog.userAgent.isVersionOrHigherCache_,fe,function(){return 0<=goog.string.compareVersions(goog.userAgent.VERSION,fe)})},goog.userAgent.isVersion=goog.userAgent.isVersionOrHigher,goog.userAgent.isDocumentModeOrHigher=function(fe){return Number(goog.userAgent.DOCUMENT_MODE)>=fe},goog.userAgent.isDocumentMode=goog.userAgent.isDocumentModeOrHigher,goog.userAgent.DOCUMENT_MODE=function(){if(goog.global.document&&goog.userAgent.IE){var fe=goog.userAgent.getDocumentMode_();return fe||parseInt(goog.userAgent.VERSION,10)||void 0}}(),goog.userAgent.product={},goog.userAgent.product.ASSUME_FIREFOX=!1,goog.userAgent.product.ASSUME_IPHONE=!1,goog.userAgent.product.ASSUME_IPAD=!1,goog.userAgent.product.ASSUME_ANDROID=!1,goog.userAgent.product.ASSUME_CHROME=!1,goog.userAgent.product.ASSUME_SAFARI=!1,goog.userAgent.product.PRODUCT_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_EDGE||goog.userAgent.ASSUME_OPERA||goog.userAgent.product.ASSUME_FIREFOX||goog.userAgent.product.ASSUME_IPHONE||goog.userAgent.product.ASSUME_IPAD||goog.userAgent.product.ASSUME_ANDROID||goog.userAgent.product.ASSUME_CHROME||goog.userAgent.product.ASSUME_SAFARI,goog.userAgent.product.OPERA=goog.userAgent.OPERA,goog.userAgent.product.IE=goog.userAgent.IE,goog.userAgent.product.EDGE=goog.userAgent.EDGE,goog.userAgent.product.FIREFOX=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_FIREFOX:goog.labs.userAgent.browser.isFirefox(),goog.userAgent.product.isIphoneOrIpod_=function(){return goog.labs.userAgent.platform.isIphone()||goog.labs.userAgent.platform.isIpod()},goog.userAgent.product.IPHONE=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_IPHONE:goog.userAgent.product.isIphoneOrIpod_(),goog.userAgent.product.IPAD=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_IPAD:goog.labs.userAgent.platform.isIpad(),goog.userAgent.product.ANDROID=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_ANDROID:goog.labs.userAgent.browser.isAndroidBrowser(),goog.userAgent.product.CHROME=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_CHROME:goog.labs.userAgent.browser.isChrome(),goog.userAgent.product.isSafariDesktop_=function(){return goog.labs.userAgent.browser.isSafari()&&!goog.labs.userAgent.platform.isIos()},goog.userAgent.product.SAFARI=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_SAFARI:goog.userAgent.product.isSafariDesktop_(),goog.crypt.base64={},goog.crypt.base64.DEFAULT_ALPHABET_COMMON_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",goog.crypt.base64.ENCODED_VALS=goog.crypt.base64.DEFAULT_ALPHABET_COMMON_+"+/=",goog.crypt.base64.ENCODED_VALS_WEBSAFE=goog.crypt.base64.DEFAULT_ALPHABET_COMMON_+"-_.",goog.crypt.base64.Alphabet={DEFAULT:0,NO_PADDING:1,WEBSAFE:2,WEBSAFE_DOT_PADDING:3,WEBSAFE_NO_PADDING:4},goog.crypt.base64.paddingChars_="=.",goog.crypt.base64.isPadding_=function(fe){return goog.string.contains(goog.crypt.base64.paddingChars_,fe)},goog.crypt.base64.byteToCharMaps_={},goog.crypt.base64.charToByteMap_=null,goog.crypt.base64.ASSUME_NATIVE_SUPPORT_=goog.userAgent.GECKO||goog.userAgent.WEBKIT&&!goog.userAgent.product.SAFARI||goog.userAgent.OPERA,goog.crypt.base64.HAS_NATIVE_ENCODE_=goog.crypt.base64.ASSUME_NATIVE_SUPPORT_||typeof goog.global.btoa=="function",goog.crypt.base64.HAS_NATIVE_DECODE_=goog.crypt.base64.ASSUME_NATIVE_SUPPORT_||!goog.userAgent.product.SAFARI&&!goog.userAgent.IE&&typeof goog.global.atob=="function",goog.crypt.base64.encodeByteArray=function(fe,e){goog.asserts.assert(goog.isArrayLike(fe),"encodeByteArray takes an array as a parameter"),e===void 0&&(e=goog.crypt.base64.Alphabet.DEFAULT),goog.crypt.base64.init_(),e=goog.crypt.base64.byteToCharMaps_[e];for(var ye=[],me=0;me<fe.length;me+=3){var be=fe[me],ve=me+1<fe.length,Ee=ve?fe[me+1]:0,Oe=me+2<fe.length,xe=Oe?fe[me+2]:0,gr=be>>2;be=(be&3)<<4|Ee>>4,Ee=(Ee&15)<<2|xe>>6,xe&=63,Oe||(xe=64,ve||(Ee=64)),ye.push(e[gr],e[be],e[Ee]||"",e[xe]||"")}return ye.join("")},goog.crypt.base64.encodeString=function(fe,e){return goog.crypt.base64.HAS_NATIVE_ENCODE_&&!e?goog.global.btoa(fe):goog.crypt.base64.encodeByteArray(goog.crypt.stringToByteArray(fe),e)},goog.crypt.base64.decodeString=function(fe,e){if(goog.crypt.base64.HAS_NATIVE_DECODE_&&!e)return goog.global.atob(fe);var ye="";return goog.crypt.base64.decodeStringInternal_(fe,function(me){ye+=String.fromCharCode(me)}),ye},goog.crypt.base64.decodeStringToByteArray=function(fe,e){var ye=[];return goog.crypt.base64.decodeStringInternal_(fe,function(me){ye.push(me)}),ye},goog.crypt.base64.decodeStringToUint8Array=function(fe){goog.asserts.assert(!goog.userAgent.IE||goog.userAgent.isVersionOrHigher("10"),"Browser does not support typed arrays");var e=fe.length,ye=3*e/4;ye%3?ye=Math.floor(ye):goog.crypt.base64.isPadding_(fe[e-1])&&(ye=goog.crypt.base64.isPadding_(fe[e-2])?ye-2:ye-1);var me=new Uint8Array(ye),be=0;return goog.crypt.base64.decodeStringInternal_(fe,function(ve){me[be++]=ve}),me.subarray(0,be)},goog.crypt.base64.decodeStringInternal_=function(fe,e){function ye(xe){for(;me<fe.length;){var gr=fe.charAt(me++),we=goog.crypt.base64.charToByteMap_[gr];if(we!=null)return we;if(!goog.string.isEmptyOrWhitespace(gr))throw Error("Unknown base64 encoding at char: "+gr)}return xe}goog.crypt.base64.init_();for(var me=0;;){var be=ye(-1),ve=ye(0),Ee=ye(64),Oe=ye(64);if(Oe===64&&be===-1)break;e(be<<2|ve>>4),Ee!=64&&(e(ve<<4&240|Ee>>2),Oe!=64&&e(Ee<<6&192|Oe))}},goog.crypt.base64.init_=function(){if(!goog.crypt.base64.charToByteMap_){goog.crypt.base64.charToByteMap_={};for(var fe=goog.crypt.base64.DEFAULT_ALPHABET_COMMON_.split(""),e=["+/=","+/","-_=","-_.","-_"],ye=0;5>ye;ye++){var me=fe.concat(e[ye].split(""));goog.crypt.base64.byteToCharMaps_[ye]=me;for(var be=0;be<me.length;be++){var ve=me[be],Ee=goog.crypt.base64.charToByteMap_[ve];Ee===void 0?goog.crypt.base64.charToByteMap_[ve]=be:goog.asserts.assert(Ee===be)}}}},jspb.utils={},jspb.utils.split64Low=0,jspb.utils.split64High=0,jspb.utils.splitUint64=function(fe){var e=fe>>>0;fe=Math.floor((fe-e)/jspb.BinaryConstants.TWO_TO_32)>>>0,jspb.utils.split64Low=e,jspb.utils.split64High=fe},jspb.utils.splitInt64=function(fe){var e=0>fe;fe=Math.abs(fe);var ye=fe>>>0;fe=Math.floor((fe-ye)/jspb.BinaryConstants.TWO_TO_32),fe>>>=0,e&&(fe=~fe>>>0,ye=(~ye>>>0)+1,4294967295<ye&&(ye=0,fe++,4294967295<fe&&(fe=0))),jspb.utils.split64Low=ye,jspb.utils.split64High=fe},jspb.utils.splitZigzag64=function(fe){var e=0>fe;fe=2*Math.abs(fe),jspb.utils.splitUint64(fe),fe=jspb.utils.split64Low;var ye=jspb.utils.split64High;e&&(fe==0?ye==0?ye=fe=4294967295:(ye--,fe=4294967295):fe--),jspb.utils.split64Low=fe,jspb.utils.split64High=ye},jspb.utils.splitFloat32=function(fe){var e=0>fe?1:0;if(fe=e?-fe:fe,fe===0)0<1/fe?(jspb.utils.split64High=0,jspb.utils.split64Low=0):(jspb.utils.split64High=0,jspb.utils.split64Low=2147483648);else if(isNaN(fe))jspb.utils.split64High=0,jspb.utils.split64Low=2147483647;else if(fe>jspb.BinaryConstants.FLOAT32_MAX)jspb.utils.split64High=0,jspb.utils.split64Low=(e<<31|2139095040)>>>0;else if(fe<jspb.BinaryConstants.FLOAT32_MIN)fe=Math.round(fe/Math.pow(2,-149)),jspb.utils.split64High=0,jspb.utils.split64Low=(e<<31|fe)>>>0;else{var ye=Math.floor(Math.log(fe)/Math.LN2);fe*=Math.pow(2,-ye),fe=Math.round(fe*jspb.BinaryConstants.TWO_TO_23),16777216<=fe&&++ye,jspb.utils.split64High=0,jspb.utils.split64Low=(e<<31|ye+127<<23|fe&8388607)>>>0}},jspb.utils.splitFloat64=function(fe){var e=0>fe?1:0;if(fe=e?-fe:fe,fe===0)jspb.utils.split64High=0<1/fe?0:2147483648,jspb.utils.split64Low=0;else if(isNaN(fe))jspb.utils.split64High=2147483647,jspb.utils.split64Low=4294967295;else if(fe>jspb.BinaryConstants.FLOAT64_MAX)jspb.utils.split64High=(e<<31|2146435072)>>>0,jspb.utils.split64Low=0;else if(fe<jspb.BinaryConstants.FLOAT64_MIN){var ye=fe/Math.pow(2,-1074);fe=ye/jspb.BinaryConstants.TWO_TO_32,jspb.utils.split64High=(e<<31|fe)>>>0,jspb.utils.split64Low=ye>>>0}else{ye=fe;var me=0;if(2<=ye)for(;2<=ye&&1023>me;)me++,ye/=2;else for(;1>ye&&-1022<me;)ye*=2,me--;ye=fe*Math.pow(2,-me),fe=ye*jspb.BinaryConstants.TWO_TO_20&1048575,ye=ye*jspb.BinaryConstants.TWO_TO_52>>>0,jspb.utils.split64High=(e<<31|me+1023<<20|fe)>>>0,jspb.utils.split64Low=ye}},jspb.utils.splitHash64=function(fe){var e=fe.charCodeAt(0),ye=fe.charCodeAt(1),me=fe.charCodeAt(2),be=fe.charCodeAt(3),ve=fe.charCodeAt(4),Ee=fe.charCodeAt(5),Oe=fe.charCodeAt(6);fe=fe.charCodeAt(7),jspb.utils.split64Low=e+(ye<<8)+(me<<16)+(be<<24)>>>0,jspb.utils.split64High=ve+(Ee<<8)+(Oe<<16)+(fe<<24)>>>0},jspb.utils.joinUint64=function(fe,e){return e*jspb.BinaryConstants.TWO_TO_32+(fe>>>0)},jspb.utils.joinInt64=function(fe,e){var ye=e&2147483648;return ye&&(fe=~fe+1>>>0,e=~e>>>0,fe==0&&(e=e+1>>>0)),fe=jspb.utils.joinUint64(fe,e),ye?-fe:fe},jspb.utils.toZigzag64=function(fe,e,ye){var me=e>>31;return ye(fe<<1^me,(e<<1|fe>>>31)^me)},jspb.utils.joinZigzag64=function(fe,e){return jspb.utils.fromZigzag64(fe,e,jspb.utils.joinInt64)},jspb.utils.fromZigzag64=function(fe,e,ye){var me=-(fe&1);return ye((fe>>>1|e<<31)^me,e>>>1^me)},jspb.utils.joinFloat32=function(fe,e){e=2*(fe>>31)+1;var ye=fe>>>23&255;return fe&=8388607,ye==255?fe?NaN:1/0*e:ye==0?e*Math.pow(2,-149)*fe:e*Math.pow(2,ye-150)*(fe+Math.pow(2,23))},jspb.utils.joinFloat64=function(fe,e){var ye=2*(e>>31)+1,me=e>>>20&2047;return fe=jspb.BinaryConstants.TWO_TO_32*(e&1048575)+fe,me==2047?fe?NaN:1/0*ye:me==0?ye*Math.pow(2,-1074)*fe:ye*Math.pow(2,me-1075)*(fe+jspb.BinaryConstants.TWO_TO_52)},jspb.utils.joinHash64=function(fe,e){return String.fromCharCode(fe>>>0&255,fe>>>8&255,fe>>>16&255,fe>>>24&255,e>>>0&255,e>>>8&255,e>>>16&255,e>>>24&255)},jspb.utils.DIGITS="0123456789abcdef".split(""),jspb.utils.ZERO_CHAR_CODE_=48,jspb.utils.A_CHAR_CODE_=97,jspb.utils.joinUnsignedDecimalString=function(fe,e){function ye(be,ve){return be=be?String(be):"",ve?"0000000".slice(be.length)+be:be}if(2097151>=e)return""+jspb.utils.joinUint64(fe,e);var me=(fe>>>24|e<<8)>>>0&16777215;return e=e>>16&65535,fe=(fe&16777215)+6777216*me+6710656*e,me+=8147497*e,e*=2,1e7<=fe&&(me+=Math.floor(fe/1e7),fe%=1e7),1e7<=me&&(e+=Math.floor(me/1e7),me%=1e7),ye(e,0)+ye(me,e)+ye(fe,1)},jspb.utils.joinSignedDecimalString=function(fe,e){var ye=e&2147483648;return ye&&(fe=~fe+1>>>0,e=~e+(fe==0?1:0)>>>0),fe=jspb.utils.joinUnsignedDecimalString(fe,e),ye?"-"+fe:fe},jspb.utils.hash64ToDecimalString=function(fe,e){jspb.utils.splitHash64(fe),fe=jspb.utils.split64Low;var ye=jspb.utils.split64High;return e?jspb.utils.joinSignedDecimalString(fe,ye):jspb.utils.joinUnsignedDecimalString(fe,ye)},jspb.utils.hash64ArrayToDecimalStrings=function(fe,e){for(var ye=Array(fe.length),me=0;me<fe.length;me++)ye[me]=jspb.utils.hash64ToDecimalString(fe[me],e);return ye},jspb.utils.decimalStringToHash64=function(fe){function e(Ee,Oe){for(var xe=0;8>xe&&(Ee!==1||0<Oe);xe++)Oe=Ee*be[xe]+Oe,be[xe]=Oe&255,Oe>>>=8}function ye(){for(var Ee=0;8>Ee;Ee++)be[Ee]=~be[Ee]&255}jspb.asserts.assert(0<fe.length);var me=!1;fe[0]==="-"&&(me=!0,fe=fe.slice(1));for(var be=[0,0,0,0,0,0,0,0],ve=0;ve<fe.length;ve++)e(10,fe.charCodeAt(ve)-jspb.utils.ZERO_CHAR_CODE_);return me&&(ye(),e(1,1)),goog.crypt.byteArrayToString(be)},jspb.utils.splitDecimalString=function(fe){jspb.utils.splitHash64(jspb.utils.decimalStringToHash64(fe))},jspb.utils.toHexDigit_=function(fe){return String.fromCharCode(10>fe?jspb.utils.ZERO_CHAR_CODE_+fe:jspb.utils.A_CHAR_CODE_-10+fe)},jspb.utils.fromHexCharCode_=function(fe){return fe>=jspb.utils.A_CHAR_CODE_?fe-jspb.utils.A_CHAR_CODE_+10:fe-jspb.utils.ZERO_CHAR_CODE_},jspb.utils.hash64ToHexString=function(fe){var e=Array(18);e[0]="0",e[1]="x";for(var ye=0;8>ye;ye++){var me=fe.charCodeAt(7-ye);e[2*ye+2]=jspb.utils.toHexDigit_(me>>4),e[2*ye+3]=jspb.utils.toHexDigit_(me&15)}return e.join("")},jspb.utils.hexStringToHash64=function(fe){fe=fe.toLowerCase(),jspb.asserts.assert(fe.length==18),jspb.asserts.assert(fe[0]=="0"),jspb.asserts.assert(fe[1]=="x");for(var e="",ye=0;8>ye;ye++){var me=jspb.utils.fromHexCharCode_(fe.charCodeAt(2*ye+2)),be=jspb.utils.fromHexCharCode_(fe.charCodeAt(2*ye+3));e=String.fromCharCode(16*me+be)+e}return e},jspb.utils.hash64ToNumber=function(fe,e){jspb.utils.splitHash64(fe),fe=jspb.utils.split64Low;var ye=jspb.utils.split64High;return e?jspb.utils.joinInt64(fe,ye):jspb.utils.joinUint64(fe,ye)},jspb.utils.numberToHash64=function(fe){return jspb.utils.splitInt64(fe),jspb.utils.joinHash64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.utils.countVarints=function(fe,e,ye){for(var me=0,be=e;be<ye;be++)me+=fe[be]>>7;return ye-e-me},jspb.utils.countVarintFields=function(fe,e,ye,me){var be=0;if(me=8*me+jspb.BinaryConstants.WireType.VARINT,128>me)for(;e<ye&&fe[e++]==me;)for(be++;;){var ve=fe[e++];if(!(ve&128))break}else for(;e<ye;){for(ve=me;128<ve;){if(fe[e]!=(ve&127|128))return be;e++,ve>>=7}if(fe[e++]!=ve)break;for(be++;ve=fe[e++],(ve&128)!=0;);}return be},jspb.utils.countFixedFields_=function(fe,e,ye,me,be){var ve=0;if(128>me)for(;e<ye&&fe[e++]==me;)ve++,e+=be;else for(;e<ye;){for(var Ee=me;128<Ee;){if(fe[e++]!=(Ee&127|128))return ve;Ee>>=7}if(fe[e++]!=Ee)break;ve++,e+=be}return ve},jspb.utils.countFixed32Fields=function(fe,e,ye,me){return jspb.utils.countFixedFields_(fe,e,ye,8*me+jspb.BinaryConstants.WireType.FIXED32,4)},jspb.utils.countFixed64Fields=function(fe,e,ye,me){return jspb.utils.countFixedFields_(fe,e,ye,8*me+jspb.BinaryConstants.WireType.FIXED64,8)},jspb.utils.countDelimitedFields=function(fe,e,ye,me){var be=0;for(me=8*me+jspb.BinaryConstants.WireType.DELIMITED;e<ye;){for(var ve=me;128<ve;){if(fe[e++]!=(ve&127|128))return be;ve>>=7}if(fe[e++]!=ve)break;be++;for(var Ee=0,Oe=1;ve=fe[e++],Ee+=(ve&127)*Oe,Oe*=128,(ve&128)!=0;);e+=Ee}return be},jspb.utils.debugBytesToTextFormat=function(fe){var e='"';if(fe){fe=jspb.utils.byteSourceToUint8Array(fe);for(var ye=0;ye<fe.length;ye++)e+="\\x",16>fe[ye]&&(e+="0"),e+=fe[ye].toString(16)}return e+'"'},jspb.utils.debugScalarToTextFormat=function(fe){return typeof fe=="string"?goog.string.quote(fe):fe.toString()},jspb.utils.stringToByteArray=function(fe){for(var e=new Uint8Array(fe.length),ye=0;ye<fe.length;ye++){var me=fe.charCodeAt(ye);if(255<me)throw Error("Conversion error: string contains codepoint outside of byte range");e[ye]=me}return e},jspb.utils.byteSourceToUint8Array=function(fe){return fe.constructor===Uint8Array?fe:fe.constructor===ArrayBuffer||fe.constructor===Array?new Uint8Array(fe):fe.constructor===String?goog.crypt.base64.decodeStringToUint8Array(fe):fe instanceof Uint8Array?new Uint8Array(fe.buffer,fe.byteOffset,fe.byteLength):(jspb.asserts.fail("Type not convertible to Uint8Array."),new Uint8Array(0))},jspb.BinaryDecoder=function(fe,e,ye){this.bytes_=null,this.cursor_=this.end_=this.start_=0,this.error_=!1,fe&&this.setBlock(fe,e,ye)},jspb.BinaryDecoder.instanceCache_=[],jspb.BinaryDecoder.alloc=function(fe,e,ye){if(jspb.BinaryDecoder.instanceCache_.length){var me=jspb.BinaryDecoder.instanceCache_.pop();return fe&&me.setBlock(fe,e,ye),me}return new jspb.BinaryDecoder(fe,e,ye)},jspb.BinaryDecoder.prototype.free=function(){this.clear(),100>jspb.BinaryDecoder.instanceCache_.length&&jspb.BinaryDecoder.instanceCache_.push(this)},jspb.BinaryDecoder.prototype.clone=function(){return jspb.BinaryDecoder.alloc(this.bytes_,this.start_,this.end_-this.start_)},jspb.BinaryDecoder.prototype.clear=function(){this.bytes_=null,this.cursor_=this.end_=this.start_=0,this.error_=!1},jspb.BinaryDecoder.prototype.getBuffer=function(){return this.bytes_},jspb.BinaryDecoder.prototype.setBlock=function(fe,e,ye){this.bytes_=jspb.utils.byteSourceToUint8Array(fe),this.start_=e!==void 0?e:0,this.end_=ye!==void 0?this.start_+ye:this.bytes_.length,this.cursor_=this.start_},jspb.BinaryDecoder.prototype.getEnd=function(){return this.end_},jspb.BinaryDecoder.prototype.setEnd=function(fe){this.end_=fe},jspb.BinaryDecoder.prototype.reset=function(){this.cursor_=this.start_},jspb.BinaryDecoder.prototype.getCursor=function(){return this.cursor_},jspb.BinaryDecoder.prototype.setCursor=function(fe){this.cursor_=fe},jspb.BinaryDecoder.prototype.advance=function(fe){this.cursor_+=fe,jspb.asserts.assert(this.cursor_<=this.end_)},jspb.BinaryDecoder.prototype.atEnd=function(){return this.cursor_==this.end_},jspb.BinaryDecoder.prototype.pastEnd=function(){return this.cursor_>this.end_},jspb.BinaryDecoder.prototype.getError=function(){return this.error_||0>this.cursor_||this.cursor_>this.end_},jspb.BinaryDecoder.prototype.readSplitVarint64=function(fe){for(var e=128,ye=0,me=0,be=0;4>be&&128<=e;be++)e=this.bytes_[this.cursor_++],ye|=(e&127)<<7*be;if(128<=e&&(e=this.bytes_[this.cursor_++],ye|=(e&127)<<28,me|=(e&127)>>4),128<=e)for(be=0;5>be&&128<=e;be++)e=this.bytes_[this.cursor_++],me|=(e&127)<<7*be+3;if(128>e)return fe(ye>>>0,me>>>0);jspb.asserts.fail("Failed to read varint, encoding is invalid."),this.error_=!0},jspb.BinaryDecoder.prototype.readSplitZigzagVarint64=function(fe){return this.readSplitVarint64(function(e,ye){return jspb.utils.fromZigzag64(e,ye,fe)})},jspb.BinaryDecoder.prototype.readSplitFixed64=function(fe){var e=this.bytes_,ye=this.cursor_;this.cursor_+=8;for(var me=0,be=0,ve=ye+7;ve>=ye;ve--)me=me<<8|e[ve],be=be<<8|e[ve+4];return fe(me,be)},jspb.BinaryDecoder.prototype.skipVarint=function(){for(;this.bytes_[this.cursor_]&128;)this.cursor_++;this.cursor_++},jspb.BinaryDecoder.prototype.unskipVarint=function(fe){for(;128<fe;)this.cursor_--,fe>>>=7;this.cursor_--},jspb.BinaryDecoder.prototype.readUnsignedVarint32=function(){var fe=this.bytes_,e=fe[this.cursor_+0],ye=e&127;return 128>e?(this.cursor_+=1,jspb.asserts.assert(this.cursor_<=this.end_),ye):(e=fe[this.cursor_+1],ye|=(e&127)<<7,128>e?(this.cursor_+=2,jspb.asserts.assert(this.cursor_<=this.end_),ye):(e=fe[this.cursor_+2],ye|=(e&127)<<14,128>e?(this.cursor_+=3,jspb.asserts.assert(this.cursor_<=this.end_),ye):(e=fe[this.cursor_+3],ye|=(e&127)<<21,128>e?(this.cursor_+=4,jspb.asserts.assert(this.cursor_<=this.end_),ye):(e=fe[this.cursor_+4],ye|=(e&15)<<28,128>e?(this.cursor_+=5,jspb.asserts.assert(this.cursor_<=this.end_),ye>>>0):(this.cursor_+=5,128<=fe[this.cursor_++]&&128<=fe[this.cursor_++]&&128<=fe[this.cursor_++]&&128<=fe[this.cursor_++]&&128<=fe[this.cursor_++]&&jspb.asserts.assert(!1),jspb.asserts.assert(this.cursor_<=this.end_),ye)))))},jspb.BinaryDecoder.prototype.readSignedVarint32=function(){return~~this.readUnsignedVarint32()},jspb.BinaryDecoder.prototype.readUnsignedVarint32String=function(){return this.readUnsignedVarint32().toString()},jspb.BinaryDecoder.prototype.readSignedVarint32String=function(){return this.readSignedVarint32().toString()},jspb.BinaryDecoder.prototype.readZigzagVarint32=function(){var fe=this.readUnsignedVarint32();return fe>>>1^-(fe&1)},jspb.BinaryDecoder.prototype.readUnsignedVarint64=function(){return this.readSplitVarint64(jspb.utils.joinUint64)},jspb.BinaryDecoder.prototype.readUnsignedVarint64String=function(){return this.readSplitVarint64(jspb.utils.joinUnsignedDecimalString)},jspb.BinaryDecoder.prototype.readSignedVarint64=function(){return this.readSplitVarint64(jspb.utils.joinInt64)},jspb.BinaryDecoder.prototype.readSignedVarint64String=function(){return this.readSplitVarint64(jspb.utils.joinSignedDecimalString)},jspb.BinaryDecoder.prototype.readZigzagVarint64=function(){return this.readSplitVarint64(jspb.utils.joinZigzag64)},jspb.BinaryDecoder.prototype.readZigzagVarintHash64=function(){return this.readSplitZigzagVarint64(jspb.utils.joinHash64)},jspb.BinaryDecoder.prototype.readZigzagVarint64String=function(){return this.readSplitZigzagVarint64(jspb.utils.joinSignedDecimalString)},jspb.BinaryDecoder.prototype.readUint8=function(){var fe=this.bytes_[this.cursor_+0];return this.cursor_+=1,jspb.asserts.assert(this.cursor_<=this.end_),fe},jspb.BinaryDecoder.prototype.readUint16=function(){var fe=this.bytes_[this.cursor_+0],e=this.bytes_[this.cursor_+1];return this.cursor_+=2,jspb.asserts.assert(this.cursor_<=this.end_),fe<<0|e<<8},jspb.BinaryDecoder.prototype.readUint32=function(){var fe=this.bytes_[this.cursor_+0],e=this.bytes_[this.cursor_+1],ye=this.bytes_[this.cursor_+2],me=this.bytes_[this.cursor_+3];return this.cursor_+=4,jspb.asserts.assert(this.cursor_<=this.end_),(fe<<0|e<<8|ye<<16|me<<24)>>>0},jspb.BinaryDecoder.prototype.readUint64=function(){var fe=this.readUint32(),e=this.readUint32();return jspb.utils.joinUint64(fe,e)},jspb.BinaryDecoder.prototype.readUint64String=function(){var fe=this.readUint32(),e=this.readUint32();return jspb.utils.joinUnsignedDecimalString(fe,e)},jspb.BinaryDecoder.prototype.readInt8=function(){var fe=this.bytes_[this.cursor_+0];return this.cursor_+=1,jspb.asserts.assert(this.cursor_<=this.end_),fe<<24>>24},jspb.BinaryDecoder.prototype.readInt16=function(){var fe=this.bytes_[this.cursor_+0],e=this.bytes_[this.cursor_+1];return this.cursor_+=2,jspb.asserts.assert(this.cursor_<=this.end_),(fe<<0|e<<8)<<16>>16},jspb.BinaryDecoder.prototype.readInt32=function(){var fe=this.bytes_[this.cursor_+0],e=this.bytes_[this.cursor_+1],ye=this.bytes_[this.cursor_+2],me=this.bytes_[this.cursor_+3];return this.cursor_+=4,jspb.asserts.assert(this.cursor_<=this.end_),fe<<0|e<<8|ye<<16|me<<24},jspb.BinaryDecoder.prototype.readInt64=function(){var fe=this.readUint32(),e=this.readUint32();return jspb.utils.joinInt64(fe,e)},jspb.BinaryDecoder.prototype.readInt64String=function(){var fe=this.readUint32(),e=this.readUint32();return jspb.utils.joinSignedDecimalString(fe,e)},jspb.BinaryDecoder.prototype.readFloat=function(){var fe=this.readUint32();return jspb.utils.joinFloat32(fe,0)},jspb.BinaryDecoder.prototype.readDouble=function(){var fe=this.readUint32(),e=this.readUint32();return jspb.utils.joinFloat64(fe,e)},jspb.BinaryDecoder.prototype.readBool=function(){return!!this.bytes_[this.cursor_++]},jspb.BinaryDecoder.prototype.readEnum=function(){return this.readSignedVarint32()},jspb.BinaryDecoder.prototype.readString=function(fe){var e=this.bytes_,ye=this.cursor_;fe=ye+fe;for(var me=[],be="";ye<fe;){var ve=e[ye++];if(128>ve)me.push(ve);else{if(192>ve)continue;if(224>ve){var Ee=e[ye++];me.push((ve&31)<<6|Ee&63)}else if(240>ve){Ee=e[ye++];var Oe=e[ye++];me.push((ve&15)<<12|(Ee&63)<<6|Oe&63)}else if(248>ve){Ee=e[ye++],Oe=e[ye++];var xe=e[ye++];ve=(ve&7)<<18|(Ee&63)<<12|(Oe&63)<<6|xe&63,ve-=65536,me.push((ve>>10&1023)+55296,(ve&1023)+56320)}}8192<=me.length&&(be+=String.fromCharCode.apply(null,me),me.length=0)}return be+=goog.crypt.byteArrayToString(me),this.cursor_=ye,be},jspb.BinaryDecoder.prototype.readStringWithLength=function(){var fe=this.readUnsignedVarint32();return this.readString(fe)},jspb.BinaryDecoder.prototype.readBytes=function(fe){if(0>fe||this.cursor_+fe>this.bytes_.length)return this.error_=!0,jspb.asserts.fail("Invalid byte length!"),new Uint8Array(0);var e=this.bytes_.subarray(this.cursor_,this.cursor_+fe);return this.cursor_+=fe,jspb.asserts.assert(this.cursor_<=this.end_),e},jspb.BinaryDecoder.prototype.readVarintHash64=function(){return this.readSplitVarint64(jspb.utils.joinHash64)},jspb.BinaryDecoder.prototype.readFixedHash64=function(){var fe=this.bytes_,e=this.cursor_,ye=fe[e+0],me=fe[e+1],be=fe[e+2],ve=fe[e+3],Ee=fe[e+4],Oe=fe[e+5],xe=fe[e+6];return fe=fe[e+7],this.cursor_+=8,String.fromCharCode(ye,me,be,ve,Ee,Oe,xe,fe)},jspb.BinaryReader=function(fe,e,ye){this.decoder_=jspb.BinaryDecoder.alloc(fe,e,ye),this.fieldCursor_=this.decoder_.getCursor(),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID,this.error_=!1,this.readCallbacks_=null},jspb.BinaryReader.instanceCache_=[],jspb.BinaryReader.alloc=function(fe,e,ye){if(jspb.BinaryReader.instanceCache_.length){var me=jspb.BinaryReader.instanceCache_.pop();return fe&&me.decoder_.setBlock(fe,e,ye),me}return new jspb.BinaryReader(fe,e,ye)},jspb.BinaryReader.prototype.alloc=jspb.BinaryReader.alloc,jspb.BinaryReader.prototype.free=function(){this.decoder_.clear(),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID,this.error_=!1,this.readCallbacks_=null,100>jspb.BinaryReader.instanceCache_.length&&jspb.BinaryReader.instanceCache_.push(this)},jspb.BinaryReader.prototype.getFieldCursor=function(){return this.fieldCursor_},jspb.BinaryReader.prototype.getCursor=function(){return this.decoder_.getCursor()},jspb.BinaryReader.prototype.getBuffer=function(){return this.decoder_.getBuffer()},jspb.BinaryReader.prototype.getFieldNumber=function(){return this.nextField_},goog.exportProperty(jspb.BinaryReader.prototype,"getFieldNumber",jspb.BinaryReader.prototype.getFieldNumber),jspb.BinaryReader.prototype.getWireType=function(){return this.nextWireType_},jspb.BinaryReader.prototype.isDelimited=function(){return this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED},goog.exportProperty(jspb.BinaryReader.prototype,"isDelimited",jspb.BinaryReader.prototype.isDelimited),jspb.BinaryReader.prototype.isEndGroup=function(){return this.nextWireType_==jspb.BinaryConstants.WireType.END_GROUP},goog.exportProperty(jspb.BinaryReader.prototype,"isEndGroup",jspb.BinaryReader.prototype.isEndGroup),jspb.BinaryReader.prototype.getError=function(){return this.error_||this.decoder_.getError()},jspb.BinaryReader.prototype.setBlock=function(fe,e,ye){this.decoder_.setBlock(fe,e,ye),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID},jspb.BinaryReader.prototype.reset=function(){this.decoder_.reset(),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID},jspb.BinaryReader.prototype.advance=function(fe){this.decoder_.advance(fe)},jspb.BinaryReader.prototype.nextField=function(){if(this.decoder_.atEnd())return!1;if(this.getError())return jspb.asserts.fail("Decoder hit an error"),!1;this.fieldCursor_=this.decoder_.getCursor();var fe=this.decoder_.readUnsignedVarint32(),e=fe>>>3;return fe&=7,fe!=jspb.BinaryConstants.WireType.VARINT&&fe!=jspb.BinaryConstants.WireType.FIXED32&&fe!=jspb.BinaryConstants.WireType.FIXED64&&fe!=jspb.BinaryConstants.WireType.DELIMITED&&fe!=jspb.BinaryConstants.WireType.START_GROUP&&fe!=jspb.BinaryConstants.WireType.END_GROUP?(jspb.asserts.fail("Invalid wire type: %s (at position %s)",fe,this.fieldCursor_),this.error_=!0,!1):(this.nextField_=e,this.nextWireType_=fe,!0)},goog.exportProperty(jspb.BinaryReader.prototype,"nextField",jspb.BinaryReader.prototype.nextField),jspb.BinaryReader.prototype.unskipHeader=function(){this.decoder_.unskipVarint(this.nextField_<<3|this.nextWireType_)},jspb.BinaryReader.prototype.skipMatchingFields=function(){var fe=this.nextField_;for(this.unskipHeader();this.nextField()&&this.getFieldNumber()==fe;)this.skipField();this.decoder_.atEnd()||this.unskipHeader()},jspb.BinaryReader.prototype.skipVarintField=function(){this.nextWireType_!=jspb.BinaryConstants.WireType.VARINT?(jspb.asserts.fail("Invalid wire type for skipVarintField"),this.skipField()):this.decoder_.skipVarint()},jspb.BinaryReader.prototype.skipDelimitedField=function(){if(this.nextWireType_!=jspb.BinaryConstants.WireType.DELIMITED)jspb.asserts.fail("Invalid wire type for skipDelimitedField"),this.skipField();else{var fe=this.decoder_.readUnsignedVarint32();this.decoder_.advance(fe)}},jspb.BinaryReader.prototype.skipFixed32Field=function(){this.nextWireType_!=jspb.BinaryConstants.WireType.FIXED32?(jspb.asserts.fail("Invalid wire type for skipFixed32Field"),this.skipField()):this.decoder_.advance(4)},jspb.BinaryReader.prototype.skipFixed64Field=function(){this.nextWireType_!=jspb.BinaryConstants.WireType.FIXED64?(jspb.asserts.fail("Invalid wire type for skipFixed64Field"),this.skipField()):this.decoder_.advance(8)},jspb.BinaryReader.prototype.skipGroup=function(){var fe=this.nextField_;do{if(!this.nextField()){jspb.asserts.fail("Unmatched start-group tag: stream EOF"),this.error_=!0;break}if(this.nextWireType_==jspb.BinaryConstants.WireType.END_GROUP){this.nextField_!=fe&&(jspb.asserts.fail("Unmatched end-group tag"),this.error_=!0);break}this.skipField()}while(1)},jspb.BinaryReader.prototype.skipField=function(){switch(this.nextWireType_){case jspb.BinaryConstants.WireType.VARINT:this.skipVarintField();break;case jspb.BinaryConstants.WireType.FIXED64:this.skipFixed64Field();break;case jspb.BinaryConstants.WireType.DELIMITED:this.skipDelimitedField();break;case jspb.BinaryConstants.WireType.FIXED32:this.skipFixed32Field();break;case jspb.BinaryConstants.WireType.START_GROUP:this.skipGroup();break;default:jspb.asserts.fail("Invalid wire encoding for field.")}},jspb.BinaryReader.prototype.registerReadCallback=function(fe,e){this.readCallbacks_===null&&(this.readCallbacks_={}),jspb.asserts.assert(!this.readCallbacks_[fe]),this.readCallbacks_[fe]=e},jspb.BinaryReader.prototype.runReadCallback=function(fe){return jspb.asserts.assert(this.readCallbacks_!==null),fe=this.readCallbacks_[fe],jspb.asserts.assert(fe),fe(this)},jspb.BinaryReader.prototype.readAny=function(fe){this.nextWireType_=jspb.BinaryConstants.FieldTypeToWireType(fe);var e=jspb.BinaryConstants.FieldType;switch(fe){case e.DOUBLE:return this.readDouble();case e.FLOAT:return this.readFloat();case e.INT64:return this.readInt64();case e.UINT64:return this.readUint64();case e.INT32:return this.readInt32();case e.FIXED64:return this.readFixed64();case e.FIXED32:return this.readFixed32();case e.BOOL:return this.readBool();case e.STRING:return this.readString();case e.GROUP:jspb.asserts.fail("Group field type not supported in readAny()");case e.MESSAGE:jspb.asserts.fail("Message field type not supported in readAny()");case e.BYTES:return this.readBytes();case e.UINT32:return this.readUint32();case e.ENUM:return this.readEnum();case e.SFIXED32:return this.readSfixed32();case e.SFIXED64:return this.readSfixed64();case e.SINT32:return this.readSint32();case e.SINT64:return this.readSint64();case e.FHASH64:return this.readFixedHash64();case e.VHASH64:return this.readVarintHash64();default:jspb.asserts.fail("Invalid field type in readAny()")}return 0},jspb.BinaryReader.prototype.readMessage=function(fe,e){jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var ye=this.decoder_.getEnd(),me=this.decoder_.readUnsignedVarint32();me=this.decoder_.getCursor()+me,this.decoder_.setEnd(me),e(fe,this),this.decoder_.setCursor(me),this.decoder_.setEnd(ye)},goog.exportProperty(jspb.BinaryReader.prototype,"readMessage",jspb.BinaryReader.prototype.readMessage),jspb.BinaryReader.prototype.readGroup=function(fe,e,ye){jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.START_GROUP),jspb.asserts.assert(this.nextField_==fe),ye(e,this),this.error_||this.nextWireType_==jspb.BinaryConstants.WireType.END_GROUP||(jspb.asserts.fail("Group submessage did not end with an END_GROUP tag"),this.error_=!0)},goog.exportProperty(jspb.BinaryReader.prototype,"readGroup",jspb.BinaryReader.prototype.readGroup),jspb.BinaryReader.prototype.getFieldDecoder=function(){jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var fe=this.decoder_.readUnsignedVarint32(),e=this.decoder_.getCursor(),ye=e+fe;return fe=jspb.BinaryDecoder.alloc(this.decoder_.getBuffer(),e,fe),this.decoder_.setCursor(ye),fe},jspb.BinaryReader.prototype.readInt32=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint32()},goog.exportProperty(jspb.BinaryReader.prototype,"readInt32",jspb.BinaryReader.prototype.readInt32),jspb.BinaryReader.prototype.readInt32String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint32String()},jspb.BinaryReader.prototype.readInt64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint64()},goog.exportProperty(jspb.BinaryReader.prototype,"readInt64",jspb.BinaryReader.prototype.readInt64),jspb.BinaryReader.prototype.readInt64String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint64String()},jspb.BinaryReader.prototype.readUint32=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint32()},goog.exportProperty(jspb.BinaryReader.prototype,"readUint32",jspb.BinaryReader.prototype.readUint32),jspb.BinaryReader.prototype.readUint32String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint32String()},jspb.BinaryReader.prototype.readUint64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint64()},goog.exportProperty(jspb.BinaryReader.prototype,"readUint64",jspb.BinaryReader.prototype.readUint64),jspb.BinaryReader.prototype.readUint64String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint64String()},jspb.BinaryReader.prototype.readSint32=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarint32()},goog.exportProperty(jspb.BinaryReader.prototype,"readSint32",jspb.BinaryReader.prototype.readSint32),jspb.BinaryReader.prototype.readSint64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarint64()},goog.exportProperty(jspb.BinaryReader.prototype,"readSint64",jspb.BinaryReader.prototype.readSint64),jspb.BinaryReader.prototype.readSint64String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarint64String()},jspb.BinaryReader.prototype.readFixed32=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readUint32()},goog.exportProperty(jspb.BinaryReader.prototype,"readFixed32",jspb.BinaryReader.prototype.readFixed32),jspb.BinaryReader.prototype.readFixed64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readUint64()},goog.exportProperty(jspb.BinaryReader.prototype,"readFixed64",jspb.BinaryReader.prototype.readFixed64),jspb.BinaryReader.prototype.readFixed64String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readUint64String()},jspb.BinaryReader.prototype.readSfixed32=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readInt32()},goog.exportProperty(jspb.BinaryReader.prototype,"readSfixed32",jspb.BinaryReader.prototype.readSfixed32),jspb.BinaryReader.prototype.readSfixed32String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readInt32().toString()},jspb.BinaryReader.prototype.readSfixed64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readInt64()},goog.exportProperty(jspb.BinaryReader.prototype,"readSfixed64",jspb.BinaryReader.prototype.readSfixed64),jspb.BinaryReader.prototype.readSfixed64String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readInt64String()},jspb.BinaryReader.prototype.readFloat=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readFloat()},goog.exportProperty(jspb.BinaryReader.prototype,"readFloat",jspb.BinaryReader.prototype.readFloat),jspb.BinaryReader.prototype.readDouble=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readDouble()},goog.exportProperty(jspb.BinaryReader.prototype,"readDouble",jspb.BinaryReader.prototype.readDouble),jspb.BinaryReader.prototype.readBool=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),!!this.decoder_.readUnsignedVarint32()},goog.exportProperty(jspb.BinaryReader.prototype,"readBool",jspb.BinaryReader.prototype.readBool),jspb.BinaryReader.prototype.readEnum=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint64()},goog.exportProperty(jspb.BinaryReader.prototype,"readEnum",jspb.BinaryReader.prototype.readEnum),jspb.BinaryReader.prototype.readString=function(){jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var fe=this.decoder_.readUnsignedVarint32();return this.decoder_.readString(fe)},goog.exportProperty(jspb.BinaryReader.prototype,"readString",jspb.BinaryReader.prototype.readString),jspb.BinaryReader.prototype.readBytes=function(){jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var fe=this.decoder_.readUnsignedVarint32();return this.decoder_.readBytes(fe)},goog.exportProperty(jspb.BinaryReader.prototype,"readBytes",jspb.BinaryReader.prototype.readBytes),jspb.BinaryReader.prototype.readVarintHash64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readVarintHash64()},jspb.BinaryReader.prototype.readSintHash64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarintHash64()},jspb.BinaryReader.prototype.readSplitVarint64=function(fe){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSplitVarint64(fe)},jspb.BinaryReader.prototype.readSplitZigzagVarint64=function(fe){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSplitVarint64(function(e,ye){return jspb.utils.fromZigzag64(e,ye,fe)})},jspb.BinaryReader.prototype.readFixedHash64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readFixedHash64()},jspb.BinaryReader.prototype.readSplitFixed64=function(fe){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readSplitFixed64(fe)},jspb.BinaryReader.prototype.readPackedField_=function(fe){jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var e=this.decoder_.readUnsignedVarint32();e=this.decoder_.getCursor()+e;for(var ye=[];this.decoder_.getCursor()<e;)ye.push(fe.call(this.decoder_));return ye},jspb.BinaryReader.prototype.readPackedInt32=function(){return this.readPackedField_(this.decoder_.readSignedVarint32)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedInt32",jspb.BinaryReader.prototype.readPackedInt32),jspb.BinaryReader.prototype.readPackedInt32String=function(){return this.readPackedField_(this.decoder_.readSignedVarint32String)},jspb.BinaryReader.prototype.readPackedInt64=function(){return this.readPackedField_(this.decoder_.readSignedVarint64)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedInt64",jspb.BinaryReader.prototype.readPackedInt64),jspb.BinaryReader.prototype.readPackedInt64String=function(){return this.readPackedField_(this.decoder_.readSignedVarint64String)},jspb.BinaryReader.prototype.readPackedUint32=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint32)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedUint32",jspb.BinaryReader.prototype.readPackedUint32),jspb.BinaryReader.prototype.readPackedUint32String=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint32String)},jspb.BinaryReader.prototype.readPackedUint64=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint64)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedUint64",jspb.BinaryReader.prototype.readPackedUint64),jspb.BinaryReader.prototype.readPackedUint64String=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint64String)},jspb.BinaryReader.prototype.readPackedSint32=function(){return this.readPackedField_(this.decoder_.readZigzagVarint32)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedSint32",jspb.BinaryReader.prototype.readPackedSint32),jspb.BinaryReader.prototype.readPackedSint64=function(){return this.readPackedField_(this.decoder_.readZigzagVarint64)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedSint64",jspb.BinaryReader.prototype.readPackedSint64),jspb.BinaryReader.prototype.readPackedSint64String=function(){return this.readPackedField_(this.decoder_.readZigzagVarint64String)},jspb.BinaryReader.prototype.readPackedFixed32=function(){return this.readPackedField_(this.decoder_.readUint32)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedFixed32",jspb.BinaryReader.prototype.readPackedFixed32),jspb.BinaryReader.prototype.readPackedFixed64=function(){return this.readPackedField_(this.decoder_.readUint64)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedFixed64",jspb.BinaryReader.prototype.readPackedFixed64),jspb.BinaryReader.prototype.readPackedFixed64String=function(){return this.readPackedField_(this.decoder_.readUint64String)},jspb.BinaryReader.prototype.readPackedSfixed32=function(){return this.readPackedField_(this.decoder_.readInt32)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedSfixed32",jspb.BinaryReader.prototype.readPackedSfixed32),jspb.BinaryReader.prototype.readPackedSfixed64=function(){return this.readPackedField_(this.decoder_.readInt64)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedSfixed64",jspb.BinaryReader.prototype.readPackedSfixed64),jspb.BinaryReader.prototype.readPackedSfixed64String=function(){return this.readPackedField_(this.decoder_.readInt64String)},jspb.BinaryReader.prototype.readPackedFloat=function(){return this.readPackedField_(this.decoder_.readFloat)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedFloat",jspb.BinaryReader.prototype.readPackedFloat),jspb.BinaryReader.prototype.readPackedDouble=function(){return this.readPackedField_(this.decoder_.readDouble)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedDouble",jspb.BinaryReader.prototype.readPackedDouble),jspb.BinaryReader.prototype.readPackedBool=function(){return this.readPackedField_(this.decoder_.readBool)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedBool",jspb.BinaryReader.prototype.readPackedBool),jspb.BinaryReader.prototype.readPackedEnum=function(){return this.readPackedField_(this.decoder_.readEnum)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedEnum",jspb.BinaryReader.prototype.readPackedEnum),jspb.BinaryReader.prototype.readPackedVarintHash64=function(){return this.readPackedField_(this.decoder_.readVarintHash64)},jspb.BinaryReader.prototype.readPackedFixedHash64=function(){return this.readPackedField_(this.decoder_.readFixedHash64)},jspb.BinaryEncoder=function(){this.buffer_=[]},jspb.BinaryEncoder.prototype.length=function(){return this.buffer_.length},jspb.BinaryEncoder.prototype.end=function(){var fe=this.buffer_;return this.buffer_=[],fe},jspb.BinaryEncoder.prototype.writeSplitVarint64=function(fe,e){for(jspb.asserts.assert(fe==Math.floor(fe)),jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(0<=fe&&fe<jspb.BinaryConstants.TWO_TO_32),jspb.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_32);0<e||127<fe;)this.buffer_.push(fe&127|128),fe=(fe>>>7|e<<25)>>>0,e>>>=7;this.buffer_.push(fe)},jspb.BinaryEncoder.prototype.writeSplitFixed64=function(fe,e){jspb.asserts.assert(fe==Math.floor(fe)),jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(0<=fe&&fe<jspb.BinaryConstants.TWO_TO_32),jspb.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_32),this.writeUint32(fe),this.writeUint32(e)},jspb.BinaryEncoder.prototype.writeUnsignedVarint32=function(fe){for(jspb.asserts.assert(fe==Math.floor(fe)),jspb.asserts.assert(0<=fe&&fe<jspb.BinaryConstants.TWO_TO_32);127<fe;)this.buffer_.push(fe&127|128),fe>>>=7;this.buffer_.push(fe)},jspb.BinaryEncoder.prototype.writeSignedVarint32=function(fe){if(jspb.asserts.assert(fe==Math.floor(fe)),jspb.asserts.assert(fe>=-jspb.BinaryConstants.TWO_TO_31&&fe<jspb.BinaryConstants.TWO_TO_31),0<=fe)this.writeUnsignedVarint32(fe);else{for(var e=0;9>e;e++)this.buffer_.push(fe&127|128),fe>>=7;this.buffer_.push(1)}},jspb.BinaryEncoder.prototype.writeUnsignedVarint64=function(fe){jspb.asserts.assert(fe==Math.floor(fe)),jspb.asserts.assert(0<=fe&&fe<jspb.BinaryConstants.TWO_TO_64),jspb.utils.splitInt64(fe),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeSignedVarint64=function(fe){jspb.asserts.assert(fe==Math.floor(fe)),jspb.asserts.assert(fe>=-jspb.BinaryConstants.TWO_TO_63&&fe<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitInt64(fe),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeZigzagVarint32=function(fe){jspb.asserts.assert(fe==Math.floor(fe)),jspb.asserts.assert(fe>=-jspb.BinaryConstants.TWO_TO_31&&fe<jspb.BinaryConstants.TWO_TO_31),this.writeUnsignedVarint32((fe<<1^fe>>31)>>>0)},jspb.BinaryEncoder.prototype.writeZigzagVarint64=function(fe){jspb.asserts.assert(fe==Math.floor(fe)),jspb.asserts.assert(fe>=-jspb.BinaryConstants.TWO_TO_63&&fe<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitZigzag64(fe),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeZigzagVarint64String=function(fe){this.writeZigzagVarintHash64(jspb.utils.decimalStringToHash64(fe))},jspb.BinaryEncoder.prototype.writeZigzagVarintHash64=function(fe){var e=this;jspb.utils.splitHash64(fe),jspb.utils.toZigzag64(jspb.utils.split64Low,jspb.utils.split64High,function(ye,me){e.writeSplitVarint64(ye>>>0,me>>>0)})},jspb.BinaryEncoder.prototype.writeUint8=function(fe){jspb.asserts.assert(fe==Math.floor(fe)),jspb.asserts.assert(0<=fe&&256>fe),this.buffer_.push(fe>>>0&255)},jspb.BinaryEncoder.prototype.writeUint16=function(fe){jspb.asserts.assert(fe==Math.floor(fe)),jspb.asserts.assert(0<=fe&&65536>fe),this.buffer_.push(fe>>>0&255),this.buffer_.push(fe>>>8&255)},jspb.BinaryEncoder.prototype.writeUint32=function(fe){jspb.asserts.assert(fe==Math.floor(fe)),jspb.asserts.assert(0<=fe&&fe<jspb.BinaryConstants.TWO_TO_32),this.buffer_.push(fe>>>0&255),this.buffer_.push(fe>>>8&255),this.buffer_.push(fe>>>16&255),this.buffer_.push(fe>>>24&255)},jspb.BinaryEncoder.prototype.writeUint64=function(fe){jspb.asserts.assert(fe==Math.floor(fe)),jspb.asserts.assert(0<=fe&&fe<jspb.BinaryConstants.TWO_TO_64),jspb.utils.splitUint64(fe),this.writeUint32(jspb.utils.split64Low),this.writeUint32(jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeInt8=function(fe){jspb.asserts.assert(fe==Math.floor(fe)),jspb.asserts.assert(-128<=fe&&128>fe),this.buffer_.push(fe>>>0&255)},jspb.BinaryEncoder.prototype.writeInt16=function(fe){jspb.asserts.assert(fe==Math.floor(fe)),jspb.asserts.assert(-32768<=fe&&32768>fe),this.buffer_.push(fe>>>0&255),this.buffer_.push(fe>>>8&255)},jspb.BinaryEncoder.prototype.writeInt32=function(fe){jspb.asserts.assert(fe==Math.floor(fe)),jspb.asserts.assert(fe>=-jspb.BinaryConstants.TWO_TO_31&&fe<jspb.BinaryConstants.TWO_TO_31),this.buffer_.push(fe>>>0&255),this.buffer_.push(fe>>>8&255),this.buffer_.push(fe>>>16&255),this.buffer_.push(fe>>>24&255)},jspb.BinaryEncoder.prototype.writeInt64=function(fe){jspb.asserts.assert(fe==Math.floor(fe)),jspb.asserts.assert(fe>=-jspb.BinaryConstants.TWO_TO_63&&fe<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitInt64(fe),this.writeSplitFixed64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeInt64String=function(fe){jspb.asserts.assert(fe==Math.floor(fe)),jspb.asserts.assert(+fe>=-jspb.BinaryConstants.TWO_TO_63&&+fe<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitHash64(jspb.utils.decimalStringToHash64(fe)),this.writeSplitFixed64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeFloat=function(fe){jspb.asserts.assert(fe===1/0||fe===-1/0||isNaN(fe)||fe>=-jspb.BinaryConstants.FLOAT32_MAX&&fe<=jspb.BinaryConstants.FLOAT32_MAX),jspb.utils.splitFloat32(fe),this.writeUint32(jspb.utils.split64Low)},jspb.BinaryEncoder.prototype.writeDouble=function(fe){jspb.asserts.assert(fe===1/0||fe===-1/0||isNaN(fe)||fe>=-jspb.BinaryConstants.FLOAT64_MAX&&fe<=jspb.BinaryConstants.FLOAT64_MAX),jspb.utils.splitFloat64(fe),this.writeUint32(jspb.utils.split64Low),this.writeUint32(jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeBool=function(fe){jspb.asserts.assert(typeof fe=="boolean"||typeof fe=="number"),this.buffer_.push(fe?1:0)},jspb.BinaryEncoder.prototype.writeEnum=function(fe){jspb.asserts.assert(fe==Math.floor(fe)),jspb.asserts.assert(fe>=-jspb.BinaryConstants.TWO_TO_31&&fe<jspb.BinaryConstants.TWO_TO_31),this.writeSignedVarint32(fe)},jspb.BinaryEncoder.prototype.writeBytes=function(fe){this.buffer_.push.apply(this.buffer_,fe)},jspb.BinaryEncoder.prototype.writeVarintHash64=function(fe){jspb.utils.splitHash64(fe),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeFixedHash64=function(fe){jspb.utils.splitHash64(fe),this.writeUint32(jspb.utils.split64Low),this.writeUint32(jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeString=function(fe){var e=this.buffer_.length;jspb.asserts.assertString(fe);for(var ye=0;ye<fe.length;ye++){var me=fe.charCodeAt(ye);if(128>me)this.buffer_.push(me);else if(2048>me)this.buffer_.push(me>>6|192),this.buffer_.push(me&63|128);else if(65536>me)if(55296<=me&&56319>=me&&ye+1<fe.length){var be=fe.charCodeAt(ye+1);56320<=be&&57343>=be&&(me=1024*(me-55296)+be-56320+65536,this.buffer_.push(me>>18|240),this.buffer_.push(me>>12&63|128),this.buffer_.push(me>>6&63|128),this.buffer_.push(me&63|128),ye++)}else this.buffer_.push(me>>12|224),this.buffer_.push(me>>6&63|128),this.buffer_.push(me&63|128)}return this.buffer_.length-e},jspb.arith={},jspb.arith.UInt64=function(fe,e){this.lo=fe,this.hi=e},jspb.arith.UInt64.prototype.cmp=function(fe){return this.hi<fe.hi||this.hi==fe.hi&&this.lo<fe.lo?-1:this.hi==fe.hi&&this.lo==fe.lo?0:1},jspb.arith.UInt64.prototype.rightShift=function(){return new jspb.arith.UInt64((this.lo>>>1|(this.hi&1)<<31)>>>0,this.hi>>>1>>>0)},jspb.arith.UInt64.prototype.leftShift=function(){return new jspb.arith.UInt64(this.lo<<1>>>0,(this.hi<<1|this.lo>>>31)>>>0)},jspb.arith.UInt64.prototype.msb=function(){return!!(this.hi&2147483648)},jspb.arith.UInt64.prototype.lsb=function(){return!!(this.lo&1)},jspb.arith.UInt64.prototype.zero=function(){return this.lo==0&&this.hi==0},jspb.arith.UInt64.prototype.add=function(fe){return new jspb.arith.UInt64((this.lo+fe.lo&4294967295)>>>0>>>0,((this.hi+fe.hi&4294967295)>>>0)+(4294967296<=this.lo+fe.lo?1:0)>>>0)},jspb.arith.UInt64.prototype.sub=function(fe){return new jspb.arith.UInt64((this.lo-fe.lo&4294967295)>>>0>>>0,((this.hi-fe.hi&4294967295)>>>0)-(0>this.lo-fe.lo?1:0)>>>0)},jspb.arith.UInt64.mul32x32=function(fe,e){var ye=fe&65535;fe>>>=16;var me=e&65535,be=e>>>16;for(e=ye*me+65536*(ye*be&65535)+65536*(fe*me&65535),ye=fe*be+(ye*be>>>16)+(fe*me>>>16);4294967296<=e;)e-=4294967296,ye+=1;return new jspb.arith.UInt64(e>>>0,ye>>>0)},jspb.arith.UInt64.prototype.mul=function(fe){var e=jspb.arith.UInt64.mul32x32(this.lo,fe);return fe=jspb.arith.UInt64.mul32x32(this.hi,fe),fe.hi=fe.lo,fe.lo=0,e.add(fe)},jspb.arith.UInt64.prototype.div=function(fe){if(fe==0)return[];var e=new jspb.arith.UInt64(0,0),ye=new jspb.arith.UInt64(this.lo,this.hi);fe=new jspb.arith.UInt64(fe,0);for(var me=new jspb.arith.UInt64(1,0);!fe.msb();)fe=fe.leftShift(),me=me.leftShift();for(;!me.zero();)0>=fe.cmp(ye)&&(e=e.add(me),ye=ye.sub(fe)),fe=fe.rightShift(),me=me.rightShift();return[e,ye]},jspb.arith.UInt64.prototype.toString=function(){for(var fe="",e=this;!e.zero();){e=e.div(10);var ye=e[0];fe=e[1].lo+fe,e=ye}return fe==""&&(fe="0"),fe},jspb.arith.UInt64.fromString=function(fe){for(var e=new jspb.arith.UInt64(0,0),ye=new jspb.arith.UInt64(0,0),me=0;me<fe.length;me++){if("0">fe[me]||"9"<fe[me])return null;var be=parseInt(fe[me],10);ye.lo=be,e=e.mul(10).add(ye)}return e},jspb.arith.UInt64.prototype.clone=function(){return new jspb.arith.UInt64(this.lo,this.hi)},jspb.arith.Int64=function(fe,e){this.lo=fe,this.hi=e},jspb.arith.Int64.prototype.add=function(fe){return new jspb.arith.Int64((this.lo+fe.lo&4294967295)>>>0>>>0,((this.hi+fe.hi&4294967295)>>>0)+(4294967296<=this.lo+fe.lo?1:0)>>>0)},jspb.arith.Int64.prototype.sub=function(fe){return new jspb.arith.Int64((this.lo-fe.lo&4294967295)>>>0>>>0,((this.hi-fe.hi&4294967295)>>>0)-(0>this.lo-fe.lo?1:0)>>>0)},jspb.arith.Int64.prototype.clone=function(){return new jspb.arith.Int64(this.lo,this.hi)},jspb.arith.Int64.prototype.toString=function(){var fe=(this.hi&2147483648)!=0,e=new jspb.arith.UInt64(this.lo,this.hi);return fe&&(e=new jspb.arith.UInt64(0,0).sub(e)),(fe?"-":"")+e.toString()},jspb.arith.Int64.fromString=function(fe){var e=0<fe.length&&fe[0]=="-";return e&&(fe=fe.substring(1)),fe=jspb.arith.UInt64.fromString(fe),fe===null?null:(e&&(fe=new jspb.arith.UInt64(0,0).sub(fe)),new jspb.arith.Int64(fe.lo,fe.hi))},jspb.BinaryWriter=function(){this.blocks_=[],this.totalLength_=0,this.encoder_=new jspb.BinaryEncoder,this.bookmarks_=[]},jspb.BinaryWriter.prototype.appendUint8Array_=function(fe){var e=this.encoder_.end();this.blocks_.push(e),this.blocks_.push(fe),this.totalLength_+=e.length+fe.length},jspb.BinaryWriter.prototype.beginDelimited_=function(fe){return this.writeFieldHeader_(fe,jspb.BinaryConstants.WireType.DELIMITED),fe=this.encoder_.end(),this.blocks_.push(fe),this.totalLength_+=fe.length,fe.push(this.totalLength_),fe},jspb.BinaryWriter.prototype.endDelimited_=function(fe){var e=fe.pop();for(e=this.totalLength_+this.encoder_.length()-e,jspb.asserts.assert(0<=e);127<e;)fe.push(e&127|128),e>>>=7,this.totalLength_++;fe.push(e),this.totalLength_++},jspb.BinaryWriter.prototype.writeSerializedMessage=function(fe,e,ye){this.appendUint8Array_(fe.subarray(e,ye))},jspb.BinaryWriter.prototype.maybeWriteSerializedMessage=function(fe,e,ye){fe!=null&&e!=null&&ye!=null&&this.writeSerializedMessage(fe,e,ye)},jspb.BinaryWriter.prototype.reset=function(){this.blocks_=[],this.encoder_.end(),this.totalLength_=0,this.bookmarks_=[]},jspb.BinaryWriter.prototype.getResultBuffer=function(){jspb.asserts.assert(this.bookmarks_.length==0);for(var fe=new Uint8Array(this.totalLength_+this.encoder_.length()),e=this.blocks_,ye=e.length,me=0,be=0;be<ye;be++){var ve=e[be];fe.set(ve,me),me+=ve.length}return e=this.encoder_.end(),fe.set(e,me),me+=e.length,jspb.asserts.assert(me==fe.length),this.blocks_=[fe],fe},goog.exportProperty(jspb.BinaryWriter.prototype,"getResultBuffer",jspb.BinaryWriter.prototype.getResultBuffer),jspb.BinaryWriter.prototype.getResultBase64String=function(fe){return goog.crypt.base64.encodeByteArray(this.getResultBuffer(),fe)},jspb.BinaryWriter.prototype.beginSubMessage=function(fe){this.bookmarks_.push(this.beginDelimited_(fe))},jspb.BinaryWriter.prototype.endSubMessage=function(){jspb.asserts.assert(0<=this.bookmarks_.length),this.endDelimited_(this.bookmarks_.pop())},jspb.BinaryWriter.prototype.writeFieldHeader_=function(fe,e){jspb.asserts.assert(1<=fe&&fe==Math.floor(fe)),this.encoder_.writeUnsignedVarint32(8*fe+e)},jspb.BinaryWriter.prototype.writeAny=function(fe,e,ye){var me=jspb.BinaryConstants.FieldType;switch(fe){case me.DOUBLE:this.writeDouble(e,ye);break;case me.FLOAT:this.writeFloat(e,ye);break;case me.INT64:this.writeInt64(e,ye);break;case me.UINT64:this.writeUint64(e,ye);break;case me.INT32:this.writeInt32(e,ye);break;case me.FIXED64:this.writeFixed64(e,ye);break;case me.FIXED32:this.writeFixed32(e,ye);break;case me.BOOL:this.writeBool(e,ye);break;case me.STRING:this.writeString(e,ye);break;case me.GROUP:jspb.asserts.fail("Group field type not supported in writeAny()");break;case me.MESSAGE:jspb.asserts.fail("Message field type not supported in writeAny()");break;case me.BYTES:this.writeBytes(e,ye);break;case me.UINT32:this.writeUint32(e,ye);break;case me.ENUM:this.writeEnum(e,ye);break;case me.SFIXED32:this.writeSfixed32(e,ye);break;case me.SFIXED64:this.writeSfixed64(e,ye);break;case me.SINT32:this.writeSint32(e,ye);break;case me.SINT64:this.writeSint64(e,ye);break;case me.FHASH64:this.writeFixedHash64(e,ye);break;case me.VHASH64:this.writeVarintHash64(e,ye);break;default:jspb.asserts.fail("Invalid field type in writeAny()")}},jspb.BinaryWriter.prototype.writeUnsignedVarint32_=function(fe,e){e!=null&&(this.writeFieldHeader_(fe,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeUnsignedVarint32(e))},jspb.BinaryWriter.prototype.writeSignedVarint32_=function(fe,e){e!=null&&(this.writeFieldHeader_(fe,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint32(e))},jspb.BinaryWriter.prototype.writeUnsignedVarint64_=function(fe,e){e!=null&&(this.writeFieldHeader_(fe,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeUnsignedVarint64(e))},jspb.BinaryWriter.prototype.writeSignedVarint64_=function(fe,e){e!=null&&(this.writeFieldHeader_(fe,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint64(e))},jspb.BinaryWriter.prototype.writeZigzagVarint32_=function(fe,e){e!=null&&(this.writeFieldHeader_(fe,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarint32(e))},jspb.BinaryWriter.prototype.writeZigzagVarint64_=function(fe,e){e!=null&&(this.writeFieldHeader_(fe,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarint64(e))},jspb.BinaryWriter.prototype.writeZigzagVarint64String_=function(fe,e){e!=null&&(this.writeFieldHeader_(fe,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarint64String(e))},jspb.BinaryWriter.prototype.writeZigzagVarintHash64_=function(fe,e){e!=null&&(this.writeFieldHeader_(fe,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarintHash64(e))},jspb.BinaryWriter.prototype.writeInt32=function(fe,e){e!=null&&(jspb.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_31&&e<jspb.BinaryConstants.TWO_TO_31),this.writeSignedVarint32_(fe,e))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeInt32",jspb.BinaryWriter.prototype.writeInt32),jspb.BinaryWriter.prototype.writeInt32String=function(fe,e){e!=null&&(e=parseInt(e,10),jspb.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_31&&e<jspb.BinaryConstants.TWO_TO_31),this.writeSignedVarint32_(fe,e))},jspb.BinaryWriter.prototype.writeInt64=function(fe,e){e!=null&&(jspb.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_63&&e<jspb.BinaryConstants.TWO_TO_63),this.writeSignedVarint64_(fe,e))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeInt64",jspb.BinaryWriter.prototype.writeInt64),jspb.BinaryWriter.prototype.writeInt64String=function(fe,e){e!=null&&(e=jspb.arith.Int64.fromString(e),this.writeFieldHeader_(fe,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSplitVarint64(e.lo,e.hi))},jspb.BinaryWriter.prototype.writeUint32=function(fe,e){e!=null&&(jspb.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_32),this.writeUnsignedVarint32_(fe,e))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeUint32",jspb.BinaryWriter.prototype.writeUint32),jspb.BinaryWriter.prototype.writeUint32String=function(fe,e){e!=null&&(e=parseInt(e,10),jspb.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_32),this.writeUnsignedVarint32_(fe,e))},jspb.BinaryWriter.prototype.writeUint64=function(fe,e){e!=null&&(jspb.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_64),this.writeUnsignedVarint64_(fe,e))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeUint64",jspb.BinaryWriter.prototype.writeUint64),jspb.BinaryWriter.prototype.writeUint64String=function(fe,e){e!=null&&(e=jspb.arith.UInt64.fromString(e),this.writeFieldHeader_(fe,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSplitVarint64(e.lo,e.hi))},jspb.BinaryWriter.prototype.writeSint32=function(fe,e){e!=null&&(jspb.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_31&&e<jspb.BinaryConstants.TWO_TO_31),this.writeZigzagVarint32_(fe,e))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeSint32",jspb.BinaryWriter.prototype.writeSint32),jspb.BinaryWriter.prototype.writeSint64=function(fe,e){e!=null&&(jspb.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_63&&e<jspb.BinaryConstants.TWO_TO_63),this.writeZigzagVarint64_(fe,e))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeSint64",jspb.BinaryWriter.prototype.writeSint64),jspb.BinaryWriter.prototype.writeSintHash64=function(fe,e){e!=null&&this.writeZigzagVarintHash64_(fe,e)},jspb.BinaryWriter.prototype.writeSint64String=function(fe,e){e!=null&&this.writeZigzagVarint64String_(fe,e)},jspb.BinaryWriter.prototype.writeFixed32=function(fe,e){e!=null&&(jspb.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_32),this.writeFieldHeader_(fe,jspb.BinaryConstants.WireType.FIXED32),this.encoder_.writeUint32(e))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeFixed32",jspb.BinaryWriter.prototype.writeFixed32),jspb.BinaryWriter.prototype.writeFixed64=function(fe,e){e!=null&&(jspb.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_64),this.writeFieldHeader_(fe,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeUint64(e))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeFixed64",jspb.BinaryWriter.prototype.writeFixed64),jspb.BinaryWriter.prototype.writeFixed64String=function(fe,e){e!=null&&(e=jspb.arith.UInt64.fromString(e),this.writeFieldHeader_(fe,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeSplitFixed64(e.lo,e.hi))},jspb.BinaryWriter.prototype.writeSfixed32=function(fe,e){e!=null&&(jspb.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_31&&e<jspb.BinaryConstants.TWO_TO_31),this.writeFieldHeader_(fe,jspb.BinaryConstants.WireType.FIXED32),this.encoder_.writeInt32(e))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeSfixed32",jspb.BinaryWriter.prototype.writeSfixed32),jspb.BinaryWriter.prototype.writeSfixed64=function(fe,e){e!=null&&(jspb.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_63&&e<jspb.BinaryConstants.TWO_TO_63),this.writeFieldHeader_(fe,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeInt64(e))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeSfixed64",jspb.BinaryWriter.prototype.writeSfixed64),jspb.BinaryWriter.prototype.writeSfixed64String=function(fe,e){e!=null&&(e=jspb.arith.Int64.fromString(e),this.writeFieldHeader_(fe,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeSplitFixed64(e.lo,e.hi))},jspb.BinaryWriter.prototype.writeFloat=function(fe,e){e!=null&&(this.writeFieldHeader_(fe,jspb.BinaryConstants.WireType.FIXED32),this.encoder_.writeFloat(e))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeFloat",jspb.BinaryWriter.prototype.writeFloat),jspb.BinaryWriter.prototype.writeDouble=function(fe,e){e!=null&&(this.writeFieldHeader_(fe,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeDouble(e))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeDouble",jspb.BinaryWriter.prototype.writeDouble),jspb.BinaryWriter.prototype.writeBool=function(fe,e){e!=null&&(jspb.asserts.assert(typeof e=="boolean"||typeof e=="number"),this.writeFieldHeader_(fe,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeBool(e))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeBool",jspb.BinaryWriter.prototype.writeBool),jspb.BinaryWriter.prototype.writeEnum=function(fe,e){e!=null&&(jspb.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_31&&e<jspb.BinaryConstants.TWO_TO_31),this.writeFieldHeader_(fe,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint32(e))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeEnum",jspb.BinaryWriter.prototype.writeEnum),jspb.BinaryWriter.prototype.writeString=function(fe,e){e!=null&&(fe=this.beginDelimited_(fe),this.encoder_.writeString(e),this.endDelimited_(fe))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeString",jspb.BinaryWriter.prototype.writeString),jspb.BinaryWriter.prototype.writeBytes=function(fe,e){e!=null&&(e=jspb.utils.byteSourceToUint8Array(e),this.writeFieldHeader_(fe,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(e.length),this.appendUint8Array_(e))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeBytes",jspb.BinaryWriter.prototype.writeBytes),jspb.BinaryWriter.prototype.writeMessage=function(fe,e,ye){e!=null&&(fe=this.beginDelimited_(fe),ye(e,this),this.endDelimited_(fe))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeMessage",jspb.BinaryWriter.prototype.writeMessage),jspb.BinaryWriter.prototype.writeMessageSet=function(fe,e,ye){e!=null&&(this.writeFieldHeader_(1,jspb.BinaryConstants.WireType.START_GROUP),this.writeFieldHeader_(2,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint32(fe),fe=this.beginDelimited_(3),ye(e,this),this.endDelimited_(fe),this.writeFieldHeader_(1,jspb.BinaryConstants.WireType.END_GROUP))},jspb.BinaryWriter.prototype.writeGroup=function(fe,e,ye){e!=null&&(this.writeFieldHeader_(fe,jspb.BinaryConstants.WireType.START_GROUP),ye(e,this),this.writeFieldHeader_(fe,jspb.BinaryConstants.WireType.END_GROUP))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeGroup",jspb.BinaryWriter.prototype.writeGroup),jspb.BinaryWriter.prototype.writeFixedHash64=function(fe,e){e!=null&&(jspb.asserts.assert(e.length==8),this.writeFieldHeader_(fe,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeFixedHash64(e))},jspb.BinaryWriter.prototype.writeVarintHash64=function(fe,e){e!=null&&(jspb.asserts.assert(e.length==8),this.writeFieldHeader_(fe,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeVarintHash64(e))},jspb.BinaryWriter.prototype.writeSplitFixed64=function(fe,e,ye){this.writeFieldHeader_(fe,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeSplitFixed64(e,ye)},jspb.BinaryWriter.prototype.writeSplitVarint64=function(fe,e,ye){this.writeFieldHeader_(fe,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSplitVarint64(e,ye)},jspb.BinaryWriter.prototype.writeSplitZigzagVarint64=function(fe,e,ye){this.writeFieldHeader_(fe,jspb.BinaryConstants.WireType.VARINT);var me=this.encoder_;jspb.utils.toZigzag64(e,ye,function(be,ve){me.writeSplitVarint64(be>>>0,ve>>>0)})},jspb.BinaryWriter.prototype.writeRepeatedInt32=function(fe,e){if(e!=null)for(var ye=0;ye<e.length;ye++)this.writeSignedVarint32_(fe,e[ye])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedInt32",jspb.BinaryWriter.prototype.writeRepeatedInt32),jspb.BinaryWriter.prototype.writeRepeatedInt32String=function(fe,e){if(e!=null)for(var ye=0;ye<e.length;ye++)this.writeInt32String(fe,e[ye])},jspb.BinaryWriter.prototype.writeRepeatedInt64=function(fe,e){if(e!=null)for(var ye=0;ye<e.length;ye++)this.writeSignedVarint64_(fe,e[ye])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedInt64",jspb.BinaryWriter.prototype.writeRepeatedInt64),jspb.BinaryWriter.prototype.writeRepeatedSplitFixed64=function(fe,e,ye,me){if(e!=null)for(var be=0;be<e.length;be++)this.writeSplitFixed64(fe,ye(e[be]),me(e[be]))},jspb.BinaryWriter.prototype.writeRepeatedSplitVarint64=function(fe,e,ye,me){if(e!=null)for(var be=0;be<e.length;be++)this.writeSplitVarint64(fe,ye(e[be]),me(e[be]))},jspb.BinaryWriter.prototype.writeRepeatedSplitZigzagVarint64=function(fe,e,ye,me){if(e!=null)for(var be=0;be<e.length;be++)this.writeSplitZigzagVarint64(fe,ye(e[be]),me(e[be]))},jspb.BinaryWriter.prototype.writeRepeatedInt64String=function(fe,e){if(e!=null)for(var ye=0;ye<e.length;ye++)this.writeInt64String(fe,e[ye])},jspb.BinaryWriter.prototype.writeRepeatedUint32=function(fe,e){if(e!=null)for(var ye=0;ye<e.length;ye++)this.writeUnsignedVarint32_(fe,e[ye])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedUint32",jspb.BinaryWriter.prototype.writeRepeatedUint32),jspb.BinaryWriter.prototype.writeRepeatedUint32String=function(fe,e){if(e!=null)for(var ye=0;ye<e.length;ye++)this.writeUint32String(fe,e[ye])},jspb.BinaryWriter.prototype.writeRepeatedUint64=function(fe,e){if(e!=null)for(var ye=0;ye<e.length;ye++)this.writeUnsignedVarint64_(fe,e[ye])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedUint64",jspb.BinaryWriter.prototype.writeRepeatedUint64),jspb.BinaryWriter.prototype.writeRepeatedUint64String=function(fe,e){if(e!=null)for(var ye=0;ye<e.length;ye++)this.writeUint64String(fe,e[ye])},jspb.BinaryWriter.prototype.writeRepeatedSint32=function(fe,e){if(e!=null)for(var ye=0;ye<e.length;ye++)this.writeZigzagVarint32_(fe,e[ye])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedSint32",jspb.BinaryWriter.prototype.writeRepeatedSint32),jspb.BinaryWriter.prototype.writeRepeatedSint64=function(fe,e){if(e!=null)for(var ye=0;ye<e.length;ye++)this.writeZigzagVarint64_(fe,e[ye])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedSint64",jspb.BinaryWriter.prototype.writeRepeatedSint64),jspb.BinaryWriter.prototype.writeRepeatedSint64String=function(fe,e){if(e!=null)for(var ye=0;ye<e.length;ye++)this.writeZigzagVarint64String_(fe,e[ye])},jspb.BinaryWriter.prototype.writeRepeatedSintHash64=function(fe,e){if(e!=null)for(var ye=0;ye<e.length;ye++)this.writeZigzagVarintHash64_(fe,e[ye])},jspb.BinaryWriter.prototype.writeRepeatedFixed32=function(fe,e){if(e!=null)for(var ye=0;ye<e.length;ye++)this.writeFixed32(fe,e[ye])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedFixed32",jspb.BinaryWriter.prototype.writeRepeatedFixed32),jspb.BinaryWriter.prototype.writeRepeatedFixed64=function(fe,e){if(e!=null)for(var ye=0;ye<e.length;ye++)this.writeFixed64(fe,e[ye])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedFixed64",jspb.BinaryWriter.prototype.writeRepeatedFixed64),jspb.BinaryWriter.prototype.writeRepeatedFixed64String=function(fe,e){if(e!=null)for(var ye=0;ye<e.length;ye++)this.writeFixed64String(fe,e[ye])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedFixed64String",jspb.BinaryWriter.prototype.writeRepeatedFixed64String),jspb.BinaryWriter.prototype.writeRepeatedSfixed32=function(fe,e){if(e!=null)for(var ye=0;ye<e.length;ye++)this.writeSfixed32(fe,e[ye])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedSfixed32",jspb.BinaryWriter.prototype.writeRepeatedSfixed32),jspb.BinaryWriter.prototype.writeRepeatedSfixed64=function(fe,e){if(e!=null)for(var ye=0;ye<e.length;ye++)this.writeSfixed64(fe,e[ye])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedSfixed64",jspb.BinaryWriter.prototype.writeRepeatedSfixed64),jspb.BinaryWriter.prototype.writeRepeatedSfixed64String=function(fe,e){if(e!=null)for(var ye=0;ye<e.length;ye++)this.writeSfixed64String(fe,e[ye])},jspb.BinaryWriter.prototype.writeRepeatedFloat=function(fe,e){if(e!=null)for(var ye=0;ye<e.length;ye++)this.writeFloat(fe,e[ye])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedFloat",jspb.BinaryWriter.prototype.writeRepeatedFloat),jspb.BinaryWriter.prototype.writeRepeatedDouble=function(fe,e){if(e!=null)for(var ye=0;ye<e.length;ye++)this.writeDouble(fe,e[ye])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedDouble",jspb.BinaryWriter.prototype.writeRepeatedDouble),jspb.BinaryWriter.prototype.writeRepeatedBool=function(fe,e){if(e!=null)for(var ye=0;ye<e.length;ye++)this.writeBool(fe,e[ye])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedBool",jspb.BinaryWriter.prototype.writeRepeatedBool),jspb.BinaryWriter.prototype.writeRepeatedEnum=function(fe,e){if(e!=null)for(var ye=0;ye<e.length;ye++)this.writeEnum(fe,e[ye])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedEnum",jspb.BinaryWriter.prototype.writeRepeatedEnum),jspb.BinaryWriter.prototype.writeRepeatedString=function(fe,e){if(e!=null)for(var ye=0;ye<e.length;ye++)this.writeString(fe,e[ye])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedString",jspb.BinaryWriter.prototype.writeRepeatedString),jspb.BinaryWriter.prototype.writeRepeatedBytes=function(fe,e){if(e!=null)for(var ye=0;ye<e.length;ye++)this.writeBytes(fe,e[ye])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedBytes",jspb.BinaryWriter.prototype.writeRepeatedBytes),jspb.BinaryWriter.prototype.writeRepeatedMessage=function(fe,e,ye){if(e!=null)for(var me=0;me<e.length;me++){var be=this.beginDelimited_(fe);ye(e[me],this),this.endDelimited_(be)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedMessage",jspb.BinaryWriter.prototype.writeRepeatedMessage),jspb.BinaryWriter.prototype.writeRepeatedGroup=function(fe,e,ye){if(e!=null)for(var me=0;me<e.length;me++)this.writeFieldHeader_(fe,jspb.BinaryConstants.WireType.START_GROUP),ye(e[me],this),this.writeFieldHeader_(fe,jspb.BinaryConstants.WireType.END_GROUP)},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedGroup",jspb.BinaryWriter.prototype.writeRepeatedGroup),jspb.BinaryWriter.prototype.writeRepeatedFixedHash64=function(fe,e){if(e!=null)for(var ye=0;ye<e.length;ye++)this.writeFixedHash64(fe,e[ye])},jspb.BinaryWriter.prototype.writeRepeatedVarintHash64=function(fe,e){if(e!=null)for(var ye=0;ye<e.length;ye++)this.writeVarintHash64(fe,e[ye])},jspb.BinaryWriter.prototype.writePackedInt32=function(fe,e){if(e!=null&&e.length){fe=this.beginDelimited_(fe);for(var ye=0;ye<e.length;ye++)this.encoder_.writeSignedVarint32(e[ye]);this.endDelimited_(fe)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedInt32",jspb.BinaryWriter.prototype.writePackedInt32),jspb.BinaryWriter.prototype.writePackedInt32String=function(fe,e){if(e!=null&&e.length){fe=this.beginDelimited_(fe);for(var ye=0;ye<e.length;ye++)this.encoder_.writeSignedVarint32(parseInt(e[ye],10));this.endDelimited_(fe)}},jspb.BinaryWriter.prototype.writePackedInt64=function(fe,e){if(e!=null&&e.length){fe=this.beginDelimited_(fe);for(var ye=0;ye<e.length;ye++)this.encoder_.writeSignedVarint64(e[ye]);this.endDelimited_(fe)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedInt64",jspb.BinaryWriter.prototype.writePackedInt64),jspb.BinaryWriter.prototype.writePackedSplitFixed64=function(fe,e,ye,me){if(e!=null){fe=this.beginDelimited_(fe);for(var be=0;be<e.length;be++)this.encoder_.writeSplitFixed64(ye(e[be]),me(e[be]));this.endDelimited_(fe)}},jspb.BinaryWriter.prototype.writePackedSplitVarint64=function(fe,e,ye,me){if(e!=null){fe=this.beginDelimited_(fe);for(var be=0;be<e.length;be++)this.encoder_.writeSplitVarint64(ye(e[be]),me(e[be]));this.endDelimited_(fe)}},jspb.BinaryWriter.prototype.writePackedSplitZigzagVarint64=function(fe,e,ye,me){if(e!=null){fe=this.beginDelimited_(fe);for(var be=this.encoder_,ve=0;ve<e.length;ve++)jspb.utils.toZigzag64(ye(e[ve]),me(e[ve]),function(Ee,Oe){be.writeSplitVarint64(Ee>>>0,Oe>>>0)});this.endDelimited_(fe)}},jspb.BinaryWriter.prototype.writePackedInt64String=function(fe,e){if(e!=null&&e.length){fe=this.beginDelimited_(fe);for(var ye=0;ye<e.length;ye++){var me=jspb.arith.Int64.fromString(e[ye]);this.encoder_.writeSplitVarint64(me.lo,me.hi)}this.endDelimited_(fe)}},jspb.BinaryWriter.prototype.writePackedUint32=function(fe,e){if(e!=null&&e.length){fe=this.beginDelimited_(fe);for(var ye=0;ye<e.length;ye++)this.encoder_.writeUnsignedVarint32(e[ye]);this.endDelimited_(fe)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedUint32",jspb.BinaryWriter.prototype.writePackedUint32),jspb.BinaryWriter.prototype.writePackedUint32String=function(fe,e){if(e!=null&&e.length){fe=this.beginDelimited_(fe);for(var ye=0;ye<e.length;ye++)this.encoder_.writeUnsignedVarint32(parseInt(e[ye],10));this.endDelimited_(fe)}},jspb.BinaryWriter.prototype.writePackedUint64=function(fe,e){if(e!=null&&e.length){fe=this.beginDelimited_(fe);for(var ye=0;ye<e.length;ye++)this.encoder_.writeUnsignedVarint64(e[ye]);this.endDelimited_(fe)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedUint64",jspb.BinaryWriter.prototype.writePackedUint64),jspb.BinaryWriter.prototype.writePackedUint64String=function(fe,e){if(e!=null&&e.length){fe=this.beginDelimited_(fe);for(var ye=0;ye<e.length;ye++){var me=jspb.arith.UInt64.fromString(e[ye]);this.encoder_.writeSplitVarint64(me.lo,me.hi)}this.endDelimited_(fe)}},jspb.BinaryWriter.prototype.writePackedSint32=function(fe,e){if(e!=null&&e.length){fe=this.beginDelimited_(fe);for(var ye=0;ye<e.length;ye++)this.encoder_.writeZigzagVarint32(e[ye]);this.endDelimited_(fe)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedSint32",jspb.BinaryWriter.prototype.writePackedSint32),jspb.BinaryWriter.prototype.writePackedSint64=function(fe,e){if(e!=null&&e.length){fe=this.beginDelimited_(fe);for(var ye=0;ye<e.length;ye++)this.encoder_.writeZigzagVarint64(e[ye]);this.endDelimited_(fe)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedSint64",jspb.BinaryWriter.prototype.writePackedSint64),jspb.BinaryWriter.prototype.writePackedSint64String=function(fe,e){if(e!=null&&e.length){fe=this.beginDelimited_(fe);for(var ye=0;ye<e.length;ye++)this.encoder_.writeZigzagVarintHash64(jspb.utils.decimalStringToHash64(e[ye]));this.endDelimited_(fe)}},jspb.BinaryWriter.prototype.writePackedSintHash64=function(fe,e){if(e!=null&&e.length){fe=this.beginDelimited_(fe);for(var ye=0;ye<e.length;ye++)this.encoder_.writeZigzagVarintHash64(e[ye]);this.endDelimited_(fe)}},jspb.BinaryWriter.prototype.writePackedFixed32=function(fe,e){if(e!=null&&e.length)for(this.writeFieldHeader_(fe,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(4*e.length),fe=0;fe<e.length;fe++)this.encoder_.writeUint32(e[fe])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedFixed32",jspb.BinaryWriter.prototype.writePackedFixed32),jspb.BinaryWriter.prototype.writePackedFixed64=function(fe,e){if(e!=null&&e.length)for(this.writeFieldHeader_(fe,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*e.length),fe=0;fe<e.length;fe++)this.encoder_.writeUint64(e[fe])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedFixed64",jspb.BinaryWriter.prototype.writePackedFixed64),jspb.BinaryWriter.prototype.writePackedFixed64String=function(fe,e){if(e!=null&&e.length)for(this.writeFieldHeader_(fe,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*e.length),fe=0;fe<e.length;fe++){var ye=jspb.arith.UInt64.fromString(e[fe]);this.encoder_.writeSplitFixed64(ye.lo,ye.hi)}},jspb.BinaryWriter.prototype.writePackedSfixed32=function(fe,e){if(e!=null&&e.length)for(this.writeFieldHeader_(fe,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(4*e.length),fe=0;fe<e.length;fe++)this.encoder_.writeInt32(e[fe])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedSfixed32",jspb.BinaryWriter.prototype.writePackedSfixed32),jspb.BinaryWriter.prototype.writePackedSfixed64=function(fe,e){if(e!=null&&e.length)for(this.writeFieldHeader_(fe,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*e.length),fe=0;fe<e.length;fe++)this.encoder_.writeInt64(e[fe])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedSfixed64",jspb.BinaryWriter.prototype.writePackedSfixed64),jspb.BinaryWriter.prototype.writePackedSfixed64String=function(fe,e){if(e!=null&&e.length)for(this.writeFieldHeader_(fe,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*e.length),fe=0;fe<e.length;fe++)this.encoder_.writeInt64String(e[fe])},jspb.BinaryWriter.prototype.writePackedFloat=function(fe,e){if(e!=null&&e.length)for(this.writeFieldHeader_(fe,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(4*e.length),fe=0;fe<e.length;fe++)this.encoder_.writeFloat(e[fe])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedFloat",jspb.BinaryWriter.prototype.writePackedFloat),jspb.BinaryWriter.prototype.writePackedDouble=function(fe,e){if(e!=null&&e.length)for(this.writeFieldHeader_(fe,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*e.length),fe=0;fe<e.length;fe++)this.encoder_.writeDouble(e[fe])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedDouble",jspb.BinaryWriter.prototype.writePackedDouble),jspb.BinaryWriter.prototype.writePackedBool=function(fe,e){if(e!=null&&e.length)for(this.writeFieldHeader_(fe,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(e.length),fe=0;fe<e.length;fe++)this.encoder_.writeBool(e[fe])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedBool",jspb.BinaryWriter.prototype.writePackedBool),jspb.BinaryWriter.prototype.writePackedEnum=function(fe,e){if(e!=null&&e.length){fe=this.beginDelimited_(fe);for(var ye=0;ye<e.length;ye++)this.encoder_.writeEnum(e[ye]);this.endDelimited_(fe)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedEnum",jspb.BinaryWriter.prototype.writePackedEnum),jspb.BinaryWriter.prototype.writePackedFixedHash64=function(fe,e){if(e!=null&&e.length)for(this.writeFieldHeader_(fe,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*e.length),fe=0;fe<e.length;fe++)this.encoder_.writeFixedHash64(e[fe])},jspb.BinaryWriter.prototype.writePackedVarintHash64=function(fe,e){if(e!=null&&e.length){fe=this.beginDelimited_(fe);for(var ye=0;ye<e.length;ye++)this.encoder_.writeVarintHash64(e[ye]);this.endDelimited_(fe)}},jspb.Map=function(fe,e){this.arr_=fe,this.valueCtor_=e,this.map_={},this.arrClean=!0,0<this.arr_.length&&this.loadFromArray_()},goog.exportSymbol("jspb.Map",jspb.Map),jspb.Map.prototype.loadFromArray_=function(){for(var fe=0;fe<this.arr_.length;fe++){var e=this.arr_[fe],ye=e[0];this.map_[ye.toString()]=new jspb.Map.Entry_(ye,e[1])}this.arrClean=!0},jspb.Map.prototype.toArray=function(){if(this.arrClean){if(this.valueCtor_){var fe=this.map_,e;for(e in fe)if(Object.prototype.hasOwnProperty.call(fe,e)){var ye=fe[e].valueWrapper;ye&&ye.toArray()}}}else{for(this.arr_.length=0,fe=this.stringKeys_(),fe.sort(),e=0;e<fe.length;e++){var me=this.map_[fe[e]];(ye=me.valueWrapper)&&ye.toArray(),this.arr_.push([me.key,me.value])}this.arrClean=!0}return this.arr_},goog.exportProperty(jspb.Map.prototype,"toArray",jspb.Map.prototype.toArray),jspb.Map.prototype.toObject=function(fe,e){for(var ye=this.toArray(),me=[],be=0;be<ye.length;be++){var ve=this.map_[ye[be][0].toString()];this.wrapEntry_(ve);var Ee=ve.valueWrapper;Ee?(jspb.asserts.assert(e),me.push([ve.key,e(fe,Ee)])):me.push([ve.key,ve.value])}return me},goog.exportProperty(jspb.Map.prototype,"toObject",jspb.Map.prototype.toObject),jspb.Map.fromObject=function(fe,e,ye){e=new jspb.Map([],e);for(var me=0;me<fe.length;me++){var be=fe[me][0],ve=ye(fe[me][1]);e.set(be,ve)}return e},goog.exportProperty(jspb.Map,"fromObject",jspb.Map.fromObject),jspb.Map.ArrayIteratorIterable_=function(fe){this.idx_=0,this.arr_=fe},jspb.Map.ArrayIteratorIterable_.prototype.next=function(){return this.idx_<this.arr_.length?{done:!1,value:this.arr_[this.idx_++]}:{done:!0,value:void 0}},typeof Symbol<"u"&&(jspb.Map.ArrayIteratorIterable_.prototype[Symbol.iterator]=function(){return this}),jspb.Map.prototype.getLength=function(){return this.stringKeys_().length},goog.exportProperty(jspb.Map.prototype,"getLength",jspb.Map.prototype.getLength),jspb.Map.prototype.clear=function(){this.map_={},this.arrClean=!1},goog.exportProperty(jspb.Map.prototype,"clear",jspb.Map.prototype.clear),jspb.Map.prototype.del=function(fe){fe=fe.toString();var e=this.map_.hasOwnProperty(fe);return delete this.map_[fe],this.arrClean=!1,e},goog.exportProperty(jspb.Map.prototype,"del",jspb.Map.prototype.del),jspb.Map.prototype.getEntryList=function(){var fe=[],e=this.stringKeys_();e.sort();for(var ye=0;ye<e.length;ye++){var me=this.map_[e[ye]];fe.push([me.key,me.value])}return fe},goog.exportProperty(jspb.Map.prototype,"getEntryList",jspb.Map.prototype.getEntryList),jspb.Map.prototype.entries=function(){var fe=[],e=this.stringKeys_();e.sort();for(var ye=0;ye<e.length;ye++){var me=this.map_[e[ye]];fe.push([me.key,this.wrapEntry_(me)])}return new jspb.Map.ArrayIteratorIterable_(fe)},goog.exportProperty(jspb.Map.prototype,"entries",jspb.Map.prototype.entries),jspb.Map.prototype.keys=function(){var fe=[],e=this.stringKeys_();e.sort();for(var ye=0;ye<e.length;ye++)fe.push(this.map_[e[ye]].key);return new jspb.Map.ArrayIteratorIterable_(fe)},goog.exportProperty(jspb.Map.prototype,"keys",jspb.Map.prototype.keys),jspb.Map.prototype.values=function(){var fe=[],e=this.stringKeys_();e.sort();for(var ye=0;ye<e.length;ye++)fe.push(this.wrapEntry_(this.map_[e[ye]]));return new jspb.Map.ArrayIteratorIterable_(fe)},goog.exportProperty(jspb.Map.prototype,"values",jspb.Map.prototype.values),jspb.Map.prototype.forEach=function(fe,e){var ye=this.stringKeys_();ye.sort();for(var me=0;me<ye.length;me++){var be=this.map_[ye[me]];fe.call(e,this.wrapEntry_(be),be.key,this)}},goog.exportProperty(jspb.Map.prototype,"forEach",jspb.Map.prototype.forEach),jspb.Map.prototype.set=function(fe,e){var ye=new jspb.Map.Entry_(fe);return this.valueCtor_?(ye.valueWrapper=e,ye.value=e.toArray()):ye.value=e,this.map_[fe.toString()]=ye,this.arrClean=!1,this},goog.exportProperty(jspb.Map.prototype,"set",jspb.Map.prototype.set),jspb.Map.prototype.wrapEntry_=function(fe){return this.valueCtor_?(fe.valueWrapper||(fe.valueWrapper=new this.valueCtor_(fe.value)),fe.valueWrapper):fe.value},jspb.Map.prototype.get=function(fe){if(fe=this.map_[fe.toString()])return this.wrapEntry_(fe)},goog.exportProperty(jspb.Map.prototype,"get",jspb.Map.prototype.get),jspb.Map.prototype.has=function(fe){return fe.toString()in this.map_},goog.exportProperty(jspb.Map.prototype,"has",jspb.Map.prototype.has),jspb.Map.prototype.serializeBinary=function(fe,e,ye,me,be){var ve=this.stringKeys_();ve.sort();for(var Ee=0;Ee<ve.length;Ee++){var Oe=this.map_[ve[Ee]];e.beginSubMessage(fe),ye.call(e,1,Oe.key),this.valueCtor_?me.call(e,2,this.wrapEntry_(Oe),be):me.call(e,2,Oe.value),e.endSubMessage()}},goog.exportProperty(jspb.Map.prototype,"serializeBinary",jspb.Map.prototype.serializeBinary),jspb.Map.deserializeBinary=function(fe,e,ye,me,be,ve,Ee){for(;e.nextField()&&!e.isEndGroup();){var Oe=e.getFieldNumber();Oe==1?ve=ye.call(e):Oe==2&&(fe.valueCtor_?(jspb.asserts.assert(be),Ee||(Ee=new fe.valueCtor_),me.call(e,Ee,be)):Ee=me.call(e))}jspb.asserts.assert(ve!=null),jspb.asserts.assert(Ee!=null),fe.set(ve,Ee)},goog.exportProperty(jspb.Map,"deserializeBinary",jspb.Map.deserializeBinary),jspb.Map.prototype.stringKeys_=function(){var fe=this.map_,e=[],ye;for(ye in fe)Object.prototype.hasOwnProperty.call(fe,ye)&&e.push(ye);return e},jspb.Map.Entry_=function(fe,e){this.key=fe,this.value=e,this.valueWrapper=void 0},jspb.ExtensionFieldInfo=function(fe,e,ye,me,be){this.fieldIndex=fe,this.fieldName=e,this.ctor=ye,this.toObjectFn=me,this.isRepeated=be},goog.exportSymbol("jspb.ExtensionFieldInfo",jspb.ExtensionFieldInfo),jspb.ExtensionFieldBinaryInfo=function(fe,e,ye,me,be,ve){this.fieldInfo=fe,this.binaryReaderFn=e,this.binaryWriterFn=ye,this.binaryMessageSerializeFn=me,this.binaryMessageDeserializeFn=be,this.isPacked=ve},goog.exportSymbol("jspb.ExtensionFieldBinaryInfo",jspb.ExtensionFieldBinaryInfo),jspb.ExtensionFieldInfo.prototype.isMessageType=function(){return!!this.ctor},goog.exportProperty(jspb.ExtensionFieldInfo.prototype,"isMessageType",jspb.ExtensionFieldInfo.prototype.isMessageType),jspb.Message=function(){},goog.exportSymbol("jspb.Message",jspb.Message),jspb.Message.GENERATE_TO_OBJECT=!0,goog.exportProperty(jspb.Message,"GENERATE_TO_OBJECT",jspb.Message.GENERATE_TO_OBJECT),jspb.Message.GENERATE_FROM_OBJECT=!goog.DISALLOW_TEST_ONLY_CODE,goog.exportProperty(jspb.Message,"GENERATE_FROM_OBJECT",jspb.Message.GENERATE_FROM_OBJECT),jspb.Message.GENERATE_TO_STRING=!0,jspb.Message.ASSUME_LOCAL_ARRAYS=!1,jspb.Message.SERIALIZE_EMPTY_TRAILING_FIELDS=!0,jspb.Message.SUPPORTS_UINT8ARRAY_=typeof Uint8Array=="function",jspb.Message.prototype.getJsPbMessageId=function(){return this.messageId_},goog.exportProperty(jspb.Message.prototype,"getJsPbMessageId",jspb.Message.prototype.getJsPbMessageId),jspb.Message.getIndex_=function(fe,e){return e+fe.arrayIndexOffset_},jspb.Message.hiddenES6Property_=function(){},jspb.Message.getFieldNumber_=function(fe,e){return e-fe.arrayIndexOffset_},jspb.Message.initialize=function(fe,e,ye,me,be,ve){if(fe.wrappers_=null,e||(e=ye?[ye]:[]),fe.messageId_=ye?String(ye):void 0,fe.arrayIndexOffset_=ye===0?-1:0,fe.array=e,jspb.Message.initPivotAndExtensionObject_(fe,me),fe.convertedPrimitiveFields_={},jspb.Message.SERIALIZE_EMPTY_TRAILING_FIELDS||(fe.repeatedFields=be),be)for(e=0;e<be.length;e++)ye=be[e],ye<fe.pivot_?(ye=jspb.Message.getIndex_(fe,ye),fe.array[ye]=fe.array[ye]||jspb.Message.EMPTY_LIST_SENTINEL_):(jspb.Message.maybeInitEmptyExtensionObject_(fe),fe.extensionObject_[ye]=fe.extensionObject_[ye]||jspb.Message.EMPTY_LIST_SENTINEL_);if(ve&&ve.length)for(e=0;e<ve.length;e++)jspb.Message.computeOneofCase(fe,ve[e])},goog.exportProperty(jspb.Message,"initialize",jspb.Message.initialize),jspb.Message.EMPTY_LIST_SENTINEL_=goog.DEBUG&&Object.freeze?Object.freeze([]):[],jspb.Message.isArray_=function(fe){return jspb.Message.ASSUME_LOCAL_ARRAYS?fe instanceof Array:Array.isArray(fe)},jspb.Message.isExtensionObject_=function(fe){return fe!==null&&typeof fe=="object"&&!jspb.Message.isArray_(fe)&&!(jspb.Message.SUPPORTS_UINT8ARRAY_&&fe instanceof Uint8Array)},jspb.Message.initPivotAndExtensionObject_=function(fe,e){var ye=fe.array.length,me=-1;if(ye&&(me=ye-1,ye=fe.array[me],jspb.Message.isExtensionObject_(ye))){fe.pivot_=jspb.Message.getFieldNumber_(fe,me),fe.extensionObject_=ye;return}-1<e?(fe.pivot_=Math.max(e,jspb.Message.getFieldNumber_(fe,me+1)),fe.extensionObject_=null):fe.pivot_=Number.MAX_VALUE},jspb.Message.maybeInitEmptyExtensionObject_=function(fe){var e=jspb.Message.getIndex_(fe,fe.pivot_);fe.array[e]||(fe.extensionObject_=fe.array[e]={})},jspb.Message.toObjectList=function(fe,e,ye){for(var me=[],be=0;be<fe.length;be++)me[be]=e.call(fe[be],ye,fe[be]);return me},goog.exportProperty(jspb.Message,"toObjectList",jspb.Message.toObjectList),jspb.Message.toObjectExtension=function(fe,e,ye,me,be){for(var ve in ye){var Ee=ye[ve],Oe=me.call(fe,Ee);if(Oe!=null){for(var xe in Ee.fieldName)if(Ee.fieldName.hasOwnProperty(xe))break;e[xe]=Ee.toObjectFn?Ee.isRepeated?jspb.Message.toObjectList(Oe,Ee.toObjectFn,be):Ee.toObjectFn(be,Oe):Oe}}},goog.exportProperty(jspb.Message,"toObjectExtension",jspb.Message.toObjectExtension),jspb.Message.serializeBinaryExtensions=function(fe,e,ye,me){for(var be in ye){var ve=ye[be],Ee=ve.fieldInfo;if(!ve.binaryWriterFn)throw Error("Message extension present that was generated without binary serialization support");var Oe=me.call(fe,Ee);if(Oe!=null)if(Ee.isMessageType())if(ve.binaryMessageSerializeFn)ve.binaryWriterFn.call(e,Ee.fieldIndex,Oe,ve.binaryMessageSerializeFn);else throw Error("Message extension present holding submessage without binary support enabled, and message is being serialized to binary format");else ve.binaryWriterFn.call(e,Ee.fieldIndex,Oe)}},goog.exportProperty(jspb.Message,"serializeBinaryExtensions",jspb.Message.serializeBinaryExtensions),jspb.Message.readBinaryExtension=function(fe,e,ye,me,be){var ve=ye[e.getFieldNumber()];if(ve){if(ye=ve.fieldInfo,!ve.binaryReaderFn)throw Error("Deserializing extension whose generated code does not support binary format");if(ye.isMessageType()){var Ee=new ye.ctor;ve.binaryReaderFn.call(e,Ee,ve.binaryMessageDeserializeFn)}else Ee=ve.binaryReaderFn.call(e);ye.isRepeated&&!ve.isPacked?(e=me.call(fe,ye))?e.push(Ee):be.call(fe,ye,[Ee]):be.call(fe,ye,Ee)}else e.skipField()},goog.exportProperty(jspb.Message,"readBinaryExtension",jspb.Message.readBinaryExtension),jspb.Message.getField=function(fe,e){if(e<fe.pivot_){e=jspb.Message.getIndex_(fe,e);var ye=fe.array[e];return ye===jspb.Message.EMPTY_LIST_SENTINEL_?fe.array[e]=[]:ye}if(fe.extensionObject_)return ye=fe.extensionObject_[e],ye===jspb.Message.EMPTY_LIST_SENTINEL_?fe.extensionObject_[e]=[]:ye},goog.exportProperty(jspb.Message,"getField",jspb.Message.getField),jspb.Message.getRepeatedField=function(fe,e){return jspb.Message.getField(fe,e)},goog.exportProperty(jspb.Message,"getRepeatedField",jspb.Message.getRepeatedField),jspb.Message.getOptionalFloatingPointField=function(fe,e){return fe=jspb.Message.getField(fe,e),fe==null?fe:+fe},goog.exportProperty(jspb.Message,"getOptionalFloatingPointField",jspb.Message.getOptionalFloatingPointField),jspb.Message.getBooleanField=function(fe,e){return fe=jspb.Message.getField(fe,e),fe==null?fe:!!fe},goog.exportProperty(jspb.Message,"getBooleanField",jspb.Message.getBooleanField),jspb.Message.getRepeatedFloatingPointField=function(fe,e){var ye=jspb.Message.getRepeatedField(fe,e);if(fe.convertedPrimitiveFields_||(fe.convertedPrimitiveFields_={}),!fe.convertedPrimitiveFields_[e]){for(var me=0;me<ye.length;me++)ye[me]=+ye[me];fe.convertedPrimitiveFields_[e]=!0}return ye},goog.exportProperty(jspb.Message,"getRepeatedFloatingPointField",jspb.Message.getRepeatedFloatingPointField),jspb.Message.getRepeatedBooleanField=function(fe,e){var ye=jspb.Message.getRepeatedField(fe,e);if(fe.convertedPrimitiveFields_||(fe.convertedPrimitiveFields_={}),!fe.convertedPrimitiveFields_[e]){for(var me=0;me<ye.length;me++)ye[me]=!!ye[me];fe.convertedPrimitiveFields_[e]=!0}return ye},goog.exportProperty(jspb.Message,"getRepeatedBooleanField",jspb.Message.getRepeatedBooleanField),jspb.Message.bytesAsB64=function(fe){return fe==null||typeof fe=="string"?fe:jspb.Message.SUPPORTS_UINT8ARRAY_&&fe instanceof Uint8Array?goog.crypt.base64.encodeByteArray(fe):(jspb.asserts.fail("Cannot coerce to b64 string: "+goog.typeOf(fe)),null)},goog.exportProperty(jspb.Message,"bytesAsB64",jspb.Message.bytesAsB64),jspb.Message.bytesAsU8=function(fe){return fe==null||fe instanceof Uint8Array?fe:typeof fe=="string"?goog.crypt.base64.decodeStringToUint8Array(fe):(jspb.asserts.fail("Cannot coerce to Uint8Array: "+goog.typeOf(fe)),null)},goog.exportProperty(jspb.Message,"bytesAsU8",jspb.Message.bytesAsU8),jspb.Message.bytesListAsB64=function(fe){return jspb.Message.assertConsistentTypes_(fe),fe.length&&typeof fe[0]!="string"?goog.array.map(fe,jspb.Message.bytesAsB64):fe},goog.exportProperty(jspb.Message,"bytesListAsB64",jspb.Message.bytesListAsB64),jspb.Message.bytesListAsU8=function(fe){return jspb.Message.assertConsistentTypes_(fe),!fe.length||fe[0]instanceof Uint8Array?fe:goog.array.map(fe,jspb.Message.bytesAsU8)},goog.exportProperty(jspb.Message,"bytesListAsU8",jspb.Message.bytesListAsU8),jspb.Message.assertConsistentTypes_=function(fe){if(goog.DEBUG&&fe&&1<fe.length){var e=goog.typeOf(fe[0]);goog.array.forEach(fe,function(ye){goog.typeOf(ye)!=e&&jspb.asserts.fail("Inconsistent type in JSPB repeated field array. Got "+goog.typeOf(ye)+" expected "+e)})}},jspb.Message.getFieldWithDefault=function(fe,e,ye){return fe=jspb.Message.getField(fe,e),fe??ye},goog.exportProperty(jspb.Message,"getFieldWithDefault",jspb.Message.getFieldWithDefault),jspb.Message.getBooleanFieldWithDefault=function(fe,e,ye){return fe=jspb.Message.getBooleanField(fe,e),fe??ye},goog.exportProperty(jspb.Message,"getBooleanFieldWithDefault",jspb.Message.getBooleanFieldWithDefault),jspb.Message.getFloatingPointFieldWithDefault=function(fe,e,ye){return fe=jspb.Message.getOptionalFloatingPointField(fe,e),fe??ye},goog.exportProperty(jspb.Message,"getFloatingPointFieldWithDefault",jspb.Message.getFloatingPointFieldWithDefault),jspb.Message.getFieldProto3=jspb.Message.getFieldWithDefault,goog.exportProperty(jspb.Message,"getFieldProto3",jspb.Message.getFieldProto3),jspb.Message.getMapField=function(fe,e,ye,me){if(fe.wrappers_||(fe.wrappers_={}),e in fe.wrappers_)return fe.wrappers_[e];var be=jspb.Message.getField(fe,e);if(!be){if(ye)return;be=[],jspb.Message.setField(fe,e,be)}return fe.wrappers_[e]=new jspb.Map(be,me)},goog.exportProperty(jspb.Message,"getMapField",jspb.Message.getMapField),jspb.Message.setField=function(fe,e,ye){return jspb.asserts.assertInstanceof(fe,jspb.Message),e<fe.pivot_?fe.array[jspb.Message.getIndex_(fe,e)]=ye:(jspb.Message.maybeInitEmptyExtensionObject_(fe),fe.extensionObject_[e]=ye),fe},goog.exportProperty(jspb.Message,"setField",jspb.Message.setField),jspb.Message.setProto3IntField=function(fe,e,ye){return jspb.Message.setFieldIgnoringDefault_(fe,e,ye,0)},goog.exportProperty(jspb.Message,"setProto3IntField",jspb.Message.setProto3IntField),jspb.Message.setProto3FloatField=function(fe,e,ye){return jspb.Message.setFieldIgnoringDefault_(fe,e,ye,0)},goog.exportProperty(jspb.Message,"setProto3FloatField",jspb.Message.setProto3FloatField),jspb.Message.setProto3BooleanField=function(fe,e,ye){return jspb.Message.setFieldIgnoringDefault_(fe,e,ye,!1)},goog.exportProperty(jspb.Message,"setProto3BooleanField",jspb.Message.setProto3BooleanField),jspb.Message.setProto3StringField=function(fe,e,ye){return jspb.Message.setFieldIgnoringDefault_(fe,e,ye,"")},goog.exportProperty(jspb.Message,"setProto3StringField",jspb.Message.setProto3StringField),jspb.Message.setProto3BytesField=function(fe,e,ye){return jspb.Message.setFieldIgnoringDefault_(fe,e,ye,"")},goog.exportProperty(jspb.Message,"setProto3BytesField",jspb.Message.setProto3BytesField),jspb.Message.setProto3EnumField=function(fe,e,ye){return jspb.Message.setFieldIgnoringDefault_(fe,e,ye,0)},goog.exportProperty(jspb.Message,"setProto3EnumField",jspb.Message.setProto3EnumField),jspb.Message.setProto3StringIntField=function(fe,e,ye){return jspb.Message.setFieldIgnoringDefault_(fe,e,ye,"0")},goog.exportProperty(jspb.Message,"setProto3StringIntField",jspb.Message.setProto3StringIntField),jspb.Message.setFieldIgnoringDefault_=function(fe,e,ye,me){return jspb.asserts.assertInstanceof(fe,jspb.Message),ye!==me?jspb.Message.setField(fe,e,ye):e<fe.pivot_?fe.array[jspb.Message.getIndex_(fe,e)]=null:(jspb.Message.maybeInitEmptyExtensionObject_(fe),delete fe.extensionObject_[e]),fe},jspb.Message.addToRepeatedField=function(fe,e,ye,me){return jspb.asserts.assertInstanceof(fe,jspb.Message),e=jspb.Message.getRepeatedField(fe,e),me!=null?e.splice(me,0,ye):e.push(ye),fe},goog.exportProperty(jspb.Message,"addToRepeatedField",jspb.Message.addToRepeatedField),jspb.Message.setOneofField=function(fe,e,ye,me){return jspb.asserts.assertInstanceof(fe,jspb.Message),(ye=jspb.Message.computeOneofCase(fe,ye))&&ye!==e&&me!==void 0&&(fe.wrappers_&&ye in fe.wrappers_&&(fe.wrappers_[ye]=void 0),jspb.Message.setField(fe,ye,void 0)),jspb.Message.setField(fe,e,me)},goog.exportProperty(jspb.Message,"setOneofField",jspb.Message.setOneofField),jspb.Message.computeOneofCase=function(fe,e){for(var ye,me,be=0;be<e.length;be++){var ve=e[be],Ee=jspb.Message.getField(fe,ve);Ee!=null&&(ye=ve,me=Ee,jspb.Message.setField(fe,ve,void 0))}return ye?(jspb.Message.setField(fe,ye,me),ye):0},goog.exportProperty(jspb.Message,"computeOneofCase",jspb.Message.computeOneofCase),jspb.Message.getWrapperField=function(fe,e,ye,me){if(fe.wrappers_||(fe.wrappers_={}),!fe.wrappers_[ye]){var be=jspb.Message.getField(fe,ye);(me||be)&&(fe.wrappers_[ye]=new e(be))}return fe.wrappers_[ye]},goog.exportProperty(jspb.Message,"getWrapperField",jspb.Message.getWrapperField),jspb.Message.getRepeatedWrapperField=function(fe,e,ye){return jspb.Message.wrapRepeatedField_(fe,e,ye),e=fe.wrappers_[ye],e==jspb.Message.EMPTY_LIST_SENTINEL_&&(e=fe.wrappers_[ye]=[]),e},goog.exportProperty(jspb.Message,"getRepeatedWrapperField",jspb.Message.getRepeatedWrapperField),jspb.Message.wrapRepeatedField_=function(fe,e,ye){if(fe.wrappers_||(fe.wrappers_={}),!fe.wrappers_[ye]){for(var me=jspb.Message.getRepeatedField(fe,ye),be=[],ve=0;ve<me.length;ve++)be[ve]=new e(me[ve]);fe.wrappers_[ye]=be}},jspb.Message.setWrapperField=function(fe,e,ye){jspb.asserts.assertInstanceof(fe,jspb.Message),fe.wrappers_||(fe.wrappers_={});var me=ye&&ye.toArray();return fe.wrappers_[e]=ye,jspb.Message.setField(fe,e,me)},goog.exportProperty(jspb.Message,"setWrapperField",jspb.Message.setWrapperField),jspb.Message.setOneofWrapperField=function(fe,e,ye,me){jspb.asserts.assertInstanceof(fe,jspb.Message),fe.wrappers_||(fe.wrappers_={});var be=me&&me.toArray();return fe.wrappers_[e]=me,jspb.Message.setOneofField(fe,e,ye,be)},goog.exportProperty(jspb.Message,"setOneofWrapperField",jspb.Message.setOneofWrapperField),jspb.Message.setRepeatedWrapperField=function(fe,e,ye){jspb.asserts.assertInstanceof(fe,jspb.Message),fe.wrappers_||(fe.wrappers_={}),ye=ye||[];for(var me=[],be=0;be<ye.length;be++)me[be]=ye[be].toArray();return fe.wrappers_[e]=ye,jspb.Message.setField(fe,e,me)},goog.exportProperty(jspb.Message,"setRepeatedWrapperField",jspb.Message.setRepeatedWrapperField),jspb.Message.addToRepeatedWrapperField=function(fe,e,ye,me,be){jspb.Message.wrapRepeatedField_(fe,me,e);var ve=fe.wrappers_[e];return ve||(ve=fe.wrappers_[e]=[]),ye=ye||new me,fe=jspb.Message.getRepeatedField(fe,e),be!=null?(ve.splice(be,0,ye),fe.splice(be,0,ye.toArray())):(ve.push(ye),fe.push(ye.toArray())),ye},goog.exportProperty(jspb.Message,"addToRepeatedWrapperField",jspb.Message.addToRepeatedWrapperField),jspb.Message.toMap=function(fe,e,ye,me){for(var be={},ve=0;ve<fe.length;ve++)be[e.call(fe[ve])]=ye?ye.call(fe[ve],me,fe[ve]):fe[ve];return be},goog.exportProperty(jspb.Message,"toMap",jspb.Message.toMap),jspb.Message.prototype.syncMapFields_=function(){if(this.wrappers_)for(var fe in this.wrappers_){var e=this.wrappers_[fe];if(Array.isArray(e))for(var ye=0;ye<e.length;ye++)e[ye]&&e[ye].toArray();else e&&e.toArray()}},jspb.Message.prototype.toArray=function(){return this.syncMapFields_(),this.array},goog.exportProperty(jspb.Message.prototype,"toArray",jspb.Message.prototype.toArray),jspb.Message.GENERATE_TO_STRING&&(jspb.Message.prototype.toString=function(){return this.syncMapFields_(),this.array.toString()}),jspb.Message.prototype.getExtension=function(fe){if(this.extensionObject_){this.wrappers_||(this.wrappers_={});var e=fe.fieldIndex;if(fe.isRepeated){if(fe.isMessageType())return this.wrappers_[e]||(this.wrappers_[e]=goog.array.map(this.extensionObject_[e]||[],function(ye){return new fe.ctor(ye)})),this.wrappers_[e]}else if(fe.isMessageType())return!this.wrappers_[e]&&this.extensionObject_[e]&&(this.wrappers_[e]=new fe.ctor(this.extensionObject_[e])),this.wrappers_[e];return this.extensionObject_[e]}},goog.exportProperty(jspb.Message.prototype,"getExtension",jspb.Message.prototype.getExtension),jspb.Message.prototype.setExtension=function(fe,e){this.wrappers_||(this.wrappers_={}),jspb.Message.maybeInitEmptyExtensionObject_(this);var ye=fe.fieldIndex;return fe.isRepeated?(e=e||[],fe.isMessageType()?(this.wrappers_[ye]=e,this.extensionObject_[ye]=goog.array.map(e,function(me){return me.toArray()})):this.extensionObject_[ye]=e):fe.isMessageType()?(this.wrappers_[ye]=e,this.extensionObject_[ye]=e&&e.toArray()):this.extensionObject_[ye]=e,this},goog.exportProperty(jspb.Message.prototype,"setExtension",jspb.Message.prototype.setExtension),jspb.Message.difference=function(fe,e){if(!(fe instanceof e.constructor))throw Error("Messages have different types.");var ye=fe.toArray();e=e.toArray();var me=[],be=0,ve=ye.length>e.length?ye.length:e.length;for(fe.getJsPbMessageId()&&(me[0]=fe.getJsPbMessageId(),be=1);be<ve;be++)jspb.Message.compareFields(ye[be],e[be])||(me[be]=e[be]);return new fe.constructor(me)},goog.exportProperty(jspb.Message,"difference",jspb.Message.difference),jspb.Message.equals=function(fe,e){return fe==e||!(!fe||!e)&&fe instanceof e.constructor&&jspb.Message.compareFields(fe.toArray(),e.toArray())},goog.exportProperty(jspb.Message,"equals",jspb.Message.equals),jspb.Message.compareExtensions=function(fe,e){fe=fe||{},e=e||{};var ye={},me;for(me in fe)ye[me]=0;for(me in e)ye[me]=0;for(me in ye)if(!jspb.Message.compareFields(fe[me],e[me]))return!1;return!0},goog.exportProperty(jspb.Message,"compareExtensions",jspb.Message.compareExtensions),jspb.Message.compareFields=function(fe,e){if(fe==e)return!0;if(!goog.isObject(fe)||!goog.isObject(e))return typeof fe=="number"&&isNaN(fe)||typeof e=="number"&&isNaN(e)?String(fe)==String(e):!1;if(fe.constructor!=e.constructor)return!1;if(jspb.Message.SUPPORTS_UINT8ARRAY_&&fe.constructor===Uint8Array){if(fe.length!=e.length)return!1;for(var ye=0;ye<fe.length;ye++)if(fe[ye]!=e[ye])return!1;return!0}if(fe.constructor===Array){var me=void 0,be=void 0,ve=Math.max(fe.length,e.length);for(ye=0;ye<ve;ye++){var Ee=fe[ye],Oe=e[ye];if(Ee&&Ee.constructor==Object&&(jspb.asserts.assert(me===void 0),jspb.asserts.assert(ye===fe.length-1),me=Ee,Ee=void 0),Oe&&Oe.constructor==Object&&(jspb.asserts.assert(be===void 0),jspb.asserts.assert(ye===e.length-1),be=Oe,Oe=void 0),!jspb.Message.compareFields(Ee,Oe))return!1}return me||be?(me=me||{},be=be||{},jspb.Message.compareExtensions(me,be)):!0}if(fe.constructor===Object)return jspb.Message.compareExtensions(fe,e);throw Error("Invalid type in JSPB array")},goog.exportProperty(jspb.Message,"compareFields",jspb.Message.compareFields),jspb.Message.prototype.cloneMessage=function(){return jspb.Message.cloneMessage(this)},goog.exportProperty(jspb.Message.prototype,"cloneMessage",jspb.Message.prototype.cloneMessage),jspb.Message.prototype.clone=function(){return jspb.Message.cloneMessage(this)},goog.exportProperty(jspb.Message.prototype,"clone",jspb.Message.prototype.clone),jspb.Message.clone=function(fe){return jspb.Message.cloneMessage(fe)},goog.exportProperty(jspb.Message,"clone",jspb.Message.clone),jspb.Message.cloneMessage=function(fe){return new fe.constructor(jspb.Message.clone_(fe.toArray()))},jspb.Message.copyInto=function(fe,e){jspb.asserts.assertInstanceof(fe,jspb.Message),jspb.asserts.assertInstanceof(e,jspb.Message),jspb.asserts.assert(fe.constructor==e.constructor,"Copy source and target message should have the same type."),fe=jspb.Message.clone(fe);for(var ye=e.toArray(),me=fe.toArray(),be=ye.length=0;be<me.length;be++)ye[be]=me[be];e.wrappers_=fe.wrappers_,e.extensionObject_=fe.extensionObject_},goog.exportProperty(jspb.Message,"copyInto",jspb.Message.copyInto),jspb.Message.clone_=function(fe){if(Array.isArray(fe)){for(var e=Array(fe.length),ye=0;ye<fe.length;ye++){var me=fe[ye];me!=null&&(e[ye]=typeof me=="object"?jspb.Message.clone_(jspb.asserts.assert(me)):me)}return e}if(jspb.Message.SUPPORTS_UINT8ARRAY_&&fe instanceof Uint8Array)return new Uint8Array(fe);e={};for(ye in fe)me=fe[ye],me!=null&&(e[ye]=typeof me=="object"?jspb.Message.clone_(jspb.asserts.assert(me)):me);return e},jspb.Message.registerMessageType=function(fe,e){e.messageId=fe},goog.exportProperty(jspb.Message,"registerMessageType",jspb.Message.registerMessageType),jspb.Message.messageSetExtensions={},jspb.Message.messageSetExtensionsBinary={},jspb.Export={},exports.Map=jspb.Map,exports.Message=jspb.Message,exports.BinaryReader=jspb.BinaryReader,exports.BinaryWriter=jspb.BinaryWriter,exports.ExtensionFieldInfo=jspb.ExtensionFieldInfo,exports.ExtensionFieldBinaryInfo=jspb.ExtensionFieldBinaryInfo,exports.exportSymbol=goog.exportSymbol,exports.inherits=goog.inherits,exports.object={extend:goog.object.extend},exports.typeOf=goog.typeOf})(googleProtobuf);(function(fe){var e=googleProtobuf,ye=e,me=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||typeof me<"u"&&me||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")();ye.exportSymbol("proto.google.protobuf.DescriptorProto",null,me),ye.exportSymbol("proto.google.protobuf.DescriptorProto.ExtensionRange",null,me),ye.exportSymbol("proto.google.protobuf.DescriptorProto.ReservedRange",null,me),ye.exportSymbol("proto.google.protobuf.EnumDescriptorProto",null,me),ye.exportSymbol("proto.google.protobuf.EnumDescriptorProto.EnumReservedRange",null,me),ye.exportSymbol("proto.google.protobuf.EnumOptions",null,me),ye.exportSymbol("proto.google.protobuf.EnumValueDescriptorProto",null,me),ye.exportSymbol("proto.google.protobuf.EnumValueOptions",null,me),ye.exportSymbol("proto.google.protobuf.ExtensionRangeOptions",null,me),ye.exportSymbol("proto.google.protobuf.FieldDescriptorProto",null,me),ye.exportSymbol("proto.google.protobuf.FieldDescriptorProto.Label",null,me),ye.exportSymbol("proto.google.protobuf.FieldDescriptorProto.Type",null,me),ye.exportSymbol("proto.google.protobuf.FieldOptions",null,me),ye.exportSymbol("proto.google.protobuf.FieldOptions.CType",null,me),ye.exportSymbol("proto.google.protobuf.FieldOptions.JSType",null,me),ye.exportSymbol("proto.google.protobuf.FileDescriptorProto",null,me),ye.exportSymbol("proto.google.protobuf.FileDescriptorSet",null,me),ye.exportSymbol("proto.google.protobuf.FileOptions",null,me),ye.exportSymbol("proto.google.protobuf.FileOptions.OptimizeMode",null,me),ye.exportSymbol("proto.google.protobuf.GeneratedCodeInfo",null,me),ye.exportSymbol("proto.google.protobuf.GeneratedCodeInfo.Annotation",null,me),ye.exportSymbol("proto.google.protobuf.MessageOptions",null,me),ye.exportSymbol("proto.google.protobuf.MethodDescriptorProto",null,me),ye.exportSymbol("proto.google.protobuf.MethodOptions",null,me),ye.exportSymbol("proto.google.protobuf.MethodOptions.IdempotencyLevel",null,me),ye.exportSymbol("proto.google.protobuf.OneofDescriptorProto",null,me),ye.exportSymbol("proto.google.protobuf.OneofOptions",null,me),ye.exportSymbol("proto.google.protobuf.ServiceDescriptorProto",null,me),ye.exportSymbol("proto.google.protobuf.ServiceOptions",null,me),ye.exportSymbol("proto.google.protobuf.SourceCodeInfo",null,me),ye.exportSymbol("proto.google.protobuf.SourceCodeInfo.Location",null,me),ye.exportSymbol("proto.google.protobuf.UninterpretedOption",null,me),ye.exportSymbol("proto.google.protobuf.UninterpretedOption.NamePart",null,me),proto.google.protobuf.FileDescriptorSet=function(be){e.Message.initialize(this,be,0,-1,proto.google.protobuf.FileDescriptorSet.repeatedFields_,null)},ye.inherits(proto.google.protobuf.FileDescriptorSet,e.Message),ye.DEBUG&&!COMPILED&&(proto.google.protobuf.FileDescriptorSet.displayName="proto.google.protobuf.FileDescriptorSet"),proto.google.protobuf.FileDescriptorProto=function(be){e.Message.initialize(this,be,0,-1,proto.google.protobuf.FileDescriptorProto.repeatedFields_,null)},ye.inherits(proto.google.protobuf.FileDescriptorProto,e.Message),ye.DEBUG&&!COMPILED&&(proto.google.protobuf.FileDescriptorProto.displayName="proto.google.protobuf.FileDescriptorProto"),proto.google.protobuf.DescriptorProto=function(be){e.Message.initialize(this,be,0,-1,proto.google.protobuf.DescriptorProto.repeatedFields_,null)},ye.inherits(proto.google.protobuf.DescriptorProto,e.Message),ye.DEBUG&&!COMPILED&&(proto.google.protobuf.DescriptorProto.displayName="proto.google.protobuf.DescriptorProto"),proto.google.protobuf.DescriptorProto.ExtensionRange=function(be){e.Message.initialize(this,be,0,-1,null,null)},ye.inherits(proto.google.protobuf.DescriptorProto.ExtensionRange,e.Message),ye.DEBUG&&!COMPILED&&(proto.google.protobuf.DescriptorProto.ExtensionRange.displayName="proto.google.protobuf.DescriptorProto.ExtensionRange"),proto.google.protobuf.DescriptorProto.ReservedRange=function(be){e.Message.initialize(this,be,0,-1,null,null)},ye.inherits(proto.google.protobuf.DescriptorProto.ReservedRange,e.Message),ye.DEBUG&&!COMPILED&&(proto.google.protobuf.DescriptorProto.ReservedRange.displayName="proto.google.protobuf.DescriptorProto.ReservedRange"),proto.google.protobuf.ExtensionRangeOptions=function(be){e.Message.initialize(this,be,0,500,proto.google.protobuf.ExtensionRangeOptions.repeatedFields_,null)},ye.inherits(proto.google.protobuf.ExtensionRangeOptions,e.Message),ye.DEBUG&&!COMPILED&&(proto.google.protobuf.ExtensionRangeOptions.displayName="proto.google.protobuf.ExtensionRangeOptions"),proto.google.protobuf.ExtensionRangeOptions.extensions={},proto.google.protobuf.ExtensionRangeOptions.extensionsBinary={},proto.google.protobuf.FieldDescriptorProto=function(be){e.Message.initialize(this,be,0,-1,null,null)},ye.inherits(proto.google.protobuf.FieldDescriptorProto,e.Message),ye.DEBUG&&!COMPILED&&(proto.google.protobuf.FieldDescriptorProto.displayName="proto.google.protobuf.FieldDescriptorProto"),proto.google.protobuf.OneofDescriptorProto=function(be){e.Message.initialize(this,be,0,-1,null,null)},ye.inherits(proto.google.protobuf.OneofDescriptorProto,e.Message),ye.DEBUG&&!COMPILED&&(proto.google.protobuf.OneofDescriptorProto.displayName="proto.google.protobuf.OneofDescriptorProto"),proto.google.protobuf.EnumDescriptorProto=function(be){e.Message.initialize(this,be,0,-1,proto.google.protobuf.EnumDescriptorProto.repeatedFields_,null)},ye.inherits(proto.google.protobuf.EnumDescriptorProto,e.Message),ye.DEBUG&&!COMPILED&&(proto.google.protobuf.EnumDescriptorProto.displayName="proto.google.protobuf.EnumDescriptorProto"),proto.google.protobuf.EnumDescriptorProto.EnumReservedRange=function(be){e.Message.initialize(this,be,0,-1,null,null)},ye.inherits(proto.google.protobuf.EnumDescriptorProto.EnumReservedRange,e.Message),ye.DEBUG&&!COMPILED&&(proto.google.protobuf.EnumDescriptorProto.EnumReservedRange.displayName="proto.google.protobuf.EnumDescriptorProto.EnumReservedRange"),proto.google.protobuf.EnumValueDescriptorProto=function(be){e.Message.initialize(this,be,0,-1,null,null)},ye.inherits(proto.google.protobuf.EnumValueDescriptorProto,e.Message),ye.DEBUG&&!COMPILED&&(proto.google.protobuf.EnumValueDescriptorProto.displayName="proto.google.protobuf.EnumValueDescriptorProto"),proto.google.protobuf.ServiceDescriptorProto=function(be){e.Message.initialize(this,be,0,-1,proto.google.protobuf.ServiceDescriptorProto.repeatedFields_,null)},ye.inherits(proto.google.protobuf.ServiceDescriptorProto,e.Message),ye.DEBUG&&!COMPILED&&(proto.google.protobuf.ServiceDescriptorProto.displayName="proto.google.protobuf.ServiceDescriptorProto"),proto.google.protobuf.MethodDescriptorProto=function(be){e.Message.initialize(this,be,0,-1,null,null)},ye.inherits(proto.google.protobuf.MethodDescriptorProto,e.Message),ye.DEBUG&&!COMPILED&&(proto.google.protobuf.MethodDescriptorProto.displayName="proto.google.protobuf.MethodDescriptorProto"),proto.google.protobuf.FileOptions=function(be){e.Message.initialize(this,be,0,500,proto.google.protobuf.FileOptions.repeatedFields_,null)},ye.inherits(proto.google.protobuf.FileOptions,e.Message),ye.DEBUG&&!COMPILED&&(proto.google.protobuf.FileOptions.displayName="proto.google.protobuf.FileOptions"),proto.google.protobuf.FileOptions.extensions={},proto.google.protobuf.FileOptions.extensionsBinary={},proto.google.protobuf.MessageOptions=function(be){e.Message.initialize(this,be,0,500,proto.google.protobuf.MessageOptions.repeatedFields_,null)},ye.inherits(proto.google.protobuf.MessageOptions,e.Message),ye.DEBUG&&!COMPILED&&(proto.google.protobuf.MessageOptions.displayName="proto.google.protobuf.MessageOptions"),proto.google.protobuf.MessageOptions.extensions={},proto.google.protobuf.MessageOptions.extensionsBinary={},proto.google.protobuf.FieldOptions=function(be){e.Message.initialize(this,be,0,500,proto.google.protobuf.FieldOptions.repeatedFields_,null)},ye.inherits(proto.google.protobuf.FieldOptions,e.Message),ye.DEBUG&&!COMPILED&&(proto.google.protobuf.FieldOptions.displayName="proto.google.protobuf.FieldOptions"),proto.google.protobuf.FieldOptions.extensions={},proto.google.protobuf.FieldOptions.extensionsBinary={},proto.google.protobuf.OneofOptions=function(be){e.Message.initialize(this,be,0,500,proto.google.protobuf.OneofOptions.repeatedFields_,null)},ye.inherits(proto.google.protobuf.OneofOptions,e.Message),ye.DEBUG&&!COMPILED&&(proto.google.protobuf.OneofOptions.displayName="proto.google.protobuf.OneofOptions"),proto.google.protobuf.OneofOptions.extensions={},proto.google.protobuf.OneofOptions.extensionsBinary={},proto.google.protobuf.EnumOptions=function(be){e.Message.initialize(this,be,0,500,proto.google.protobuf.EnumOptions.repeatedFields_,null)},ye.inherits(proto.google.protobuf.EnumOptions,e.Message),ye.DEBUG&&!COMPILED&&(proto.google.protobuf.EnumOptions.displayName="proto.google.protobuf.EnumOptions"),proto.google.protobuf.EnumOptions.extensions={},proto.google.protobuf.EnumOptions.extensionsBinary={},proto.google.protobuf.EnumValueOptions=function(be){e.Message.initialize(this,be,0,500,proto.google.protobuf.EnumValueOptions.repeatedFields_,null)},ye.inherits(proto.google.protobuf.EnumValueOptions,e.Message),ye.DEBUG&&!COMPILED&&(proto.google.protobuf.EnumValueOptions.displayName="proto.google.protobuf.EnumValueOptions"),proto.google.protobuf.EnumValueOptions.extensions={},proto.google.protobuf.EnumValueOptions.extensionsBinary={},proto.google.protobuf.ServiceOptions=function(be){e.Message.initialize(this,be,0,500,proto.google.protobuf.ServiceOptions.repeatedFields_,null)},ye.inherits(proto.google.protobuf.ServiceOptions,e.Message),ye.DEBUG&&!COMPILED&&(proto.google.protobuf.ServiceOptions.displayName="proto.google.protobuf.ServiceOptions"),proto.google.protobuf.ServiceOptions.extensions={},proto.google.protobuf.ServiceOptions.extensionsBinary={},proto.google.protobuf.MethodOptions=function(be){e.Message.initialize(this,be,0,500,proto.google.protobuf.MethodOptions.repeatedFields_,null)},ye.inherits(proto.google.protobuf.MethodOptions,e.Message),ye.DEBUG&&!COMPILED&&(proto.google.protobuf.MethodOptions.displayName="proto.google.protobuf.MethodOptions"),proto.google.protobuf.MethodOptions.extensions={},proto.google.protobuf.MethodOptions.extensionsBinary={},proto.google.protobuf.UninterpretedOption=function(be){e.Message.initialize(this,be,0,-1,proto.google.protobuf.UninterpretedOption.repeatedFields_,null)},ye.inherits(proto.google.protobuf.UninterpretedOption,e.Message),ye.DEBUG&&!COMPILED&&(proto.google.protobuf.UninterpretedOption.displayName="proto.google.protobuf.UninterpretedOption"),proto.google.protobuf.UninterpretedOption.NamePart=function(be){e.Message.initialize(this,be,0,-1,null,null)},ye.inherits(proto.google.protobuf.UninterpretedOption.NamePart,e.Message),ye.DEBUG&&!COMPILED&&(proto.google.protobuf.UninterpretedOption.NamePart.displayName="proto.google.protobuf.UninterpretedOption.NamePart"),proto.google.protobuf.SourceCodeInfo=function(be){e.Message.initialize(this,be,0,-1,proto.google.protobuf.SourceCodeInfo.repeatedFields_,null)},ye.inherits(proto.google.protobuf.SourceCodeInfo,e.Message),ye.DEBUG&&!COMPILED&&(proto.google.protobuf.SourceCodeInfo.displayName="proto.google.protobuf.SourceCodeInfo"),proto.google.protobuf.SourceCodeInfo.Location=function(be){e.Message.initialize(this,be,0,-1,proto.google.protobuf.SourceCodeInfo.Location.repeatedFields_,null)},ye.inherits(proto.google.protobuf.SourceCodeInfo.Location,e.Message),ye.DEBUG&&!COMPILED&&(proto.google.protobuf.SourceCodeInfo.Location.displayName="proto.google.protobuf.SourceCodeInfo.Location"),proto.google.protobuf.GeneratedCodeInfo=function(be){e.Message.initialize(this,be,0,-1,proto.google.protobuf.GeneratedCodeInfo.repeatedFields_,null)},ye.inherits(proto.google.protobuf.GeneratedCodeInfo,e.Message),ye.DEBUG&&!COMPILED&&(proto.google.protobuf.GeneratedCodeInfo.displayName="proto.google.protobuf.GeneratedCodeInfo"),proto.google.protobuf.GeneratedCodeInfo.Annotation=function(be){e.Message.initialize(this,be,0,-1,proto.google.protobuf.GeneratedCodeInfo.Annotation.repeatedFields_,null)},ye.inherits(proto.google.protobuf.GeneratedCodeInfo.Annotation,e.Message),ye.DEBUG&&!COMPILED&&(proto.google.protobuf.GeneratedCodeInfo.Annotation.displayName="proto.google.protobuf.GeneratedCodeInfo.Annotation"),proto.google.protobuf.FileDescriptorSet.repeatedFields_=[1],e.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.FileDescriptorSet.prototype.toObject=function(be){return proto.google.protobuf.FileDescriptorSet.toObject(be,this)},proto.google.protobuf.FileDescriptorSet.toObject=function(be,ve){var Ee={fileList:e.Message.toObjectList(ve.getFileList(),proto.google.protobuf.FileDescriptorProto.toObject,be)};return be&&(Ee.$jspbMessageInstance=ve),Ee}),proto.google.protobuf.FileDescriptorSet.deserializeBinary=function(be){var ve=new e.BinaryReader(be),Ee=new proto.google.protobuf.FileDescriptorSet;return proto.google.protobuf.FileDescriptorSet.deserializeBinaryFromReader(Ee,ve)},proto.google.protobuf.FileDescriptorSet.deserializeBinaryFromReader=function(be,ve){for(;ve.nextField()&&!ve.isEndGroup();){var Ee=ve.getFieldNumber();switch(Ee){case 1:var Oe=new proto.google.protobuf.FileDescriptorProto;ve.readMessage(Oe,proto.google.protobuf.FileDescriptorProto.deserializeBinaryFromReader),be.addFile(Oe);break;default:ve.skipField();break}}return be},proto.google.protobuf.FileDescriptorSet.prototype.serializeBinary=function(){var be=new e.BinaryWriter;return proto.google.protobuf.FileDescriptorSet.serializeBinaryToWriter(this,be),be.getResultBuffer()},proto.google.protobuf.FileDescriptorSet.serializeBinaryToWriter=function(be,ve){var Ee=void 0;Ee=be.getFileList(),Ee.length>0&&ve.writeRepeatedMessage(1,Ee,proto.google.protobuf.FileDescriptorProto.serializeBinaryToWriter)},proto.google.protobuf.FileDescriptorSet.prototype.getFileList=function(){return e.Message.getRepeatedWrapperField(this,proto.google.protobuf.FileDescriptorProto,1)},proto.google.protobuf.FileDescriptorSet.prototype.setFileList=function(be){return e.Message.setRepeatedWrapperField(this,1,be)},proto.google.protobuf.FileDescriptorSet.prototype.addFile=function(be,ve){return e.Message.addToRepeatedWrapperField(this,1,be,proto.google.protobuf.FileDescriptorProto,ve)},proto.google.protobuf.FileDescriptorSet.prototype.clearFileList=function(){return this.setFileList([])},proto.google.protobuf.FileDescriptorProto.repeatedFields_=[3,10,11,4,5,6,7],e.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.FileDescriptorProto.prototype.toObject=function(be){return proto.google.protobuf.FileDescriptorProto.toObject(be,this)},proto.google.protobuf.FileDescriptorProto.toObject=function(be,ve){var Ee,Oe={name:(Ee=e.Message.getField(ve,1))==null?void 0:Ee,pb_package:(Ee=e.Message.getField(ve,2))==null?void 0:Ee,dependencyList:(Ee=e.Message.getRepeatedField(ve,3))==null?void 0:Ee,publicDependencyList:(Ee=e.Message.getRepeatedField(ve,10))==null?void 0:Ee,weakDependencyList:(Ee=e.Message.getRepeatedField(ve,11))==null?void 0:Ee,messageTypeList:e.Message.toObjectList(ve.getMessageTypeList(),proto.google.protobuf.DescriptorProto.toObject,be),enumTypeList:e.Message.toObjectList(ve.getEnumTypeList(),proto.google.protobuf.EnumDescriptorProto.toObject,be),serviceList:e.Message.toObjectList(ve.getServiceList(),proto.google.protobuf.ServiceDescriptorProto.toObject,be),extensionList:e.Message.toObjectList(ve.getExtensionList(),proto.google.protobuf.FieldDescriptorProto.toObject,be),options:(Ee=ve.getOptions())&&proto.google.protobuf.FileOptions.toObject(be,Ee),sourceCodeInfo:(Ee=ve.getSourceCodeInfo())&&proto.google.protobuf.SourceCodeInfo.toObject(be,Ee),syntax:(Ee=e.Message.getField(ve,12))==null?void 0:Ee};return be&&(Oe.$jspbMessageInstance=ve),Oe}),proto.google.protobuf.FileDescriptorProto.deserializeBinary=function(be){var ve=new e.BinaryReader(be),Ee=new proto.google.protobuf.FileDescriptorProto;return proto.google.protobuf.FileDescriptorProto.deserializeBinaryFromReader(Ee,ve)},proto.google.protobuf.FileDescriptorProto.deserializeBinaryFromReader=function(be,ve){for(;ve.nextField()&&!ve.isEndGroup();){var Ee=ve.getFieldNumber();switch(Ee){case 1:var gr=ve.readString();be.setName(gr);break;case 2:var gr=ve.readString();be.setPackage(gr);break;case 3:var gr=ve.readString();be.addDependency(gr);break;case 10:for(var xe=ve.isDelimited()?ve.readPackedInt32():[ve.readInt32()],Oe=0;Oe<xe.length;Oe++)be.addPublicDependency(xe[Oe]);break;case 11:for(var xe=ve.isDelimited()?ve.readPackedInt32():[ve.readInt32()],Oe=0;Oe<xe.length;Oe++)be.addWeakDependency(xe[Oe]);break;case 4:var gr=new proto.google.protobuf.DescriptorProto;ve.readMessage(gr,proto.google.protobuf.DescriptorProto.deserializeBinaryFromReader),be.addMessageType(gr);break;case 5:var gr=new proto.google.protobuf.EnumDescriptorProto;ve.readMessage(gr,proto.google.protobuf.EnumDescriptorProto.deserializeBinaryFromReader),be.addEnumType(gr);break;case 6:var gr=new proto.google.protobuf.ServiceDescriptorProto;ve.readMessage(gr,proto.google.protobuf.ServiceDescriptorProto.deserializeBinaryFromReader),be.addService(gr);break;case 7:var gr=new proto.google.protobuf.FieldDescriptorProto;ve.readMessage(gr,proto.google.protobuf.FieldDescriptorProto.deserializeBinaryFromReader),be.addExtension$(gr);break;case 8:var gr=new proto.google.protobuf.FileOptions;ve.readMessage(gr,proto.google.protobuf.FileOptions.deserializeBinaryFromReader),be.setOptions(gr);break;case 9:var gr=new proto.google.protobuf.SourceCodeInfo;ve.readMessage(gr,proto.google.protobuf.SourceCodeInfo.deserializeBinaryFromReader),be.setSourceCodeInfo(gr);break;case 12:var gr=ve.readString();be.setSyntax(gr);break;default:ve.skipField();break}}return be},proto.google.protobuf.FileDescriptorProto.prototype.serializeBinary=function(){var be=new e.BinaryWriter;return proto.google.protobuf.FileDescriptorProto.serializeBinaryToWriter(this,be),be.getResultBuffer()},proto.google.protobuf.FileDescriptorProto.serializeBinaryToWriter=function(be,ve){var Ee=void 0;Ee=e.Message.getField(be,1),Ee!=null&&ve.writeString(1,Ee),Ee=e.Message.getField(be,2),Ee!=null&&ve.writeString(2,Ee),Ee=be.getDependencyList(),Ee.length>0&&ve.writeRepeatedString(3,Ee),Ee=be.getPublicDependencyList(),Ee.length>0&&ve.writeRepeatedInt32(10,Ee),Ee=be.getWeakDependencyList(),Ee.length>0&&ve.writeRepeatedInt32(11,Ee),Ee=be.getMessageTypeList(),Ee.length>0&&ve.writeRepeatedMessage(4,Ee,proto.google.protobuf.DescriptorProto.serializeBinaryToWriter),Ee=be.getEnumTypeList(),Ee.length>0&&ve.writeRepeatedMessage(5,Ee,proto.google.protobuf.EnumDescriptorProto.serializeBinaryToWriter),Ee=be.getServiceList(),Ee.length>0&&ve.writeRepeatedMessage(6,Ee,proto.google.protobuf.ServiceDescriptorProto.serializeBinaryToWriter),Ee=be.getExtensionList(),Ee.length>0&&ve.writeRepeatedMessage(7,Ee,proto.google.protobuf.FieldDescriptorProto.serializeBinaryToWriter),Ee=be.getOptions(),Ee!=null&&ve.writeMessage(8,Ee,proto.google.protobuf.FileOptions.serializeBinaryToWriter),Ee=be.getSourceCodeInfo(),Ee!=null&&ve.writeMessage(9,Ee,proto.google.protobuf.SourceCodeInfo.serializeBinaryToWriter),Ee=e.Message.getField(be,12),Ee!=null&&ve.writeString(12,Ee)},proto.google.protobuf.FileDescriptorProto.prototype.getName=function(){return e.Message.getFieldWithDefault(this,1,"")},proto.google.protobuf.FileDescriptorProto.prototype.setName=function(be){return e.Message.setField(this,1,be)},proto.google.protobuf.FileDescriptorProto.prototype.clearName=function(){return e.Message.setField(this,1,void 0)},proto.google.protobuf.FileDescriptorProto.prototype.hasName=function(){return e.Message.getField(this,1)!=null},proto.google.protobuf.FileDescriptorProto.prototype.getPackage=function(){return e.Message.getFieldWithDefault(this,2,"")},proto.google.protobuf.FileDescriptorProto.prototype.setPackage=function(be){return e.Message.setField(this,2,be)},proto.google.protobuf.FileDescriptorProto.prototype.clearPackage=function(){return e.Message.setField(this,2,void 0)},proto.google.protobuf.FileDescriptorProto.prototype.hasPackage=function(){return e.Message.getField(this,2)!=null},proto.google.protobuf.FileDescriptorProto.prototype.getDependencyList=function(){return e.Message.getRepeatedField(this,3)},proto.google.protobuf.FileDescriptorProto.prototype.setDependencyList=function(be){return e.Message.setField(this,3,be||[])},proto.google.protobuf.FileDescriptorProto.prototype.addDependency=function(be,ve){return e.Message.addToRepeatedField(this,3,be,ve)},proto.google.protobuf.FileDescriptorProto.prototype.clearDependencyList=function(){return this.setDependencyList([])},proto.google.protobuf.FileDescriptorProto.prototype.getPublicDependencyList=function(){return e.Message.getRepeatedField(this,10)},proto.google.protobuf.FileDescriptorProto.prototype.setPublicDependencyList=function(be){return e.Message.setField(this,10,be||[])},proto.google.protobuf.FileDescriptorProto.prototype.addPublicDependency=function(be,ve){return e.Message.addToRepeatedField(this,10,be,ve)},proto.google.protobuf.FileDescriptorProto.prototype.clearPublicDependencyList=function(){return this.setPublicDependencyList([])},proto.google.protobuf.FileDescriptorProto.prototype.getWeakDependencyList=function(){return e.Message.getRepeatedField(this,11)},proto.google.protobuf.FileDescriptorProto.prototype.setWeakDependencyList=function(be){return e.Message.setField(this,11,be||[])},proto.google.protobuf.FileDescriptorProto.prototype.addWeakDependency=function(be,ve){return e.Message.addToRepeatedField(this,11,be,ve)},proto.google.protobuf.FileDescriptorProto.prototype.clearWeakDependencyList=function(){return this.setWeakDependencyList([])},proto.google.protobuf.FileDescriptorProto.prototype.getMessageTypeList=function(){return e.Message.getRepeatedWrapperField(this,proto.google.protobuf.DescriptorProto,4)},proto.google.protobuf.FileDescriptorProto.prototype.setMessageTypeList=function(be){return e.Message.setRepeatedWrapperField(this,4,be)},proto.google.protobuf.FileDescriptorProto.prototype.addMessageType=function(be,ve){return e.Message.addToRepeatedWrapperField(this,4,be,proto.google.protobuf.DescriptorProto,ve)},proto.google.protobuf.FileDescriptorProto.prototype.clearMessageTypeList=function(){return this.setMessageTypeList([])},proto.google.protobuf.FileDescriptorProto.prototype.getEnumTypeList=function(){return e.Message.getRepeatedWrapperField(this,proto.google.protobuf.EnumDescriptorProto,5)},proto.google.protobuf.FileDescriptorProto.prototype.setEnumTypeList=function(be){return e.Message.setRepeatedWrapperField(this,5,be)},proto.google.protobuf.FileDescriptorProto.prototype.addEnumType=function(be,ve){return e.Message.addToRepeatedWrapperField(this,5,be,proto.google.protobuf.EnumDescriptorProto,ve)},proto.google.protobuf.FileDescriptorProto.prototype.clearEnumTypeList=function(){return this.setEnumTypeList([])},proto.google.protobuf.FileDescriptorProto.prototype.getServiceList=function(){return e.Message.getRepeatedWrapperField(this,proto.google.protobuf.ServiceDescriptorProto,6)},proto.google.protobuf.FileDescriptorProto.prototype.setServiceList=function(be){return e.Message.setRepeatedWrapperField(this,6,be)},proto.google.protobuf.FileDescriptorProto.prototype.addService=function(be,ve){return e.Message.addToRepeatedWrapperField(this,6,be,proto.google.protobuf.ServiceDescriptorProto,ve)},proto.google.protobuf.FileDescriptorProto.prototype.clearServiceList=function(){return this.setServiceList([])},proto.google.protobuf.FileDescriptorProto.prototype.getExtensionList=function(){return e.Message.getRepeatedWrapperField(this,proto.google.protobuf.FieldDescriptorProto,7)},proto.google.protobuf.FileDescriptorProto.prototype.setExtensionList=function(be){return e.Message.setRepeatedWrapperField(this,7,be)},proto.google.protobuf.FileDescriptorProto.prototype.addExtension$=function(be,ve){return e.Message.addToRepeatedWrapperField(this,7,be,proto.google.protobuf.FieldDescriptorProto,ve)},proto.google.protobuf.FileDescriptorProto.prototype.clearExtensionList=function(){return this.setExtensionList([])},proto.google.protobuf.FileDescriptorProto.prototype.getOptions=function(){return e.Message.getWrapperField(this,proto.google.protobuf.FileOptions,8)},proto.google.protobuf.FileDescriptorProto.prototype.setOptions=function(be){return e.Message.setWrapperField(this,8,be)},proto.google.protobuf.FileDescriptorProto.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.google.protobuf.FileDescriptorProto.prototype.hasOptions=function(){return e.Message.getField(this,8)!=null},proto.google.protobuf.FileDescriptorProto.prototype.getSourceCodeInfo=function(){return e.Message.getWrapperField(this,proto.google.protobuf.SourceCodeInfo,9)},proto.google.protobuf.FileDescriptorProto.prototype.setSourceCodeInfo=function(be){return e.Message.setWrapperField(this,9,be)},proto.google.protobuf.FileDescriptorProto.prototype.clearSourceCodeInfo=function(){return this.setSourceCodeInfo(void 0)},proto.google.protobuf.FileDescriptorProto.prototype.hasSourceCodeInfo=function(){return e.Message.getField(this,9)!=null},proto.google.protobuf.FileDescriptorProto.prototype.getSyntax=function(){return e.Message.getFieldWithDefault(this,12,"")},proto.google.protobuf.FileDescriptorProto.prototype.setSyntax=function(be){return e.Message.setField(this,12,be)},proto.google.protobuf.FileDescriptorProto.prototype.clearSyntax=function(){return e.Message.setField(this,12,void 0)},proto.google.protobuf.FileDescriptorProto.prototype.hasSyntax=function(){return e.Message.getField(this,12)!=null},proto.google.protobuf.DescriptorProto.repeatedFields_=[2,6,3,4,5,8,9,10],e.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.DescriptorProto.prototype.toObject=function(be){return proto.google.protobuf.DescriptorProto.toObject(be,this)},proto.google.protobuf.DescriptorProto.toObject=function(be,ve){var Ee,Oe={name:(Ee=e.Message.getField(ve,1))==null?void 0:Ee,fieldList:e.Message.toObjectList(ve.getFieldList(),proto.google.protobuf.FieldDescriptorProto.toObject,be),extensionList:e.Message.toObjectList(ve.getExtensionList(),proto.google.protobuf.FieldDescriptorProto.toObject,be),nestedTypeList:e.Message.toObjectList(ve.getNestedTypeList(),proto.google.protobuf.DescriptorProto.toObject,be),enumTypeList:e.Message.toObjectList(ve.getEnumTypeList(),proto.google.protobuf.EnumDescriptorProto.toObject,be),extensionRangeList:e.Message.toObjectList(ve.getExtensionRangeList(),proto.google.protobuf.DescriptorProto.ExtensionRange.toObject,be),oneofDeclList:e.Message.toObjectList(ve.getOneofDeclList(),proto.google.protobuf.OneofDescriptorProto.toObject,be),options:(Ee=ve.getOptions())&&proto.google.protobuf.MessageOptions.toObject(be,Ee),reservedRangeList:e.Message.toObjectList(ve.getReservedRangeList(),proto.google.protobuf.DescriptorProto.ReservedRange.toObject,be),reservedNameList:(Ee=e.Message.getRepeatedField(ve,10))==null?void 0:Ee};return be&&(Oe.$jspbMessageInstance=ve),Oe}),proto.google.protobuf.DescriptorProto.deserializeBinary=function(be){var ve=new e.BinaryReader(be),Ee=new proto.google.protobuf.DescriptorProto;return proto.google.protobuf.DescriptorProto.deserializeBinaryFromReader(Ee,ve)},proto.google.protobuf.DescriptorProto.deserializeBinaryFromReader=function(be,ve){for(;ve.nextField()&&!ve.isEndGroup();){var Ee=ve.getFieldNumber();switch(Ee){case 1:var Oe=ve.readString();be.setName(Oe);break;case 2:var Oe=new proto.google.protobuf.FieldDescriptorProto;ve.readMessage(Oe,proto.google.protobuf.FieldDescriptorProto.deserializeBinaryFromReader),be.addField(Oe);break;case 6:var Oe=new proto.google.protobuf.FieldDescriptorProto;ve.readMessage(Oe,proto.google.protobuf.FieldDescriptorProto.deserializeBinaryFromReader),be.addExtension$(Oe);break;case 3:var Oe=new proto.google.protobuf.DescriptorProto;ve.readMessage(Oe,proto.google.protobuf.DescriptorProto.deserializeBinaryFromReader),be.addNestedType(Oe);break;case 4:var Oe=new proto.google.protobuf.EnumDescriptorProto;ve.readMessage(Oe,proto.google.protobuf.EnumDescriptorProto.deserializeBinaryFromReader),be.addEnumType(Oe);break;case 5:var Oe=new proto.google.protobuf.DescriptorProto.ExtensionRange;ve.readMessage(Oe,proto.google.protobuf.DescriptorProto.ExtensionRange.deserializeBinaryFromReader),be.addExtensionRange(Oe);break;case 8:var Oe=new proto.google.protobuf.OneofDescriptorProto;ve.readMessage(Oe,proto.google.protobuf.OneofDescriptorProto.deserializeBinaryFromReader),be.addOneofDecl(Oe);break;case 7:var Oe=new proto.google.protobuf.MessageOptions;ve.readMessage(Oe,proto.google.protobuf.MessageOptions.deserializeBinaryFromReader),be.setOptions(Oe);break;case 9:var Oe=new proto.google.protobuf.DescriptorProto.ReservedRange;ve.readMessage(Oe,proto.google.protobuf.DescriptorProto.ReservedRange.deserializeBinaryFromReader),be.addReservedRange(Oe);break;case 10:var Oe=ve.readString();be.addReservedName(Oe);break;default:ve.skipField();break}}return be},proto.google.protobuf.DescriptorProto.prototype.serializeBinary=function(){var be=new e.BinaryWriter;return proto.google.protobuf.DescriptorProto.serializeBinaryToWriter(this,be),be.getResultBuffer()},proto.google.protobuf.DescriptorProto.serializeBinaryToWriter=function(be,ve){var Ee=void 0;Ee=e.Message.getField(be,1),Ee!=null&&ve.writeString(1,Ee),Ee=be.getFieldList(),Ee.length>0&&ve.writeRepeatedMessage(2,Ee,proto.google.protobuf.FieldDescriptorProto.serializeBinaryToWriter),Ee=be.getExtensionList(),Ee.length>0&&ve.writeRepeatedMessage(6,Ee,proto.google.protobuf.FieldDescriptorProto.serializeBinaryToWriter),Ee=be.getNestedTypeList(),Ee.length>0&&ve.writeRepeatedMessage(3,Ee,proto.google.protobuf.DescriptorProto.serializeBinaryToWriter),Ee=be.getEnumTypeList(),Ee.length>0&&ve.writeRepeatedMessage(4,Ee,proto.google.protobuf.EnumDescriptorProto.serializeBinaryToWriter),Ee=be.getExtensionRangeList(),Ee.length>0&&ve.writeRepeatedMessage(5,Ee,proto.google.protobuf.DescriptorProto.ExtensionRange.serializeBinaryToWriter),Ee=be.getOneofDeclList(),Ee.length>0&&ve.writeRepeatedMessage(8,Ee,proto.google.protobuf.OneofDescriptorProto.serializeBinaryToWriter),Ee=be.getOptions(),Ee!=null&&ve.writeMessage(7,Ee,proto.google.protobuf.MessageOptions.serializeBinaryToWriter),Ee=be.getReservedRangeList(),Ee.length>0&&ve.writeRepeatedMessage(9,Ee,proto.google.protobuf.DescriptorProto.ReservedRange.serializeBinaryToWriter),Ee=be.getReservedNameList(),Ee.length>0&&ve.writeRepeatedString(10,Ee)},e.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.DescriptorProto.ExtensionRange.prototype.toObject=function(be){return proto.google.protobuf.DescriptorProto.ExtensionRange.toObject(be,this)},proto.google.protobuf.DescriptorProto.ExtensionRange.toObject=function(be,ve){var Ee,Oe={start:(Ee=e.Message.getField(ve,1))==null?void 0:Ee,end:(Ee=e.Message.getField(ve,2))==null?void 0:Ee,options:(Ee=ve.getOptions())&&proto.google.protobuf.ExtensionRangeOptions.toObject(be,Ee)};return be&&(Oe.$jspbMessageInstance=ve),Oe}),proto.google.protobuf.DescriptorProto.ExtensionRange.deserializeBinary=function(be){var ve=new e.BinaryReader(be),Ee=new proto.google.protobuf.DescriptorProto.ExtensionRange;return proto.google.protobuf.DescriptorProto.ExtensionRange.deserializeBinaryFromReader(Ee,ve)},proto.google.protobuf.DescriptorProto.ExtensionRange.deserializeBinaryFromReader=function(be,ve){for(;ve.nextField()&&!ve.isEndGroup();){var Ee=ve.getFieldNumber();switch(Ee){case 1:var Oe=ve.readInt32();be.setStart(Oe);break;case 2:var Oe=ve.readInt32();be.setEnd(Oe);break;case 3:var Oe=new proto.google.protobuf.ExtensionRangeOptions;ve.readMessage(Oe,proto.google.protobuf.ExtensionRangeOptions.deserializeBinaryFromReader),be.setOptions(Oe);break;default:ve.skipField();break}}return be},proto.google.protobuf.DescriptorProto.ExtensionRange.prototype.serializeBinary=function(){var be=new e.BinaryWriter;return proto.google.protobuf.DescriptorProto.ExtensionRange.serializeBinaryToWriter(this,be),be.getResultBuffer()},proto.google.protobuf.DescriptorProto.ExtensionRange.serializeBinaryToWriter=function(be,ve){var Ee=void 0;Ee=e.Message.getField(be,1),Ee!=null&&ve.writeInt32(1,Ee),Ee=e.Message.getField(be,2),Ee!=null&&ve.writeInt32(2,Ee),Ee=be.getOptions(),Ee!=null&&ve.writeMessage(3,Ee,proto.google.protobuf.ExtensionRangeOptions.serializeBinaryToWriter)},proto.google.protobuf.DescriptorProto.ExtensionRange.prototype.getStart=function(){return e.Message.getFieldWithDefault(this,1,0)},proto.google.protobuf.DescriptorProto.ExtensionRange.prototype.setStart=function(be){return e.Message.setField(this,1,be)},proto.google.protobuf.DescriptorProto.ExtensionRange.prototype.clearStart=function(){return e.Message.setField(this,1,void 0)},proto.google.protobuf.DescriptorProto.ExtensionRange.prototype.hasStart=function(){return e.Message.getField(this,1)!=null},proto.google.protobuf.DescriptorProto.ExtensionRange.prototype.getEnd=function(){return e.Message.getFieldWithDefault(this,2,0)},proto.google.protobuf.DescriptorProto.ExtensionRange.prototype.setEnd=function(be){return e.Message.setField(this,2,be)},proto.google.protobuf.DescriptorProto.ExtensionRange.prototype.clearEnd=function(){return e.Message.setField(this,2,void 0)},proto.google.protobuf.DescriptorProto.ExtensionRange.prototype.hasEnd=function(){return e.Message.getField(this,2)!=null},proto.google.protobuf.DescriptorProto.ExtensionRange.prototype.getOptions=function(){return e.Message.getWrapperField(this,proto.google.protobuf.ExtensionRangeOptions,3)},proto.google.protobuf.DescriptorProto.ExtensionRange.prototype.setOptions=function(be){return e.Message.setWrapperField(this,3,be)},proto.google.protobuf.DescriptorProto.ExtensionRange.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.google.protobuf.DescriptorProto.ExtensionRange.prototype.hasOptions=function(){return e.Message.getField(this,3)!=null},e.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.DescriptorProto.ReservedRange.prototype.toObject=function(be){return proto.google.protobuf.DescriptorProto.ReservedRange.toObject(be,this)},proto.google.protobuf.DescriptorProto.ReservedRange.toObject=function(be,ve){var Ee,Oe={start:(Ee=e.Message.getField(ve,1))==null?void 0:Ee,end:(Ee=e.Message.getField(ve,2))==null?void 0:Ee};return be&&(Oe.$jspbMessageInstance=ve),Oe}),proto.google.protobuf.DescriptorProto.ReservedRange.deserializeBinary=function(be){var ve=new e.BinaryReader(be),Ee=new proto.google.protobuf.DescriptorProto.ReservedRange;return proto.google.protobuf.DescriptorProto.ReservedRange.deserializeBinaryFromReader(Ee,ve)},proto.google.protobuf.DescriptorProto.ReservedRange.deserializeBinaryFromReader=function(be,ve){for(;ve.nextField()&&!ve.isEndGroup();){var Ee=ve.getFieldNumber();switch(Ee){case 1:var Oe=ve.readInt32();be.setStart(Oe);break;case 2:var Oe=ve.readInt32();be.setEnd(Oe);break;default:ve.skipField();break}}return be},proto.google.protobuf.DescriptorProto.ReservedRange.prototype.serializeBinary=function(){var be=new e.BinaryWriter;return proto.google.protobuf.DescriptorProto.ReservedRange.serializeBinaryToWriter(this,be),be.getResultBuffer()},proto.google.protobuf.DescriptorProto.ReservedRange.serializeBinaryToWriter=function(be,ve){var Ee=void 0;Ee=e.Message.getField(be,1),Ee!=null&&ve.writeInt32(1,Ee),Ee=e.Message.getField(be,2),Ee!=null&&ve.writeInt32(2,Ee)},proto.google.protobuf.DescriptorProto.ReservedRange.prototype.getStart=function(){return e.Message.getFieldWithDefault(this,1,0)},proto.google.protobuf.DescriptorProto.ReservedRange.prototype.setStart=function(be){return e.Message.setField(this,1,be)},proto.google.protobuf.DescriptorProto.ReservedRange.prototype.clearStart=function(){return e.Message.setField(this,1,void 0)},proto.google.protobuf.DescriptorProto.ReservedRange.prototype.hasStart=function(){return e.Message.getField(this,1)!=null},proto.google.protobuf.DescriptorProto.ReservedRange.prototype.getEnd=function(){return e.Message.getFieldWithDefault(this,2,0)},proto.google.protobuf.DescriptorProto.ReservedRange.prototype.setEnd=function(be){return e.Message.setField(this,2,be)},proto.google.protobuf.DescriptorProto.ReservedRange.prototype.clearEnd=function(){return e.Message.setField(this,2,void 0)},proto.google.protobuf.DescriptorProto.ReservedRange.prototype.hasEnd=function(){return e.Message.getField(this,2)!=null},proto.google.protobuf.DescriptorProto.prototype.getName=function(){return e.Message.getFieldWithDefault(this,1,"")},proto.google.protobuf.DescriptorProto.prototype.setName=function(be){return e.Message.setField(this,1,be)},proto.google.protobuf.DescriptorProto.prototype.clearName=function(){return e.Message.setField(this,1,void 0)},proto.google.protobuf.DescriptorProto.prototype.hasName=function(){return e.Message.getField(this,1)!=null},proto.google.protobuf.DescriptorProto.prototype.getFieldList=function(){return e.Message.getRepeatedWrapperField(this,proto.google.protobuf.FieldDescriptorProto,2)},proto.google.protobuf.DescriptorProto.prototype.setFieldList=function(be){return e.Message.setRepeatedWrapperField(this,2,be)},proto.google.protobuf.DescriptorProto.prototype.addField=function(be,ve){return e.Message.addToRepeatedWrapperField(this,2,be,proto.google.protobuf.FieldDescriptorProto,ve)},proto.google.protobuf.DescriptorProto.prototype.clearFieldList=function(){return this.setFieldList([])},proto.google.protobuf.DescriptorProto.prototype.getExtensionList=function(){return e.Message.getRepeatedWrapperField(this,proto.google.protobuf.FieldDescriptorProto,6)},proto.google.protobuf.DescriptorProto.prototype.setExtensionList=function(be){return e.Message.setRepeatedWrapperField(this,6,be)},proto.google.protobuf.DescriptorProto.prototype.addExtension$=function(be,ve){return e.Message.addToRepeatedWrapperField(this,6,be,proto.google.protobuf.FieldDescriptorProto,ve)},proto.google.protobuf.DescriptorProto.prototype.clearExtensionList=function(){return this.setExtensionList([])},proto.google.protobuf.DescriptorProto.prototype.getNestedTypeList=function(){return e.Message.getRepeatedWrapperField(this,proto.google.protobuf.DescriptorProto,3)},proto.google.protobuf.DescriptorProto.prototype.setNestedTypeList=function(be){return e.Message.setRepeatedWrapperField(this,3,be)},proto.google.protobuf.DescriptorProto.prototype.addNestedType=function(be,ve){return e.Message.addToRepeatedWrapperField(this,3,be,proto.google.protobuf.DescriptorProto,ve)},proto.google.protobuf.DescriptorProto.prototype.clearNestedTypeList=function(){return this.setNestedTypeList([])},proto.google.protobuf.DescriptorProto.prototype.getEnumTypeList=function(){return e.Message.getRepeatedWrapperField(this,proto.google.protobuf.EnumDescriptorProto,4)},proto.google.protobuf.DescriptorProto.prototype.setEnumTypeList=function(be){return e.Message.setRepeatedWrapperField(this,4,be)},proto.google.protobuf.DescriptorProto.prototype.addEnumType=function(be,ve){return e.Message.addToRepeatedWrapperField(this,4,be,proto.google.protobuf.EnumDescriptorProto,ve)},proto.google.protobuf.DescriptorProto.prototype.clearEnumTypeList=function(){return this.setEnumTypeList([])},proto.google.protobuf.DescriptorProto.prototype.getExtensionRangeList=function(){return e.Message.getRepeatedWrapperField(this,proto.google.protobuf.DescriptorProto.ExtensionRange,5)},proto.google.protobuf.DescriptorProto.prototype.setExtensionRangeList=function(be){return e.Message.setRepeatedWrapperField(this,5,be)},proto.google.protobuf.DescriptorProto.prototype.addExtensionRange=function(be,ve){return e.Message.addToRepeatedWrapperField(this,5,be,proto.google.protobuf.DescriptorProto.ExtensionRange,ve)},proto.google.protobuf.DescriptorProto.prototype.clearExtensionRangeList=function(){return this.setExtensionRangeList([])},proto.google.protobuf.DescriptorProto.prototype.getOneofDeclList=function(){return e.Message.getRepeatedWrapperField(this,proto.google.protobuf.OneofDescriptorProto,8)},proto.google.protobuf.DescriptorProto.prototype.setOneofDeclList=function(be){return e.Message.setRepeatedWrapperField(this,8,be)},proto.google.protobuf.DescriptorProto.prototype.addOneofDecl=function(be,ve){return e.Message.addToRepeatedWrapperField(this,8,be,proto.google.protobuf.OneofDescriptorProto,ve)},proto.google.protobuf.DescriptorProto.prototype.clearOneofDeclList=function(){return this.setOneofDeclList([])},proto.google.protobuf.DescriptorProto.prototype.getOptions=function(){return e.Message.getWrapperField(this,proto.google.protobuf.MessageOptions,7)},proto.google.protobuf.DescriptorProto.prototype.setOptions=function(be){return e.Message.setWrapperField(this,7,be)},proto.google.protobuf.DescriptorProto.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.google.protobuf.DescriptorProto.prototype.hasOptions=function(){return e.Message.getField(this,7)!=null},proto.google.protobuf.DescriptorProto.prototype.getReservedRangeList=function(){return e.Message.getRepeatedWrapperField(this,proto.google.protobuf.DescriptorProto.ReservedRange,9)},proto.google.protobuf.DescriptorProto.prototype.setReservedRangeList=function(be){return e.Message.setRepeatedWrapperField(this,9,be)},proto.google.protobuf.DescriptorProto.prototype.addReservedRange=function(be,ve){return e.Message.addToRepeatedWrapperField(this,9,be,proto.google.protobuf.DescriptorProto.ReservedRange,ve)},proto.google.protobuf.DescriptorProto.prototype.clearReservedRangeList=function(){return this.setReservedRangeList([])},proto.google.protobuf.DescriptorProto.prototype.getReservedNameList=function(){return e.Message.getRepeatedField(this,10)},proto.google.protobuf.DescriptorProto.prototype.setReservedNameList=function(be){return e.Message.setField(this,10,be||[])},proto.google.protobuf.DescriptorProto.prototype.addReservedName=function(be,ve){return e.Message.addToRepeatedField(this,10,be,ve)},proto.google.protobuf.DescriptorProto.prototype.clearReservedNameList=function(){return this.setReservedNameList([])},proto.google.protobuf.ExtensionRangeOptions.repeatedFields_=[999],e.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.ExtensionRangeOptions.prototype.toObject=function(be){return proto.google.protobuf.ExtensionRangeOptions.toObject(be,this)},proto.google.protobuf.ExtensionRangeOptions.toObject=function(be,ve){var Ee={uninterpretedOptionList:e.Message.toObjectList(ve.getUninterpretedOptionList(),proto.google.protobuf.UninterpretedOption.toObject,be)};return e.Message.toObjectExtension(ve,Ee,proto.google.protobuf.ExtensionRangeOptions.extensions,proto.google.protobuf.ExtensionRangeOptions.prototype.getExtension,be),be&&(Ee.$jspbMessageInstance=ve),Ee}),proto.google.protobuf.ExtensionRangeOptions.deserializeBinary=function(be){var ve=new e.BinaryReader(be),Ee=new proto.google.protobuf.ExtensionRangeOptions;return proto.google.protobuf.ExtensionRangeOptions.deserializeBinaryFromReader(Ee,ve)},proto.google.protobuf.ExtensionRangeOptions.deserializeBinaryFromReader=function(be,ve){for(;ve.nextField()&&!ve.isEndGroup();){var Ee=ve.getFieldNumber();switch(Ee){case 999:var Oe=new proto.google.protobuf.UninterpretedOption;ve.readMessage(Oe,proto.google.protobuf.UninterpretedOption.deserializeBinaryFromReader),be.addUninterpretedOption(Oe);break;default:e.Message.readBinaryExtension(be,ve,proto.google.protobuf.ExtensionRangeOptions.extensionsBinary,proto.google.protobuf.ExtensionRangeOptions.prototype.getExtension,proto.google.protobuf.ExtensionRangeOptions.prototype.setExtension);break}}return be},proto.google.protobuf.ExtensionRangeOptions.prototype.serializeBinary=function(){var be=new e.BinaryWriter;return proto.google.protobuf.ExtensionRangeOptions.serializeBinaryToWriter(this,be),be.getResultBuffer()},proto.google.protobuf.ExtensionRangeOptions.serializeBinaryToWriter=function(be,ve){var Ee=void 0;Ee=be.getUninterpretedOptionList(),Ee.length>0&&ve.writeRepeatedMessage(999,Ee,proto.google.protobuf.UninterpretedOption.serializeBinaryToWriter),e.Message.serializeBinaryExtensions(be,ve,proto.google.protobuf.ExtensionRangeOptions.extensionsBinary,proto.google.protobuf.ExtensionRangeOptions.prototype.getExtension)},proto.google.protobuf.ExtensionRangeOptions.prototype.getUninterpretedOptionList=function(){return e.Message.getRepeatedWrapperField(this,proto.google.protobuf.UninterpretedOption,999)},proto.google.protobuf.ExtensionRangeOptions.prototype.setUninterpretedOptionList=function(be){return e.Message.setRepeatedWrapperField(this,999,be)},proto.google.protobuf.ExtensionRangeOptions.prototype.addUninterpretedOption=function(be,ve){return e.Message.addToRepeatedWrapperField(this,999,be,proto.google.protobuf.UninterpretedOption,ve)},proto.google.protobuf.ExtensionRangeOptions.prototype.clearUninterpretedOptionList=function(){return this.setUninterpretedOptionList([])},e.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.FieldDescriptorProto.prototype.toObject=function(be){return proto.google.protobuf.FieldDescriptorProto.toObject(be,this)},proto.google.protobuf.FieldDescriptorProto.toObject=function(be,ve){var Ee,Oe={name:(Ee=e.Message.getField(ve,1))==null?void 0:Ee,number:(Ee=e.Message.getField(ve,3))==null?void 0:Ee,label:(Ee=e.Message.getField(ve,4))==null?void 0:Ee,type:(Ee=e.Message.getField(ve,5))==null?void 0:Ee,typeName:(Ee=e.Message.getField(ve,6))==null?void 0:Ee,extendee:(Ee=e.Message.getField(ve,2))==null?void 0:Ee,defaultValue:(Ee=e.Message.getField(ve,7))==null?void 0:Ee,oneofIndex:(Ee=e.Message.getField(ve,9))==null?void 0:Ee,jsonName:(Ee=e.Message.getField(ve,10))==null?void 0:Ee,options:(Ee=ve.getOptions())&&proto.google.protobuf.FieldOptions.toObject(be,Ee),proto3Optional:(Ee=e.Message.getBooleanField(ve,17))==null?void 0:Ee};return be&&(Oe.$jspbMessageInstance=ve),Oe}),proto.google.protobuf.FieldDescriptorProto.deserializeBinary=function(be){var ve=new e.BinaryReader(be),Ee=new proto.google.protobuf.FieldDescriptorProto;return proto.google.protobuf.FieldDescriptorProto.deserializeBinaryFromReader(Ee,ve)},proto.google.protobuf.FieldDescriptorProto.deserializeBinaryFromReader=function(be,ve){for(;ve.nextField()&&!ve.isEndGroup();){var Ee=ve.getFieldNumber();switch(Ee){case 1:var Oe=ve.readString();be.setName(Oe);break;case 3:var Oe=ve.readInt32();be.setNumber(Oe);break;case 4:var Oe=ve.readEnum();be.setLabel(Oe);break;case 5:var Oe=ve.readEnum();be.setType(Oe);break;case 6:var Oe=ve.readString();be.setTypeName(Oe);break;case 2:var Oe=ve.readString();be.setExtendee(Oe);break;case 7:var Oe=ve.readString();be.setDefaultValue(Oe);break;case 9:var Oe=ve.readInt32();be.setOneofIndex(Oe);break;case 10:var Oe=ve.readString();be.setJsonName(Oe);break;case 8:var Oe=new proto.google.protobuf.FieldOptions;ve.readMessage(Oe,proto.google.protobuf.FieldOptions.deserializeBinaryFromReader),be.setOptions(Oe);break;case 17:var Oe=ve.readBool();be.setProto3Optional(Oe);break;default:ve.skipField();break}}return be},proto.google.protobuf.FieldDescriptorProto.prototype.serializeBinary=function(){var be=new e.BinaryWriter;return proto.google.protobuf.FieldDescriptorProto.serializeBinaryToWriter(this,be),be.getResultBuffer()},proto.google.protobuf.FieldDescriptorProto.serializeBinaryToWriter=function(be,ve){var Ee=void 0;Ee=e.Message.getField(be,1),Ee!=null&&ve.writeString(1,Ee),Ee=e.Message.getField(be,3),Ee!=null&&ve.writeInt32(3,Ee),Ee=e.Message.getField(be,4),Ee!=null&&ve.writeEnum(4,Ee),Ee=e.Message.getField(be,5),Ee!=null&&ve.writeEnum(5,Ee),Ee=e.Message.getField(be,6),Ee!=null&&ve.writeString(6,Ee),Ee=e.Message.getField(be,2),Ee!=null&&ve.writeString(2,Ee),Ee=e.Message.getField(be,7),Ee!=null&&ve.writeString(7,Ee),Ee=e.Message.getField(be,9),Ee!=null&&ve.writeInt32(9,Ee),Ee=e.Message.getField(be,10),Ee!=null&&ve.writeString(10,Ee),Ee=be.getOptions(),Ee!=null&&ve.writeMessage(8,Ee,proto.google.protobuf.FieldOptions.serializeBinaryToWriter),Ee=e.Message.getField(be,17),Ee!=null&&ve.writeBool(17,Ee)},proto.google.protobuf.FieldDescriptorProto.Type={TYPE_DOUBLE:1,TYPE_FLOAT:2,TYPE_INT64:3,TYPE_UINT64:4,TYPE_INT32:5,TYPE_FIXED64:6,TYPE_FIXED32:7,TYPE_BOOL:8,TYPE_STRING:9,TYPE_GROUP:10,TYPE_MESSAGE:11,TYPE_BYTES:12,TYPE_UINT32:13,TYPE_ENUM:14,TYPE_SFIXED32:15,TYPE_SFIXED64:16,TYPE_SINT32:17,TYPE_SINT64:18},proto.google.protobuf.FieldDescriptorProto.Label={LABEL_OPTIONAL:1,LABEL_REQUIRED:2,LABEL_REPEATED:3},proto.google.protobuf.FieldDescriptorProto.prototype.getName=function(){return e.Message.getFieldWithDefault(this,1,"")},proto.google.protobuf.FieldDescriptorProto.prototype.setName=function(be){return e.Message.setField(this,1,be)},proto.google.protobuf.FieldDescriptorProto.prototype.clearName=function(){return e.Message.setField(this,1,void 0)},proto.google.protobuf.FieldDescriptorProto.prototype.hasName=function(){return e.Message.getField(this,1)!=null},proto.google.protobuf.FieldDescriptorProto.prototype.getNumber=function(){return e.Message.getFieldWithDefault(this,3,0)},proto.google.protobuf.FieldDescriptorProto.prototype.setNumber=function(be){return e.Message.setField(this,3,be)},proto.google.protobuf.FieldDescriptorProto.prototype.clearNumber=function(){return e.Message.setField(this,3,void 0)},proto.google.protobuf.FieldDescriptorProto.prototype.hasNumber=function(){return e.Message.getField(this,3)!=null},proto.google.protobuf.FieldDescriptorProto.prototype.getLabel=function(){return e.Message.getFieldWithDefault(this,4,1)},proto.google.protobuf.FieldDescriptorProto.prototype.setLabel=function(be){return e.Message.setField(this,4,be)},proto.google.protobuf.FieldDescriptorProto.prototype.clearLabel=function(){return e.Message.setField(this,4,void 0)},proto.google.protobuf.FieldDescriptorProto.prototype.hasLabel=function(){return e.Message.getField(this,4)!=null},proto.google.protobuf.FieldDescriptorProto.prototype.getType=function(){return e.Message.getFieldWithDefault(this,5,1)},proto.google.protobuf.FieldDescriptorProto.prototype.setType=function(be){return e.Message.setField(this,5,be)},proto.google.protobuf.FieldDescriptorProto.prototype.clearType=function(){return e.Message.setField(this,5,void 0)},proto.google.protobuf.FieldDescriptorProto.prototype.hasType=function(){return e.Message.getField(this,5)!=null},proto.google.protobuf.FieldDescriptorProto.prototype.getTypeName=function(){return e.Message.getFieldWithDefault(this,6,"")},proto.google.protobuf.FieldDescriptorProto.prototype.setTypeName=function(be){return e.Message.setField(this,6,be)},proto.google.protobuf.FieldDescriptorProto.prototype.clearTypeName=function(){return e.Message.setField(this,6,void 0)},proto.google.protobuf.FieldDescriptorProto.prototype.hasTypeName=function(){return e.Message.getField(this,6)!=null},proto.google.protobuf.FieldDescriptorProto.prototype.getExtendee=function(){return e.Message.getFieldWithDefault(this,2,"")},proto.google.protobuf.FieldDescriptorProto.prototype.setExtendee=function(be){return e.Message.setField(this,2,be)},proto.google.protobuf.FieldDescriptorProto.prototype.clearExtendee=function(){return e.Message.setField(this,2,void 0)},proto.google.protobuf.FieldDescriptorProto.prototype.hasExtendee=function(){return e.Message.getField(this,2)!=null},proto.google.protobuf.FieldDescriptorProto.prototype.getDefaultValue=function(){return e.Message.getFieldWithDefault(this,7,"")},proto.google.protobuf.FieldDescriptorProto.prototype.setDefaultValue=function(be){return e.Message.setField(this,7,be)},proto.google.protobuf.FieldDescriptorProto.prototype.clearDefaultValue=function(){return e.Message.setField(this,7,void 0)},proto.google.protobuf.FieldDescriptorProto.prototype.hasDefaultValue=function(){return e.Message.getField(this,7)!=null},proto.google.protobuf.FieldDescriptorProto.prototype.getOneofIndex=function(){return e.Message.getFieldWithDefault(this,9,0)},proto.google.protobuf.FieldDescriptorProto.prototype.setOneofIndex=function(be){return e.Message.setField(this,9,be)},proto.google.protobuf.FieldDescriptorProto.prototype.clearOneofIndex=function(){return e.Message.setField(this,9,void 0)},proto.google.protobuf.FieldDescriptorProto.prototype.hasOneofIndex=function(){return e.Message.getField(this,9)!=null},proto.google.protobuf.FieldDescriptorProto.prototype.getJsonName=function(){return e.Message.getFieldWithDefault(this,10,"")},proto.google.protobuf.FieldDescriptorProto.prototype.setJsonName=function(be){return e.Message.setField(this,10,be)},proto.google.protobuf.FieldDescriptorProto.prototype.clearJsonName=function(){return e.Message.setField(this,10,void 0)},proto.google.protobuf.FieldDescriptorProto.prototype.hasJsonName=function(){return e.Message.getField(this,10)!=null},proto.google.protobuf.FieldDescriptorProto.prototype.getOptions=function(){return e.Message.getWrapperField(this,proto.google.protobuf.FieldOptions,8)},proto.google.protobuf.FieldDescriptorProto.prototype.setOptions=function(be){return e.Message.setWrapperField(this,8,be)},proto.google.protobuf.FieldDescriptorProto.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.google.protobuf.FieldDescriptorProto.prototype.hasOptions=function(){return e.Message.getField(this,8)!=null},proto.google.protobuf.FieldDescriptorProto.prototype.getProto3Optional=function(){return e.Message.getBooleanFieldWithDefault(this,17,!1)},proto.google.protobuf.FieldDescriptorProto.prototype.setProto3Optional=function(be){return e.Message.setField(this,17,be)},proto.google.protobuf.FieldDescriptorProto.prototype.clearProto3Optional=function(){return e.Message.setField(this,17,void 0)},proto.google.protobuf.FieldDescriptorProto.prototype.hasProto3Optional=function(){return e.Message.getField(this,17)!=null},e.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.OneofDescriptorProto.prototype.toObject=function(be){return proto.google.protobuf.OneofDescriptorProto.toObject(be,this)},proto.google.protobuf.OneofDescriptorProto.toObject=function(be,ve){var Ee,Oe={name:(Ee=e.Message.getField(ve,1))==null?void 0:Ee,options:(Ee=ve.getOptions())&&proto.google.protobuf.OneofOptions.toObject(be,Ee)};return be&&(Oe.$jspbMessageInstance=ve),Oe}),proto.google.protobuf.OneofDescriptorProto.deserializeBinary=function(be){var ve=new e.BinaryReader(be),Ee=new proto.google.protobuf.OneofDescriptorProto;return proto.google.protobuf.OneofDescriptorProto.deserializeBinaryFromReader(Ee,ve)},proto.google.protobuf.OneofDescriptorProto.deserializeBinaryFromReader=function(be,ve){for(;ve.nextField()&&!ve.isEndGroup();){var Ee=ve.getFieldNumber();switch(Ee){case 1:var Oe=ve.readString();be.setName(Oe);break;case 2:var Oe=new proto.google.protobuf.OneofOptions;ve.readMessage(Oe,proto.google.protobuf.OneofOptions.deserializeBinaryFromReader),be.setOptions(Oe);break;default:ve.skipField();break}}return be},proto.google.protobuf.OneofDescriptorProto.prototype.serializeBinary=function(){var be=new e.BinaryWriter;return proto.google.protobuf.OneofDescriptorProto.serializeBinaryToWriter(this,be),be.getResultBuffer()},proto.google.protobuf.OneofDescriptorProto.serializeBinaryToWriter=function(be,ve){var Ee=void 0;Ee=e.Message.getField(be,1),Ee!=null&&ve.writeString(1,Ee),Ee=be.getOptions(),Ee!=null&&ve.writeMessage(2,Ee,proto.google.protobuf.OneofOptions.serializeBinaryToWriter)},proto.google.protobuf.OneofDescriptorProto.prototype.getName=function(){return e.Message.getFieldWithDefault(this,1,"")},proto.google.protobuf.OneofDescriptorProto.prototype.setName=function(be){return e.Message.setField(this,1,be)},proto.google.protobuf.OneofDescriptorProto.prototype.clearName=function(){return e.Message.setField(this,1,void 0)},proto.google.protobuf.OneofDescriptorProto.prototype.hasName=function(){return e.Message.getField(this,1)!=null},proto.google.protobuf.OneofDescriptorProto.prototype.getOptions=function(){return e.Message.getWrapperField(this,proto.google.protobuf.OneofOptions,2)},proto.google.protobuf.OneofDescriptorProto.prototype.setOptions=function(be){return e.Message.setWrapperField(this,2,be)},proto.google.protobuf.OneofDescriptorProto.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.google.protobuf.OneofDescriptorProto.prototype.hasOptions=function(){return e.Message.getField(this,2)!=null},proto.google.protobuf.EnumDescriptorProto.repeatedFields_=[2,4,5],e.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.EnumDescriptorProto.prototype.toObject=function(be){return proto.google.protobuf.EnumDescriptorProto.toObject(be,this)},proto.google.protobuf.EnumDescriptorProto.toObject=function(be,ve){var Ee,Oe={name:(Ee=e.Message.getField(ve,1))==null?void 0:Ee,valueList:e.Message.toObjectList(ve.getValueList(),proto.google.protobuf.EnumValueDescriptorProto.toObject,be),options:(Ee=ve.getOptions())&&proto.google.protobuf.EnumOptions.toObject(be,Ee),reservedRangeList:e.Message.toObjectList(ve.getReservedRangeList(),proto.google.protobuf.EnumDescriptorProto.EnumReservedRange.toObject,be),reservedNameList:(Ee=e.Message.getRepeatedField(ve,5))==null?void 0:Ee};return be&&(Oe.$jspbMessageInstance=ve),Oe}),proto.google.protobuf.EnumDescriptorProto.deserializeBinary=function(be){var ve=new e.BinaryReader(be),Ee=new proto.google.protobuf.EnumDescriptorProto;return proto.google.protobuf.EnumDescriptorProto.deserializeBinaryFromReader(Ee,ve)},proto.google.protobuf.EnumDescriptorProto.deserializeBinaryFromReader=function(be,ve){for(;ve.nextField()&&!ve.isEndGroup();){var Ee=ve.getFieldNumber();switch(Ee){case 1:var Oe=ve.readString();be.setName(Oe);break;case 2:var Oe=new proto.google.protobuf.EnumValueDescriptorProto;ve.readMessage(Oe,proto.google.protobuf.EnumValueDescriptorProto.deserializeBinaryFromReader),be.addValue(Oe);break;case 3:var Oe=new proto.google.protobuf.EnumOptions;ve.readMessage(Oe,proto.google.protobuf.EnumOptions.deserializeBinaryFromReader),be.setOptions(Oe);break;case 4:var Oe=new proto.google.protobuf.EnumDescriptorProto.EnumReservedRange;ve.readMessage(Oe,proto.google.protobuf.EnumDescriptorProto.EnumReservedRange.deserializeBinaryFromReader),be.addReservedRange(Oe);break;case 5:var Oe=ve.readString();be.addReservedName(Oe);break;default:ve.skipField();break}}return be},proto.google.protobuf.EnumDescriptorProto.prototype.serializeBinary=function(){var be=new e.BinaryWriter;return proto.google.protobuf.EnumDescriptorProto.serializeBinaryToWriter(this,be),be.getResultBuffer()},proto.google.protobuf.EnumDescriptorProto.serializeBinaryToWriter=function(be,ve){var Ee=void 0;Ee=e.Message.getField(be,1),Ee!=null&&ve.writeString(1,Ee),Ee=be.getValueList(),Ee.length>0&&ve.writeRepeatedMessage(2,Ee,proto.google.protobuf.EnumValueDescriptorProto.serializeBinaryToWriter),Ee=be.getOptions(),Ee!=null&&ve.writeMessage(3,Ee,proto.google.protobuf.EnumOptions.serializeBinaryToWriter),Ee=be.getReservedRangeList(),Ee.length>0&&ve.writeRepeatedMessage(4,Ee,proto.google.protobuf.EnumDescriptorProto.EnumReservedRange.serializeBinaryToWriter),Ee=be.getReservedNameList(),Ee.length>0&&ve.writeRepeatedString(5,Ee)},e.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.EnumDescriptorProto.EnumReservedRange.prototype.toObject=function(be){return proto.google.protobuf.EnumDescriptorProto.EnumReservedRange.toObject(be,this)},proto.google.protobuf.EnumDescriptorProto.EnumReservedRange.toObject=function(be,ve){var Ee,Oe={start:(Ee=e.Message.getField(ve,1))==null?void 0:Ee,end:(Ee=e.Message.getField(ve,2))==null?void 0:Ee};return be&&(Oe.$jspbMessageInstance=ve),Oe}),proto.google.protobuf.EnumDescriptorProto.EnumReservedRange.deserializeBinary=function(be){var ve=new e.BinaryReader(be),Ee=new proto.google.protobuf.EnumDescriptorProto.EnumReservedRange;return proto.google.protobuf.EnumDescriptorProto.EnumReservedRange.deserializeBinaryFromReader(Ee,ve)},proto.google.protobuf.EnumDescriptorProto.EnumReservedRange.deserializeBinaryFromReader=function(be,ve){for(;ve.nextField()&&!ve.isEndGroup();){var Ee=ve.getFieldNumber();switch(Ee){case 1:var Oe=ve.readInt32();be.setStart(Oe);break;case 2:var Oe=ve.readInt32();be.setEnd(Oe);break;default:ve.skipField();break}}return be},proto.google.protobuf.EnumDescriptorProto.EnumReservedRange.prototype.serializeBinary=function(){var be=new e.BinaryWriter;return proto.google.protobuf.EnumDescriptorProto.EnumReservedRange.serializeBinaryToWriter(this,be),be.getResultBuffer()},proto.google.protobuf.EnumDescriptorProto.EnumReservedRange.serializeBinaryToWriter=function(be,ve){var Ee=void 0;Ee=e.Message.getField(be,1),Ee!=null&&ve.writeInt32(1,Ee),Ee=e.Message.getField(be,2),Ee!=null&&ve.writeInt32(2,Ee)},proto.google.protobuf.EnumDescriptorProto.EnumReservedRange.prototype.getStart=function(){return e.Message.getFieldWithDefault(this,1,0)},proto.google.protobuf.EnumDescriptorProto.EnumReservedRange.prototype.setStart=function(be){return e.Message.setField(this,1,be)},proto.google.protobuf.EnumDescriptorProto.EnumReservedRange.prototype.clearStart=function(){return e.Message.setField(this,1,void 0)},proto.google.protobuf.EnumDescriptorProto.EnumReservedRange.prototype.hasStart=function(){return e.Message.getField(this,1)!=null},proto.google.protobuf.EnumDescriptorProto.EnumReservedRange.prototype.getEnd=function(){return e.Message.getFieldWithDefault(this,2,0)},proto.google.protobuf.EnumDescriptorProto.EnumReservedRange.prototype.setEnd=function(be){return e.Message.setField(this,2,be)},proto.google.protobuf.EnumDescriptorProto.EnumReservedRange.prototype.clearEnd=function(){return e.Message.setField(this,2,void 0)},proto.google.protobuf.EnumDescriptorProto.EnumReservedRange.prototype.hasEnd=function(){return e.Message.getField(this,2)!=null},proto.google.protobuf.EnumDescriptorProto.prototype.getName=function(){return e.Message.getFieldWithDefault(this,1,"")},proto.google.protobuf.EnumDescriptorProto.prototype.setName=function(be){return e.Message.setField(this,1,be)},proto.google.protobuf.EnumDescriptorProto.prototype.clearName=function(){return e.Message.setField(this,1,void 0)},proto.google.protobuf.EnumDescriptorProto.prototype.hasName=function(){return e.Message.getField(this,1)!=null},proto.google.protobuf.EnumDescriptorProto.prototype.getValueList=function(){return e.Message.getRepeatedWrapperField(this,proto.google.protobuf.EnumValueDescriptorProto,2)},proto.google.protobuf.EnumDescriptorProto.prototype.setValueList=function(be){return e.Message.setRepeatedWrapperField(this,2,be)},proto.google.protobuf.EnumDescriptorProto.prototype.addValue=function(be,ve){return e.Message.addToRepeatedWrapperField(this,2,be,proto.google.protobuf.EnumValueDescriptorProto,ve)},proto.google.protobuf.EnumDescriptorProto.prototype.clearValueList=function(){return this.setValueList([])},proto.google.protobuf.EnumDescriptorProto.prototype.getOptions=function(){return e.Message.getWrapperField(this,proto.google.protobuf.EnumOptions,3)},proto.google.protobuf.EnumDescriptorProto.prototype.setOptions=function(be){return e.Message.setWrapperField(this,3,be)},proto.google.protobuf.EnumDescriptorProto.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.google.protobuf.EnumDescriptorProto.prototype.hasOptions=function(){return e.Message.getField(this,3)!=null},proto.google.protobuf.EnumDescriptorProto.prototype.getReservedRangeList=function(){return e.Message.getRepeatedWrapperField(this,proto.google.protobuf.EnumDescriptorProto.EnumReservedRange,4)},proto.google.protobuf.EnumDescriptorProto.prototype.setReservedRangeList=function(be){return e.Message.setRepeatedWrapperField(this,4,be)},proto.google.protobuf.EnumDescriptorProto.prototype.addReservedRange=function(be,ve){return e.Message.addToRepeatedWrapperField(this,4,be,proto.google.protobuf.EnumDescriptorProto.EnumReservedRange,ve)},proto.google.protobuf.EnumDescriptorProto.prototype.clearReservedRangeList=function(){return this.setReservedRangeList([])},proto.google.protobuf.EnumDescriptorProto.prototype.getReservedNameList=function(){return e.Message.getRepeatedField(this,5)},proto.google.protobuf.EnumDescriptorProto.prototype.setReservedNameList=function(be){return e.Message.setField(this,5,be||[])},proto.google.protobuf.EnumDescriptorProto.prototype.addReservedName=function(be,ve){return e.Message.addToRepeatedField(this,5,be,ve)},proto.google.protobuf.EnumDescriptorProto.prototype.clearReservedNameList=function(){return this.setReservedNameList([])},e.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.EnumValueDescriptorProto.prototype.toObject=function(be){return proto.google.protobuf.EnumValueDescriptorProto.toObject(be,this)},proto.google.protobuf.EnumValueDescriptorProto.toObject=function(be,ve){var Ee,Oe={name:(Ee=e.Message.getField(ve,1))==null?void 0:Ee,number:(Ee=e.Message.getField(ve,2))==null?void 0:Ee,options:(Ee=ve.getOptions())&&proto.google.protobuf.EnumValueOptions.toObject(be,Ee)};return be&&(Oe.$jspbMessageInstance=ve),Oe}),proto.google.protobuf.EnumValueDescriptorProto.deserializeBinary=function(be){var ve=new e.BinaryReader(be),Ee=new proto.google.protobuf.EnumValueDescriptorProto;return proto.google.protobuf.EnumValueDescriptorProto.deserializeBinaryFromReader(Ee,ve)},proto.google.protobuf.EnumValueDescriptorProto.deserializeBinaryFromReader=function(be,ve){for(;ve.nextField()&&!ve.isEndGroup();){var Ee=ve.getFieldNumber();switch(Ee){case 1:var Oe=ve.readString();be.setName(Oe);break;case 2:var Oe=ve.readInt32();be.setNumber(Oe);break;case 3:var Oe=new proto.google.protobuf.EnumValueOptions;ve.readMessage(Oe,proto.google.protobuf.EnumValueOptions.deserializeBinaryFromReader),be.setOptions(Oe);break;default:ve.skipField();break}}return be},proto.google.protobuf.EnumValueDescriptorProto.prototype.serializeBinary=function(){var be=new e.BinaryWriter;return proto.google.protobuf.EnumValueDescriptorProto.serializeBinaryToWriter(this,be),be.getResultBuffer()},proto.google.protobuf.EnumValueDescriptorProto.serializeBinaryToWriter=function(be,ve){var Ee=void 0;Ee=e.Message.getField(be,1),Ee!=null&&ve.writeString(1,Ee),Ee=e.Message.getField(be,2),Ee!=null&&ve.writeInt32(2,Ee),Ee=be.getOptions(),Ee!=null&&ve.writeMessage(3,Ee,proto.google.protobuf.EnumValueOptions.serializeBinaryToWriter)},proto.google.protobuf.EnumValueDescriptorProto.prototype.getName=function(){return e.Message.getFieldWithDefault(this,1,"")},proto.google.protobuf.EnumValueDescriptorProto.prototype.setName=function(be){return e.Message.setField(this,1,be)},proto.google.protobuf.EnumValueDescriptorProto.prototype.clearName=function(){return e.Message.setField(this,1,void 0)},proto.google.protobuf.EnumValueDescriptorProto.prototype.hasName=function(){return e.Message.getField(this,1)!=null},proto.google.protobuf.EnumValueDescriptorProto.prototype.getNumber=function(){return e.Message.getFieldWithDefault(this,2,0)},proto.google.protobuf.EnumValueDescriptorProto.prototype.setNumber=function(be){return e.Message.setField(this,2,be)},proto.google.protobuf.EnumValueDescriptorProto.prototype.clearNumber=function(){return e.Message.setField(this,2,void 0)},proto.google.protobuf.EnumValueDescriptorProto.prototype.hasNumber=function(){return e.Message.getField(this,2)!=null},proto.google.protobuf.EnumValueDescriptorProto.prototype.getOptions=function(){return e.Message.getWrapperField(this,proto.google.protobuf.EnumValueOptions,3)},proto.google.protobuf.EnumValueDescriptorProto.prototype.setOptions=function(be){return e.Message.setWrapperField(this,3,be)},proto.google.protobuf.EnumValueDescriptorProto.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.google.protobuf.EnumValueDescriptorProto.prototype.hasOptions=function(){return e.Message.getField(this,3)!=null},proto.google.protobuf.ServiceDescriptorProto.repeatedFields_=[2],e.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.ServiceDescriptorProto.prototype.toObject=function(be){return proto.google.protobuf.ServiceDescriptorProto.toObject(be,this)},proto.google.protobuf.ServiceDescriptorProto.toObject=function(be,ve){var Ee,Oe={name:(Ee=e.Message.getField(ve,1))==null?void 0:Ee,methodList:e.Message.toObjectList(ve.getMethodList(),proto.google.protobuf.MethodDescriptorProto.toObject,be),options:(Ee=ve.getOptions())&&proto.google.protobuf.ServiceOptions.toObject(be,Ee)};return be&&(Oe.$jspbMessageInstance=ve),Oe}),proto.google.protobuf.ServiceDescriptorProto.deserializeBinary=function(be){var ve=new e.BinaryReader(be),Ee=new proto.google.protobuf.ServiceDescriptorProto;return proto.google.protobuf.ServiceDescriptorProto.deserializeBinaryFromReader(Ee,ve)},proto.google.protobuf.ServiceDescriptorProto.deserializeBinaryFromReader=function(be,ve){for(;ve.nextField()&&!ve.isEndGroup();){var Ee=ve.getFieldNumber();switch(Ee){case 1:var Oe=ve.readString();be.setName(Oe);break;case 2:var Oe=new proto.google.protobuf.MethodDescriptorProto;ve.readMessage(Oe,proto.google.protobuf.MethodDescriptorProto.deserializeBinaryFromReader),be.addMethod(Oe);break;case 3:var Oe=new proto.google.protobuf.ServiceOptions;ve.readMessage(Oe,proto.google.protobuf.ServiceOptions.deserializeBinaryFromReader),be.setOptions(Oe);break;default:ve.skipField();break}}return be},proto.google.protobuf.ServiceDescriptorProto.prototype.serializeBinary=function(){var be=new e.BinaryWriter;return proto.google.protobuf.ServiceDescriptorProto.serializeBinaryToWriter(this,be),be.getResultBuffer()},proto.google.protobuf.ServiceDescriptorProto.serializeBinaryToWriter=function(be,ve){var Ee=void 0;Ee=e.Message.getField(be,1),Ee!=null&&ve.writeString(1,Ee),Ee=be.getMethodList(),Ee.length>0&&ve.writeRepeatedMessage(2,Ee,proto.google.protobuf.MethodDescriptorProto.serializeBinaryToWriter),Ee=be.getOptions(),Ee!=null&&ve.writeMessage(3,Ee,proto.google.protobuf.ServiceOptions.serializeBinaryToWriter)},proto.google.protobuf.ServiceDescriptorProto.prototype.getName=function(){return e.Message.getFieldWithDefault(this,1,"")},proto.google.protobuf.ServiceDescriptorProto.prototype.setName=function(be){return e.Message.setField(this,1,be)},proto.google.protobuf.ServiceDescriptorProto.prototype.clearName=function(){return e.Message.setField(this,1,void 0)},proto.google.protobuf.ServiceDescriptorProto.prototype.hasName=function(){return e.Message.getField(this,1)!=null},proto.google.protobuf.ServiceDescriptorProto.prototype.getMethodList=function(){return e.Message.getRepeatedWrapperField(this,proto.google.protobuf.MethodDescriptorProto,2)},proto.google.protobuf.ServiceDescriptorProto.prototype.setMethodList=function(be){return e.Message.setRepeatedWrapperField(this,2,be)},proto.google.protobuf.ServiceDescriptorProto.prototype.addMethod=function(be,ve){return e.Message.addToRepeatedWrapperField(this,2,be,proto.google.protobuf.MethodDescriptorProto,ve)},proto.google.protobuf.ServiceDescriptorProto.prototype.clearMethodList=function(){return this.setMethodList([])},proto.google.protobuf.ServiceDescriptorProto.prototype.getOptions=function(){return e.Message.getWrapperField(this,proto.google.protobuf.ServiceOptions,3)},proto.google.protobuf.ServiceDescriptorProto.prototype.setOptions=function(be){return e.Message.setWrapperField(this,3,be)},proto.google.protobuf.ServiceDescriptorProto.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.google.protobuf.ServiceDescriptorProto.prototype.hasOptions=function(){return e.Message.getField(this,3)!=null},e.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.MethodDescriptorProto.prototype.toObject=function(be){return proto.google.protobuf.MethodDescriptorProto.toObject(be,this)},proto.google.protobuf.MethodDescriptorProto.toObject=function(be,ve){var Ee,Oe={name:(Ee=e.Message.getField(ve,1))==null?void 0:Ee,inputType:(Ee=e.Message.getField(ve,2))==null?void 0:Ee,outputType:(Ee=e.Message.getField(ve,3))==null?void 0:Ee,options:(Ee=ve.getOptions())&&proto.google.protobuf.MethodOptions.toObject(be,Ee),clientStreaming:e.Message.getBooleanFieldWithDefault(ve,5,!1),serverStreaming:e.Message.getBooleanFieldWithDefault(ve,6,!1)};return be&&(Oe.$jspbMessageInstance=ve),Oe}),proto.google.protobuf.MethodDescriptorProto.deserializeBinary=function(be){var ve=new e.BinaryReader(be),Ee=new proto.google.protobuf.MethodDescriptorProto;return proto.google.protobuf.MethodDescriptorProto.deserializeBinaryFromReader(Ee,ve)},proto.google.protobuf.MethodDescriptorProto.deserializeBinaryFromReader=function(be,ve){for(;ve.nextField()&&!ve.isEndGroup();){var Ee=ve.getFieldNumber();switch(Ee){case 1:var Oe=ve.readString();be.setName(Oe);break;case 2:var Oe=ve.readString();be.setInputType(Oe);break;case 3:var Oe=ve.readString();be.setOutputType(Oe);break;case 4:var Oe=new proto.google.protobuf.MethodOptions;ve.readMessage(Oe,proto.google.protobuf.MethodOptions.deserializeBinaryFromReader),be.setOptions(Oe);break;case 5:var Oe=ve.readBool();be.setClientStreaming(Oe);break;case 6:var Oe=ve.readBool();be.setServerStreaming(Oe);break;default:ve.skipField();break}}return be},proto.google.protobuf.MethodDescriptorProto.prototype.serializeBinary=function(){var be=new e.BinaryWriter;return proto.google.protobuf.MethodDescriptorProto.serializeBinaryToWriter(this,be),be.getResultBuffer()},proto.google.protobuf.MethodDescriptorProto.serializeBinaryToWriter=function(be,ve){var Ee=void 0;Ee=e.Message.getField(be,1),Ee!=null&&ve.writeString(1,Ee),Ee=e.Message.getField(be,2),Ee!=null&&ve.writeString(2,Ee),Ee=e.Message.getField(be,3),Ee!=null&&ve.writeString(3,Ee),Ee=be.getOptions(),Ee!=null&&ve.writeMessage(4,Ee,proto.google.protobuf.MethodOptions.serializeBinaryToWriter),Ee=e.Message.getField(be,5),Ee!=null&&ve.writeBool(5,Ee),Ee=e.Message.getField(be,6),Ee!=null&&ve.writeBool(6,Ee)},proto.google.protobuf.MethodDescriptorProto.prototype.getName=function(){return e.Message.getFieldWithDefault(this,1,"")},proto.google.protobuf.MethodDescriptorProto.prototype.setName=function(be){return e.Message.setField(this,1,be)},proto.google.protobuf.MethodDescriptorProto.prototype.clearName=function(){return e.Message.setField(this,1,void 0)},proto.google.protobuf.MethodDescriptorProto.prototype.hasName=function(){return e.Message.getField(this,1)!=null},proto.google.protobuf.MethodDescriptorProto.prototype.getInputType=function(){return e.Message.getFieldWithDefault(this,2,"")},proto.google.protobuf.MethodDescriptorProto.prototype.setInputType=function(be){return e.Message.setField(this,2,be)},proto.google.protobuf.MethodDescriptorProto.prototype.clearInputType=function(){return e.Message.setField(this,2,void 0)},proto.google.protobuf.MethodDescriptorProto.prototype.hasInputType=function(){return e.Message.getField(this,2)!=null},proto.google.protobuf.MethodDescriptorProto.prototype.getOutputType=function(){return e.Message.getFieldWithDefault(this,3,"")},proto.google.protobuf.MethodDescriptorProto.prototype.setOutputType=function(be){return e.Message.setField(this,3,be)},proto.google.protobuf.MethodDescriptorProto.prototype.clearOutputType=function(){return e.Message.setField(this,3,void 0)},proto.google.protobuf.MethodDescriptorProto.prototype.hasOutputType=function(){return e.Message.getField(this,3)!=null},proto.google.protobuf.MethodDescriptorProto.prototype.getOptions=function(){return e.Message.getWrapperField(this,proto.google.protobuf.MethodOptions,4)},proto.google.protobuf.MethodDescriptorProto.prototype.setOptions=function(be){return e.Message.setWrapperField(this,4,be)},proto.google.protobuf.MethodDescriptorProto.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.google.protobuf.MethodDescriptorProto.prototype.hasOptions=function(){return e.Message.getField(this,4)!=null},proto.google.protobuf.MethodDescriptorProto.prototype.getClientStreaming=function(){return e.Message.getBooleanFieldWithDefault(this,5,!1)},proto.google.protobuf.MethodDescriptorProto.prototype.setClientStreaming=function(be){return e.Message.setField(this,5,be)},proto.google.protobuf.MethodDescriptorProto.prototype.clearClientStreaming=function(){return e.Message.setField(this,5,void 0)},proto.google.protobuf.MethodDescriptorProto.prototype.hasClientStreaming=function(){return e.Message.getField(this,5)!=null},proto.google.protobuf.MethodDescriptorProto.prototype.getServerStreaming=function(){return e.Message.getBooleanFieldWithDefault(this,6,!1)},proto.google.protobuf.MethodDescriptorProto.prototype.setServerStreaming=function(be){return e.Message.setField(this,6,be)},proto.google.protobuf.MethodDescriptorProto.prototype.clearServerStreaming=function(){return e.Message.setField(this,6,void 0)},proto.google.protobuf.MethodDescriptorProto.prototype.hasServerStreaming=function(){return e.Message.getField(this,6)!=null},proto.google.protobuf.FileOptions.repeatedFields_=[999],e.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.FileOptions.prototype.toObject=function(be){return proto.google.protobuf.FileOptions.toObject(be,this)},proto.google.protobuf.FileOptions.toObject=function(be,ve){var Ee,Oe={javaPackage:(Ee=e.Message.getField(ve,1))==null?void 0:Ee,javaOuterClassname:(Ee=e.Message.getField(ve,8))==null?void 0:Ee,javaMultipleFiles:e.Message.getBooleanFieldWithDefault(ve,10,!1),javaGenerateEqualsAndHash:(Ee=e.Message.getBooleanField(ve,20))==null?void 0:Ee,javaStringCheckUtf8:e.Message.getBooleanFieldWithDefault(ve,27,!1),optimizeFor:e.Message.getFieldWithDefault(ve,9,1),goPackage:(Ee=e.Message.getField(ve,11))==null?void 0:Ee,ccGenericServices:e.Message.getBooleanFieldWithDefault(ve,16,!1),javaGenericServices:e.Message.getBooleanFieldWithDefault(ve,17,!1),pyGenericServices:e.Message.getBooleanFieldWithDefault(ve,18,!1),phpGenericServices:e.Message.getBooleanFieldWithDefault(ve,42,!1),deprecated:e.Message.getBooleanFieldWithDefault(ve,23,!1),ccEnableArenas:e.Message.getBooleanFieldWithDefault(ve,31,!0),objcClassPrefix:(Ee=e.Message.getField(ve,36))==null?void 0:Ee,csharpNamespace:(Ee=e.Message.getField(ve,37))==null?void 0:Ee,swiftPrefix:(Ee=e.Message.getField(ve,39))==null?void 0:Ee,phpClassPrefix:(Ee=e.Message.getField(ve,40))==null?void 0:Ee,phpNamespace:(Ee=e.Message.getField(ve,41))==null?void 0:Ee,phpMetadataNamespace:(Ee=e.Message.getField(ve,44))==null?void 0:Ee,rubyPackage:(Ee=e.Message.getField(ve,45))==null?void 0:Ee,uninterpretedOptionList:e.Message.toObjectList(ve.getUninterpretedOptionList(),proto.google.protobuf.UninterpretedOption.toObject,be)};return e.Message.toObjectExtension(ve,Oe,proto.google.protobuf.FileOptions.extensions,proto.google.protobuf.FileOptions.prototype.getExtension,be),be&&(Oe.$jspbMessageInstance=ve),Oe}),proto.google.protobuf.FileOptions.deserializeBinary=function(be){var ve=new e.BinaryReader(be),Ee=new proto.google.protobuf.FileOptions;return proto.google.protobuf.FileOptions.deserializeBinaryFromReader(Ee,ve)},proto.google.protobuf.FileOptions.deserializeBinaryFromReader=function(be,ve){for(;ve.nextField()&&!ve.isEndGroup();){var Ee=ve.getFieldNumber();switch(Ee){case 1:var Oe=ve.readString();be.setJavaPackage(Oe);break;case 8:var Oe=ve.readString();be.setJavaOuterClassname(Oe);break;case 10:var Oe=ve.readBool();be.setJavaMultipleFiles(Oe);break;case 20:var Oe=ve.readBool();be.setJavaGenerateEqualsAndHash(Oe);break;case 27:var Oe=ve.readBool();be.setJavaStringCheckUtf8(Oe);break;case 9:var Oe=ve.readEnum();be.setOptimizeFor(Oe);break;case 11:var Oe=ve.readString();be.setGoPackage(Oe);break;case 16:var Oe=ve.readBool();be.setCcGenericServices(Oe);break;case 17:var Oe=ve.readBool();be.setJavaGenericServices(Oe);break;case 18:var Oe=ve.readBool();be.setPyGenericServices(Oe);break;case 42:var Oe=ve.readBool();be.setPhpGenericServices(Oe);break;case 23:var Oe=ve.readBool();be.setDeprecated(Oe);break;case 31:var Oe=ve.readBool();be.setCcEnableArenas(Oe);break;case 36:var Oe=ve.readString();be.setObjcClassPrefix(Oe);break;case 37:var Oe=ve.readString();be.setCsharpNamespace(Oe);break;case 39:var Oe=ve.readString();be.setSwiftPrefix(Oe);break;case 40:var Oe=ve.readString();be.setPhpClassPrefix(Oe);break;case 41:var Oe=ve.readString();be.setPhpNamespace(Oe);break;case 44:var Oe=ve.readString();be.setPhpMetadataNamespace(Oe);break;case 45:var Oe=ve.readString();be.setRubyPackage(Oe);break;case 999:var Oe=new proto.google.protobuf.UninterpretedOption;ve.readMessage(Oe,proto.google.protobuf.UninterpretedOption.deserializeBinaryFromReader),be.addUninterpretedOption(Oe);break;default:e.Message.readBinaryExtension(be,ve,proto.google.protobuf.FileOptions.extensionsBinary,proto.google.protobuf.FileOptions.prototype.getExtension,proto.google.protobuf.FileOptions.prototype.setExtension);break}}return be},proto.google.protobuf.FileOptions.prototype.serializeBinary=function(){var be=new e.BinaryWriter;return proto.google.protobuf.FileOptions.serializeBinaryToWriter(this,be),be.getResultBuffer()},proto.google.protobuf.FileOptions.serializeBinaryToWriter=function(be,ve){var Ee=void 0;Ee=e.Message.getField(be,1),Ee!=null&&ve.writeString(1,Ee),Ee=e.Message.getField(be,8),Ee!=null&&ve.writeString(8,Ee),Ee=e.Message.getField(be,10),Ee!=null&&ve.writeBool(10,Ee),Ee=e.Message.getField(be,20),Ee!=null&&ve.writeBool(20,Ee),Ee=e.Message.getField(be,27),Ee!=null&&ve.writeBool(27,Ee),Ee=e.Message.getField(be,9),Ee!=null&&ve.writeEnum(9,Ee),Ee=e.Message.getField(be,11),Ee!=null&&ve.writeString(11,Ee),Ee=e.Message.getField(be,16),Ee!=null&&ve.writeBool(16,Ee),Ee=e.Message.getField(be,17),Ee!=null&&ve.writeBool(17,Ee),Ee=e.Message.getField(be,18),Ee!=null&&ve.writeBool(18,Ee),Ee=e.Message.getField(be,42),Ee!=null&&ve.writeBool(42,Ee),Ee=e.Message.getField(be,23),Ee!=null&&ve.writeBool(23,Ee),Ee=e.Message.getField(be,31),Ee!=null&&ve.writeBool(31,Ee),Ee=e.Message.getField(be,36),Ee!=null&&ve.writeString(36,Ee),Ee=e.Message.getField(be,37),Ee!=null&&ve.writeString(37,Ee),Ee=e.Message.getField(be,39),Ee!=null&&ve.writeString(39,Ee),Ee=e.Message.getField(be,40),Ee!=null&&ve.writeString(40,Ee),Ee=e.Message.getField(be,41),Ee!=null&&ve.writeString(41,Ee),Ee=e.Message.getField(be,44),Ee!=null&&ve.writeString(44,Ee),Ee=e.Message.getField(be,45),Ee!=null&&ve.writeString(45,Ee),Ee=be.getUninterpretedOptionList(),Ee.length>0&&ve.writeRepeatedMessage(999,Ee,proto.google.protobuf.UninterpretedOption.serializeBinaryToWriter),e.Message.serializeBinaryExtensions(be,ve,proto.google.protobuf.FileOptions.extensionsBinary,proto.google.protobuf.FileOptions.prototype.getExtension)},proto.google.protobuf.FileOptions.OptimizeMode={SPEED:1,CODE_SIZE:2,LITE_RUNTIME:3},proto.google.protobuf.FileOptions.prototype.getJavaPackage=function(){return e.Message.getFieldWithDefault(this,1,"")},proto.google.protobuf.FileOptions.prototype.setJavaPackage=function(be){return e.Message.setField(this,1,be)},proto.google.protobuf.FileOptions.prototype.clearJavaPackage=function(){return e.Message.setField(this,1,void 0)},proto.google.protobuf.FileOptions.prototype.hasJavaPackage=function(){return e.Message.getField(this,1)!=null},proto.google.protobuf.FileOptions.prototype.getJavaOuterClassname=function(){return e.Message.getFieldWithDefault(this,8,"")},proto.google.protobuf.FileOptions.prototype.setJavaOuterClassname=function(be){return e.Message.setField(this,8,be)},proto.google.protobuf.FileOptions.prototype.clearJavaOuterClassname=function(){return e.Message.setField(this,8,void 0)},proto.google.protobuf.FileOptions.prototype.hasJavaOuterClassname=function(){return e.Message.getField(this,8)!=null},proto.google.protobuf.FileOptions.prototype.getJavaMultipleFiles=function(){return e.Message.getBooleanFieldWithDefault(this,10,!1)},proto.google.protobuf.FileOptions.prototype.setJavaMultipleFiles=function(be){return e.Message.setField(this,10,be)},proto.google.protobuf.FileOptions.prototype.clearJavaMultipleFiles=function(){return e.Message.setField(this,10,void 0)},proto.google.protobuf.FileOptions.prototype.hasJavaMultipleFiles=function(){return e.Message.getField(this,10)!=null},proto.google.protobuf.FileOptions.prototype.getJavaGenerateEqualsAndHash=function(){return e.Message.getBooleanFieldWithDefault(this,20,!1)},proto.google.protobuf.FileOptions.prototype.setJavaGenerateEqualsAndHash=function(be){return e.Message.setField(this,20,be)},proto.google.protobuf.FileOptions.prototype.clearJavaGenerateEqualsAndHash=function(){return e.Message.setField(this,20,void 0)},proto.google.protobuf.FileOptions.prototype.hasJavaGenerateEqualsAndHash=function(){return e.Message.getField(this,20)!=null},proto.google.protobuf.FileOptions.prototype.getJavaStringCheckUtf8=function(){return e.Message.getBooleanFieldWithDefault(this,27,!1)},proto.google.protobuf.FileOptions.prototype.setJavaStringCheckUtf8=function(be){return e.Message.setField(this,27,be)},proto.google.protobuf.FileOptions.prototype.clearJavaStringCheckUtf8=function(){return e.Message.setField(this,27,void 0)},proto.google.protobuf.FileOptions.prototype.hasJavaStringCheckUtf8=function(){return e.Message.getField(this,27)!=null},proto.google.protobuf.FileOptions.prototype.getOptimizeFor=function(){return e.Message.getFieldWithDefault(this,9,1)},proto.google.protobuf.FileOptions.prototype.setOptimizeFor=function(be){return e.Message.setField(this,9,be)},proto.google.protobuf.FileOptions.prototype.clearOptimizeFor=function(){return e.Message.setField(this,9,void 0)},proto.google.protobuf.FileOptions.prototype.hasOptimizeFor=function(){return e.Message.getField(this,9)!=null},proto.google.protobuf.FileOptions.prototype.getGoPackage=function(){return e.Message.getFieldWithDefault(this,11,"")},proto.google.protobuf.FileOptions.prototype.setGoPackage=function(be){return e.Message.setField(this,11,be)},proto.google.protobuf.FileOptions.prototype.clearGoPackage=function(){return e.Message.setField(this,11,void 0)},proto.google.protobuf.FileOptions.prototype.hasGoPackage=function(){return e.Message.getField(this,11)!=null},proto.google.protobuf.FileOptions.prototype.getCcGenericServices=function(){return e.Message.getBooleanFieldWithDefault(this,16,!1)},proto.google.protobuf.FileOptions.prototype.setCcGenericServices=function(be){return e.Message.setField(this,16,be)},proto.google.protobuf.FileOptions.prototype.clearCcGenericServices=function(){return e.Message.setField(this,16,void 0)},proto.google.protobuf.FileOptions.prototype.hasCcGenericServices=function(){return e.Message.getField(this,16)!=null},proto.google.protobuf.FileOptions.prototype.getJavaGenericServices=function(){return e.Message.getBooleanFieldWithDefault(this,17,!1)},proto.google.protobuf.FileOptions.prototype.setJavaGenericServices=function(be){return e.Message.setField(this,17,be)},proto.google.protobuf.FileOptions.prototype.clearJavaGenericServices=function(){return e.Message.setField(this,17,void 0)},proto.google.protobuf.FileOptions.prototype.hasJavaGenericServices=function(){return e.Message.getField(this,17)!=null},proto.google.protobuf.FileOptions.prototype.getPyGenericServices=function(){return e.Message.getBooleanFieldWithDefault(this,18,!1)},proto.google.protobuf.FileOptions.prototype.setPyGenericServices=function(be){return e.Message.setField(this,18,be)},proto.google.protobuf.FileOptions.prototype.clearPyGenericServices=function(){return e.Message.setField(this,18,void 0)},proto.google.protobuf.FileOptions.prototype.hasPyGenericServices=function(){return e.Message.getField(this,18)!=null},proto.google.protobuf.FileOptions.prototype.getPhpGenericServices=function(){return e.Message.getBooleanFieldWithDefault(this,42,!1)},proto.google.protobuf.FileOptions.prototype.setPhpGenericServices=function(be){return e.Message.setField(this,42,be)},proto.google.protobuf.FileOptions.prototype.clearPhpGenericServices=function(){return e.Message.setField(this,42,void 0)},proto.google.protobuf.FileOptions.prototype.hasPhpGenericServices=function(){return e.Message.getField(this,42)!=null},proto.google.protobuf.FileOptions.prototype.getDeprecated=function(){return e.Message.getBooleanFieldWithDefault(this,23,!1)},proto.google.protobuf.FileOptions.prototype.setDeprecated=function(be){return e.Message.setField(this,23,be)},proto.google.protobuf.FileOptions.prototype.clearDeprecated=function(){return e.Message.setField(this,23,void 0)},proto.google.protobuf.FileOptions.prototype.hasDeprecated=function(){return e.Message.getField(this,23)!=null},proto.google.protobuf.FileOptions.prototype.getCcEnableArenas=function(){return e.Message.getBooleanFieldWithDefault(this,31,!0)},proto.google.protobuf.FileOptions.prototype.setCcEnableArenas=function(be){return e.Message.setField(this,31,be)},proto.google.protobuf.FileOptions.prototype.clearCcEnableArenas=function(){return e.Message.setField(this,31,void 0)},proto.google.protobuf.FileOptions.prototype.hasCcEnableArenas=function(){return e.Message.getField(this,31)!=null},proto.google.protobuf.FileOptions.prototype.getObjcClassPrefix=function(){return e.Message.getFieldWithDefault(this,36,"")},proto.google.protobuf.FileOptions.prototype.setObjcClassPrefix=function(be){return e.Message.setField(this,36,be)},proto.google.protobuf.FileOptions.prototype.clearObjcClassPrefix=function(){return e.Message.setField(this,36,void 0)},proto.google.protobuf.FileOptions.prototype.hasObjcClassPrefix=function(){return e.Message.getField(this,36)!=null},proto.google.protobuf.FileOptions.prototype.getCsharpNamespace=function(){return e.Message.getFieldWithDefault(this,37,"")},proto.google.protobuf.FileOptions.prototype.setCsharpNamespace=function(be){return e.Message.setField(this,37,be)},proto.google.protobuf.FileOptions.prototype.clearCsharpNamespace=function(){return e.Message.setField(this,37,void 0)},proto.google.protobuf.FileOptions.prototype.hasCsharpNamespace=function(){return e.Message.getField(this,37)!=null},proto.google.protobuf.FileOptions.prototype.getSwiftPrefix=function(){return e.Message.getFieldWithDefault(this,39,"")},proto.google.protobuf.FileOptions.prototype.setSwiftPrefix=function(be){return e.Message.setField(this,39,be)},proto.google.protobuf.FileOptions.prototype.clearSwiftPrefix=function(){return e.Message.setField(this,39,void 0)},proto.google.protobuf.FileOptions.prototype.hasSwiftPrefix=function(){return e.Message.getField(this,39)!=null},proto.google.protobuf.FileOptions.prototype.getPhpClassPrefix=function(){return e.Message.getFieldWithDefault(this,40,"")},proto.google.protobuf.FileOptions.prototype.setPhpClassPrefix=function(be){return e.Message.setField(this,40,be)},proto.google.protobuf.FileOptions.prototype.clearPhpClassPrefix=function(){return e.Message.setField(this,40,void 0)},proto.google.protobuf.FileOptions.prototype.hasPhpClassPrefix=function(){return e.Message.getField(this,40)!=null},proto.google.protobuf.FileOptions.prototype.getPhpNamespace=function(){return e.Message.getFieldWithDefault(this,41,"")},proto.google.protobuf.FileOptions.prototype.setPhpNamespace=function(be){return e.Message.setField(this,41,be)},proto.google.protobuf.FileOptions.prototype.clearPhpNamespace=function(){return e.Message.setField(this,41,void 0)},proto.google.protobuf.FileOptions.prototype.hasPhpNamespace=function(){return e.Message.getField(this,41)!=null},proto.google.protobuf.FileOptions.prototype.getPhpMetadataNamespace=function(){return e.Message.getFieldWithDefault(this,44,"")},proto.google.protobuf.FileOptions.prototype.setPhpMetadataNamespace=function(be){return e.Message.setField(this,44,be)},proto.google.protobuf.FileOptions.prototype.clearPhpMetadataNamespace=function(){return e.Message.setField(this,44,void 0)},proto.google.protobuf.FileOptions.prototype.hasPhpMetadataNamespace=function(){return e.Message.getField(this,44)!=null},proto.google.protobuf.FileOptions.prototype.getRubyPackage=function(){return e.Message.getFieldWithDefault(this,45,"")},proto.google.protobuf.FileOptions.prototype.setRubyPackage=function(be){return e.Message.setField(this,45,be)},proto.google.protobuf.FileOptions.prototype.clearRubyPackage=function(){return e.Message.setField(this,45,void 0)},proto.google.protobuf.FileOptions.prototype.hasRubyPackage=function(){return e.Message.getField(this,45)!=null},proto.google.protobuf.FileOptions.prototype.getUninterpretedOptionList=function(){return e.Message.getRepeatedWrapperField(this,proto.google.protobuf.UninterpretedOption,999)},proto.google.protobuf.FileOptions.prototype.setUninterpretedOptionList=function(be){return e.Message.setRepeatedWrapperField(this,999,be)},proto.google.protobuf.FileOptions.prototype.addUninterpretedOption=function(be,ve){return e.Message.addToRepeatedWrapperField(this,999,be,proto.google.protobuf.UninterpretedOption,ve)},proto.google.protobuf.FileOptions.prototype.clearUninterpretedOptionList=function(){return this.setUninterpretedOptionList([])},proto.google.protobuf.MessageOptions.repeatedFields_=[999],e.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.MessageOptions.prototype.toObject=function(be){return proto.google.protobuf.MessageOptions.toObject(be,this)},proto.google.protobuf.MessageOptions.toObject=function(be,ve){var Ee,Oe={messageSetWireFormat:e.Message.getBooleanFieldWithDefault(ve,1,!1),noStandardDescriptorAccessor:e.Message.getBooleanFieldWithDefault(ve,2,!1),deprecated:e.Message.getBooleanFieldWithDefault(ve,3,!1),mapEntry:(Ee=e.Message.getBooleanField(ve,7))==null?void 0:Ee,uninterpretedOptionList:e.Message.toObjectList(ve.getUninterpretedOptionList(),proto.google.protobuf.UninterpretedOption.toObject,be)};return e.Message.toObjectExtension(ve,Oe,proto.google.protobuf.MessageOptions.extensions,proto.google.protobuf.MessageOptions.prototype.getExtension,be),be&&(Oe.$jspbMessageInstance=ve),Oe}),proto.google.protobuf.MessageOptions.deserializeBinary=function(be){var ve=new e.BinaryReader(be),Ee=new proto.google.protobuf.MessageOptions;return proto.google.protobuf.MessageOptions.deserializeBinaryFromReader(Ee,ve)},proto.google.protobuf.MessageOptions.deserializeBinaryFromReader=function(be,ve){for(;ve.nextField()&&!ve.isEndGroup();){var Ee=ve.getFieldNumber();switch(Ee){case 1:var Oe=ve.readBool();be.setMessageSetWireFormat(Oe);break;case 2:var Oe=ve.readBool();be.setNoStandardDescriptorAccessor(Oe);break;case 3:var Oe=ve.readBool();be.setDeprecated(Oe);break;case 7:var Oe=ve.readBool();be.setMapEntry(Oe);break;case 999:var Oe=new proto.google.protobuf.UninterpretedOption;ve.readMessage(Oe,proto.google.protobuf.UninterpretedOption.deserializeBinaryFromReader),be.addUninterpretedOption(Oe);break;default:e.Message.readBinaryExtension(be,ve,proto.google.protobuf.MessageOptions.extensionsBinary,proto.google.protobuf.MessageOptions.prototype.getExtension,proto.google.protobuf.MessageOptions.prototype.setExtension);break}}return be},proto.google.protobuf.MessageOptions.prototype.serializeBinary=function(){var be=new e.BinaryWriter;return proto.google.protobuf.MessageOptions.serializeBinaryToWriter(this,be),be.getResultBuffer()},proto.google.protobuf.MessageOptions.serializeBinaryToWriter=function(be,ve){var Ee=void 0;Ee=e.Message.getField(be,1),Ee!=null&&ve.writeBool(1,Ee),Ee=e.Message.getField(be,2),Ee!=null&&ve.writeBool(2,Ee),Ee=e.Message.getField(be,3),Ee!=null&&ve.writeBool(3,Ee),Ee=e.Message.getField(be,7),Ee!=null&&ve.writeBool(7,Ee),Ee=be.getUninterpretedOptionList(),Ee.length>0&&ve.writeRepeatedMessage(999,Ee,proto.google.protobuf.UninterpretedOption.serializeBinaryToWriter),e.Message.serializeBinaryExtensions(be,ve,proto.google.protobuf.MessageOptions.extensionsBinary,proto.google.protobuf.MessageOptions.prototype.getExtension)},proto.google.protobuf.MessageOptions.prototype.getMessageSetWireFormat=function(){return e.Message.getBooleanFieldWithDefault(this,1,!1)},proto.google.protobuf.MessageOptions.prototype.setMessageSetWireFormat=function(be){return e.Message.setField(this,1,be)},proto.google.protobuf.MessageOptions.prototype.clearMessageSetWireFormat=function(){return e.Message.setField(this,1,void 0)},proto.google.protobuf.MessageOptions.prototype.hasMessageSetWireFormat=function(){return e.Message.getField(this,1)!=null},proto.google.protobuf.MessageOptions.prototype.getNoStandardDescriptorAccessor=function(){return e.Message.getBooleanFieldWithDefault(this,2,!1)},proto.google.protobuf.MessageOptions.prototype.setNoStandardDescriptorAccessor=function(be){return e.Message.setField(this,2,be)},proto.google.protobuf.MessageOptions.prototype.clearNoStandardDescriptorAccessor=function(){return e.Message.setField(this,2,void 0)},proto.google.protobuf.MessageOptions.prototype.hasNoStandardDescriptorAccessor=function(){return e.Message.getField(this,2)!=null},proto.google.protobuf.MessageOptions.prototype.getDeprecated=function(){return e.Message.getBooleanFieldWithDefault(this,3,!1)},proto.google.protobuf.MessageOptions.prototype.setDeprecated=function(be){return e.Message.setField(this,3,be)},proto.google.protobuf.MessageOptions.prototype.clearDeprecated=function(){return e.Message.setField(this,3,void 0)},proto.google.protobuf.MessageOptions.prototype.hasDeprecated=function(){return e.Message.getField(this,3)!=null},proto.google.protobuf.MessageOptions.prototype.getMapEntry=function(){return e.Message.getBooleanFieldWithDefault(this,7,!1)},proto.google.protobuf.MessageOptions.prototype.setMapEntry=function(be){return e.Message.setField(this,7,be)},proto.google.protobuf.MessageOptions.prototype.clearMapEntry=function(){return e.Message.setField(this,7,void 0)},proto.google.protobuf.MessageOptions.prototype.hasMapEntry=function(){return e.Message.getField(this,7)!=null},proto.google.protobuf.MessageOptions.prototype.getUninterpretedOptionList=function(){return e.Message.getRepeatedWrapperField(this,proto.google.protobuf.UninterpretedOption,999)},proto.google.protobuf.MessageOptions.prototype.setUninterpretedOptionList=function(be){return e.Message.setRepeatedWrapperField(this,999,be)},proto.google.protobuf.MessageOptions.prototype.addUninterpretedOption=function(be,ve){return e.Message.addToRepeatedWrapperField(this,999,be,proto.google.protobuf.UninterpretedOption,ve)},proto.google.protobuf.MessageOptions.prototype.clearUninterpretedOptionList=function(){return this.setUninterpretedOptionList([])},proto.google.protobuf.FieldOptions.repeatedFields_=[999],e.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.FieldOptions.prototype.toObject=function(be){return proto.google.protobuf.FieldOptions.toObject(be,this)},proto.google.protobuf.FieldOptions.toObject=function(be,ve){var Ee,Oe={ctype:e.Message.getFieldWithDefault(ve,1,0),packed:(Ee=e.Message.getBooleanField(ve,2))==null?void 0:Ee,jstype:e.Message.getFieldWithDefault(ve,6,0),lazy:e.Message.getBooleanFieldWithDefault(ve,5,!1),unverifiedLazy:e.Message.getBooleanFieldWithDefault(ve,15,!1),deprecated:e.Message.getBooleanFieldWithDefault(ve,3,!1),weak:e.Message.getBooleanFieldWithDefault(ve,10,!1),uninterpretedOptionList:e.Message.toObjectList(ve.getUninterpretedOptionList(),proto.google.protobuf.UninterpretedOption.toObject,be)};return e.Message.toObjectExtension(ve,Oe,proto.google.protobuf.FieldOptions.extensions,proto.google.protobuf.FieldOptions.prototype.getExtension,be),be&&(Oe.$jspbMessageInstance=ve),Oe}),proto.google.protobuf.FieldOptions.deserializeBinary=function(be){var ve=new e.BinaryReader(be),Ee=new proto.google.protobuf.FieldOptions;return proto.google.protobuf.FieldOptions.deserializeBinaryFromReader(Ee,ve)},proto.google.protobuf.FieldOptions.deserializeBinaryFromReader=function(be,ve){for(;ve.nextField()&&!ve.isEndGroup();){var Ee=ve.getFieldNumber();switch(Ee){case 1:var Oe=ve.readEnum();be.setCtype(Oe);break;case 2:var Oe=ve.readBool();be.setPacked(Oe);break;case 6:var Oe=ve.readEnum();be.setJstype(Oe);break;case 5:var Oe=ve.readBool();be.setLazy(Oe);break;case 15:var Oe=ve.readBool();be.setUnverifiedLazy(Oe);break;case 3:var Oe=ve.readBool();be.setDeprecated(Oe);break;case 10:var Oe=ve.readBool();be.setWeak(Oe);break;case 999:var Oe=new proto.google.protobuf.UninterpretedOption;ve.readMessage(Oe,proto.google.protobuf.UninterpretedOption.deserializeBinaryFromReader),be.addUninterpretedOption(Oe);break;default:e.Message.readBinaryExtension(be,ve,proto.google.protobuf.FieldOptions.extensionsBinary,proto.google.protobuf.FieldOptions.prototype.getExtension,proto.google.protobuf.FieldOptions.prototype.setExtension);break}}return be},proto.google.protobuf.FieldOptions.prototype.serializeBinary=function(){var be=new e.BinaryWriter;return proto.google.protobuf.FieldOptions.serializeBinaryToWriter(this,be),be.getResultBuffer()},proto.google.protobuf.FieldOptions.serializeBinaryToWriter=function(be,ve){var Ee=void 0;Ee=e.Message.getField(be,1),Ee!=null&&ve.writeEnum(1,Ee),Ee=e.Message.getField(be,2),Ee!=null&&ve.writeBool(2,Ee),Ee=e.Message.getField(be,6),Ee!=null&&ve.writeEnum(6,Ee),Ee=e.Message.getField(be,5),Ee!=null&&ve.writeBool(5,Ee),Ee=e.Message.getField(be,15),Ee!=null&&ve.writeBool(15,Ee),Ee=e.Message.getField(be,3),Ee!=null&&ve.writeBool(3,Ee),Ee=e.Message.getField(be,10),Ee!=null&&ve.writeBool(10,Ee),Ee=be.getUninterpretedOptionList(),Ee.length>0&&ve.writeRepeatedMessage(999,Ee,proto.google.protobuf.UninterpretedOption.serializeBinaryToWriter),e.Message.serializeBinaryExtensions(be,ve,proto.google.protobuf.FieldOptions.extensionsBinary,proto.google.protobuf.FieldOptions.prototype.getExtension)},proto.google.protobuf.FieldOptions.CType={STRING:0,CORD:1,STRING_PIECE:2},proto.google.protobuf.FieldOptions.JSType={JS_NORMAL:0,JS_STRING:1,JS_NUMBER:2},proto.google.protobuf.FieldOptions.prototype.getCtype=function(){return e.Message.getFieldWithDefault(this,1,0)},proto.google.protobuf.FieldOptions.prototype.setCtype=function(be){return e.Message.setField(this,1,be)},proto.google.protobuf.FieldOptions.prototype.clearCtype=function(){return e.Message.setField(this,1,void 0)},proto.google.protobuf.FieldOptions.prototype.hasCtype=function(){return e.Message.getField(this,1)!=null},proto.google.protobuf.FieldOptions.prototype.getPacked=function(){return e.Message.getBooleanFieldWithDefault(this,2,!1)},proto.google.protobuf.FieldOptions.prototype.setPacked=function(be){return e.Message.setField(this,2,be)},proto.google.protobuf.FieldOptions.prototype.clearPacked=function(){return e.Message.setField(this,2,void 0)},proto.google.protobuf.FieldOptions.prototype.hasPacked=function(){return e.Message.getField(this,2)!=null},proto.google.protobuf.FieldOptions.prototype.getJstype=function(){return e.Message.getFieldWithDefault(this,6,0)},proto.google.protobuf.FieldOptions.prototype.setJstype=function(be){return e.Message.setField(this,6,be)},proto.google.protobuf.FieldOptions.prototype.clearJstype=function(){return e.Message.setField(this,6,void 0)},proto.google.protobuf.FieldOptions.prototype.hasJstype=function(){return e.Message.getField(this,6)!=null},proto.google.protobuf.FieldOptions.prototype.getLazy=function(){return e.Message.getBooleanFieldWithDefault(this,5,!1)},proto.google.protobuf.FieldOptions.prototype.setLazy=function(be){return e.Message.setField(this,5,be)},proto.google.protobuf.FieldOptions.prototype.clearLazy=function(){return e.Message.setField(this,5,void 0)},proto.google.protobuf.FieldOptions.prototype.hasLazy=function(){return e.Message.getField(this,5)!=null},proto.google.protobuf.FieldOptions.prototype.getUnverifiedLazy=function(){return e.Message.getBooleanFieldWithDefault(this,15,!1)},proto.google.protobuf.FieldOptions.prototype.setUnverifiedLazy=function(be){return e.Message.setField(this,15,be)},proto.google.protobuf.FieldOptions.prototype.clearUnverifiedLazy=function(){return e.Message.setField(this,15,void 0)},proto.google.protobuf.FieldOptions.prototype.hasUnverifiedLazy=function(){return e.Message.getField(this,15)!=null},proto.google.protobuf.FieldOptions.prototype.getDeprecated=function(){return e.Message.getBooleanFieldWithDefault(this,3,!1)},proto.google.protobuf.FieldOptions.prototype.setDeprecated=function(be){return e.Message.setField(this,3,be)},proto.google.protobuf.FieldOptions.prototype.clearDeprecated=function(){return e.Message.setField(this,3,void 0)},proto.google.protobuf.FieldOptions.prototype.hasDeprecated=function(){return e.Message.getField(this,3)!=null},proto.google.protobuf.FieldOptions.prototype.getWeak=function(){return e.Message.getBooleanFieldWithDefault(this,10,!1)},proto.google.protobuf.FieldOptions.prototype.setWeak=function(be){return e.Message.setField(this,10,be)},proto.google.protobuf.FieldOptions.prototype.clearWeak=function(){return e.Message.setField(this,10,void 0)},proto.google.protobuf.FieldOptions.prototype.hasWeak=function(){return e.Message.getField(this,10)!=null},proto.google.protobuf.FieldOptions.prototype.getUninterpretedOptionList=function(){return e.Message.getRepeatedWrapperField(this,proto.google.protobuf.UninterpretedOption,999)},proto.google.protobuf.FieldOptions.prototype.setUninterpretedOptionList=function(be){return e.Message.setRepeatedWrapperField(this,999,be)},proto.google.protobuf.FieldOptions.prototype.addUninterpretedOption=function(be,ve){return e.Message.addToRepeatedWrapperField(this,999,be,proto.google.protobuf.UninterpretedOption,ve)},proto.google.protobuf.FieldOptions.prototype.clearUninterpretedOptionList=function(){return this.setUninterpretedOptionList([])},proto.google.protobuf.OneofOptions.repeatedFields_=[999],e.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.OneofOptions.prototype.toObject=function(be){return proto.google.protobuf.OneofOptions.toObject(be,this)},proto.google.protobuf.OneofOptions.toObject=function(be,ve){var Ee={uninterpretedOptionList:e.Message.toObjectList(ve.getUninterpretedOptionList(),proto.google.protobuf.UninterpretedOption.toObject,be)};return e.Message.toObjectExtension(ve,Ee,proto.google.protobuf.OneofOptions.extensions,proto.google.protobuf.OneofOptions.prototype.getExtension,be),be&&(Ee.$jspbMessageInstance=ve),Ee}),proto.google.protobuf.OneofOptions.deserializeBinary=function(be){var ve=new e.BinaryReader(be),Ee=new proto.google.protobuf.OneofOptions;return proto.google.protobuf.OneofOptions.deserializeBinaryFromReader(Ee,ve)},proto.google.protobuf.OneofOptions.deserializeBinaryFromReader=function(be,ve){for(;ve.nextField()&&!ve.isEndGroup();){var Ee=ve.getFieldNumber();switch(Ee){case 999:var Oe=new proto.google.protobuf.UninterpretedOption;ve.readMessage(Oe,proto.google.protobuf.UninterpretedOption.deserializeBinaryFromReader),be.addUninterpretedOption(Oe);break;default:e.Message.readBinaryExtension(be,ve,proto.google.protobuf.OneofOptions.extensionsBinary,proto.google.protobuf.OneofOptions.prototype.getExtension,proto.google.protobuf.OneofOptions.prototype.setExtension);break}}return be},proto.google.protobuf.OneofOptions.prototype.serializeBinary=function(){var be=new e.BinaryWriter;return proto.google.protobuf.OneofOptions.serializeBinaryToWriter(this,be),be.getResultBuffer()},proto.google.protobuf.OneofOptions.serializeBinaryToWriter=function(be,ve){var Ee=void 0;Ee=be.getUninterpretedOptionList(),Ee.length>0&&ve.writeRepeatedMessage(999,Ee,proto.google.protobuf.UninterpretedOption.serializeBinaryToWriter),e.Message.serializeBinaryExtensions(be,ve,proto.google.protobuf.OneofOptions.extensionsBinary,proto.google.protobuf.OneofOptions.prototype.getExtension)},proto.google.protobuf.OneofOptions.prototype.getUninterpretedOptionList=function(){return e.Message.getRepeatedWrapperField(this,proto.google.protobuf.UninterpretedOption,999)},proto.google.protobuf.OneofOptions.prototype.setUninterpretedOptionList=function(be){return e.Message.setRepeatedWrapperField(this,999,be)},proto.google.protobuf.OneofOptions.prototype.addUninterpretedOption=function(be,ve){return e.Message.addToRepeatedWrapperField(this,999,be,proto.google.protobuf.UninterpretedOption,ve)},proto.google.protobuf.OneofOptions.prototype.clearUninterpretedOptionList=function(){return this.setUninterpretedOptionList([])},proto.google.protobuf.EnumOptions.repeatedFields_=[999],e.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.EnumOptions.prototype.toObject=function(be){return proto.google.protobuf.EnumOptions.toObject(be,this)},proto.google.protobuf.EnumOptions.toObject=function(be,ve){var Ee,Oe={allowAlias:(Ee=e.Message.getBooleanField(ve,2))==null?void 0:Ee,deprecated:e.Message.getBooleanFieldWithDefault(ve,3,!1),uninterpretedOptionList:e.Message.toObjectList(ve.getUninterpretedOptionList(),proto.google.protobuf.UninterpretedOption.toObject,be)};return e.Message.toObjectExtension(ve,Oe,proto.google.protobuf.EnumOptions.extensions,proto.google.protobuf.EnumOptions.prototype.getExtension,be),be&&(Oe.$jspbMessageInstance=ve),Oe}),proto.google.protobuf.EnumOptions.deserializeBinary=function(be){var ve=new e.BinaryReader(be),Ee=new proto.google.protobuf.EnumOptions;return proto.google.protobuf.EnumOptions.deserializeBinaryFromReader(Ee,ve)},proto.google.protobuf.EnumOptions.deserializeBinaryFromReader=function(be,ve){for(;ve.nextField()&&!ve.isEndGroup();){var Ee=ve.getFieldNumber();switch(Ee){case 2:var Oe=ve.readBool();be.setAllowAlias(Oe);break;case 3:var Oe=ve.readBool();be.setDeprecated(Oe);break;case 999:var Oe=new proto.google.protobuf.UninterpretedOption;ve.readMessage(Oe,proto.google.protobuf.UninterpretedOption.deserializeBinaryFromReader),be.addUninterpretedOption(Oe);break;default:e.Message.readBinaryExtension(be,ve,proto.google.protobuf.EnumOptions.extensionsBinary,proto.google.protobuf.EnumOptions.prototype.getExtension,proto.google.protobuf.EnumOptions.prototype.setExtension);break}}return be},proto.google.protobuf.EnumOptions.prototype.serializeBinary=function(){var be=new e.BinaryWriter;return proto.google.protobuf.EnumOptions.serializeBinaryToWriter(this,be),be.getResultBuffer()},proto.google.protobuf.EnumOptions.serializeBinaryToWriter=function(be,ve){var Ee=void 0;Ee=e.Message.getField(be,2),Ee!=null&&ve.writeBool(2,Ee),Ee=e.Message.getField(be,3),Ee!=null&&ve.writeBool(3,Ee),Ee=be.getUninterpretedOptionList(),Ee.length>0&&ve.writeRepeatedMessage(999,Ee,proto.google.protobuf.UninterpretedOption.serializeBinaryToWriter),e.Message.serializeBinaryExtensions(be,ve,proto.google.protobuf.EnumOptions.extensionsBinary,proto.google.protobuf.EnumOptions.prototype.getExtension)},proto.google.protobuf.EnumOptions.prototype.getAllowAlias=function(){return e.Message.getBooleanFieldWithDefault(this,2,!1)},proto.google.protobuf.EnumOptions.prototype.setAllowAlias=function(be){return e.Message.setField(this,2,be)},proto.google.protobuf.EnumOptions.prototype.clearAllowAlias=function(){return e.Message.setField(this,2,void 0)},proto.google.protobuf.EnumOptions.prototype.hasAllowAlias=function(){return e.Message.getField(this,2)!=null},proto.google.protobuf.EnumOptions.prototype.getDeprecated=function(){return e.Message.getBooleanFieldWithDefault(this,3,!1)},proto.google.protobuf.EnumOptions.prototype.setDeprecated=function(be){return e.Message.setField(this,3,be)},proto.google.protobuf.EnumOptions.prototype.clearDeprecated=function(){return e.Message.setField(this,3,void 0)},proto.google.protobuf.EnumOptions.prototype.hasDeprecated=function(){return e.Message.getField(this,3)!=null},proto.google.protobuf.EnumOptions.prototype.getUninterpretedOptionList=function(){return e.Message.getRepeatedWrapperField(this,proto.google.protobuf.UninterpretedOption,999)},proto.google.protobuf.EnumOptions.prototype.setUninterpretedOptionList=function(be){return e.Message.setRepeatedWrapperField(this,999,be)},proto.google.protobuf.EnumOptions.prototype.addUninterpretedOption=function(be,ve){return e.Message.addToRepeatedWrapperField(this,999,be,proto.google.protobuf.UninterpretedOption,ve)},proto.google.protobuf.EnumOptions.prototype.clearUninterpretedOptionList=function(){return this.setUninterpretedOptionList([])},proto.google.protobuf.EnumValueOptions.repeatedFields_=[999],e.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.EnumValueOptions.prototype.toObject=function(be){return proto.google.protobuf.EnumValueOptions.toObject(be,this)},proto.google.protobuf.EnumValueOptions.toObject=function(be,ve){var Ee={deprecated:e.Message.getBooleanFieldWithDefault(ve,1,!1),uninterpretedOptionList:e.Message.toObjectList(ve.getUninterpretedOptionList(),proto.google.protobuf.UninterpretedOption.toObject,be)};return e.Message.toObjectExtension(ve,Ee,proto.google.protobuf.EnumValueOptions.extensions,proto.google.protobuf.EnumValueOptions.prototype.getExtension,be),be&&(Ee.$jspbMessageInstance=ve),Ee}),proto.google.protobuf.EnumValueOptions.deserializeBinary=function(be){var ve=new e.BinaryReader(be),Ee=new proto.google.protobuf.EnumValueOptions;return proto.google.protobuf.EnumValueOptions.deserializeBinaryFromReader(Ee,ve)},proto.google.protobuf.EnumValueOptions.deserializeBinaryFromReader=function(be,ve){for(;ve.nextField()&&!ve.isEndGroup();){var Ee=ve.getFieldNumber();switch(Ee){case 1:var Oe=ve.readBool();be.setDeprecated(Oe);break;case 999:var Oe=new proto.google.protobuf.UninterpretedOption;ve.readMessage(Oe,proto.google.protobuf.UninterpretedOption.deserializeBinaryFromReader),be.addUninterpretedOption(Oe);break;default:e.Message.readBinaryExtension(be,ve,proto.google.protobuf.EnumValueOptions.extensionsBinary,proto.google.protobuf.EnumValueOptions.prototype.getExtension,proto.google.protobuf.EnumValueOptions.prototype.setExtension);break}}return be},proto.google.protobuf.EnumValueOptions.prototype.serializeBinary=function(){var be=new e.BinaryWriter;return proto.google.protobuf.EnumValueOptions.serializeBinaryToWriter(this,be),be.getResultBuffer()},proto.google.protobuf.EnumValueOptions.serializeBinaryToWriter=function(be,ve){var Ee=void 0;Ee=e.Message.getField(be,1),Ee!=null&&ve.writeBool(1,Ee),Ee=be.getUninterpretedOptionList(),Ee.length>0&&ve.writeRepeatedMessage(999,Ee,proto.google.protobuf.UninterpretedOption.serializeBinaryToWriter),e.Message.serializeBinaryExtensions(be,ve,proto.google.protobuf.EnumValueOptions.extensionsBinary,proto.google.protobuf.EnumValueOptions.prototype.getExtension)},proto.google.protobuf.EnumValueOptions.prototype.getDeprecated=function(){return e.Message.getBooleanFieldWithDefault(this,1,!1)},proto.google.protobuf.EnumValueOptions.prototype.setDeprecated=function(be){return e.Message.setField(this,1,be)},proto.google.protobuf.EnumValueOptions.prototype.clearDeprecated=function(){return e.Message.setField(this,1,void 0)},proto.google.protobuf.EnumValueOptions.prototype.hasDeprecated=function(){return e.Message.getField(this,1)!=null},proto.google.protobuf.EnumValueOptions.prototype.getUninterpretedOptionList=function(){return e.Message.getRepeatedWrapperField(this,proto.google.protobuf.UninterpretedOption,999)},proto.google.protobuf.EnumValueOptions.prototype.setUninterpretedOptionList=function(be){return e.Message.setRepeatedWrapperField(this,999,be)},proto.google.protobuf.EnumValueOptions.prototype.addUninterpretedOption=function(be,ve){return e.Message.addToRepeatedWrapperField(this,999,be,proto.google.protobuf.UninterpretedOption,ve)},proto.google.protobuf.EnumValueOptions.prototype.clearUninterpretedOptionList=function(){return this.setUninterpretedOptionList([])},proto.google.protobuf.ServiceOptions.repeatedFields_=[999],e.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.ServiceOptions.prototype.toObject=function(be){return proto.google.protobuf.ServiceOptions.toObject(be,this)},proto.google.protobuf.ServiceOptions.toObject=function(be,ve){var Ee={deprecated:e.Message.getBooleanFieldWithDefault(ve,33,!1),uninterpretedOptionList:e.Message.toObjectList(ve.getUninterpretedOptionList(),proto.google.protobuf.UninterpretedOption.toObject,be)};return e.Message.toObjectExtension(ve,Ee,proto.google.protobuf.ServiceOptions.extensions,proto.google.protobuf.ServiceOptions.prototype.getExtension,be),be&&(Ee.$jspbMessageInstance=ve),Ee}),proto.google.protobuf.ServiceOptions.deserializeBinary=function(be){var ve=new e.BinaryReader(be),Ee=new proto.google.protobuf.ServiceOptions;return proto.google.protobuf.ServiceOptions.deserializeBinaryFromReader(Ee,ve)},proto.google.protobuf.ServiceOptions.deserializeBinaryFromReader=function(be,ve){for(;ve.nextField()&&!ve.isEndGroup();){var Ee=ve.getFieldNumber();switch(Ee){case 33:var Oe=ve.readBool();be.setDeprecated(Oe);break;case 999:var Oe=new proto.google.protobuf.UninterpretedOption;ve.readMessage(Oe,proto.google.protobuf.UninterpretedOption.deserializeBinaryFromReader),be.addUninterpretedOption(Oe);break;default:e.Message.readBinaryExtension(be,ve,proto.google.protobuf.ServiceOptions.extensionsBinary,proto.google.protobuf.ServiceOptions.prototype.getExtension,proto.google.protobuf.ServiceOptions.prototype.setExtension);break}}return be},proto.google.protobuf.ServiceOptions.prototype.serializeBinary=function(){var be=new e.BinaryWriter;return proto.google.protobuf.ServiceOptions.serializeBinaryToWriter(this,be),be.getResultBuffer()},proto.google.protobuf.ServiceOptions.serializeBinaryToWriter=function(be,ve){var Ee=void 0;Ee=e.Message.getField(be,33),Ee!=null&&ve.writeBool(33,Ee),Ee=be.getUninterpretedOptionList(),Ee.length>0&&ve.writeRepeatedMessage(999,Ee,proto.google.protobuf.UninterpretedOption.serializeBinaryToWriter),e.Message.serializeBinaryExtensions(be,ve,proto.google.protobuf.ServiceOptions.extensionsBinary,proto.google.protobuf.ServiceOptions.prototype.getExtension)},proto.google.protobuf.ServiceOptions.prototype.getDeprecated=function(){return e.Message.getBooleanFieldWithDefault(this,33,!1)},proto.google.protobuf.ServiceOptions.prototype.setDeprecated=function(be){return e.Message.setField(this,33,be)},proto.google.protobuf.ServiceOptions.prototype.clearDeprecated=function(){return e.Message.setField(this,33,void 0)},proto.google.protobuf.ServiceOptions.prototype.hasDeprecated=function(){return e.Message.getField(this,33)!=null},proto.google.protobuf.ServiceOptions.prototype.getUninterpretedOptionList=function(){return e.Message.getRepeatedWrapperField(this,proto.google.protobuf.UninterpretedOption,999)},proto.google.protobuf.ServiceOptions.prototype.setUninterpretedOptionList=function(be){return e.Message.setRepeatedWrapperField(this,999,be)},proto.google.protobuf.ServiceOptions.prototype.addUninterpretedOption=function(be,ve){return e.Message.addToRepeatedWrapperField(this,999,be,proto.google.protobuf.UninterpretedOption,ve)},proto.google.protobuf.ServiceOptions.prototype.clearUninterpretedOptionList=function(){return this.setUninterpretedOptionList([])},proto.google.protobuf.MethodOptions.repeatedFields_=[999],e.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.MethodOptions.prototype.toObject=function(be){return proto.google.protobuf.MethodOptions.toObject(be,this)},proto.google.protobuf.MethodOptions.toObject=function(be,ve){var Ee={deprecated:e.Message.getBooleanFieldWithDefault(ve,33,!1),idempotencyLevel:e.Message.getFieldWithDefault(ve,34,0),uninterpretedOptionList:e.Message.toObjectList(ve.getUninterpretedOptionList(),proto.google.protobuf.UninterpretedOption.toObject,be)};return e.Message.toObjectExtension(ve,Ee,proto.google.protobuf.MethodOptions.extensions,proto.google.protobuf.MethodOptions.prototype.getExtension,be),be&&(Ee.$jspbMessageInstance=ve),Ee}),proto.google.protobuf.MethodOptions.deserializeBinary=function(be){var ve=new e.BinaryReader(be),Ee=new proto.google.protobuf.MethodOptions;return proto.google.protobuf.MethodOptions.deserializeBinaryFromReader(Ee,ve)},proto.google.protobuf.MethodOptions.deserializeBinaryFromReader=function(be,ve){for(;ve.nextField()&&!ve.isEndGroup();){var Ee=ve.getFieldNumber();switch(Ee){case 33:var Oe=ve.readBool();be.setDeprecated(Oe);break;case 34:var Oe=ve.readEnum();be.setIdempotencyLevel(Oe);break;case 999:var Oe=new proto.google.protobuf.UninterpretedOption;ve.readMessage(Oe,proto.google.protobuf.UninterpretedOption.deserializeBinaryFromReader),be.addUninterpretedOption(Oe);break;default:e.Message.readBinaryExtension(be,ve,proto.google.protobuf.MethodOptions.extensionsBinary,proto.google.protobuf.MethodOptions.prototype.getExtension,proto.google.protobuf.MethodOptions.prototype.setExtension);break}}return be},proto.google.protobuf.MethodOptions.prototype.serializeBinary=function(){var be=new e.BinaryWriter;return proto.google.protobuf.MethodOptions.serializeBinaryToWriter(this,be),be.getResultBuffer()},proto.google.protobuf.MethodOptions.serializeBinaryToWriter=function(be,ve){var Ee=void 0;Ee=e.Message.getField(be,33),Ee!=null&&ve.writeBool(33,Ee),Ee=e.Message.getField(be,34),Ee!=null&&ve.writeEnum(34,Ee),Ee=be.getUninterpretedOptionList(),Ee.length>0&&ve.writeRepeatedMessage(999,Ee,proto.google.protobuf.UninterpretedOption.serializeBinaryToWriter),e.Message.serializeBinaryExtensions(be,ve,proto.google.protobuf.MethodOptions.extensionsBinary,proto.google.protobuf.MethodOptions.prototype.getExtension)},proto.google.protobuf.MethodOptions.IdempotencyLevel={IDEMPOTENCY_UNKNOWN:0,NO_SIDE_EFFECTS:1,IDEMPOTENT:2},proto.google.protobuf.MethodOptions.prototype.getDeprecated=function(){return e.Message.getBooleanFieldWithDefault(this,33,!1)},proto.google.protobuf.MethodOptions.prototype.setDeprecated=function(be){return e.Message.setField(this,33,be)},proto.google.protobuf.MethodOptions.prototype.clearDeprecated=function(){return e.Message.setField(this,33,void 0)},proto.google.protobuf.MethodOptions.prototype.hasDeprecated=function(){return e.Message.getField(this,33)!=null},proto.google.protobuf.MethodOptions.prototype.getIdempotencyLevel=function(){return e.Message.getFieldWithDefault(this,34,0)},proto.google.protobuf.MethodOptions.prototype.setIdempotencyLevel=function(be){return e.Message.setField(this,34,be)},proto.google.protobuf.MethodOptions.prototype.clearIdempotencyLevel=function(){return e.Message.setField(this,34,void 0)},proto.google.protobuf.MethodOptions.prototype.hasIdempotencyLevel=function(){return e.Message.getField(this,34)!=null},proto.google.protobuf.MethodOptions.prototype.getUninterpretedOptionList=function(){return e.Message.getRepeatedWrapperField(this,proto.google.protobuf.UninterpretedOption,999)},proto.google.protobuf.MethodOptions.prototype.setUninterpretedOptionList=function(be){return e.Message.setRepeatedWrapperField(this,999,be)},proto.google.protobuf.MethodOptions.prototype.addUninterpretedOption=function(be,ve){return e.Message.addToRepeatedWrapperField(this,999,be,proto.google.protobuf.UninterpretedOption,ve)},proto.google.protobuf.MethodOptions.prototype.clearUninterpretedOptionList=function(){return this.setUninterpretedOptionList([])},proto.google.protobuf.UninterpretedOption.repeatedFields_=[2],e.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.UninterpretedOption.prototype.toObject=function(be){return proto.google.protobuf.UninterpretedOption.toObject(be,this)},proto.google.protobuf.UninterpretedOption.toObject=function(be,ve){var Ee,Oe={nameList:e.Message.toObjectList(ve.getNameList(),proto.google.protobuf.UninterpretedOption.NamePart.toObject,be),identifierValue:(Ee=e.Message.getField(ve,3))==null?void 0:Ee,positiveIntValue:(Ee=e.Message.getField(ve,4))==null?void 0:Ee,negativeIntValue:(Ee=e.Message.getField(ve,5))==null?void 0:Ee,doubleValue:(Ee=e.Message.getOptionalFloatingPointField(ve,6))==null?void 0:Ee,stringValue:ve.getStringValue_asB64(),aggregateValue:(Ee=e.Message.getField(ve,8))==null?void 0:Ee};return be&&(Oe.$jspbMessageInstance=ve),Oe}),proto.google.protobuf.UninterpretedOption.deserializeBinary=function(be){var ve=new e.BinaryReader(be),Ee=new proto.google.protobuf.UninterpretedOption;return proto.google.protobuf.UninterpretedOption.deserializeBinaryFromReader(Ee,ve)},proto.google.protobuf.UninterpretedOption.deserializeBinaryFromReader=function(be,ve){for(;ve.nextField()&&!ve.isEndGroup();){var Ee=ve.getFieldNumber();switch(Ee){case 2:var Oe=new proto.google.protobuf.UninterpretedOption.NamePart;ve.readMessage(Oe,proto.google.protobuf.UninterpretedOption.NamePart.deserializeBinaryFromReader),be.addName(Oe);break;case 3:var Oe=ve.readString();be.setIdentifierValue(Oe);break;case 4:var Oe=ve.readUint64();be.setPositiveIntValue(Oe);break;case 5:var Oe=ve.readInt64();be.setNegativeIntValue(Oe);break;case 6:var Oe=ve.readDouble();be.setDoubleValue(Oe);break;case 7:var Oe=ve.readBytes();be.setStringValue(Oe);break;case 8:var Oe=ve.readString();be.setAggregateValue(Oe);break;default:ve.skipField();break}}return be},proto.google.protobuf.UninterpretedOption.prototype.serializeBinary=function(){var be=new e.BinaryWriter;return proto.google.protobuf.UninterpretedOption.serializeBinaryToWriter(this,be),be.getResultBuffer()},proto.google.protobuf.UninterpretedOption.serializeBinaryToWriter=function(be,ve){var Ee=void 0;Ee=be.getNameList(),Ee.length>0&&ve.writeRepeatedMessage(2,Ee,proto.google.protobuf.UninterpretedOption.NamePart.serializeBinaryToWriter),Ee=e.Message.getField(be,3),Ee!=null&&ve.writeString(3,Ee),Ee=e.Message.getField(be,4),Ee!=null&&ve.writeUint64(4,Ee),Ee=e.Message.getField(be,5),Ee!=null&&ve.writeInt64(5,Ee),Ee=e.Message.getField(be,6),Ee!=null&&ve.writeDouble(6,Ee),Ee=e.Message.getField(be,7),Ee!=null&&ve.writeBytes(7,Ee),Ee=e.Message.getField(be,8),Ee!=null&&ve.writeString(8,Ee)},e.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.UninterpretedOption.NamePart.prototype.toObject=function(be){return proto.google.protobuf.UninterpretedOption.NamePart.toObject(be,this)},proto.google.protobuf.UninterpretedOption.NamePart.toObject=function(be,ve){var Ee,Oe={namePart:(Ee=e.Message.getField(ve,1))==null?void 0:Ee,isExtension:(Ee=e.Message.getBooleanField(ve,2))==null?void 0:Ee};return be&&(Oe.$jspbMessageInstance=ve),Oe}),proto.google.protobuf.UninterpretedOption.NamePart.deserializeBinary=function(be){var ve=new e.BinaryReader(be),Ee=new proto.google.protobuf.UninterpretedOption.NamePart;return proto.google.protobuf.UninterpretedOption.NamePart.deserializeBinaryFromReader(Ee,ve)},proto.google.protobuf.UninterpretedOption.NamePart.deserializeBinaryFromReader=function(be,ve){for(;ve.nextField()&&!ve.isEndGroup();){var Ee=ve.getFieldNumber();switch(Ee){case 1:var Oe=ve.readString();be.setNamePart(Oe);break;case 2:var Oe=ve.readBool();be.setIsExtension(Oe);break;default:ve.skipField();break}}return be},proto.google.protobuf.UninterpretedOption.NamePart.prototype.serializeBinary=function(){var be=new e.BinaryWriter;return proto.google.protobuf.UninterpretedOption.NamePart.serializeBinaryToWriter(this,be),be.getResultBuffer()},proto.google.protobuf.UninterpretedOption.NamePart.serializeBinaryToWriter=function(be,ve){var Ee=void 0;Ee=e.Message.getField(be,1),Ee!=null&&ve.writeString(1,Ee),Ee=e.Message.getField(be,2),Ee!=null&&ve.writeBool(2,Ee)},proto.google.protobuf.UninterpretedOption.NamePart.prototype.getNamePart=function(){return e.Message.getFieldWithDefault(this,1,"")},proto.google.protobuf.UninterpretedOption.NamePart.prototype.setNamePart=function(be){return e.Message.setField(this,1,be)},proto.google.protobuf.UninterpretedOption.NamePart.prototype.clearNamePart=function(){return e.Message.setField(this,1,void 0)},proto.google.protobuf.UninterpretedOption.NamePart.prototype.hasNamePart=function(){return e.Message.getField(this,1)!=null},proto.google.protobuf.UninterpretedOption.NamePart.prototype.getIsExtension=function(){return e.Message.getBooleanFieldWithDefault(this,2,!1)},proto.google.protobuf.UninterpretedOption.NamePart.prototype.setIsExtension=function(be){return e.Message.setField(this,2,be)},proto.google.protobuf.UninterpretedOption.NamePart.prototype.clearIsExtension=function(){return e.Message.setField(this,2,void 0)},proto.google.protobuf.UninterpretedOption.NamePart.prototype.hasIsExtension=function(){return e.Message.getField(this,2)!=null},proto.google.protobuf.UninterpretedOption.prototype.getNameList=function(){return e.Message.getRepeatedWrapperField(this,proto.google.protobuf.UninterpretedOption.NamePart,2)},proto.google.protobuf.UninterpretedOption.prototype.setNameList=function(be){return e.Message.setRepeatedWrapperField(this,2,be)},proto.google.protobuf.UninterpretedOption.prototype.addName=function(be,ve){return e.Message.addToRepeatedWrapperField(this,2,be,proto.google.protobuf.UninterpretedOption.NamePart,ve)},proto.google.protobuf.UninterpretedOption.prototype.clearNameList=function(){return this.setNameList([])},proto.google.protobuf.UninterpretedOption.prototype.getIdentifierValue=function(){return e.Message.getFieldWithDefault(this,3,"")},proto.google.protobuf.UninterpretedOption.prototype.setIdentifierValue=function(be){return e.Message.setField(this,3,be)},proto.google.protobuf.UninterpretedOption.prototype.clearIdentifierValue=function(){return e.Message.setField(this,3,void 0)},proto.google.protobuf.UninterpretedOption.prototype.hasIdentifierValue=function(){return e.Message.getField(this,3)!=null},proto.google.protobuf.UninterpretedOption.prototype.getPositiveIntValue=function(){return e.Message.getFieldWithDefault(this,4,0)},proto.google.protobuf.UninterpretedOption.prototype.setPositiveIntValue=function(be){return e.Message.setField(this,4,be)},proto.google.protobuf.UninterpretedOption.prototype.clearPositiveIntValue=function(){return e.Message.setField(this,4,void 0)},proto.google.protobuf.UninterpretedOption.prototype.hasPositiveIntValue=function(){return e.Message.getField(this,4)!=null},proto.google.protobuf.UninterpretedOption.prototype.getNegativeIntValue=function(){return e.Message.getFieldWithDefault(this,5,0)},proto.google.protobuf.UninterpretedOption.prototype.setNegativeIntValue=function(be){return e.Message.setField(this,5,be)},proto.google.protobuf.UninterpretedOption.prototype.clearNegativeIntValue=function(){return e.Message.setField(this,5,void 0)},proto.google.protobuf.UninterpretedOption.prototype.hasNegativeIntValue=function(){return e.Message.getField(this,5)!=null},proto.google.protobuf.UninterpretedOption.prototype.getDoubleValue=function(){return e.Message.getFloatingPointFieldWithDefault(this,6,0)},proto.google.protobuf.UninterpretedOption.prototype.setDoubleValue=function(be){return e.Message.setField(this,6,be)},proto.google.protobuf.UninterpretedOption.prototype.clearDoubleValue=function(){return e.Message.setField(this,6,void 0)},proto.google.protobuf.UninterpretedOption.prototype.hasDoubleValue=function(){return e.Message.getField(this,6)!=null},proto.google.protobuf.UninterpretedOption.prototype.getStringValue=function(){return e.Message.getFieldWithDefault(this,7,"")},proto.google.protobuf.UninterpretedOption.prototype.getStringValue_asB64=function(){return e.Message.bytesAsB64(this.getStringValue())},proto.google.protobuf.UninterpretedOption.prototype.getStringValue_asU8=function(){return e.Message.bytesAsU8(this.getStringValue())},proto.google.protobuf.UninterpretedOption.prototype.setStringValue=function(be){return e.Message.setField(this,7,be)},proto.google.protobuf.UninterpretedOption.prototype.clearStringValue=function(){return e.Message.setField(this,7,void 0)},proto.google.protobuf.UninterpretedOption.prototype.hasStringValue=function(){return e.Message.getField(this,7)!=null},proto.google.protobuf.UninterpretedOption.prototype.getAggregateValue=function(){return e.Message.getFieldWithDefault(this,8,"")},proto.google.protobuf.UninterpretedOption.prototype.setAggregateValue=function(be){return e.Message.setField(this,8,be)},proto.google.protobuf.UninterpretedOption.prototype.clearAggregateValue=function(){return e.Message.setField(this,8,void 0)},proto.google.protobuf.UninterpretedOption.prototype.hasAggregateValue=function(){return e.Message.getField(this,8)!=null},proto.google.protobuf.SourceCodeInfo.repeatedFields_=[1],e.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.SourceCodeInfo.prototype.toObject=function(be){return proto.google.protobuf.SourceCodeInfo.toObject(be,this)},proto.google.protobuf.SourceCodeInfo.toObject=function(be,ve){var Ee={locationList:e.Message.toObjectList(ve.getLocationList(),proto.google.protobuf.SourceCodeInfo.Location.toObject,be)};return be&&(Ee.$jspbMessageInstance=ve),Ee}),proto.google.protobuf.SourceCodeInfo.deserializeBinary=function(be){var ve=new e.BinaryReader(be),Ee=new proto.google.protobuf.SourceCodeInfo;return proto.google.protobuf.SourceCodeInfo.deserializeBinaryFromReader(Ee,ve)},proto.google.protobuf.SourceCodeInfo.deserializeBinaryFromReader=function(be,ve){for(;ve.nextField()&&!ve.isEndGroup();){var Ee=ve.getFieldNumber();switch(Ee){case 1:var Oe=new proto.google.protobuf.SourceCodeInfo.Location;ve.readMessage(Oe,proto.google.protobuf.SourceCodeInfo.Location.deserializeBinaryFromReader),be.addLocation(Oe);break;default:ve.skipField();break}}return be},proto.google.protobuf.SourceCodeInfo.prototype.serializeBinary=function(){var be=new e.BinaryWriter;return proto.google.protobuf.SourceCodeInfo.serializeBinaryToWriter(this,be),be.getResultBuffer()},proto.google.protobuf.SourceCodeInfo.serializeBinaryToWriter=function(be,ve){var Ee=void 0;Ee=be.getLocationList(),Ee.length>0&&ve.writeRepeatedMessage(1,Ee,proto.google.protobuf.SourceCodeInfo.Location.serializeBinaryToWriter)},proto.google.protobuf.SourceCodeInfo.Location.repeatedFields_=[1,2,6],e.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.SourceCodeInfo.Location.prototype.toObject=function(be){return proto.google.protobuf.SourceCodeInfo.Location.toObject(be,this)},proto.google.protobuf.SourceCodeInfo.Location.toObject=function(be,ve){var Ee,Oe={pathList:(Ee=e.Message.getRepeatedField(ve,1))==null?void 0:Ee,spanList:(Ee=e.Message.getRepeatedField(ve,2))==null?void 0:Ee,leadingComments:(Ee=e.Message.getField(ve,3))==null?void 0:Ee,trailingComments:(Ee=e.Message.getField(ve,4))==null?void 0:Ee,leadingDetachedCommentsList:(Ee=e.Message.getRepeatedField(ve,6))==null?void 0:Ee};return be&&(Oe.$jspbMessageInstance=ve),Oe}),proto.google.protobuf.SourceCodeInfo.Location.deserializeBinary=function(be){var ve=new e.BinaryReader(be),Ee=new proto.google.protobuf.SourceCodeInfo.Location;return proto.google.protobuf.SourceCodeInfo.Location.deserializeBinaryFromReader(Ee,ve)},proto.google.protobuf.SourceCodeInfo.Location.deserializeBinaryFromReader=function(be,ve){for(;ve.nextField()&&!ve.isEndGroup();){var Ee=ve.getFieldNumber();switch(Ee){case 1:for(var xe=ve.isDelimited()?ve.readPackedInt32():[ve.readInt32()],Oe=0;Oe<xe.length;Oe++)be.addPath(xe[Oe]);break;case 2:for(var xe=ve.isDelimited()?ve.readPackedInt32():[ve.readInt32()],Oe=0;Oe<xe.length;Oe++)be.addSpan(xe[Oe]);break;case 3:var gr=ve.readString();be.setLeadingComments(gr);break;case 4:var gr=ve.readString();be.setTrailingComments(gr);break;case 6:var gr=ve.readString();be.addLeadingDetachedComments(gr);break;default:ve.skipField();break}}return be},proto.google.protobuf.SourceCodeInfo.Location.prototype.serializeBinary=function(){var be=new e.BinaryWriter;return proto.google.protobuf.SourceCodeInfo.Location.serializeBinaryToWriter(this,be),be.getResultBuffer()},proto.google.protobuf.SourceCodeInfo.Location.serializeBinaryToWriter=function(be,ve){var Ee=void 0;Ee=be.getPathList(),Ee.length>0&&ve.writePackedInt32(1,Ee),Ee=be.getSpanList(),Ee.length>0&&ve.writePackedInt32(2,Ee),Ee=e.Message.getField(be,3),Ee!=null&&ve.writeString(3,Ee),Ee=e.Message.getField(be,4),Ee!=null&&ve.writeString(4,Ee),Ee=be.getLeadingDetachedCommentsList(),Ee.length>0&&ve.writeRepeatedString(6,Ee)},proto.google.protobuf.SourceCodeInfo.Location.prototype.getPathList=function(){return e.Message.getRepeatedField(this,1)},proto.google.protobuf.SourceCodeInfo.Location.prototype.setPathList=function(be){return e.Message.setField(this,1,be||[])},proto.google.protobuf.SourceCodeInfo.Location.prototype.addPath=function(be,ve){return e.Message.addToRepeatedField(this,1,be,ve)},proto.google.protobuf.SourceCodeInfo.Location.prototype.clearPathList=function(){return this.setPathList([])},proto.google.protobuf.SourceCodeInfo.Location.prototype.getSpanList=function(){return e.Message.getRepeatedField(this,2)},proto.google.protobuf.SourceCodeInfo.Location.prototype.setSpanList=function(be){return e.Message.setField(this,2,be||[])},proto.google.protobuf.SourceCodeInfo.Location.prototype.addSpan=function(be,ve){return e.Message.addToRepeatedField(this,2,be,ve)},proto.google.protobuf.SourceCodeInfo.Location.prototype.clearSpanList=function(){return this.setSpanList([])},proto.google.protobuf.SourceCodeInfo.Location.prototype.getLeadingComments=function(){return e.Message.getFieldWithDefault(this,3,"")},proto.google.protobuf.SourceCodeInfo.Location.prototype.setLeadingComments=function(be){return e.Message.setField(this,3,be)},proto.google.protobuf.SourceCodeInfo.Location.prototype.clearLeadingComments=function(){return e.Message.setField(this,3,void 0)},proto.google.protobuf.SourceCodeInfo.Location.prototype.hasLeadingComments=function(){return e.Message.getField(this,3)!=null},proto.google.protobuf.SourceCodeInfo.Location.prototype.getTrailingComments=function(){return e.Message.getFieldWithDefault(this,4,"")},proto.google.protobuf.SourceCodeInfo.Location.prototype.setTrailingComments=function(be){return e.Message.setField(this,4,be)},proto.google.protobuf.SourceCodeInfo.Location.prototype.clearTrailingComments=function(){return e.Message.setField(this,4,void 0)},proto.google.protobuf.SourceCodeInfo.Location.prototype.hasTrailingComments=function(){return e.Message.getField(this,4)!=null},proto.google.protobuf.SourceCodeInfo.Location.prototype.getLeadingDetachedCommentsList=function(){return e.Message.getRepeatedField(this,6)},proto.google.protobuf.SourceCodeInfo.Location.prototype.setLeadingDetachedCommentsList=function(be){return e.Message.setField(this,6,be||[])},proto.google.protobuf.SourceCodeInfo.Location.prototype.addLeadingDetachedComments=function(be,ve){return e.Message.addToRepeatedField(this,6,be,ve)},proto.google.protobuf.SourceCodeInfo.Location.prototype.clearLeadingDetachedCommentsList=function(){return this.setLeadingDetachedCommentsList([])},proto.google.protobuf.SourceCodeInfo.prototype.getLocationList=function(){return e.Message.getRepeatedWrapperField(this,proto.google.protobuf.SourceCodeInfo.Location,1)},proto.google.protobuf.SourceCodeInfo.prototype.setLocationList=function(be){return e.Message.setRepeatedWrapperField(this,1,be)},proto.google.protobuf.SourceCodeInfo.prototype.addLocation=function(be,ve){return e.Message.addToRepeatedWrapperField(this,1,be,proto.google.protobuf.SourceCodeInfo.Location,ve)},proto.google.protobuf.SourceCodeInfo.prototype.clearLocationList=function(){return this.setLocationList([])},proto.google.protobuf.GeneratedCodeInfo.repeatedFields_=[1],e.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.GeneratedCodeInfo.prototype.toObject=function(be){return proto.google.protobuf.GeneratedCodeInfo.toObject(be,this)},proto.google.protobuf.GeneratedCodeInfo.toObject=function(be,ve){var Ee={annotationList:e.Message.toObjectList(ve.getAnnotationList(),proto.google.protobuf.GeneratedCodeInfo.Annotation.toObject,be)};return be&&(Ee.$jspbMessageInstance=ve),Ee}),proto.google.protobuf.GeneratedCodeInfo.deserializeBinary=function(be){var ve=new e.BinaryReader(be),Ee=new proto.google.protobuf.GeneratedCodeInfo;return proto.google.protobuf.GeneratedCodeInfo.deserializeBinaryFromReader(Ee,ve)},proto.google.protobuf.GeneratedCodeInfo.deserializeBinaryFromReader=function(be,ve){for(;ve.nextField()&&!ve.isEndGroup();){var Ee=ve.getFieldNumber();switch(Ee){case 1:var Oe=new proto.google.protobuf.GeneratedCodeInfo.Annotation;ve.readMessage(Oe,proto.google.protobuf.GeneratedCodeInfo.Annotation.deserializeBinaryFromReader),be.addAnnotation(Oe);break;default:ve.skipField();break}}return be},proto.google.protobuf.GeneratedCodeInfo.prototype.serializeBinary=function(){var be=new e.BinaryWriter;return proto.google.protobuf.GeneratedCodeInfo.serializeBinaryToWriter(this,be),be.getResultBuffer()},proto.google.protobuf.GeneratedCodeInfo.serializeBinaryToWriter=function(be,ve){var Ee=void 0;Ee=be.getAnnotationList(),Ee.length>0&&ve.writeRepeatedMessage(1,Ee,proto.google.protobuf.GeneratedCodeInfo.Annotation.serializeBinaryToWriter)},proto.google.protobuf.GeneratedCodeInfo.Annotation.repeatedFields_=[1],e.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.GeneratedCodeInfo.Annotation.prototype.toObject=function(be){return proto.google.protobuf.GeneratedCodeInfo.Annotation.toObject(be,this)},proto.google.protobuf.GeneratedCodeInfo.Annotation.toObject=function(be,ve){var Ee,Oe={pathList:(Ee=e.Message.getRepeatedField(ve,1))==null?void 0:Ee,sourceFile:(Ee=e.Message.getField(ve,2))==null?void 0:Ee,begin:(Ee=e.Message.getField(ve,3))==null?void 0:Ee,end:(Ee=e.Message.getField(ve,4))==null?void 0:Ee};return be&&(Oe.$jspbMessageInstance=ve),Oe}),proto.google.protobuf.GeneratedCodeInfo.Annotation.deserializeBinary=function(be){var ve=new e.BinaryReader(be),Ee=new proto.google.protobuf.GeneratedCodeInfo.Annotation;return proto.google.protobuf.GeneratedCodeInfo.Annotation.deserializeBinaryFromReader(Ee,ve)},proto.google.protobuf.GeneratedCodeInfo.Annotation.deserializeBinaryFromReader=function(be,ve){for(;ve.nextField()&&!ve.isEndGroup();){var Ee=ve.getFieldNumber();switch(Ee){case 1:for(var Oe=ve.isDelimited()?ve.readPackedInt32():[ve.readInt32()],xe=0;xe<Oe.length;xe++)be.addPath(Oe[xe]);break;case 2:var gr=ve.readString();be.setSourceFile(gr);break;case 3:var gr=ve.readInt32();be.setBegin(gr);break;case 4:var gr=ve.readInt32();be.setEnd(gr);break;default:ve.skipField();break}}return be},proto.google.protobuf.GeneratedCodeInfo.Annotation.prototype.serializeBinary=function(){var be=new e.BinaryWriter;return proto.google.protobuf.GeneratedCodeInfo.Annotation.serializeBinaryToWriter(this,be),be.getResultBuffer()},proto.google.protobuf.GeneratedCodeInfo.Annotation.serializeBinaryToWriter=function(be,ve){var Ee=void 0;Ee=be.getPathList(),Ee.length>0&&ve.writePackedInt32(1,Ee),Ee=e.Message.getField(be,2),Ee!=null&&ve.writeString(2,Ee),Ee=e.Message.getField(be,3),Ee!=null&&ve.writeInt32(3,Ee),Ee=e.Message.getField(be,4),Ee!=null&&ve.writeInt32(4,Ee)},proto.google.protobuf.GeneratedCodeInfo.Annotation.prototype.getPathList=function(){return e.Message.getRepeatedField(this,1)},proto.google.protobuf.GeneratedCodeInfo.Annotation.prototype.setPathList=function(be){return e.Message.setField(this,1,be||[])},proto.google.protobuf.GeneratedCodeInfo.Annotation.prototype.addPath=function(be,ve){return e.Message.addToRepeatedField(this,1,be,ve)},proto.google.protobuf.GeneratedCodeInfo.Annotation.prototype.clearPathList=function(){return this.setPathList([])},proto.google.protobuf.GeneratedCodeInfo.Annotation.prototype.getSourceFile=function(){return e.Message.getFieldWithDefault(this,2,"")},proto.google.protobuf.GeneratedCodeInfo.Annotation.prototype.setSourceFile=function(be){return e.Message.setField(this,2,be)},proto.google.protobuf.GeneratedCodeInfo.Annotation.prototype.clearSourceFile=function(){return e.Message.setField(this,2,void 0)},proto.google.protobuf.GeneratedCodeInfo.Annotation.prototype.hasSourceFile=function(){return e.Message.getField(this,2)!=null},proto.google.protobuf.GeneratedCodeInfo.Annotation.prototype.getBegin=function(){return e.Message.getFieldWithDefault(this,3,0)},proto.google.protobuf.GeneratedCodeInfo.Annotation.prototype.setBegin=function(be){return e.Message.setField(this,3,be)},proto.google.protobuf.GeneratedCodeInfo.Annotation.prototype.clearBegin=function(){return e.Message.setField(this,3,void 0)},proto.google.protobuf.GeneratedCodeInfo.Annotation.prototype.hasBegin=function(){return e.Message.getField(this,3)!=null},proto.google.protobuf.GeneratedCodeInfo.Annotation.prototype.getEnd=function(){return e.Message.getFieldWithDefault(this,4,0)},proto.google.protobuf.GeneratedCodeInfo.Annotation.prototype.setEnd=function(be){return e.Message.setField(this,4,be)},proto.google.protobuf.GeneratedCodeInfo.Annotation.prototype.clearEnd=function(){return e.Message.setField(this,4,void 0)},proto.google.protobuf.GeneratedCodeInfo.Annotation.prototype.hasEnd=function(){return e.Message.getField(this,4)!=null},proto.google.protobuf.GeneratedCodeInfo.prototype.getAnnotationList=function(){return e.Message.getRepeatedWrapperField(this,proto.google.protobuf.GeneratedCodeInfo.Annotation,1)},proto.google.protobuf.GeneratedCodeInfo.prototype.setAnnotationList=function(be){return e.Message.setRepeatedWrapperField(this,1,be)},proto.google.protobuf.GeneratedCodeInfo.prototype.addAnnotation=function(be,ve){return e.Message.addToRepeatedWrapperField(this,1,be,proto.google.protobuf.GeneratedCodeInfo.Annotation,ve)},proto.google.protobuf.GeneratedCodeInfo.prototype.clearAnnotationList=function(){return this.setAnnotationList([])},ye.object.extend(fe,proto.google.protobuf)})(descriptor_pb);var util={},options_pb={};(function(fe){var e=googleProtobuf,ye=e,me=function(){return this?this:typeof window<"u"?window:typeof me<"u"?me:typeof self<"u"?self:Function("return this")()}.call(null),be=descriptor_pb;ye.object.extend(proto,be),ye.exportSymbol("proto.koinos.btype",null,me),ye.exportSymbol("proto.koinos.bytes_type",null,me),proto.koinos.bytes_type={BASE64:0,BASE58:1,HEX:2,BLOCK_ID:3,TRANSACTION_ID:4,CONTRACT_ID:5,ADDRESS:6},proto.koinos.btype=new e.ExtensionFieldInfo(5e4,{btype:0},null,null,0),be.FieldOptions.extensionsBinary[5e4]=new e.ExtensionFieldBinaryInfo(proto.koinos.btype,e.BinaryReader.prototype.readEnum,e.BinaryWriter.prototype.writeEnum,void 0,void 0,!1),be.FieldOptions.extensions[5e4]=proto.koinos.btype,ye.object.extend(fe,proto.koinos)})(options_pb);var __createBinding$2=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(fe,e,ye,me){me===void 0&&(me=ye);var be=Object.getOwnPropertyDescriptor(e,ye);(!be||("get"in be?!e.__esModule:be.writable||be.configurable))&&(be={enumerable:!0,get:function(){return e[ye]}}),Object.defineProperty(fe,me,be)}:function(fe,e,ye,me){me===void 0&&(me=ye),fe[me]=e[ye]}),__setModuleDefault$2=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(fe,e){Object.defineProperty(fe,"default",{enumerable:!0,value:e})}:function(fe,e){fe.default=e}),__importStar$2=commonjsGlobal&&commonjsGlobal.__importStar||function(fe){if(fe&&fe.__esModule)return fe;var e={};if(fe!=null)for(var ye in fe)ye!=="default"&&Object.prototype.hasOwnProperty.call(fe,ye)&&__createBinding$2(e,fe,ye);return __setModuleDefault$2(e,fe),e};Object.defineProperty(util,"__esModule",{value:!0});util.getMessage=util.getOneofs=util.getField=util.getFieldType=util.getFieldLabel=util.getbType=util.getJSType=util.getExtension=util.getEnum=util.getImport=util.getPackage=util.getSyntax=void 0;const descriptor_pb_js_1$1=descriptor_pb,optionspb=__importStar$2(options_pb);function getSyntax(fe){return`syntax = '${fe.getSyntax()}';

`}util.getSyntax=getSyntax;function getPackage(fe){return`package ${fe.getPackage()};

`}util.getPackage=getPackage;function getImport(fe){return`import "${fe}";

`}util.getImport=getImport;function getEnum(fe){const e=[];for(const ye of fe.getValueList())e.push(`${ye.getName()} = ${ye.getNumber()};`);return`
enum ${fe.getName()} {
  ${e.join(`
  `)} 
}

`}util.getEnum=getEnum;function getExtension(fe){const e=fe.hasProto3Optional()?"optional":"";return`
extend ${fe.getExtendee()} {
  ${e} ${fe.getTypeName()} ${fe.getName()} = ${fe.getNumber()};
}

`}util.getExtension=getExtension;function getJSType(fe){if(!fe)return"";switch(fe.getJstype()){case descriptor_pb_js_1$1.FieldOptions.JSType.JS_NORMAL:return"";case descriptor_pb_js_1$1.FieldOptions.JSType.JS_NUMBER:return"jstype = JS_NUMBER";case descriptor_pb_js_1$1.FieldOptions.JSType.JS_STRING:return"jstype = JS_STRING";default:return""}}util.getJSType=getJSType;function getbType(fe){if(!fe)return"";switch(fe.getExtension(optionspb.btype)){case optionspb.bytes_type.BASE64:return"(koinos.btype) = BASE64";case optionspb.bytes_type.BASE58:return"(koinos.btype) = BASE58";case optionspb.bytes_type.HEX:return"(koinos.btype) = HEX";case optionspb.bytes_type.BLOCK_ID:return"(koinos.btype) = BLOCK_ID";case optionspb.bytes_type.TRANSACTION_ID:return"(koinos.btype) = TRANSACTION_ID";case optionspb.bytes_type.CONTRACT_ID:return"(koinos.btype) = CONTRACT_ID";case optionspb.bytes_type.ADDRESS:return"(koinos.btype) = ADDRESS";default:return""}}util.getbType=getbType;function getFieldLabel(fe){switch(fe.getLabel()){case descriptor_pb_js_1$1.FieldDescriptorProto.Label.LABEL_REPEATED:return"repeated";case descriptor_pb_js_1$1.FieldDescriptorProto.Label.LABEL_REQUIRED:return"required";case descriptor_pb_js_1$1.FieldDescriptorProto.Label.LABEL_OPTIONAL:return"";default:throw new Error(`Label '${fe.getLabel()}' is not supported`)}}util.getFieldLabel=getFieldLabel;function getFieldType(fe){switch(fe.getType()){case descriptor_pb_js_1$1.FieldDescriptorProto.Type.TYPE_INT32:return"int32";case descriptor_pb_js_1$1.FieldDescriptorProto.Type.TYPE_SINT32:return"sint32";case descriptor_pb_js_1$1.FieldDescriptorProto.Type.TYPE_FIXED32:return"fixed32";case descriptor_pb_js_1$1.FieldDescriptorProto.Type.TYPE_SFIXED32:return"sfixed32";case descriptor_pb_js_1$1.FieldDescriptorProto.Type.TYPE_UINT32:return"uint32";case descriptor_pb_js_1$1.FieldDescriptorProto.Type.TYPE_INT64:return"int64";case descriptor_pb_js_1$1.FieldDescriptorProto.Type.TYPE_SINT64:return"sint64";case descriptor_pb_js_1$1.FieldDescriptorProto.Type.TYPE_FIXED64:return"fixed64";case descriptor_pb_js_1$1.FieldDescriptorProto.Type.TYPE_SFIXED64:return"sfixed64";case descriptor_pb_js_1$1.FieldDescriptorProto.Type.TYPE_UINT64:return"uint64";case descriptor_pb_js_1$1.FieldDescriptorProto.Type.TYPE_FLOAT:return"float";case descriptor_pb_js_1$1.FieldDescriptorProto.Type.TYPE_DOUBLE:return"double";case descriptor_pb_js_1$1.FieldDescriptorProto.Type.TYPE_BOOL:return"bool";case descriptor_pb_js_1$1.FieldDescriptorProto.Type.TYPE_STRING:return"string";case descriptor_pb_js_1$1.FieldDescriptorProto.Type.TYPE_BYTES:return"bytes";case descriptor_pb_js_1$1.FieldDescriptorProto.Type.TYPE_MESSAGE:case descriptor_pb_js_1$1.FieldDescriptorProto.Type.TYPE_ENUM:return fe.getTypeName();default:throw new Error(`Type '${fe.getTypeName()}' is not supported`)}}util.getFieldType=getFieldType;function getField(fe){const e=fe.getOptions(),ye=fe.getName(),me=fe.getNumber(),be=fe.hasProto3Optional()?"optional":"",ve=getJSType(e),Ee=getbType(e),Oe=ve?`[${ve}]`:Ee?`[${Ee}]`:"";return`${be} ${getFieldLabel(fe)} ${getFieldType(fe)} ${ye} = ${me} ${Oe};`}util.getField=getField;function getOneofs(fe,e){const ye=[];for(const[me,be]of fe.getOneofDeclList().entries()){const ve=be.getName();e[me]&&ye.push(`
    oneof ${ve} {
      ${e[me].join(`
    `)}
    }

`)}return ye}util.getOneofs=getOneofs;function getMessage(fe){const e=[],ye=[],me=[];for(const ve of fe.getNestedTypeList())e.push(getMessage(ve));for(const ve of fe.getFieldList()){const Ee=getField(ve);if(ve.hasOneofIndex()&&!ve.hasProto3Optional()){const Oe=ve.getOneofIndex();if(Oe===void 0)throw new Error("Missing one_of index.");let xe=me[Oe];xe===void 0&&(xe=[],me[Oe]=xe),xe.push(Ee)}else ye.push(Ee)}const be=getOneofs(fe,me);return`
  message ${fe.getName()} {
    ${e.join(`
  `)}
    ${ye.join(`
  `)}
    ${be.join(`
  `)}
  }

`}util.getMessage=getMessage;Object.defineProperty(lib$1,"__esModule",{value:!0});lib$1.convert=void 0;const descriptor_pb_js_1=descriptor_pb,util_1=util,convert=fe=>{const e=typeof fe=="string"?Buffer.from(fe,"base64"):fe,ye=descriptor_pb_js_1.FileDescriptorSet.deserializeBinary(e),me=[];for(const be of ye.getFileList()){const ve=be.getName()||"";let Ee="";be.hasSyntax()&&(Ee+=(0,util_1.getSyntax)(be)),be.hasPackage()&&(Ee+=(0,util_1.getPackage)(be)),be.hasOptions();for(const Oe of be.getDependencyList())Ee+=(0,util_1.getImport)(Oe);for(const Oe of be.getEnumTypeList())Ee+=(0,util_1.getEnum)(Oe);for(const Oe of be.getExtensionList())Ee+=(0,util_1.getExtension)(Oe);for(const Oe of be.getMessageTypeList())Ee+=(0,util_1.getMessage)(Oe);me.push({file:ve,definition:Ee})}return me};lib$1.convert=convert;var __createBinding$1=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(fe,e,ye,me){me===void 0&&(me=ye);var be=Object.getOwnPropertyDescriptor(e,ye);(!be||("get"in be?!e.__esModule:be.writable||be.configurable))&&(be={enumerable:!0,get:function(){return e[ye]}}),Object.defineProperty(fe,me,be)}:function(fe,e,ye,me){me===void 0&&(me=ye),fe[me]=e[ye]}),__setModuleDefault$1=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(fe,e){Object.defineProperty(fe,"default",{enumerable:!0,value:e})}:function(fe,e){fe.default=e}),__importStar$1=commonjsGlobal&&commonjsGlobal.__importStar||function(fe){if(fe&&fe.__esModule)return fe;var e={};if(fe!=null)for(var ye in fe)ye!=="default"&&Object.prototype.hasOwnProperty.call(fe,ye)&&__createBinding$1(e,fe,ye);return __setModuleDefault$1(e,fe),e};Object.defineProperty(Serializer$1,"__esModule",{value:!0});Serializer$1.Serializer=void 0;const protobufjs_1=protobufjs,koinosPbToProto=__importStar$1(lib$1),utils_1$4=utils$1,OP_BYTES_1="(btype)",OP_BYTES_2="(koinos.btype)",nativeTypes=["double","float","int32","int64","uint32","uint64","sint32","sint64","fixed32","fixed64","sfixed32","sfixed64","bool","string","bytes"];class Serializer{constructor(e,ye){if(this.bytesConversion=!0,this.verifyChecksum={serialize:!0,deserialize:!1},this.types=e,typeof e=="string"){const me=koinosPbToProto.convert((0,utils_1$4.decodeBase64)(e));this.root=new protobufjs_1.Root;for(const be of me)(0,protobufjs_1.parse)(be.definition,this.root,{keepCase:!0})}else this.root=protobufjs_1.Root.fromJSON(e);ye!=null&&ye.defaultTypeName&&(this.defaultType=this.root.lookupType(ye.defaultTypeName)),ye&&typeof ye.bytesConversion<"u"&&(this.bytesConversion=ye.bytesConversion)}btypeDecode(e,ye,me){const be={};return Object.keys(ye.fields).forEach(ve=>{const{options:Ee,name:Oe,type:xe,rule:gr}=ye.fields[ve];if(!e[Oe])return;const we={type:xe};if(Ee&&(Ee[OP_BYTES_1]?we.btype=Ee[OP_BYTES_1]:Ee[OP_BYTES_2]&&(we.btype=Ee[OP_BYTES_2])),gr==="repeated"){be[Oe]=e[Oe].map(Se=>{if(!nativeTypes.includes(xe)){const $r=this.root.lookupTypeOrEnum(xe);return $r.fields?this.btypeDecode(Se,$r,me):Se}return(0,utils_1$4.btypeDecodeValue)(Se,we,me)});return}if(!nativeTypes.includes(xe)){const Se=this.root.lookupTypeOrEnum(xe);if(!Se.fields){be[Oe]=e[Oe];return}be[Oe]=this.btypeDecode(e[Oe],Se,me);return}be[Oe]=(0,utils_1$4.btypeDecodeValue)(e[Oe],we,me)}),be}btypeEncode(e,ye,me){const be={};return Object.keys(ye.fields).forEach(ve=>{const{options:Ee,name:Oe,type:xe,rule:gr}=ye.fields[ve];if(!e[Oe])return;const we={type:xe};if(Ee&&(Ee[OP_BYTES_1]?we.btype=Ee[OP_BYTES_1]:Ee[OP_BYTES_2]&&(we.btype=Ee[OP_BYTES_2])),gr==="repeated"){be[Oe]=e[Oe].map(Se=>{if(!nativeTypes.includes(xe)){const $r=this.root.lookupTypeOrEnum(xe);return $r.fields?this.btypeEncode(Se,$r,me):Se}return(0,utils_1$4.btypeEncodeValue)(Se,we,me)});return}if(!nativeTypes.includes(xe)){const Se=this.root.lookupTypeOrEnum(xe);if(!Se.fields){be[Oe]=e[Oe];return}be[Oe]=this.btypeEncode(e[Oe],Se,me);return}be[Oe]=(0,utils_1$4.btypeEncodeValue)(e[Oe],we,me)}),be}async serialize(e,ye,me){let be;if(this.defaultType)be=this.defaultType;else if(ye)be=this.root.lookupType(ye);else throw new Error("no typeName defined");let ve={};const Ee=(me==null?void 0:me.bytesConversion)===void 0?this.bytesConversion:me.bytesConversion,Oe=(me==null?void 0:me.verifyChecksum)===void 0?this.verifyChecksum.serialize:me.verifyChecksum;Ee?ve=this.btypeDecode(e,be,Oe):ve=e;const xe=be.create(ve);return be.encode(xe).finish()}async deserialize(e,ye,me){const be=typeof e=="string"?(0,utils_1$4.decodeBase64url)(e):e;let ve;if(this.defaultType)ve=this.defaultType;else if(ye)ve=this.root.lookupType(ye);else throw new Error("no typeName defined");const Ee=ve.decode(be),Oe=ve.toObject(Ee,{longs:String,defaults:!0}),xe=(me==null?void 0:me.bytesConversion)===void 0?this.bytesConversion:me.bytesConversion,gr=(me==null?void 0:me.verifyChecksum)===void 0?this.verifyChecksum.deserialize:me.verifyChecksum;return xe?this.btypeEncode(Oe,ve,gr):Oe}}Serializer$1.Serializer=Serializer;Serializer$1.default=Serializer;const nested={koinos:{options:{go_package:"github.com/koinos/koinos-proto-golang/koinos"},nested:{block_topology:{fields:{id:{type:"bytes",id:1,options:{"(btype)":"BLOCK_ID"}},height:{type:"uint64",id:2,options:{jstype:"JS_STRING"}},previous:{type:"bytes",id:3,options:{"(btype)":"BLOCK_ID"}}}},protocol:{options:{go_package:"github.com/koinos/koinos-proto-golang/koinos/protocol"},nested:{event_data:{fields:{sequence:{type:"uint32",id:1},source:{type:"bytes",id:2,options:{"(btype)":"CONTRACT_ID"}},name:{type:"string",id:3},data:{type:"bytes",id:4},impacted:{rule:"repeated",type:"bytes",id:5,options:{"(btype)":"ADDRESS"}}}},contract_call_bundle:{fields:{contract_id:{type:"bytes",id:1,options:{"(btype)":"CONTRACT_ID"}},entry_point:{type:"uint32",id:2}}},system_call_target:{oneofs:{target:{oneof:["thunk_id","system_call_bundle"]}},fields:{thunk_id:{type:"uint32",id:1},system_call_bundle:{type:"contract_call_bundle",id:2}}},upload_contract_operation:{fields:{contract_id:{type:"bytes",id:1,options:{"(btype)":"CONTRACT_ID"}},bytecode:{type:"bytes",id:2},abi:{type:"string",id:3},authorizes_call_contract:{type:"bool",id:4},authorizes_transaction_application:{type:"bool",id:5},authorizes_upload_contract:{type:"bool",id:6}}},call_contract_operation:{fields:{contract_id:{type:"bytes",id:1,options:{"(btype)":"CONTRACT_ID"}},entry_point:{type:"uint32",id:2},args:{type:"bytes",id:3}}},set_system_call_operation:{fields:{call_id:{type:"uint32",id:1},target:{type:"system_call_target",id:2}}},set_system_contract_operation:{fields:{contract_id:{type:"bytes",id:1,options:{"(btype)":"CONTRACT_ID"}},system_contract:{type:"bool",id:2}}},operation:{oneofs:{op:{oneof:["upload_contract","call_contract","set_system_call","set_system_contract"]}},fields:{upload_contract:{type:"upload_contract_operation",id:1},call_contract:{type:"call_contract_operation",id:2},set_system_call:{type:"set_system_call_operation",id:3},set_system_contract:{type:"set_system_contract_operation",id:4}}},transaction_header:{fields:{chain_id:{type:"bytes",id:1},rc_limit:{type:"uint64",id:2,options:{jstype:"JS_STRING"}},nonce:{type:"bytes",id:3},operation_merkle_root:{type:"bytes",id:4},payer:{type:"bytes",id:5,options:{"(btype)":"ADDRESS"}},payee:{type:"bytes",id:6,options:{"(btype)":"ADDRESS"}}}},transaction:{fields:{id:{type:"bytes",id:1,options:{"(btype)":"TRANSACTION_ID"}},header:{type:"transaction_header",id:2},operations:{rule:"repeated",type:"operation",id:3},signatures:{rule:"repeated",type:"bytes",id:4}}},transaction_receipt:{fields:{id:{type:"bytes",id:1,options:{"(btype)":"TRANSACTION_ID"}},payer:{type:"bytes",id:2,options:{"(btype)":"ADDRESS"}},max_payer_rc:{type:"uint64",id:3,options:{jstype:"JS_STRING"}},rc_limit:{type:"uint64",id:4,options:{jstype:"JS_STRING"}},rc_used:{type:"uint64",id:5,options:{jstype:"JS_STRING"}},disk_storage_used:{type:"uint64",id:6,options:{jstype:"JS_STRING"}},network_bandwidth_used:{type:"uint64",id:7,options:{jstype:"JS_STRING"}},compute_bandwidth_used:{type:"uint64",id:8,options:{jstype:"JS_STRING"}},reverted:{type:"bool",id:9},events:{rule:"repeated",type:"event_data",id:10},logs:{rule:"repeated",type:"string",id:11}}},block_header:{fields:{previous:{type:"bytes",id:1,options:{"(btype)":"BLOCK_ID"}},height:{type:"uint64",id:2,options:{jstype:"JS_STRING"}},timestamp:{type:"uint64",id:3,options:{jstype:"JS_STRING"}},previous_state_merkle_root:{type:"bytes",id:4},transaction_merkle_root:{type:"bytes",id:5},signer:{type:"bytes",id:6,options:{"(btype)":"ADDRESS"}},approved_proposals:{rule:"repeated",type:"bytes",id:7,options:{"(btype)":"TRANSACTION_ID"}}}},block:{fields:{id:{type:"bytes",id:1,options:{"(btype)":"BLOCK_ID"}},header:{type:"block_header",id:2},transactions:{rule:"repeated",type:"transaction",id:3},signature:{type:"bytes",id:4}}},block_receipt:{fields:{id:{type:"bytes",id:1,options:{"(btype)":"BLOCK_ID"}},height:{type:"uint64",id:2,options:{jstype:"JS_STRING"}},disk_storage_used:{type:"uint64",id:3,options:{jstype:"JS_STRING"}},network_bandwidth_used:{type:"uint64",id:4,options:{jstype:"JS_STRING"}},compute_bandwidth_used:{type:"uint64",id:5,options:{jstype:"JS_STRING"}},state_merkle_root:{type:"bytes",id:6},events:{rule:"repeated",type:"event_data",id:7},transaction_receipts:{rule:"repeated",type:"transaction_receipt",id:8},logs:{rule:"repeated",type:"string",id:9}}}}},chain:{options:{go_package:"github.com/koinos/koinos-proto-golang/koinos/chain"},nested:{error_data:{fields:{message:{type:"string",id:1}}},result:{oneofs:{value:{oneof:["object","error"]}},fields:{object:{type:"bytes",id:1},error:{type:"error_data",id:2}}},object_space:{fields:{system:{type:"bool",id:1},zone:{type:"bytes",id:2},id:{type:"uint32",id:3}}},database_key:{fields:{space:{type:"object_space",id:1},key:{type:"bytes",id:2}}},max_account_resources:{fields:{value:{type:"uint64",id:1,options:{jstype:"JS_STRING"}}}},privilege:{values:{kernel_mode:0,user_mode:1}},head_info:{fields:{head_topology:{type:"block_topology",id:1},head_block_time:{type:"uint64",id:2,options:{jstype:"JS_STRING"}},last_irreversible_block:{type:"uint64",id:3,options:{jstype:"JS_STRING"}}}},caller_data:{fields:{caller:{type:"bytes",id:1,options:{"(btype)":"ADDRESS"}},caller_privilege:{type:"privilege",id:2}}},argument_data:{fields:{entry_point:{type:"uint32",id:1},arguments:{type:"bytes",id:2}}},resource_limit_data:{fields:{disk_storage_limit:{type:"uint64",id:1,options:{jstype:"JS_STRING"}},disk_storage_cost:{type:"uint64",id:2,options:{jstype:"JS_STRING"}},network_bandwidth_limit:{type:"uint64",id:3,options:{jstype:"JS_STRING"}},network_bandwidth_cost:{type:"uint64",id:4,options:{jstype:"JS_STRING"}},compute_bandwidth_limit:{type:"uint64",id:5,options:{jstype:"JS_STRING"}},compute_bandwidth_cost:{type:"uint64",id:6,options:{jstype:"JS_STRING"}}}},contract_metadata_object:{fields:{hash:{type:"bytes",id:1},system:{type:"bool",id:2},authorizes_call_contract:{type:"bool",id:3},authorizes_transaction_application:{type:"bool",id:4},authorizes_upload_contract:{type:"bool",id:5}}},compute_bandwidth_entry:{fields:{name:{type:"string",id:1},compute:{type:"uint64",id:2}}},compute_bandwidth_registry:{fields:{entries:{rule:"repeated",type:"compute_bandwidth_entry",id:1}}},genesis_entry:{fields:{space:{type:"object_space",id:1},key:{type:"bytes",id:2},value:{type:"bytes",id:3}}},genesis_data:{fields:{entries:{rule:"repeated",type:"genesis_entry",id:1}}},dsa:{values:{ecdsa_secp256k1:0}}}}}}},require$$3={nested};var __importDefault$1=commonjsGlobal&&commonjsGlobal.__importDefault||function(fe){return fe&&fe.__esModule?fe:{default:fe}};Object.defineProperty(utilsNode,"__esModule",{value:!0});utilsNode.ChainTypes=utilsNode.decodeGenesisData=utilsNode.encodeGenesisData=void 0;const sha256_1$1=sha256,Serializer_1$1=Serializer$1,utils_1$3=utils$1,chain_proto_json_1=__importDefault$1(require$$3),defaultAlias={"object_key::head_block":{typeName:"block"},"object_key::chain_id":{},"object_key::genesis_key":{isAddress:!0},"object_key::resource_limit_data":{typeName:"resource_limit_data"},"object_key::max_account_resources":{typeName:"max_account_resources"},"object_key::protocol_descriptor":{},"object_key::compute_bandwidth_registry":{typeName:"compute_bandwidth_registry"},"object_key::block_hash_code":{}};function prepareDictionary(fe){const e=new Serializer_1$1.Serializer(chain_proto_json_1.default,{bytesConversion:!0}),ye={};return Object.keys(defaultAlias).forEach(be=>{const ve=(0,utils_1$3.encodeBase64)((0,utils_1$3.multihash)((0,sha256_1$1.sha256)(be)));ye[ve]={serializer:e,alias:be,...defaultAlias[be]}}),{...ye,...fe}}async function encodeGenesisData(fe,e={}){const ye={};if(!fe||!fe.entries)return ye;const me=prepareDictionary(e);return ye.entries=await Promise.all(fe.entries.map(async be=>{const ve=Object.keys(me).find(Se=>Se===be.key||be.alias&&me[Se].alias===be.alias);if(!ve)return{error:`key ${be.key} not found in the dictionary`,space:be.space,key:be.key,value:(0,utils_1$3.encodeBase64)(new Uint8Array)};const{isAddress:Ee,serializer:Oe,typeName:xe}=me[ve];let gr,we="";return Ee?gr=(0,utils_1$3.decodeBase58)(be.value):Oe&&xe?gr=await Oe.serialize(be.value,xe):(gr=new Uint8Array,we="no serializer or typeName defined in the dictionary"),{...we&&{error:we},space:be.space,key:ve,value:(0,utils_1$3.encodeBase64)(gr)}})),ye}utilsNode.encodeGenesisData=encodeGenesisData;async function decodeGenesisData(fe,e={}){const ye={};if(!fe||!fe.entries)return ye;const me=prepareDictionary(e);return ye.entries=await Promise.all(fe.entries.map(async be=>{const ve=Object.keys(me).find(Fr=>Fr===be.key);if(!ve)return{error:`key ${be.key} not found in the dictionary`,...be};const{isAddress:Ee,serializer:Oe,typeName:xe,alias:gr}=me[ve],we=(0,utils_1$3.encodeBase64url)((0,utils_1$3.decodeBase64)(be.value));let Se,$r="";return Ee?Se=(0,utils_1$3.encodeBase58)((0,utils_1$3.decodeBase64url)(we)):Oe&&xe?Se=await Oe.deserialize(we,xe):(Se=we,$r="no serializer or typeName defined in the dictionary"),{...$r&&{error:$r},space:be.space,key:ve,value:Se,...gr&&{alias:gr}}})),ye}utilsNode.decodeGenesisData=decodeGenesisData;utilsNode.ChainTypes=chain_proto_json_1.default;(function(fe){var e=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(me,be,ve,Ee){Ee===void 0&&(Ee=ve);var Oe=Object.getOwnPropertyDescriptor(be,ve);(!Oe||("get"in Oe?!be.__esModule:Oe.writable||Oe.configurable))&&(Oe={enumerable:!0,get:function(){return be[ve]}}),Object.defineProperty(me,Ee,Oe)}:function(me,be,ve,Ee){Ee===void 0&&(Ee=ve),me[Ee]=be[ve]}),ye=commonjsGlobal&&commonjsGlobal.__exportStar||function(me,be){for(var ve in me)ve!=="default"&&!Object.prototype.hasOwnProperty.call(be,ve)&&e(be,me,ve)};Object.defineProperty(fe,"__esModule",{value:!0}),ye(utils$1,fe),ye(utilsNode,fe)})(indexUtils);var _interface={};Object.defineProperty(_interface,"__esModule",{value:!0});var Contract$1={};Object.defineProperty(Contract$1,"__esModule",{value:!0});Contract$1.Contract=void 0;const Serializer_1=Serializer$1,utils_1$2=utils$1;class Contract{constructor(e){var ye;if(this.signer=e.signer,e.id)this.id=(0,utils_1$2.decodeBase58)(e.id);else{if(!this.signer)throw new Error("at least signer or contract id must be defined");this.id=(0,utils_1$2.decodeBase58)(this.signer.getAddress())}this.provider=e.provider||((ye=e.signer)===null||ye===void 0?void 0:ye.provider),this.abi=e.abi,this.bytecode=e.bytecode,e.serializer?this.serializer=e.serializer:e.abi&&e.abi.koilib_types?this.serializer=new Serializer_1.Serializer(e.abi.koilib_types):e.abi&&e.abi.types&&(this.serializer=new Serializer_1.Serializer(e.abi.types)),this.options={signTransaction:!0,sendTransaction:!0,broadcast:!0,sendAbis:!0,...e.options},this.functions={},this.updateFunctionsFromAbi()}getId(){return(0,utils_1$2.encodeBase58)(this.id)}async fetchAbi(e={updateFunctions:!0,updateSerializer:!0}){if(!this.provider)throw new Error("provider not found");const ye=await this.provider.call("contract_meta_store.get_contract_meta",{contract_id:this.getId()});if(!(!ye.meta||!ye.meta.abi))return this.abi=JSON.parse(ye.meta.abi),e.updateFunctions&&this.updateFunctionsFromAbi(),e.updateSerializer&&(this.abi.koilib_types?this.serializer=new Serializer_1.Serializer(this.abi.koilib_types):this.abi.types&&(this.serializer=new Serializer_1.Serializer(this.abi.types))),this.abi}updateFunctionsFromAbi(){return!this.abi||!this.abi.methods?!1:(Object.keys(this.abi.methods).forEach(e=>{this.functions[e]=async(ye={},me)=>{if(!this.provider)throw new Error("provider not found");if(!this.abi||!this.abi.methods)throw new Error("Methods are not defined");if(!this.abi.methods[e])throw new Error(`Method ${e} not defined in the ABI`);const be={...this.options,...me},{read_only:ve,return:Ee,default_output:Oe,preformat_argument:xe,preformat_return:gr}=this.abi.methods[e];let we;typeof xe=="function"?we=xe(ye):we=ye;const Se=await this.encodeOperation({name:e,args:we});if(be.onlyOperation)return{operation:Se};if(ve){if(!Ee)throw new Error(`No output defined for ${e}`);const{result:Vr}=await this.provider.readContract(Se.call_contract);let oo=Oe;return Vr&&(oo=await this.serializer.deserialize(Vr,Ee)),typeof gr=="function"&&(oo=gr(oo)),{operation:Se,result:oo}}if(!this.signer)throw new Error("signer not found");let $r=await this.signer.prepareTransaction({header:{...be.chainId&&{chain_id:be.chainId},...be.rcLimit&&{rc_limit:be.rcLimit},...be.nonce&&{nonce:be.nonce},...be.payer&&{payer:be.payer},...be.payee&&{payee:be.payee}},operations:[...be.previousOperations?be.previousOperations:[],Se,...be.nextOperations?be.nextOperations:[]]});if(be.sendAbis){be.abis||(be.abis={});const Vr=this.getId();be.abis[Vr]||(be.abis[Vr]=this.abi)}if(!be.sendTransaction){const Vr=()=>{throw new Error("This transaction was not broadcasted")};return be.signTransaction&&($r=await this.signer.signTransaction($r,be.sendAbis?be.abis:void 0)),{operation:Se,transaction:{...$r,wait:Vr}}}const{transaction:Fr,receipt:Br}=await this.signer.sendTransaction($r,be);return{operation:Se,transaction:Fr,receipt:Br}}}),!0)}async deploy(e){if(!this.signer)throw new Error("signer not found");if(!this.bytecode)throw new Error("bytecode not found");const ye={...this.options,...e},be={upload_contract:{contract_id:this.getId(),bytecode:(0,utils_1$2.encodeBase64url)(this.bytecode),...ye.abi&&{abi:ye.abi},...ye.authorizesCallContract&&{authorizes_call_contract:ye.authorizesCallContract},...ye.authorizesTransactionApplication&&{authorizes_transaction_application:ye.authorizesTransactionApplication},...ye.authorizesUploadContract&&{authorizes_upload_contract:ye.authorizesUploadContract}}};if(ye.onlyOperation)return{operation:be};let ve=await this.signer.prepareTransaction({header:{...ye.chainId&&{chain_id:ye.chainId},...ye.rcLimit&&{rc_limit:ye.rcLimit},...ye.nonce&&{nonce:ye.nonce},...ye.payer&&{payer:ye.payer},...ye.payee&&{payee:ye.payee}},operations:[...ye.previousOperations?ye.previousOperations:[],be,...ye.nextOperations?ye.nextOperations:[]]});if(!ye.sendTransaction){const xe=()=>{throw new Error("This transaction was not broadcasted")};return ye.signTransaction&&(ve=await this.signer.signTransaction(ve,ye.sendAbis?ye.abis:void 0)),{operation:be,transaction:{...ve,wait:xe}}}const{transaction:Ee,receipt:Oe}=await this.signer.sendTransaction(ve,ye);return{operation:be,transaction:Ee,receipt:Oe}}async encodeOperation(e){if(!this.abi||!this.abi.methods||!this.abi.methods[e.name])throw new Error(`Operation ${e.name} unknown`);if(!this.serializer)throw new Error("Serializer is not defined");const ye=this.abi.methods[e.name];let me=new Uint8Array(0);if(ye.argument){if(!e.args)throw new Error(`No arguments defined for type '${ye.argument}'`);me=await this.serializer.serialize(e.args,ye.argument)}return{call_contract:{contract_id:this.getId(),entry_point:ye.entry_point,args:(0,utils_1$2.encodeBase64url)(me)}}}async decodeOperation(e){if(!this.abi||!this.abi.methods)throw new Error("Methods are not defined");if(!this.serializer)throw new Error("Serializer is not defined");if(!e.call_contract)throw new Error("Operation is not CallContractOperation");if(e.call_contract.contract_id!==this.getId())throw new Error(`Invalid contract id. Expected: ${this.getId()}. Received: ${e.call_contract.contract_id}`);for(let ye=0;ye<Object.keys(this.abi.methods).length;ye+=1){const me=Object.keys(this.abi.methods)[ye],be=this.abi.methods[me];if(e.call_contract.entry_point===be.entry_point)return be.argument?{name:me,args:await this.serializer.deserialize(e.call_contract.args,be.argument)}:{name:me}}throw new Error(`Unknown method id ${e.call_contract.entry_point}`)}async decodeEvent(e){if(!this.serializer)throw new Error("Serializer is not defined");let ye=e.name;this.abi&&this.abi.events&&this.abi.events[e.name]&&(ye=this.abi.events[e.name].argument);const me=ye?await this.serializer.deserialize(e.data,ye):{};return{...e,args:me}}}Contract$1.Contract=Contract;Contract$1.default=Contract;var Signer$1={},lib={};(function(fe){/*! noble-secp256k1 - MIT License (c) 2019 Paul Miller (paulmillr.com) */Object.defineProperty(fe,"__esModule",{value:!0}),fe.utils=fe.schnorr=fe.verify=fe.signSync=fe.sign=fe.getSharedSecret=fe.recoverPublicKey=fe.getPublicKey=fe.Signature=fe.Point=fe.CURVE=void 0;const e=require$$1,ye=BigInt(0),me=BigInt(1),be=BigInt(2),ve=BigInt(3),Ee=BigInt(8),Oe=Object.freeze({a:ye,b:BigInt(7),P:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:me,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")});fe.CURVE=Oe;const xe=(io,Gr)=>(io+Gr/be)/Gr,gr={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar(io){const{n:Gr}=Oe,ro=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),lo=-me*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),_o=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),So=ro,$o=BigInt("0x100000000000000000000000000000000"),Ro=xe(So*io,Gr),Fo=xe(-lo*io,Gr);let Do=go(io-Ro*ro-Fo*_o,Gr),xo=go(-Ro*lo-Fo*So,Gr);const jo=Do>$o,Lo=xo>$o;if(jo&&(Do=Gr-Do),Lo&&(xo=Gr-xo),Do>$o||xo>$o)throw new Error("splitScalarEndo: Endomorphism failed, k="+io);return{k1neg:jo,k1:Do,k2neg:Lo,k2:xo}}},we=32,Se=32,$r=32,Fr=we+1,Br=2*we+1;function Vr(io){const{a:Gr,b:ro}=Oe,lo=go(io*io),_o=go(lo*io);return go(_o+Gr*io+ro)}const oo=Oe.a===ye;class so extends Error{constructor(Gr){super(Gr)}}function kr(io){if(!(io instanceof qr))throw new TypeError("JacobianPoint expected")}class qr{constructor(Gr,ro,lo){this.x=Gr,this.y=ro,this.z=lo}static fromAffine(Gr){if(!(Gr instanceof Ur))throw new TypeError("JacobianPoint#fromAffine: expected Point");return Gr.equals(Ur.ZERO)?qr.ZERO:new qr(Gr.x,Gr.y,me)}static toAffineBatch(Gr){const ro=ho(Gr.map(lo=>lo.z));return Gr.map((lo,_o)=>lo.toAffine(ro[_o]))}static normalizeZ(Gr){return qr.toAffineBatch(Gr).map(qr.fromAffine)}equals(Gr){kr(Gr);const{x:ro,y:lo,z:_o}=this,{x:So,y:$o,z:Ro}=Gr,Fo=go(_o*_o),Do=go(Ro*Ro),xo=go(ro*Do),jo=go(So*Fo),Lo=go(go(lo*Ro)*Do),Qo=go(go($o*_o)*Fo);return xo===jo&&Lo===Qo}negate(){return new qr(this.x,go(-this.y),this.z)}double(){const{x:Gr,y:ro,z:lo}=this,_o=go(Gr*Gr),So=go(ro*ro),$o=go(So*So),Ro=Gr+So,Fo=go(be*(go(Ro*Ro)-_o-$o)),Do=go(ve*_o),xo=go(Do*Do),jo=go(xo-be*Fo),Lo=go(Do*(Fo-jo)-Ee*$o),Qo=go(be*ro*lo);return new qr(jo,Lo,Qo)}add(Gr){kr(Gr);const{x:ro,y:lo,z:_o}=this,{x:So,y:$o,z:Ro}=Gr;if(So===ye||$o===ye)return this;if(ro===ye||lo===ye)return Gr;const Fo=go(_o*_o),Do=go(Ro*Ro),xo=go(ro*Do),jo=go(So*Fo),Lo=go(go(lo*Ro)*Do),Qo=go(go($o*_o)*Fo),gi=go(jo-xo),vi=go(Qo-Lo);if(gi===ye)return vi===ye?this.double():qr.ZERO;const Fi=go(gi*gi),_i=go(gi*Fi),Mi=go(xo*Fi),wn=go(vi*vi-_i-be*Mi),En=go(vi*(Mi-wn)-Lo*_i),Li=go(_o*Ro*gi);return new qr(wn,En,Li)}subtract(Gr){return this.add(Gr.negate())}multiplyUnsafe(Gr){const ro=qr.ZERO;if(typeof Gr=="bigint"&&Gr===ye)return ro;let lo=Io(Gr);if(lo===me)return this;if(!oo){let jo=ro,Lo=this;for(;lo>ye;)lo&me&&(jo=jo.add(Lo)),Lo=Lo.double(),lo>>=me;return jo}let{k1neg:_o,k1:So,k2neg:$o,k2:Ro}=gr.splitScalar(lo),Fo=ro,Do=ro,xo=this;for(;So>ye||Ro>ye;)So&me&&(Fo=Fo.add(xo)),Ro&me&&(Do=Do.add(xo)),xo=xo.double(),So>>=me,Ro>>=me;return _o&&(Fo=Fo.negate()),$o&&(Do=Do.negate()),Do=new qr(go(Do.x*gr.beta),Do.y,Do.z),Fo.add(Do)}precomputeWindow(Gr){const ro=oo?128/Gr+1:256/Gr+1,lo=[];let _o=this,So=_o;for(let $o=0;$o<ro;$o++){So=_o,lo.push(So);for(let Ro=1;Ro<2**(Gr-1);Ro++)So=So.add(_o),lo.push(So);_o=So.double()}return lo}wNAF(Gr,ro){!ro&&this.equals(qr.BASE)&&(ro=Ur.BASE);const lo=ro&&ro._WINDOW_SIZE||1;if(256%lo)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let _o=ro&&Yr.get(ro);_o||(_o=this.precomputeWindow(lo),ro&&lo!==1&&(_o=qr.normalizeZ(_o),Yr.set(ro,_o)));let So=qr.ZERO,$o=qr.BASE;const Ro=1+(oo?128/lo:256/lo),Fo=2**(lo-1),Do=BigInt(2**lo-1),xo=2**lo,jo=BigInt(lo);for(let Lo=0;Lo<Ro;Lo++){const Qo=Lo*Fo;let gi=Number(Gr&Do);Gr>>=jo,gi>Fo&&(gi-=xo,Gr+=me);const vi=Qo,Fi=Qo+Math.abs(gi)-1,_i=Lo%2!==0,Mi=gi<0;gi===0?$o=$o.add(Hr(_i,_o[vi])):So=So.add(Hr(Mi,_o[Fi]))}return{p:So,f:$o}}multiply(Gr,ro){let lo=Io(Gr),_o,So;if(oo){const{k1neg:$o,k1:Ro,k2neg:Fo,k2:Do}=gr.splitScalar(lo);let{p:xo,f:jo}=this.wNAF(Ro,ro),{p:Lo,f:Qo}=this.wNAF(Do,ro);xo=Hr($o,xo),Lo=Hr(Fo,Lo),Lo=new qr(go(Lo.x*gr.beta),Lo.y,Lo.z),_o=xo.add(Lo),So=jo.add(Qo)}else{const{p:$o,f:Ro}=this.wNAF(lo,ro);_o=$o,So=Ro}return qr.normalizeZ([_o,So])[0]}toAffine(Gr){const{x:ro,y:lo,z:_o}=this,So=this.equals(qr.ZERO);Gr==null&&(Gr=So?Ee:Bo(_o));const $o=Gr,Ro=go($o*$o),Fo=go(Ro*$o),Do=go(ro*Ro),xo=go(lo*Fo),jo=go(_o*$o);if(So)return Ur.ZERO;if(jo!==me)throw new Error("invZ was invalid");return new Ur(Do,xo)}}qr.BASE=new qr(Oe.Gx,Oe.Gy,me),qr.ZERO=new qr(ye,me,ye);function Hr(io,Gr){const ro=Gr.negate();return io?ro:Gr}const Yr=new WeakMap;class Ur{constructor(Gr,ro){this.x=Gr,this.y=ro}_setWindowSize(Gr){this._WINDOW_SIZE=Gr,Yr.delete(this)}hasEvenY(){return this.y%be===ye}static fromCompressedHex(Gr){const ro=Gr.length===32,lo=yo(ro?Gr:Gr.subarray(1));if(!Ao(lo))throw new Error("Point is not on curve");const _o=Vr(lo);let So=Po(_o);const $o=(So&me)===me;ro?$o&&(So=go(-So)):(Gr[0]&1)===1!==$o&&(So=go(-So));const Ro=new Ur(lo,So);return Ro.assertValidity(),Ro}static fromUncompressedHex(Gr){const ro=yo(Gr.subarray(1,we+1)),lo=yo(Gr.subarray(we+1,we*2+1)),_o=new Ur(ro,lo);return _o.assertValidity(),_o}static fromHex(Gr){const ro=Oo(Gr),lo=ro.length,_o=ro[0];if(lo===we)return this.fromCompressedHex(ro);if(lo===Fr&&(_o===2||_o===3))return this.fromCompressedHex(ro);if(lo===Br&&_o===4)return this.fromUncompressedHex(ro);throw new Error(`Point.fromHex: received invalid point. Expected 32-${Fr} compressed bytes or ${Br} uncompressed bytes, not ${lo}`)}static fromPrivateKey(Gr){return Ur.BASE.multiply(Uo(Gr))}static fromSignature(Gr,ro,lo){const{r:_o,s:So}=si(ro);if(![0,1,2,3].includes(lo))throw new Error("Cannot recover: invalid recovery bit");const $o=Qr(Oo(Gr)),{n:Ro}=Oe,Fo=lo===2||lo===3?_o+Ro:_o,Do=Bo(Fo,Ro),xo=go(-$o*Do,Ro),jo=go(So*Do,Ro),Lo=lo&1?"03":"02",Qo=Ur.fromHex(Lo+Jr(Fo)),gi=Ur.BASE.multiplyAndAddUnsafe(Qo,xo,jo);if(!gi)throw new Error("Cannot recover signature: point at infinify");return gi.assertValidity(),gi}toRawBytes(Gr=!1){return po(this.toHex(Gr))}toHex(Gr=!1){const ro=Jr(this.x);return Gr?`${this.hasEvenY()?"02":"03"}${ro}`:`04${ro}${Jr(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){const Gr="Point is not on elliptic curve",{x:ro,y:lo}=this;if(!Ao(ro)||!Ao(lo))throw new Error(Gr);const _o=go(lo*lo),So=Vr(ro);if(go(_o-So)!==ye)throw new Error(Gr)}equals(Gr){return this.x===Gr.x&&this.y===Gr.y}negate(){return new Ur(this.x,go(-this.y))}double(){return qr.fromAffine(this).double().toAffine()}add(Gr){return qr.fromAffine(this).add(qr.fromAffine(Gr)).toAffine()}subtract(Gr){return this.add(Gr.negate())}multiply(Gr){return qr.fromAffine(this).multiply(Gr,this).toAffine()}multiplyAndAddUnsafe(Gr,ro,lo){const _o=qr.fromAffine(this),So=ro===ye||ro===me||this!==Ur.BASE?_o.multiplyUnsafe(ro):_o.multiply(ro),$o=qr.fromAffine(Gr).multiplyUnsafe(lo),Ro=So.add($o);return Ro.equals(qr.ZERO)?void 0:Ro.toAffine()}}fe.Point=Ur,Ur.BASE=new Ur(Oe.Gx,Oe.Gy),Ur.ZERO=new Ur(ye,ye);function Mr(io){return Number.parseInt(io[0],16)>=8?"00"+io:io}function Lr(io){if(io.length<2||io[0]!==2)throw new Error(`Invalid signature integer tag: ${bo(io)}`);const Gr=io[1],ro=io.subarray(2,Gr+2);if(!Gr||ro.length!==Gr)throw new Error("Invalid signature integer: wrong length");if(ro[0]===0&&ro[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:yo(ro),left:io.subarray(Gr+2)}}function no(io){if(io.length<2||io[0]!=48)throw new Error(`Invalid signature tag: ${bo(io)}`);if(io[1]!==io.length-2)throw new Error("Invalid signature: incorrect length");const{data:Gr,left:ro}=Lr(io.subarray(2)),{data:lo,left:_o}=Lr(ro);if(_o.length)throw new Error(`Invalid signature: left bytes after parsing: ${bo(_o)}`);return{r:Gr,s:lo}}class Xr{constructor(Gr,ro){this.r=Gr,this.s=ro,this.assertValidity()}static fromCompact(Gr){const ro=Gr instanceof Uint8Array,lo="Signature.fromCompact";if(typeof Gr!="string"&&!ro)throw new TypeError(`${lo}: Expected string or Uint8Array`);const _o=ro?bo(Gr):Gr;if(_o.length!==128)throw new Error(`${lo}: Expected 64-byte hex`);return new Xr(mo(_o.slice(0,64)),mo(_o.slice(64,128)))}static fromDER(Gr){const ro=Gr instanceof Uint8Array;if(typeof Gr!="string"&&!ro)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");const{r:lo,s:_o}=no(ro?Gr:po(Gr));return new Xr(lo,_o)}static fromHex(Gr){return this.fromDER(Gr)}assertValidity(){const{r:Gr,s:ro}=this;if(!Eo(Gr))throw new Error("Invalid Signature: r must be 0 < r < n");if(!Eo(ro))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){const Gr=Oe.n>>me;return this.s>Gr}normalizeS(){return this.hasHighS()?new Xr(this.r,go(-this.s,Oe.n)):this}toDERRawBytes(){return po(this.toDERHex())}toDERHex(){const Gr=Mr(vo(this.s)),ro=Mr(vo(this.r)),lo=Gr.length/2,_o=ro.length/2,So=vo(lo),$o=vo(_o);return`30${vo(_o+lo+4)}02${$o}${ro}02${So}${Gr}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return po(this.toCompactHex())}toCompactHex(){return Jr(this.r)+Jr(this.s)}}fe.Signature=Xr;function to(...io){if(!io.every(lo=>lo instanceof Uint8Array))throw new Error("Uint8Array list expected");if(io.length===1)return io[0];const Gr=io.reduce((lo,_o)=>lo+_o.length,0),ro=new Uint8Array(Gr);for(let lo=0,_o=0;lo<io.length;lo++){const So=io[lo];ro.set(So,_o),_o+=So.length}return ro}const ao=Array.from({length:256},(io,Gr)=>Gr.toString(16).padStart(2,"0"));function bo(io){if(!(io instanceof Uint8Array))throw new Error("Expected Uint8Array");let Gr="";for(let ro=0;ro<io.length;ro++)Gr+=ao[io[ro]];return Gr}const Wr=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");function Jr(io){if(typeof io!="bigint")throw new Error("Expected bigint");if(!(ye<=io&&io<Wr))throw new Error("Expected number 0 <= n < 2^256");return io.toString(16).padStart(64,"0")}function fo(io){const Gr=po(Jr(io));if(Gr.length!==32)throw new Error("Error: expected 32 bytes");return Gr}function vo(io){const Gr=io.toString(16);return Gr.length&1?`0${Gr}`:Gr}function mo(io){if(typeof io!="string")throw new TypeError("hexToNumber: expected string, got "+typeof io);return BigInt(`0x${io}`)}function po(io){if(typeof io!="string")throw new TypeError("hexToBytes: expected string, got "+typeof io);if(io.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+io.length);const Gr=new Uint8Array(io.length/2);for(let ro=0;ro<Gr.length;ro++){const lo=ro*2,_o=io.slice(lo,lo+2),So=Number.parseInt(_o,16);if(Number.isNaN(So)||So<0)throw new Error("Invalid byte sequence");Gr[ro]=So}return Gr}function yo(io){return mo(bo(io))}function Oo(io){return io instanceof Uint8Array?Uint8Array.from(io):po(io)}function Io(io){if(typeof io=="number"&&Number.isSafeInteger(io)&&io>0)return BigInt(io);if(typeof io=="bigint"&&Eo(io))return io;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function go(io,Gr=Oe.P){const ro=io%Gr;return ro>=ye?ro:Gr+ro}function No(io,Gr){const{P:ro}=Oe;let lo=io;for(;Gr-- >ye;)lo*=lo,lo%=ro;return lo}function Po(io){const{P:Gr}=Oe,ro=BigInt(6),lo=BigInt(11),_o=BigInt(22),So=BigInt(23),$o=BigInt(44),Ro=BigInt(88),Fo=io*io*io%Gr,Do=Fo*Fo*io%Gr,xo=No(Do,ve)*Do%Gr,jo=No(xo,ve)*Do%Gr,Lo=No(jo,be)*Fo%Gr,Qo=No(Lo,lo)*Lo%Gr,gi=No(Qo,_o)*Qo%Gr,vi=No(gi,$o)*gi%Gr,Fi=No(vi,Ro)*vi%Gr,_i=No(Fi,$o)*gi%Gr,Mi=No(_i,ve)*Do%Gr,wn=No(Mi,So)*Qo%Gr,En=No(wn,ro)*Fo%Gr,Li=No(En,be);if(Li*Li%Gr!==io)throw new Error("Cannot find square root");return Li}function Bo(io,Gr=Oe.P){if(io===ye||Gr<=ye)throw new Error(`invert: expected positive integers, got n=${io} mod=${Gr}`);let ro=go(io,Gr),lo=Gr,_o=ye,So=me;for(;ro!==ye;){const Ro=lo/ro,Fo=lo%ro,Do=_o-So*Ro;lo=ro,ro=Fo,_o=So,So=Do}if(lo!==me)throw new Error("invert: does not exist");return go(_o,Gr)}function ho(io,Gr=Oe.P){const ro=new Array(io.length),lo=io.reduce((So,$o,Ro)=>$o===ye?So:(ro[Ro]=So,go(So*$o,Gr)),me),_o=Bo(lo,Gr);return io.reduceRight((So,$o,Ro)=>$o===ye?So:(ro[Ro]=go(So*ro[Ro],Gr),go(So*$o,Gr)),_o),ro}function co(io){const Gr=io.length*8-Se*8,ro=yo(io);return Gr>0?ro>>BigInt(Gr):ro}function Qr(io,Gr=!1){const ro=co(io);if(Gr)return ro;const{n:lo}=Oe;return ro>=lo?ro-lo:ro}let jr,Zr;class wo{constructor(Gr,ro){if(this.hashLen=Gr,this.qByteLen=ro,typeof Gr!="number"||Gr<2)throw new Error("hashLen must be a number");if(typeof ro!="number"||ro<2)throw new Error("qByteLen must be a number");this.v=new Uint8Array(Gr).fill(1),this.k=new Uint8Array(Gr).fill(0),this.counter=0}hmac(...Gr){return fe.utils.hmacSha256(this.k,...Gr)}hmacSync(...Gr){return Zr(this.k,...Gr)}checkSync(){if(typeof Zr!="function")throw new so("hmacSha256Sync needs to be set")}incr(){if(this.counter>=1e3)throw new Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}async reseed(Gr=new Uint8Array){this.k=await this.hmac(this.v,Uint8Array.from([0]),Gr),this.v=await this.hmac(this.v),Gr.length!==0&&(this.k=await this.hmac(this.v,Uint8Array.from([1]),Gr),this.v=await this.hmac(this.v))}reseedSync(Gr=new Uint8Array){this.checkSync(),this.k=this.hmacSync(this.v,Uint8Array.from([0]),Gr),this.v=this.hmacSync(this.v),Gr.length!==0&&(this.k=this.hmacSync(this.v,Uint8Array.from([1]),Gr),this.v=this.hmacSync(this.v))}async generate(){this.incr();let Gr=0;const ro=[];for(;Gr<this.qByteLen;){this.v=await this.hmac(this.v);const lo=this.v.slice();ro.push(lo),Gr+=this.v.length}return to(...ro)}generateSync(){this.checkSync(),this.incr();let Gr=0;const ro=[];for(;Gr<this.qByteLen;){this.v=this.hmacSync(this.v);const lo=this.v.slice();ro.push(lo),Gr+=this.v.length}return to(...ro)}}function Eo(io){return ye<io&&io<Oe.n}function Ao(io){return ye<io&&io<Oe.P}function Co(io,Gr,ro,lo=!0){const{n:_o}=Oe,So=Qr(io,!0);if(!Eo(So))return;const $o=Bo(So,_o),Ro=Ur.BASE.multiply(So),Fo=go(Ro.x,_o);if(Fo===ye)return;const Do=go($o*go(Gr+ro*Fo,_o),_o);if(Do===ye)return;let xo=new Xr(Fo,Do),jo=(Ro.x===xo.r?0:2)|Number(Ro.y&me);return lo&&xo.hasHighS()&&(xo=xo.normalizeS(),jo^=1),{sig:xo,recovery:jo}}function Uo(io){let Gr;if(typeof io=="bigint")Gr=io;else if(typeof io=="number"&&Number.isSafeInteger(io)&&io>0)Gr=BigInt(io);else if(typeof io=="string"){if(io.length!==2*Se)throw new Error("Expected 32 bytes of private key");Gr=mo(io)}else if(io instanceof Uint8Array){if(io.length!==Se)throw new Error("Expected 32 bytes of private key");Gr=yo(io)}else throw new TypeError("Expected valid private key");if(!Eo(Gr))throw new Error("Expected private key: 0 < key < n");return Gr}function ko(io){return io instanceof Ur?(io.assertValidity(),io):Ur.fromHex(io)}function si(io){if(io instanceof Xr)return io.assertValidity(),io;try{return Xr.fromDER(io)}catch{return Xr.fromCompact(io)}}function ui(io,Gr=!1){return Ur.fromPrivateKey(io).toRawBytes(Gr)}fe.getPublicKey=ui;function Go(io,Gr,ro,lo=!1){return Ur.fromSignature(io,Gr,ro).toRawBytes(lo)}fe.recoverPublicKey=Go;function Xo(io){const Gr=io instanceof Uint8Array,ro=typeof io=="string",lo=(Gr||ro)&&io.length;return Gr?lo===Fr||lo===Br:ro?lo===Fr*2||lo===Br*2:io instanceof Ur}function Zo(io,Gr,ro=!1){if(Xo(io))throw new TypeError("getSharedSecret: first arg must be private key");if(!Xo(Gr))throw new TypeError("getSharedSecret: second arg must be public key");const lo=ko(Gr);return lo.assertValidity(),lo.multiply(Uo(io)).toRawBytes(ro)}fe.getSharedSecret=Zo;function Ko(io){const Gr=io.length>we?io.slice(0,we):io;return yo(Gr)}function Jo(io){const Gr=Ko(io),ro=go(Gr,Oe.n);return Ho(ro<ye?Gr:ro)}function Ho(io){return fo(io)}function zo(io,Gr,ro){if(io==null)throw new Error(`sign: expected valid message hash, not "${io}"`);const lo=Oo(io),_o=Uo(Gr),So=[Ho(_o),Jo(lo)];if(ro!=null){ro===!0&&(ro=fe.utils.randomBytes(we));const Fo=Oo(ro);if(Fo.length!==we)throw new Error(`sign: Expected ${we} bytes of extra data`);So.push(Fo)}const $o=to(...So),Ro=Ko(lo);return{seed:$o,m:Ro,d:_o}}function Wo(io,Gr){const{sig:ro,recovery:lo}=io,{der:_o,recovered:So}=Object.assign({canonical:!0,der:!0},Gr),$o=_o?ro.toDERRawBytes():ro.toCompactRawBytes();return So?[$o,lo]:$o}async function Yo(io,Gr,ro={}){const{seed:lo,m:_o,d:So}=zo(io,Gr,ro.extraEntropy),$o=new wo($r,Se);await $o.reseed(lo);let Ro;for(;!(Ro=Co(await $o.generate(),_o,So,ro.canonical));)await $o.reseed();return Wo(Ro,ro)}fe.sign=Yo;function ei(io,Gr,ro={}){const{seed:lo,m:_o,d:So}=zo(io,Gr,ro.extraEntropy),$o=new wo($r,Se);$o.reseedSync(lo);let Ro;for(;!(Ro=Co($o.generateSync(),_o,So,ro.canonical));)$o.reseedSync();return Wo(Ro,ro)}fe.signSync=ei;const Vo={strict:!0};function oi(io,Gr,ro,lo=Vo){let _o;try{_o=si(io),Gr=Oo(Gr)}catch{return!1}const{r:So,s:$o}=_o;if(lo.strict&&_o.hasHighS())return!1;const Ro=Qr(Gr);let Fo;try{Fo=ko(ro)}catch{return!1}const{n:Do}=Oe,xo=Bo($o,Do),jo=go(Ro*xo,Do),Lo=go(So*xo,Do),Qo=Ur.BASE.multiplyAndAddUnsafe(Fo,jo,Lo);return Qo?go(Qo.x,Do)===So:!1}fe.verify=oi;function ti(io){return go(yo(io),Oe.n)}class ri{constructor(Gr,ro){this.r=Gr,this.s=ro,this.assertValidity()}static fromHex(Gr){const ro=Oo(Gr);if(ro.length!==64)throw new TypeError(`SchnorrSignature.fromHex: expected 64 bytes, not ${ro.length}`);const lo=yo(ro.subarray(0,32)),_o=yo(ro.subarray(32,64));return new ri(lo,_o)}assertValidity(){const{r:Gr,s:ro}=this;if(!Ao(Gr)||!Eo(ro))throw new Error("Invalid signature")}toHex(){return Jr(this.r)+Jr(this.s)}toRawBytes(){return po(this.toHex())}}function ni(io){return Ur.fromPrivateKey(io).toRawX()}class ii{constructor(Gr,ro,lo=fe.utils.randomBytes()){if(Gr==null)throw new TypeError(`sign: Expected valid message, not "${Gr}"`);this.m=Oo(Gr);const{x:_o,scalar:So}=this.getScalar(Uo(ro));if(this.px=_o,this.d=So,this.rand=Oo(lo),this.rand.length!==32)throw new TypeError("sign: Expected 32 bytes of aux randomness")}getScalar(Gr){const ro=Ur.fromPrivateKey(Gr),lo=ro.hasEvenY()?Gr:Oe.n-Gr;return{point:ro,scalar:lo,x:ro.toRawX()}}initNonce(Gr,ro){return fo(Gr^yo(ro))}finalizeNonce(Gr){const ro=go(yo(Gr),Oe.n);if(ro===ye)throw new Error("sign: Creation of signature failed. k is zero");const{point:lo,x:_o,scalar:So}=this.getScalar(ro);return{R:lo,rx:_o,k:So}}finalizeSig(Gr,ro,lo,_o){return new ri(Gr.x,go(ro+lo*_o,Oe.n)).toRawBytes()}error(){throw new Error("sign: Invalid signature produced")}async calc(){const{m:Gr,d:ro,px:lo,rand:_o}=this,So=fe.utils.taggedHash,$o=this.initNonce(ro,await So(ai.aux,_o)),{R:Ro,rx:Fo,k:Do}=this.finalizeNonce(await So(ai.nonce,$o,lo,Gr)),xo=ti(await So(ai.challenge,Fo,lo,Gr)),jo=this.finalizeSig(Ro,Do,xo,ro);return await Di(jo,Gr,lo)||this.error(),jo}calcSync(){const{m:Gr,d:ro,px:lo,rand:_o}=this,So=fe.utils.taggedHashSync,$o=this.initNonce(ro,So(ai.aux,_o)),{R:Ro,rx:Fo,k:Do}=this.finalizeNonce(So(ai.nonce,$o,lo,Gr)),xo=ti(So(ai.challenge,Fo,lo,Gr)),jo=this.finalizeSig(Ro,Do,xo,ro);return Ni(jo,Gr,lo)||this.error(),jo}}async function wi(io,Gr,ro){return new ii(io,Gr,ro).calc()}function Si(io,Gr,ro){return new ii(io,Gr,ro).calcSync()}function $i(io,Gr,ro){const lo=io instanceof ri,_o=lo?io:ri.fromHex(io);return lo&&_o.assertValidity(),{..._o,m:Oo(Gr),P:ko(ro)}}function bi(io,Gr,ro,lo){const _o=Ur.BASE.multiplyAndAddUnsafe(Gr,Uo(ro),go(-lo,Oe.n));return!(!_o||!_o.hasEvenY()||_o.x!==io)}async function Di(io,Gr,ro){try{const{r:lo,s:_o,m:So,P:$o}=$i(io,Gr,ro),Ro=ti(await fe.utils.taggedHash(ai.challenge,fo(lo),$o.toRawX(),So));return bi(lo,$o,_o,Ro)}catch{return!1}}function Ni(io,Gr,ro){try{const{r:lo,s:_o,m:So,P:$o}=$i(io,Gr,ro),Ro=ti(fe.utils.taggedHashSync(ai.challenge,fo(lo),$o.toRawX(),So));return bi(lo,$o,_o,Ro)}catch(lo){if(lo instanceof so)throw lo;return!1}}fe.schnorr={Signature:ri,getPublicKey:ni,sign:wi,verify:Di,signSync:Si,verifySync:Ni},Ur.BASE._setWindowSize(8);const fi={node:e,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0},ai={challenge:"BIP0340/challenge",aux:"BIP0340/aux",nonce:"BIP0340/nonce"},li={};fe.utils={bytesToHex:bo,hexToBytes:po,concatBytes:to,mod:go,invert:Bo,isValidPrivateKey(io){try{return Uo(io),!0}catch{return!1}},_bigintTo32Bytes:fo,_normalizePrivateKey:Uo,hashToPrivateKey:io=>{io=Oo(io);const Gr=Se+8;if(io.length<Gr||io.length>1024)throw new Error("Expected valid bytes of private key as per FIPS 186");const ro=go(yo(io),Oe.n-me)+me;return fo(ro)},randomBytes:(io=32)=>{if(fi.web)return fi.web.getRandomValues(new Uint8Array(io));if(fi.node){const{randomBytes:Gr}=fi.node;return Uint8Array.from(Gr(io))}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>fe.utils.hashToPrivateKey(fe.utils.randomBytes(Se+8)),precompute(io=8,Gr=Ur.BASE){const ro=Gr===Ur.BASE?Gr:new Ur(Gr.x,Gr.y);return ro._setWindowSize(io),ro.multiply(ve),ro},sha256:async(...io)=>{if(fi.web){const Gr=await fi.web.subtle.digest("SHA-256",to(...io));return new Uint8Array(Gr)}else if(fi.node){const{createHash:Gr}=fi.node,ro=Gr("sha256");return io.forEach(lo=>ro.update(lo)),Uint8Array.from(ro.digest())}else throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(io,...Gr)=>{if(fi.web){const ro=await fi.web.subtle.importKey("raw",io,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),lo=to(...Gr),_o=await fi.web.subtle.sign("HMAC",ro,lo);return new Uint8Array(_o)}else if(fi.node){const{createHmac:ro}=fi.node,lo=ro("sha256",io);return Gr.forEach(_o=>lo.update(_o)),Uint8Array.from(lo.digest())}else throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:async(io,...Gr)=>{let ro=li[io];if(ro===void 0){const lo=await fe.utils.sha256(Uint8Array.from(io,_o=>_o.charCodeAt(0)));ro=to(lo,lo),li[io]=ro}return fe.utils.sha256(ro,...Gr)},taggedHashSync:(io,...Gr)=>{if(typeof jr!="function")throw new so("sha256Sync is undefined, you need to set it");let ro=li[io];if(ro===void 0){const lo=jr(Uint8Array.from(io,_o=>_o.charCodeAt(0)));ro=to(lo,lo),li[io]=ro}return jr(ro,...Gr)},_JacobianPoint:qr},Object.defineProperties(fe.utils,{sha256Sync:{configurable:!1,get(){return jr},set(io){jr||(jr=io)}},hmacSha256Sync:{configurable:!1,get(){return Zr},set(io){Zr||(Zr=io)}}})})(lib);var protocolProto={exports:{}},minimal,hasRequiredMinimal;function requireMinimal(){return hasRequiredMinimal||(hasRequiredMinimal=1,minimal=indexMinimal),minimal}(function(fe){(function(e,ye){typeof commonjsRequire=="function"&&fe&&fe.exports&&(fe.exports=ye(requireMinimal()))})(commonjsGlobal,function(e){var ye=e.Reader,me=e.Writer,be=e.util,ve=e.roots.default||(e.roots.default={});return ve.koinos=function(){var Ee={};return Ee.protocol=function(){var Oe={};return Oe.event_data=function(){function xe(gr){if(this.impacted=[],gr)for(var we=Object.keys(gr),Se=0;Se<we.length;++Se)gr[we[Se]]!=null&&(this[we[Se]]=gr[we[Se]])}return xe.prototype.sequence=0,xe.prototype.source=be.newBuffer([]),xe.prototype.name="",xe.prototype.data=be.newBuffer([]),xe.prototype.impacted=be.emptyArray,xe.create=function(we){return new xe(we)},xe.encode=function(we,Se){if(Se||(Se=me.create()),we.sequence!=null&&Object.hasOwnProperty.call(we,"sequence")&&Se.uint32(8).uint32(we.sequence),we.source!=null&&Object.hasOwnProperty.call(we,"source")&&Se.uint32(18).bytes(we.source),we.name!=null&&Object.hasOwnProperty.call(we,"name")&&Se.uint32(26).string(we.name),we.data!=null&&Object.hasOwnProperty.call(we,"data")&&Se.uint32(34).bytes(we.data),we.impacted!=null&&we.impacted.length)for(var $r=0;$r<we.impacted.length;++$r)Se.uint32(42).bytes(we.impacted[$r]);return Se},xe.encodeDelimited=function(we,Se){return this.encode(we,Se).ldelim()},xe.decode=function(we,Se){we instanceof ye||(we=ye.create(we));for(var $r=Se===void 0?we.len:we.pos+Se,Fr=new ve.koinos.protocol.event_data;we.pos<$r;){var Br=we.uint32();switch(Br>>>3){case 1:{Fr.sequence=we.uint32();break}case 2:{Fr.source=we.bytes();break}case 3:{Fr.name=we.string();break}case 4:{Fr.data=we.bytes();break}case 5:{Fr.impacted&&Fr.impacted.length||(Fr.impacted=[]),Fr.impacted.push(we.bytes());break}default:we.skipType(Br&7);break}}return Fr},xe.decodeDelimited=function(we){return we instanceof ye||(we=new ye(we)),this.decode(we,we.uint32())},xe.verify=function(we){if(typeof we!="object"||we===null)return"object expected";if(we.sequence!=null&&we.hasOwnProperty("sequence")&&!be.isInteger(we.sequence))return"sequence: integer expected";if(we.source!=null&&we.hasOwnProperty("source")&&!(we.source&&typeof we.source.length=="number"||be.isString(we.source)))return"source: buffer expected";if(we.name!=null&&we.hasOwnProperty("name")&&!be.isString(we.name))return"name: string expected";if(we.data!=null&&we.hasOwnProperty("data")&&!(we.data&&typeof we.data.length=="number"||be.isString(we.data)))return"data: buffer expected";if(we.impacted!=null&&we.hasOwnProperty("impacted")){if(!Array.isArray(we.impacted))return"impacted: array expected";for(var Se=0;Se<we.impacted.length;++Se)if(!(we.impacted[Se]&&typeof we.impacted[Se].length=="number"||be.isString(we.impacted[Se])))return"impacted: buffer[] expected"}return null},xe.fromObject=function(we){if(we instanceof ve.koinos.protocol.event_data)return we;var Se=new ve.koinos.protocol.event_data;if(we.sequence!=null&&(Se.sequence=we.sequence>>>0),we.source!=null&&(typeof we.source=="string"?be.base64.decode(we.source,Se.source=be.newBuffer(be.base64.length(we.source)),0):we.source.length>=0&&(Se.source=we.source)),we.name!=null&&(Se.name=String(we.name)),we.data!=null&&(typeof we.data=="string"?be.base64.decode(we.data,Se.data=be.newBuffer(be.base64.length(we.data)),0):we.data.length>=0&&(Se.data=we.data)),we.impacted){if(!Array.isArray(we.impacted))throw TypeError(".koinos.protocol.event_data.impacted: array expected");Se.impacted=[];for(var $r=0;$r<we.impacted.length;++$r)typeof we.impacted[$r]=="string"?be.base64.decode(we.impacted[$r],Se.impacted[$r]=be.newBuffer(be.base64.length(we.impacted[$r])),0):we.impacted[$r].length>=0&&(Se.impacted[$r]=we.impacted[$r])}return Se},xe.toObject=function(we,Se){Se||(Se={});var $r={};if((Se.arrays||Se.defaults)&&($r.impacted=[]),Se.defaults&&($r.sequence=0,Se.bytes===String?$r.source="":($r.source=[],Se.bytes!==Array&&($r.source=be.newBuffer($r.source))),$r.name="",Se.bytes===String?$r.data="":($r.data=[],Se.bytes!==Array&&($r.data=be.newBuffer($r.data)))),we.sequence!=null&&we.hasOwnProperty("sequence")&&($r.sequence=we.sequence),we.source!=null&&we.hasOwnProperty("source")&&($r.source=Se.bytes===String?be.base64.encode(we.source,0,we.source.length):Se.bytes===Array?Array.prototype.slice.call(we.source):we.source),we.name!=null&&we.hasOwnProperty("name")&&($r.name=we.name),we.data!=null&&we.hasOwnProperty("data")&&($r.data=Se.bytes===String?be.base64.encode(we.data,0,we.data.length):Se.bytes===Array?Array.prototype.slice.call(we.data):we.data),we.impacted&&we.impacted.length){$r.impacted=[];for(var Fr=0;Fr<we.impacted.length;++Fr)$r.impacted[Fr]=Se.bytes===String?be.base64.encode(we.impacted[Fr],0,we.impacted[Fr].length):Se.bytes===Array?Array.prototype.slice.call(we.impacted[Fr]):we.impacted[Fr]}return $r},xe.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},xe.getTypeUrl=function(we){return we===void 0&&(we="type.googleapis.com"),we+"/koinos.protocol.event_data"},xe}(),Oe.contract_call_bundle=function(){function xe(gr){if(gr)for(var we=Object.keys(gr),Se=0;Se<we.length;++Se)gr[we[Se]]!=null&&(this[we[Se]]=gr[we[Se]])}return xe.prototype.contract_id=be.newBuffer([]),xe.prototype.entry_point=0,xe.create=function(we){return new xe(we)},xe.encode=function(we,Se){return Se||(Se=me.create()),we.contract_id!=null&&Object.hasOwnProperty.call(we,"contract_id")&&Se.uint32(10).bytes(we.contract_id),we.entry_point!=null&&Object.hasOwnProperty.call(we,"entry_point")&&Se.uint32(16).uint32(we.entry_point),Se},xe.encodeDelimited=function(we,Se){return this.encode(we,Se).ldelim()},xe.decode=function(we,Se){we instanceof ye||(we=ye.create(we));for(var $r=Se===void 0?we.len:we.pos+Se,Fr=new ve.koinos.protocol.contract_call_bundle;we.pos<$r;){var Br=we.uint32();switch(Br>>>3){case 1:{Fr.contract_id=we.bytes();break}case 2:{Fr.entry_point=we.uint32();break}default:we.skipType(Br&7);break}}return Fr},xe.decodeDelimited=function(we){return we instanceof ye||(we=new ye(we)),this.decode(we,we.uint32())},xe.verify=function(we){return typeof we!="object"||we===null?"object expected":we.contract_id!=null&&we.hasOwnProperty("contract_id")&&!(we.contract_id&&typeof we.contract_id.length=="number"||be.isString(we.contract_id))?"contract_id: buffer expected":we.entry_point!=null&&we.hasOwnProperty("entry_point")&&!be.isInteger(we.entry_point)?"entry_point: integer expected":null},xe.fromObject=function(we){if(we instanceof ve.koinos.protocol.contract_call_bundle)return we;var Se=new ve.koinos.protocol.contract_call_bundle;return we.contract_id!=null&&(typeof we.contract_id=="string"?be.base64.decode(we.contract_id,Se.contract_id=be.newBuffer(be.base64.length(we.contract_id)),0):we.contract_id.length>=0&&(Se.contract_id=we.contract_id)),we.entry_point!=null&&(Se.entry_point=we.entry_point>>>0),Se},xe.toObject=function(we,Se){Se||(Se={});var $r={};return Se.defaults&&(Se.bytes===String?$r.contract_id="":($r.contract_id=[],Se.bytes!==Array&&($r.contract_id=be.newBuffer($r.contract_id))),$r.entry_point=0),we.contract_id!=null&&we.hasOwnProperty("contract_id")&&($r.contract_id=Se.bytes===String?be.base64.encode(we.contract_id,0,we.contract_id.length):Se.bytes===Array?Array.prototype.slice.call(we.contract_id):we.contract_id),we.entry_point!=null&&we.hasOwnProperty("entry_point")&&($r.entry_point=we.entry_point),$r},xe.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},xe.getTypeUrl=function(we){return we===void 0&&(we="type.googleapis.com"),we+"/koinos.protocol.contract_call_bundle"},xe}(),Oe.system_call_target=function(){function xe(we){if(we)for(var Se=Object.keys(we),$r=0;$r<Se.length;++$r)we[Se[$r]]!=null&&(this[Se[$r]]=we[Se[$r]])}xe.prototype.thunk_id=null,xe.prototype.system_call_bundle=null;var gr;return Object.defineProperty(xe.prototype,"target",{get:be.oneOfGetter(gr=["thunk_id","system_call_bundle"]),set:be.oneOfSetter(gr)}),xe.create=function(Se){return new xe(Se)},xe.encode=function(Se,$r){return $r||($r=me.create()),Se.thunk_id!=null&&Object.hasOwnProperty.call(Se,"thunk_id")&&$r.uint32(8).uint32(Se.thunk_id),Se.system_call_bundle!=null&&Object.hasOwnProperty.call(Se,"system_call_bundle")&&ve.koinos.protocol.contract_call_bundle.encode(Se.system_call_bundle,$r.uint32(18).fork()).ldelim(),$r},xe.encodeDelimited=function(Se,$r){return this.encode(Se,$r).ldelim()},xe.decode=function(Se,$r){Se instanceof ye||(Se=ye.create(Se));for(var Fr=$r===void 0?Se.len:Se.pos+$r,Br=new ve.koinos.protocol.system_call_target;Se.pos<Fr;){var Vr=Se.uint32();switch(Vr>>>3){case 1:{Br.thunk_id=Se.uint32();break}case 2:{Br.system_call_bundle=ve.koinos.protocol.contract_call_bundle.decode(Se,Se.uint32());break}default:Se.skipType(Vr&7);break}}return Br},xe.decodeDelimited=function(Se){return Se instanceof ye||(Se=new ye(Se)),this.decode(Se,Se.uint32())},xe.verify=function(Se){if(typeof Se!="object"||Se===null)return"object expected";var $r={};if(Se.thunk_id!=null&&Se.hasOwnProperty("thunk_id")&&($r.target=1,!be.isInteger(Se.thunk_id)))return"thunk_id: integer expected";if(Se.system_call_bundle!=null&&Se.hasOwnProperty("system_call_bundle")){if($r.target===1)return"target: multiple values";$r.target=1;{var Fr=ve.koinos.protocol.contract_call_bundle.verify(Se.system_call_bundle);if(Fr)return"system_call_bundle."+Fr}}return null},xe.fromObject=function(Se){if(Se instanceof ve.koinos.protocol.system_call_target)return Se;var $r=new ve.koinos.protocol.system_call_target;if(Se.thunk_id!=null&&($r.thunk_id=Se.thunk_id>>>0),Se.system_call_bundle!=null){if(typeof Se.system_call_bundle!="object")throw TypeError(".koinos.protocol.system_call_target.system_call_bundle: object expected");$r.system_call_bundle=ve.koinos.protocol.contract_call_bundle.fromObject(Se.system_call_bundle)}return $r},xe.toObject=function(Se,$r){$r||($r={});var Fr={};return Se.thunk_id!=null&&Se.hasOwnProperty("thunk_id")&&(Fr.thunk_id=Se.thunk_id,$r.oneofs&&(Fr.target="thunk_id")),Se.system_call_bundle!=null&&Se.hasOwnProperty("system_call_bundle")&&(Fr.system_call_bundle=ve.koinos.protocol.contract_call_bundle.toObject(Se.system_call_bundle,$r),$r.oneofs&&(Fr.target="system_call_bundle")),Fr},xe.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},xe.getTypeUrl=function(Se){return Se===void 0&&(Se="type.googleapis.com"),Se+"/koinos.protocol.system_call_target"},xe}(),Oe.upload_contract_operation=function(){function xe(gr){if(gr)for(var we=Object.keys(gr),Se=0;Se<we.length;++Se)gr[we[Se]]!=null&&(this[we[Se]]=gr[we[Se]])}return xe.prototype.contract_id=be.newBuffer([]),xe.prototype.bytecode=be.newBuffer([]),xe.prototype.abi="",xe.prototype.authorizes_call_contract=!1,xe.prototype.authorizes_transaction_application=!1,xe.prototype.authorizes_upload_contract=!1,xe.create=function(we){return new xe(we)},xe.encode=function(we,Se){return Se||(Se=me.create()),we.contract_id!=null&&Object.hasOwnProperty.call(we,"contract_id")&&Se.uint32(10).bytes(we.contract_id),we.bytecode!=null&&Object.hasOwnProperty.call(we,"bytecode")&&Se.uint32(18).bytes(we.bytecode),we.abi!=null&&Object.hasOwnProperty.call(we,"abi")&&Se.uint32(26).string(we.abi),we.authorizes_call_contract!=null&&Object.hasOwnProperty.call(we,"authorizes_call_contract")&&Se.uint32(32).bool(we.authorizes_call_contract),we.authorizes_transaction_application!=null&&Object.hasOwnProperty.call(we,"authorizes_transaction_application")&&Se.uint32(40).bool(we.authorizes_transaction_application),we.authorizes_upload_contract!=null&&Object.hasOwnProperty.call(we,"authorizes_upload_contract")&&Se.uint32(48).bool(we.authorizes_upload_contract),Se},xe.encodeDelimited=function(we,Se){return this.encode(we,Se).ldelim()},xe.decode=function(we,Se){we instanceof ye||(we=ye.create(we));for(var $r=Se===void 0?we.len:we.pos+Se,Fr=new ve.koinos.protocol.upload_contract_operation;we.pos<$r;){var Br=we.uint32();switch(Br>>>3){case 1:{Fr.contract_id=we.bytes();break}case 2:{Fr.bytecode=we.bytes();break}case 3:{Fr.abi=we.string();break}case 4:{Fr.authorizes_call_contract=we.bool();break}case 5:{Fr.authorizes_transaction_application=we.bool();break}case 6:{Fr.authorizes_upload_contract=we.bool();break}default:we.skipType(Br&7);break}}return Fr},xe.decodeDelimited=function(we){return we instanceof ye||(we=new ye(we)),this.decode(we,we.uint32())},xe.verify=function(we){return typeof we!="object"||we===null?"object expected":we.contract_id!=null&&we.hasOwnProperty("contract_id")&&!(we.contract_id&&typeof we.contract_id.length=="number"||be.isString(we.contract_id))?"contract_id: buffer expected":we.bytecode!=null&&we.hasOwnProperty("bytecode")&&!(we.bytecode&&typeof we.bytecode.length=="number"||be.isString(we.bytecode))?"bytecode: buffer expected":we.abi!=null&&we.hasOwnProperty("abi")&&!be.isString(we.abi)?"abi: string expected":we.authorizes_call_contract!=null&&we.hasOwnProperty("authorizes_call_contract")&&typeof we.authorizes_call_contract!="boolean"?"authorizes_call_contract: boolean expected":we.authorizes_transaction_application!=null&&we.hasOwnProperty("authorizes_transaction_application")&&typeof we.authorizes_transaction_application!="boolean"?"authorizes_transaction_application: boolean expected":we.authorizes_upload_contract!=null&&we.hasOwnProperty("authorizes_upload_contract")&&typeof we.authorizes_upload_contract!="boolean"?"authorizes_upload_contract: boolean expected":null},xe.fromObject=function(we){if(we instanceof ve.koinos.protocol.upload_contract_operation)return we;var Se=new ve.koinos.protocol.upload_contract_operation;return we.contract_id!=null&&(typeof we.contract_id=="string"?be.base64.decode(we.contract_id,Se.contract_id=be.newBuffer(be.base64.length(we.contract_id)),0):we.contract_id.length>=0&&(Se.contract_id=we.contract_id)),we.bytecode!=null&&(typeof we.bytecode=="string"?be.base64.decode(we.bytecode,Se.bytecode=be.newBuffer(be.base64.length(we.bytecode)),0):we.bytecode.length>=0&&(Se.bytecode=we.bytecode)),we.abi!=null&&(Se.abi=String(we.abi)),we.authorizes_call_contract!=null&&(Se.authorizes_call_contract=!!we.authorizes_call_contract),we.authorizes_transaction_application!=null&&(Se.authorizes_transaction_application=!!we.authorizes_transaction_application),we.authorizes_upload_contract!=null&&(Se.authorizes_upload_contract=!!we.authorizes_upload_contract),Se},xe.toObject=function(we,Se){Se||(Se={});var $r={};return Se.defaults&&(Se.bytes===String?$r.contract_id="":($r.contract_id=[],Se.bytes!==Array&&($r.contract_id=be.newBuffer($r.contract_id))),Se.bytes===String?$r.bytecode="":($r.bytecode=[],Se.bytes!==Array&&($r.bytecode=be.newBuffer($r.bytecode))),$r.abi="",$r.authorizes_call_contract=!1,$r.authorizes_transaction_application=!1,$r.authorizes_upload_contract=!1),we.contract_id!=null&&we.hasOwnProperty("contract_id")&&($r.contract_id=Se.bytes===String?be.base64.encode(we.contract_id,0,we.contract_id.length):Se.bytes===Array?Array.prototype.slice.call(we.contract_id):we.contract_id),we.bytecode!=null&&we.hasOwnProperty("bytecode")&&($r.bytecode=Se.bytes===String?be.base64.encode(we.bytecode,0,we.bytecode.length):Se.bytes===Array?Array.prototype.slice.call(we.bytecode):we.bytecode),we.abi!=null&&we.hasOwnProperty("abi")&&($r.abi=we.abi),we.authorizes_call_contract!=null&&we.hasOwnProperty("authorizes_call_contract")&&($r.authorizes_call_contract=we.authorizes_call_contract),we.authorizes_transaction_application!=null&&we.hasOwnProperty("authorizes_transaction_application")&&($r.authorizes_transaction_application=we.authorizes_transaction_application),we.authorizes_upload_contract!=null&&we.hasOwnProperty("authorizes_upload_contract")&&($r.authorizes_upload_contract=we.authorizes_upload_contract),$r},xe.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},xe.getTypeUrl=function(we){return we===void 0&&(we="type.googleapis.com"),we+"/koinos.protocol.upload_contract_operation"},xe}(),Oe.call_contract_operation=function(){function xe(gr){if(gr)for(var we=Object.keys(gr),Se=0;Se<we.length;++Se)gr[we[Se]]!=null&&(this[we[Se]]=gr[we[Se]])}return xe.prototype.contract_id=be.newBuffer([]),xe.prototype.entry_point=0,xe.prototype.args=be.newBuffer([]),xe.create=function(we){return new xe(we)},xe.encode=function(we,Se){return Se||(Se=me.create()),we.contract_id!=null&&Object.hasOwnProperty.call(we,"contract_id")&&Se.uint32(10).bytes(we.contract_id),we.entry_point!=null&&Object.hasOwnProperty.call(we,"entry_point")&&Se.uint32(16).uint32(we.entry_point),we.args!=null&&Object.hasOwnProperty.call(we,"args")&&Se.uint32(26).bytes(we.args),Se},xe.encodeDelimited=function(we,Se){return this.encode(we,Se).ldelim()},xe.decode=function(we,Se){we instanceof ye||(we=ye.create(we));for(var $r=Se===void 0?we.len:we.pos+Se,Fr=new ve.koinos.protocol.call_contract_operation;we.pos<$r;){var Br=we.uint32();switch(Br>>>3){case 1:{Fr.contract_id=we.bytes();break}case 2:{Fr.entry_point=we.uint32();break}case 3:{Fr.args=we.bytes();break}default:we.skipType(Br&7);break}}return Fr},xe.decodeDelimited=function(we){return we instanceof ye||(we=new ye(we)),this.decode(we,we.uint32())},xe.verify=function(we){return typeof we!="object"||we===null?"object expected":we.contract_id!=null&&we.hasOwnProperty("contract_id")&&!(we.contract_id&&typeof we.contract_id.length=="number"||be.isString(we.contract_id))?"contract_id: buffer expected":we.entry_point!=null&&we.hasOwnProperty("entry_point")&&!be.isInteger(we.entry_point)?"entry_point: integer expected":we.args!=null&&we.hasOwnProperty("args")&&!(we.args&&typeof we.args.length=="number"||be.isString(we.args))?"args: buffer expected":null},xe.fromObject=function(we){if(we instanceof ve.koinos.protocol.call_contract_operation)return we;var Se=new ve.koinos.protocol.call_contract_operation;return we.contract_id!=null&&(typeof we.contract_id=="string"?be.base64.decode(we.contract_id,Se.contract_id=be.newBuffer(be.base64.length(we.contract_id)),0):we.contract_id.length>=0&&(Se.contract_id=we.contract_id)),we.entry_point!=null&&(Se.entry_point=we.entry_point>>>0),we.args!=null&&(typeof we.args=="string"?be.base64.decode(we.args,Se.args=be.newBuffer(be.base64.length(we.args)),0):we.args.length>=0&&(Se.args=we.args)),Se},xe.toObject=function(we,Se){Se||(Se={});var $r={};return Se.defaults&&(Se.bytes===String?$r.contract_id="":($r.contract_id=[],Se.bytes!==Array&&($r.contract_id=be.newBuffer($r.contract_id))),$r.entry_point=0,Se.bytes===String?$r.args="":($r.args=[],Se.bytes!==Array&&($r.args=be.newBuffer($r.args)))),we.contract_id!=null&&we.hasOwnProperty("contract_id")&&($r.contract_id=Se.bytes===String?be.base64.encode(we.contract_id,0,we.contract_id.length):Se.bytes===Array?Array.prototype.slice.call(we.contract_id):we.contract_id),we.entry_point!=null&&we.hasOwnProperty("entry_point")&&($r.entry_point=we.entry_point),we.args!=null&&we.hasOwnProperty("args")&&($r.args=Se.bytes===String?be.base64.encode(we.args,0,we.args.length):Se.bytes===Array?Array.prototype.slice.call(we.args):we.args),$r},xe.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},xe.getTypeUrl=function(we){return we===void 0&&(we="type.googleapis.com"),we+"/koinos.protocol.call_contract_operation"},xe}(),Oe.set_system_call_operation=function(){function xe(gr){if(gr)for(var we=Object.keys(gr),Se=0;Se<we.length;++Se)gr[we[Se]]!=null&&(this[we[Se]]=gr[we[Se]])}return xe.prototype.call_id=0,xe.prototype.target=null,xe.create=function(we){return new xe(we)},xe.encode=function(we,Se){return Se||(Se=me.create()),we.call_id!=null&&Object.hasOwnProperty.call(we,"call_id")&&Se.uint32(8).uint32(we.call_id),we.target!=null&&Object.hasOwnProperty.call(we,"target")&&ve.koinos.protocol.system_call_target.encode(we.target,Se.uint32(18).fork()).ldelim(),Se},xe.encodeDelimited=function(we,Se){return this.encode(we,Se).ldelim()},xe.decode=function(we,Se){we instanceof ye||(we=ye.create(we));for(var $r=Se===void 0?we.len:we.pos+Se,Fr=new ve.koinos.protocol.set_system_call_operation;we.pos<$r;){var Br=we.uint32();switch(Br>>>3){case 1:{Fr.call_id=we.uint32();break}case 2:{Fr.target=ve.koinos.protocol.system_call_target.decode(we,we.uint32());break}default:we.skipType(Br&7);break}}return Fr},xe.decodeDelimited=function(we){return we instanceof ye||(we=new ye(we)),this.decode(we,we.uint32())},xe.verify=function(we){if(typeof we!="object"||we===null)return"object expected";if(we.call_id!=null&&we.hasOwnProperty("call_id")&&!be.isInteger(we.call_id))return"call_id: integer expected";if(we.target!=null&&we.hasOwnProperty("target")){var Se=ve.koinos.protocol.system_call_target.verify(we.target);if(Se)return"target."+Se}return null},xe.fromObject=function(we){if(we instanceof ve.koinos.protocol.set_system_call_operation)return we;var Se=new ve.koinos.protocol.set_system_call_operation;if(we.call_id!=null&&(Se.call_id=we.call_id>>>0),we.target!=null){if(typeof we.target!="object")throw TypeError(".koinos.protocol.set_system_call_operation.target: object expected");Se.target=ve.koinos.protocol.system_call_target.fromObject(we.target)}return Se},xe.toObject=function(we,Se){Se||(Se={});var $r={};return Se.defaults&&($r.call_id=0,$r.target=null),we.call_id!=null&&we.hasOwnProperty("call_id")&&($r.call_id=we.call_id),we.target!=null&&we.hasOwnProperty("target")&&($r.target=ve.koinos.protocol.system_call_target.toObject(we.target,Se)),$r},xe.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},xe.getTypeUrl=function(we){return we===void 0&&(we="type.googleapis.com"),we+"/koinos.protocol.set_system_call_operation"},xe}(),Oe.set_system_contract_operation=function(){function xe(gr){if(gr)for(var we=Object.keys(gr),Se=0;Se<we.length;++Se)gr[we[Se]]!=null&&(this[we[Se]]=gr[we[Se]])}return xe.prototype.contract_id=be.newBuffer([]),xe.prototype.system_contract=!1,xe.create=function(we){return new xe(we)},xe.encode=function(we,Se){return Se||(Se=me.create()),we.contract_id!=null&&Object.hasOwnProperty.call(we,"contract_id")&&Se.uint32(10).bytes(we.contract_id),we.system_contract!=null&&Object.hasOwnProperty.call(we,"system_contract")&&Se.uint32(16).bool(we.system_contract),Se},xe.encodeDelimited=function(we,Se){return this.encode(we,Se).ldelim()},xe.decode=function(we,Se){we instanceof ye||(we=ye.create(we));for(var $r=Se===void 0?we.len:we.pos+Se,Fr=new ve.koinos.protocol.set_system_contract_operation;we.pos<$r;){var Br=we.uint32();switch(Br>>>3){case 1:{Fr.contract_id=we.bytes();break}case 2:{Fr.system_contract=we.bool();break}default:we.skipType(Br&7);break}}return Fr},xe.decodeDelimited=function(we){return we instanceof ye||(we=new ye(we)),this.decode(we,we.uint32())},xe.verify=function(we){return typeof we!="object"||we===null?"object expected":we.contract_id!=null&&we.hasOwnProperty("contract_id")&&!(we.contract_id&&typeof we.contract_id.length=="number"||be.isString(we.contract_id))?"contract_id: buffer expected":we.system_contract!=null&&we.hasOwnProperty("system_contract")&&typeof we.system_contract!="boolean"?"system_contract: boolean expected":null},xe.fromObject=function(we){if(we instanceof ve.koinos.protocol.set_system_contract_operation)return we;var Se=new ve.koinos.protocol.set_system_contract_operation;return we.contract_id!=null&&(typeof we.contract_id=="string"?be.base64.decode(we.contract_id,Se.contract_id=be.newBuffer(be.base64.length(we.contract_id)),0):we.contract_id.length>=0&&(Se.contract_id=we.contract_id)),we.system_contract!=null&&(Se.system_contract=!!we.system_contract),Se},xe.toObject=function(we,Se){Se||(Se={});var $r={};return Se.defaults&&(Se.bytes===String?$r.contract_id="":($r.contract_id=[],Se.bytes!==Array&&($r.contract_id=be.newBuffer($r.contract_id))),$r.system_contract=!1),we.contract_id!=null&&we.hasOwnProperty("contract_id")&&($r.contract_id=Se.bytes===String?be.base64.encode(we.contract_id,0,we.contract_id.length):Se.bytes===Array?Array.prototype.slice.call(we.contract_id):we.contract_id),we.system_contract!=null&&we.hasOwnProperty("system_contract")&&($r.system_contract=we.system_contract),$r},xe.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},xe.getTypeUrl=function(we){return we===void 0&&(we="type.googleapis.com"),we+"/koinos.protocol.set_system_contract_operation"},xe}(),Oe.operation=function(){function xe(we){if(we)for(var Se=Object.keys(we),$r=0;$r<Se.length;++$r)we[Se[$r]]!=null&&(this[Se[$r]]=we[Se[$r]])}xe.prototype.upload_contract=null,xe.prototype.call_contract=null,xe.prototype.set_system_call=null,xe.prototype.set_system_contract=null;var gr;return Object.defineProperty(xe.prototype,"op",{get:be.oneOfGetter(gr=["upload_contract","call_contract","set_system_call","set_system_contract"]),set:be.oneOfSetter(gr)}),xe.create=function(Se){return new xe(Se)},xe.encode=function(Se,$r){return $r||($r=me.create()),Se.upload_contract!=null&&Object.hasOwnProperty.call(Se,"upload_contract")&&ve.koinos.protocol.upload_contract_operation.encode(Se.upload_contract,$r.uint32(10).fork()).ldelim(),Se.call_contract!=null&&Object.hasOwnProperty.call(Se,"call_contract")&&ve.koinos.protocol.call_contract_operation.encode(Se.call_contract,$r.uint32(18).fork()).ldelim(),Se.set_system_call!=null&&Object.hasOwnProperty.call(Se,"set_system_call")&&ve.koinos.protocol.set_system_call_operation.encode(Se.set_system_call,$r.uint32(26).fork()).ldelim(),Se.set_system_contract!=null&&Object.hasOwnProperty.call(Se,"set_system_contract")&&ve.koinos.protocol.set_system_contract_operation.encode(Se.set_system_contract,$r.uint32(34).fork()).ldelim(),$r},xe.encodeDelimited=function(Se,$r){return this.encode(Se,$r).ldelim()},xe.decode=function(Se,$r){Se instanceof ye||(Se=ye.create(Se));for(var Fr=$r===void 0?Se.len:Se.pos+$r,Br=new ve.koinos.protocol.operation;Se.pos<Fr;){var Vr=Se.uint32();switch(Vr>>>3){case 1:{Br.upload_contract=ve.koinos.protocol.upload_contract_operation.decode(Se,Se.uint32());break}case 2:{Br.call_contract=ve.koinos.protocol.call_contract_operation.decode(Se,Se.uint32());break}case 3:{Br.set_system_call=ve.koinos.protocol.set_system_call_operation.decode(Se,Se.uint32());break}case 4:{Br.set_system_contract=ve.koinos.protocol.set_system_contract_operation.decode(Se,Se.uint32());break}default:Se.skipType(Vr&7);break}}return Br},xe.decodeDelimited=function(Se){return Se instanceof ye||(Se=new ye(Se)),this.decode(Se,Se.uint32())},xe.verify=function(Se){if(typeof Se!="object"||Se===null)return"object expected";var $r={};if(Se.upload_contract!=null&&Se.hasOwnProperty("upload_contract")){$r.op=1;{var Fr=ve.koinos.protocol.upload_contract_operation.verify(Se.upload_contract);if(Fr)return"upload_contract."+Fr}}if(Se.call_contract!=null&&Se.hasOwnProperty("call_contract")){if($r.op===1)return"op: multiple values";$r.op=1;{var Fr=ve.koinos.protocol.call_contract_operation.verify(Se.call_contract);if(Fr)return"call_contract."+Fr}}if(Se.set_system_call!=null&&Se.hasOwnProperty("set_system_call")){if($r.op===1)return"op: multiple values";$r.op=1;{var Fr=ve.koinos.protocol.set_system_call_operation.verify(Se.set_system_call);if(Fr)return"set_system_call."+Fr}}if(Se.set_system_contract!=null&&Se.hasOwnProperty("set_system_contract")){if($r.op===1)return"op: multiple values";$r.op=1;{var Fr=ve.koinos.protocol.set_system_contract_operation.verify(Se.set_system_contract);if(Fr)return"set_system_contract."+Fr}}return null},xe.fromObject=function(Se){if(Se instanceof ve.koinos.protocol.operation)return Se;var $r=new ve.koinos.protocol.operation;if(Se.upload_contract!=null){if(typeof Se.upload_contract!="object")throw TypeError(".koinos.protocol.operation.upload_contract: object expected");$r.upload_contract=ve.koinos.protocol.upload_contract_operation.fromObject(Se.upload_contract)}if(Se.call_contract!=null){if(typeof Se.call_contract!="object")throw TypeError(".koinos.protocol.operation.call_contract: object expected");$r.call_contract=ve.koinos.protocol.call_contract_operation.fromObject(Se.call_contract)}if(Se.set_system_call!=null){if(typeof Se.set_system_call!="object")throw TypeError(".koinos.protocol.operation.set_system_call: object expected");$r.set_system_call=ve.koinos.protocol.set_system_call_operation.fromObject(Se.set_system_call)}if(Se.set_system_contract!=null){if(typeof Se.set_system_contract!="object")throw TypeError(".koinos.protocol.operation.set_system_contract: object expected");$r.set_system_contract=ve.koinos.protocol.set_system_contract_operation.fromObject(Se.set_system_contract)}return $r},xe.toObject=function(Se,$r){$r||($r={});var Fr={};return Se.upload_contract!=null&&Se.hasOwnProperty("upload_contract")&&(Fr.upload_contract=ve.koinos.protocol.upload_contract_operation.toObject(Se.upload_contract,$r),$r.oneofs&&(Fr.op="upload_contract")),Se.call_contract!=null&&Se.hasOwnProperty("call_contract")&&(Fr.call_contract=ve.koinos.protocol.call_contract_operation.toObject(Se.call_contract,$r),$r.oneofs&&(Fr.op="call_contract")),Se.set_system_call!=null&&Se.hasOwnProperty("set_system_call")&&(Fr.set_system_call=ve.koinos.protocol.set_system_call_operation.toObject(Se.set_system_call,$r),$r.oneofs&&(Fr.op="set_system_call")),Se.set_system_contract!=null&&Se.hasOwnProperty("set_system_contract")&&(Fr.set_system_contract=ve.koinos.protocol.set_system_contract_operation.toObject(Se.set_system_contract,$r),$r.oneofs&&(Fr.op="set_system_contract")),Fr},xe.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},xe.getTypeUrl=function(Se){return Se===void 0&&(Se="type.googleapis.com"),Se+"/koinos.protocol.operation"},xe}(),Oe.transaction_header=function(){function xe(gr){if(gr)for(var we=Object.keys(gr),Se=0;Se<we.length;++Se)gr[we[Se]]!=null&&(this[we[Se]]=gr[we[Se]])}return xe.prototype.chain_id=be.newBuffer([]),xe.prototype.rc_limit=be.Long?be.Long.fromBits(0,0,!0):0,xe.prototype.nonce=be.newBuffer([]),xe.prototype.operation_merkle_root=be.newBuffer([]),xe.prototype.payer=be.newBuffer([]),xe.prototype.payee=be.newBuffer([]),xe.create=function(we){return new xe(we)},xe.encode=function(we,Se){return Se||(Se=me.create()),we.chain_id!=null&&Object.hasOwnProperty.call(we,"chain_id")&&Se.uint32(10).bytes(we.chain_id),we.rc_limit!=null&&Object.hasOwnProperty.call(we,"rc_limit")&&Se.uint32(16).uint64(we.rc_limit),we.nonce!=null&&Object.hasOwnProperty.call(we,"nonce")&&Se.uint32(26).bytes(we.nonce),we.operation_merkle_root!=null&&Object.hasOwnProperty.call(we,"operation_merkle_root")&&Se.uint32(34).bytes(we.operation_merkle_root),we.payer!=null&&Object.hasOwnProperty.call(we,"payer")&&Se.uint32(42).bytes(we.payer),we.payee!=null&&Object.hasOwnProperty.call(we,"payee")&&Se.uint32(50).bytes(we.payee),Se},xe.encodeDelimited=function(we,Se){return this.encode(we,Se).ldelim()},xe.decode=function(we,Se){we instanceof ye||(we=ye.create(we));for(var $r=Se===void 0?we.len:we.pos+Se,Fr=new ve.koinos.protocol.transaction_header;we.pos<$r;){var Br=we.uint32();switch(Br>>>3){case 1:{Fr.chain_id=we.bytes();break}case 2:{Fr.rc_limit=we.uint64();break}case 3:{Fr.nonce=we.bytes();break}case 4:{Fr.operation_merkle_root=we.bytes();break}case 5:{Fr.payer=we.bytes();break}case 6:{Fr.payee=we.bytes();break}default:we.skipType(Br&7);break}}return Fr},xe.decodeDelimited=function(we){return we instanceof ye||(we=new ye(we)),this.decode(we,we.uint32())},xe.verify=function(we){return typeof we!="object"||we===null?"object expected":we.chain_id!=null&&we.hasOwnProperty("chain_id")&&!(we.chain_id&&typeof we.chain_id.length=="number"||be.isString(we.chain_id))?"chain_id: buffer expected":we.rc_limit!=null&&we.hasOwnProperty("rc_limit")&&!be.isInteger(we.rc_limit)&&!(we.rc_limit&&be.isInteger(we.rc_limit.low)&&be.isInteger(we.rc_limit.high))?"rc_limit: integer|Long expected":we.nonce!=null&&we.hasOwnProperty("nonce")&&!(we.nonce&&typeof we.nonce.length=="number"||be.isString(we.nonce))?"nonce: buffer expected":we.operation_merkle_root!=null&&we.hasOwnProperty("operation_merkle_root")&&!(we.operation_merkle_root&&typeof we.operation_merkle_root.length=="number"||be.isString(we.operation_merkle_root))?"operation_merkle_root: buffer expected":we.payer!=null&&we.hasOwnProperty("payer")&&!(we.payer&&typeof we.payer.length=="number"||be.isString(we.payer))?"payer: buffer expected":we.payee!=null&&we.hasOwnProperty("payee")&&!(we.payee&&typeof we.payee.length=="number"||be.isString(we.payee))?"payee: buffer expected":null},xe.fromObject=function(we){if(we instanceof ve.koinos.protocol.transaction_header)return we;var Se=new ve.koinos.protocol.transaction_header;return we.chain_id!=null&&(typeof we.chain_id=="string"?be.base64.decode(we.chain_id,Se.chain_id=be.newBuffer(be.base64.length(we.chain_id)),0):we.chain_id.length>=0&&(Se.chain_id=we.chain_id)),we.rc_limit!=null&&(be.Long?(Se.rc_limit=be.Long.fromValue(we.rc_limit)).unsigned=!0:typeof we.rc_limit=="string"?Se.rc_limit=parseInt(we.rc_limit,10):typeof we.rc_limit=="number"?Se.rc_limit=we.rc_limit:typeof we.rc_limit=="object"&&(Se.rc_limit=new be.LongBits(we.rc_limit.low>>>0,we.rc_limit.high>>>0).toNumber(!0))),we.nonce!=null&&(typeof we.nonce=="string"?be.base64.decode(we.nonce,Se.nonce=be.newBuffer(be.base64.length(we.nonce)),0):we.nonce.length>=0&&(Se.nonce=we.nonce)),we.operation_merkle_root!=null&&(typeof we.operation_merkle_root=="string"?be.base64.decode(we.operation_merkle_root,Se.operation_merkle_root=be.newBuffer(be.base64.length(we.operation_merkle_root)),0):we.operation_merkle_root.length>=0&&(Se.operation_merkle_root=we.operation_merkle_root)),we.payer!=null&&(typeof we.payer=="string"?be.base64.decode(we.payer,Se.payer=be.newBuffer(be.base64.length(we.payer)),0):we.payer.length>=0&&(Se.payer=we.payer)),we.payee!=null&&(typeof we.payee=="string"?be.base64.decode(we.payee,Se.payee=be.newBuffer(be.base64.length(we.payee)),0):we.payee.length>=0&&(Se.payee=we.payee)),Se},xe.toObject=function(we,Se){Se||(Se={});var $r={};if(Se.defaults){if(Se.bytes===String?$r.chain_id="":($r.chain_id=[],Se.bytes!==Array&&($r.chain_id=be.newBuffer($r.chain_id))),be.Long){var Fr=new be.Long(0,0,!0);$r.rc_limit=Se.longs===String?Fr.toString():Se.longs===Number?Fr.toNumber():Fr}else $r.rc_limit=Se.longs===String?"0":0;Se.bytes===String?$r.nonce="":($r.nonce=[],Se.bytes!==Array&&($r.nonce=be.newBuffer($r.nonce))),Se.bytes===String?$r.operation_merkle_root="":($r.operation_merkle_root=[],Se.bytes!==Array&&($r.operation_merkle_root=be.newBuffer($r.operation_merkle_root))),Se.bytes===String?$r.payer="":($r.payer=[],Se.bytes!==Array&&($r.payer=be.newBuffer($r.payer))),Se.bytes===String?$r.payee="":($r.payee=[],Se.bytes!==Array&&($r.payee=be.newBuffer($r.payee)))}return we.chain_id!=null&&we.hasOwnProperty("chain_id")&&($r.chain_id=Se.bytes===String?be.base64.encode(we.chain_id,0,we.chain_id.length):Se.bytes===Array?Array.prototype.slice.call(we.chain_id):we.chain_id),we.rc_limit!=null&&we.hasOwnProperty("rc_limit")&&(typeof we.rc_limit=="number"?$r.rc_limit=Se.longs===String?String(we.rc_limit):we.rc_limit:$r.rc_limit=Se.longs===String?be.Long.prototype.toString.call(we.rc_limit):Se.longs===Number?new be.LongBits(we.rc_limit.low>>>0,we.rc_limit.high>>>0).toNumber(!0):we.rc_limit),we.nonce!=null&&we.hasOwnProperty("nonce")&&($r.nonce=Se.bytes===String?be.base64.encode(we.nonce,0,we.nonce.length):Se.bytes===Array?Array.prototype.slice.call(we.nonce):we.nonce),we.operation_merkle_root!=null&&we.hasOwnProperty("operation_merkle_root")&&($r.operation_merkle_root=Se.bytes===String?be.base64.encode(we.operation_merkle_root,0,we.operation_merkle_root.length):Se.bytes===Array?Array.prototype.slice.call(we.operation_merkle_root):we.operation_merkle_root),we.payer!=null&&we.hasOwnProperty("payer")&&($r.payer=Se.bytes===String?be.base64.encode(we.payer,0,we.payer.length):Se.bytes===Array?Array.prototype.slice.call(we.payer):we.payer),we.payee!=null&&we.hasOwnProperty("payee")&&($r.payee=Se.bytes===String?be.base64.encode(we.payee,0,we.payee.length):Se.bytes===Array?Array.prototype.slice.call(we.payee):we.payee),$r},xe.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},xe.getTypeUrl=function(we){return we===void 0&&(we="type.googleapis.com"),we+"/koinos.protocol.transaction_header"},xe}(),Oe.transaction=function(){function xe(gr){if(this.operations=[],this.signatures=[],gr)for(var we=Object.keys(gr),Se=0;Se<we.length;++Se)gr[we[Se]]!=null&&(this[we[Se]]=gr[we[Se]])}return xe.prototype.id=be.newBuffer([]),xe.prototype.header=null,xe.prototype.operations=be.emptyArray,xe.prototype.signatures=be.emptyArray,xe.create=function(we){return new xe(we)},xe.encode=function(we,Se){if(Se||(Se=me.create()),we.id!=null&&Object.hasOwnProperty.call(we,"id")&&Se.uint32(10).bytes(we.id),we.header!=null&&Object.hasOwnProperty.call(we,"header")&&ve.koinos.protocol.transaction_header.encode(we.header,Se.uint32(18).fork()).ldelim(),we.operations!=null&&we.operations.length)for(var $r=0;$r<we.operations.length;++$r)ve.koinos.protocol.operation.encode(we.operations[$r],Se.uint32(26).fork()).ldelim();if(we.signatures!=null&&we.signatures.length)for(var $r=0;$r<we.signatures.length;++$r)Se.uint32(34).bytes(we.signatures[$r]);return Se},xe.encodeDelimited=function(we,Se){return this.encode(we,Se).ldelim()},xe.decode=function(we,Se){we instanceof ye||(we=ye.create(we));for(var $r=Se===void 0?we.len:we.pos+Se,Fr=new ve.koinos.protocol.transaction;we.pos<$r;){var Br=we.uint32();switch(Br>>>3){case 1:{Fr.id=we.bytes();break}case 2:{Fr.header=ve.koinos.protocol.transaction_header.decode(we,we.uint32());break}case 3:{Fr.operations&&Fr.operations.length||(Fr.operations=[]),Fr.operations.push(ve.koinos.protocol.operation.decode(we,we.uint32()));break}case 4:{Fr.signatures&&Fr.signatures.length||(Fr.signatures=[]),Fr.signatures.push(we.bytes());break}default:we.skipType(Br&7);break}}return Fr},xe.decodeDelimited=function(we){return we instanceof ye||(we=new ye(we)),this.decode(we,we.uint32())},xe.verify=function(we){if(typeof we!="object"||we===null)return"object expected";if(we.id!=null&&we.hasOwnProperty("id")&&!(we.id&&typeof we.id.length=="number"||be.isString(we.id)))return"id: buffer expected";if(we.header!=null&&we.hasOwnProperty("header")){var Se=ve.koinos.protocol.transaction_header.verify(we.header);if(Se)return"header."+Se}if(we.operations!=null&&we.hasOwnProperty("operations")){if(!Array.isArray(we.operations))return"operations: array expected";for(var $r=0;$r<we.operations.length;++$r){var Se=ve.koinos.protocol.operation.verify(we.operations[$r]);if(Se)return"operations."+Se}}if(we.signatures!=null&&we.hasOwnProperty("signatures")){if(!Array.isArray(we.signatures))return"signatures: array expected";for(var $r=0;$r<we.signatures.length;++$r)if(!(we.signatures[$r]&&typeof we.signatures[$r].length=="number"||be.isString(we.signatures[$r])))return"signatures: buffer[] expected"}return null},xe.fromObject=function(we){if(we instanceof ve.koinos.protocol.transaction)return we;var Se=new ve.koinos.protocol.transaction;if(we.id!=null&&(typeof we.id=="string"?be.base64.decode(we.id,Se.id=be.newBuffer(be.base64.length(we.id)),0):we.id.length>=0&&(Se.id=we.id)),we.header!=null){if(typeof we.header!="object")throw TypeError(".koinos.protocol.transaction.header: object expected");Se.header=ve.koinos.protocol.transaction_header.fromObject(we.header)}if(we.operations){if(!Array.isArray(we.operations))throw TypeError(".koinos.protocol.transaction.operations: array expected");Se.operations=[];for(var $r=0;$r<we.operations.length;++$r){if(typeof we.operations[$r]!="object")throw TypeError(".koinos.protocol.transaction.operations: object expected");Se.operations[$r]=ve.koinos.protocol.operation.fromObject(we.operations[$r])}}if(we.signatures){if(!Array.isArray(we.signatures))throw TypeError(".koinos.protocol.transaction.signatures: array expected");Se.signatures=[];for(var $r=0;$r<we.signatures.length;++$r)typeof we.signatures[$r]=="string"?be.base64.decode(we.signatures[$r],Se.signatures[$r]=be.newBuffer(be.base64.length(we.signatures[$r])),0):we.signatures[$r].length>=0&&(Se.signatures[$r]=we.signatures[$r])}return Se},xe.toObject=function(we,Se){Se||(Se={});var $r={};if((Se.arrays||Se.defaults)&&($r.operations=[],$r.signatures=[]),Se.defaults&&(Se.bytes===String?$r.id="":($r.id=[],Se.bytes!==Array&&($r.id=be.newBuffer($r.id))),$r.header=null),we.id!=null&&we.hasOwnProperty("id")&&($r.id=Se.bytes===String?be.base64.encode(we.id,0,we.id.length):Se.bytes===Array?Array.prototype.slice.call(we.id):we.id),we.header!=null&&we.hasOwnProperty("header")&&($r.header=ve.koinos.protocol.transaction_header.toObject(we.header,Se)),we.operations&&we.operations.length){$r.operations=[];for(var Fr=0;Fr<we.operations.length;++Fr)$r.operations[Fr]=ve.koinos.protocol.operation.toObject(we.operations[Fr],Se)}if(we.signatures&&we.signatures.length){$r.signatures=[];for(var Fr=0;Fr<we.signatures.length;++Fr)$r.signatures[Fr]=Se.bytes===String?be.base64.encode(we.signatures[Fr],0,we.signatures[Fr].length):Se.bytes===Array?Array.prototype.slice.call(we.signatures[Fr]):we.signatures[Fr]}return $r},xe.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},xe.getTypeUrl=function(we){return we===void 0&&(we="type.googleapis.com"),we+"/koinos.protocol.transaction"},xe}(),Oe.transaction_receipt=function(){function xe(gr){if(this.events=[],this.logs=[],gr)for(var we=Object.keys(gr),Se=0;Se<we.length;++Se)gr[we[Se]]!=null&&(this[we[Se]]=gr[we[Se]])}return xe.prototype.id=be.newBuffer([]),xe.prototype.payer=be.newBuffer([]),xe.prototype.max_payer_rc=be.Long?be.Long.fromBits(0,0,!0):0,xe.prototype.rc_limit=be.Long?be.Long.fromBits(0,0,!0):0,xe.prototype.rc_used=be.Long?be.Long.fromBits(0,0,!0):0,xe.prototype.disk_storage_used=be.Long?be.Long.fromBits(0,0,!0):0,xe.prototype.network_bandwidth_used=be.Long?be.Long.fromBits(0,0,!0):0,xe.prototype.compute_bandwidth_used=be.Long?be.Long.fromBits(0,0,!0):0,xe.prototype.reverted=!1,xe.prototype.events=be.emptyArray,xe.prototype.logs=be.emptyArray,xe.create=function(we){return new xe(we)},xe.encode=function(we,Se){if(Se||(Se=me.create()),we.id!=null&&Object.hasOwnProperty.call(we,"id")&&Se.uint32(10).bytes(we.id),we.payer!=null&&Object.hasOwnProperty.call(we,"payer")&&Se.uint32(18).bytes(we.payer),we.max_payer_rc!=null&&Object.hasOwnProperty.call(we,"max_payer_rc")&&Se.uint32(24).uint64(we.max_payer_rc),we.rc_limit!=null&&Object.hasOwnProperty.call(we,"rc_limit")&&Se.uint32(32).uint64(we.rc_limit),we.rc_used!=null&&Object.hasOwnProperty.call(we,"rc_used")&&Se.uint32(40).uint64(we.rc_used),we.disk_storage_used!=null&&Object.hasOwnProperty.call(we,"disk_storage_used")&&Se.uint32(48).uint64(we.disk_storage_used),we.network_bandwidth_used!=null&&Object.hasOwnProperty.call(we,"network_bandwidth_used")&&Se.uint32(56).uint64(we.network_bandwidth_used),we.compute_bandwidth_used!=null&&Object.hasOwnProperty.call(we,"compute_bandwidth_used")&&Se.uint32(64).uint64(we.compute_bandwidth_used),we.reverted!=null&&Object.hasOwnProperty.call(we,"reverted")&&Se.uint32(72).bool(we.reverted),we.events!=null&&we.events.length)for(var $r=0;$r<we.events.length;++$r)ve.koinos.protocol.event_data.encode(we.events[$r],Se.uint32(82).fork()).ldelim();if(we.logs!=null&&we.logs.length)for(var $r=0;$r<we.logs.length;++$r)Se.uint32(90).string(we.logs[$r]);return Se},xe.encodeDelimited=function(we,Se){return this.encode(we,Se).ldelim()},xe.decode=function(we,Se){we instanceof ye||(we=ye.create(we));for(var $r=Se===void 0?we.len:we.pos+Se,Fr=new ve.koinos.protocol.transaction_receipt;we.pos<$r;){var Br=we.uint32();switch(Br>>>3){case 1:{Fr.id=we.bytes();break}case 2:{Fr.payer=we.bytes();break}case 3:{Fr.max_payer_rc=we.uint64();break}case 4:{Fr.rc_limit=we.uint64();break}case 5:{Fr.rc_used=we.uint64();break}case 6:{Fr.disk_storage_used=we.uint64();break}case 7:{Fr.network_bandwidth_used=we.uint64();break}case 8:{Fr.compute_bandwidth_used=we.uint64();break}case 9:{Fr.reverted=we.bool();break}case 10:{Fr.events&&Fr.events.length||(Fr.events=[]),Fr.events.push(ve.koinos.protocol.event_data.decode(we,we.uint32()));break}case 11:{Fr.logs&&Fr.logs.length||(Fr.logs=[]),Fr.logs.push(we.string());break}default:we.skipType(Br&7);break}}return Fr},xe.decodeDelimited=function(we){return we instanceof ye||(we=new ye(we)),this.decode(we,we.uint32())},xe.verify=function(we){if(typeof we!="object"||we===null)return"object expected";if(we.id!=null&&we.hasOwnProperty("id")&&!(we.id&&typeof we.id.length=="number"||be.isString(we.id)))return"id: buffer expected";if(we.payer!=null&&we.hasOwnProperty("payer")&&!(we.payer&&typeof we.payer.length=="number"||be.isString(we.payer)))return"payer: buffer expected";if(we.max_payer_rc!=null&&we.hasOwnProperty("max_payer_rc")&&!be.isInteger(we.max_payer_rc)&&!(we.max_payer_rc&&be.isInteger(we.max_payer_rc.low)&&be.isInteger(we.max_payer_rc.high)))return"max_payer_rc: integer|Long expected";if(we.rc_limit!=null&&we.hasOwnProperty("rc_limit")&&!be.isInteger(we.rc_limit)&&!(we.rc_limit&&be.isInteger(we.rc_limit.low)&&be.isInteger(we.rc_limit.high)))return"rc_limit: integer|Long expected";if(we.rc_used!=null&&we.hasOwnProperty("rc_used")&&!be.isInteger(we.rc_used)&&!(we.rc_used&&be.isInteger(we.rc_used.low)&&be.isInteger(we.rc_used.high)))return"rc_used: integer|Long expected";if(we.disk_storage_used!=null&&we.hasOwnProperty("disk_storage_used")&&!be.isInteger(we.disk_storage_used)&&!(we.disk_storage_used&&be.isInteger(we.disk_storage_used.low)&&be.isInteger(we.disk_storage_used.high)))return"disk_storage_used: integer|Long expected";if(we.network_bandwidth_used!=null&&we.hasOwnProperty("network_bandwidth_used")&&!be.isInteger(we.network_bandwidth_used)&&!(we.network_bandwidth_used&&be.isInteger(we.network_bandwidth_used.low)&&be.isInteger(we.network_bandwidth_used.high)))return"network_bandwidth_used: integer|Long expected";if(we.compute_bandwidth_used!=null&&we.hasOwnProperty("compute_bandwidth_used")&&!be.isInteger(we.compute_bandwidth_used)&&!(we.compute_bandwidth_used&&be.isInteger(we.compute_bandwidth_used.low)&&be.isInteger(we.compute_bandwidth_used.high)))return"compute_bandwidth_used: integer|Long expected";if(we.reverted!=null&&we.hasOwnProperty("reverted")&&typeof we.reverted!="boolean")return"reverted: boolean expected";if(we.events!=null&&we.hasOwnProperty("events")){if(!Array.isArray(we.events))return"events: array expected";for(var Se=0;Se<we.events.length;++Se){var $r=ve.koinos.protocol.event_data.verify(we.events[Se]);if($r)return"events."+$r}}if(we.logs!=null&&we.hasOwnProperty("logs")){if(!Array.isArray(we.logs))return"logs: array expected";for(var Se=0;Se<we.logs.length;++Se)if(!be.isString(we.logs[Se]))return"logs: string[] expected"}return null},xe.fromObject=function(we){if(we instanceof ve.koinos.protocol.transaction_receipt)return we;var Se=new ve.koinos.protocol.transaction_receipt;if(we.id!=null&&(typeof we.id=="string"?be.base64.decode(we.id,Se.id=be.newBuffer(be.base64.length(we.id)),0):we.id.length>=0&&(Se.id=we.id)),we.payer!=null&&(typeof we.payer=="string"?be.base64.decode(we.payer,Se.payer=be.newBuffer(be.base64.length(we.payer)),0):we.payer.length>=0&&(Se.payer=we.payer)),we.max_payer_rc!=null&&(be.Long?(Se.max_payer_rc=be.Long.fromValue(we.max_payer_rc)).unsigned=!0:typeof we.max_payer_rc=="string"?Se.max_payer_rc=parseInt(we.max_payer_rc,10):typeof we.max_payer_rc=="number"?Se.max_payer_rc=we.max_payer_rc:typeof we.max_payer_rc=="object"&&(Se.max_payer_rc=new be.LongBits(we.max_payer_rc.low>>>0,we.max_payer_rc.high>>>0).toNumber(!0))),we.rc_limit!=null&&(be.Long?(Se.rc_limit=be.Long.fromValue(we.rc_limit)).unsigned=!0:typeof we.rc_limit=="string"?Se.rc_limit=parseInt(we.rc_limit,10):typeof we.rc_limit=="number"?Se.rc_limit=we.rc_limit:typeof we.rc_limit=="object"&&(Se.rc_limit=new be.LongBits(we.rc_limit.low>>>0,we.rc_limit.high>>>0).toNumber(!0))),we.rc_used!=null&&(be.Long?(Se.rc_used=be.Long.fromValue(we.rc_used)).unsigned=!0:typeof we.rc_used=="string"?Se.rc_used=parseInt(we.rc_used,10):typeof we.rc_used=="number"?Se.rc_used=we.rc_used:typeof we.rc_used=="object"&&(Se.rc_used=new be.LongBits(we.rc_used.low>>>0,we.rc_used.high>>>0).toNumber(!0))),we.disk_storage_used!=null&&(be.Long?(Se.disk_storage_used=be.Long.fromValue(we.disk_storage_used)).unsigned=!0:typeof we.disk_storage_used=="string"?Se.disk_storage_used=parseInt(we.disk_storage_used,10):typeof we.disk_storage_used=="number"?Se.disk_storage_used=we.disk_storage_used:typeof we.disk_storage_used=="object"&&(Se.disk_storage_used=new be.LongBits(we.disk_storage_used.low>>>0,we.disk_storage_used.high>>>0).toNumber(!0))),we.network_bandwidth_used!=null&&(be.Long?(Se.network_bandwidth_used=be.Long.fromValue(we.network_bandwidth_used)).unsigned=!0:typeof we.network_bandwidth_used=="string"?Se.network_bandwidth_used=parseInt(we.network_bandwidth_used,10):typeof we.network_bandwidth_used=="number"?Se.network_bandwidth_used=we.network_bandwidth_used:typeof we.network_bandwidth_used=="object"&&(Se.network_bandwidth_used=new be.LongBits(we.network_bandwidth_used.low>>>0,we.network_bandwidth_used.high>>>0).toNumber(!0))),we.compute_bandwidth_used!=null&&(be.Long?(Se.compute_bandwidth_used=be.Long.fromValue(we.compute_bandwidth_used)).unsigned=!0:typeof we.compute_bandwidth_used=="string"?Se.compute_bandwidth_used=parseInt(we.compute_bandwidth_used,10):typeof we.compute_bandwidth_used=="number"?Se.compute_bandwidth_used=we.compute_bandwidth_used:typeof we.compute_bandwidth_used=="object"&&(Se.compute_bandwidth_used=new be.LongBits(we.compute_bandwidth_used.low>>>0,we.compute_bandwidth_used.high>>>0).toNumber(!0))),we.reverted!=null&&(Se.reverted=!!we.reverted),we.events){if(!Array.isArray(we.events))throw TypeError(".koinos.protocol.transaction_receipt.events: array expected");Se.events=[];for(var $r=0;$r<we.events.length;++$r){if(typeof we.events[$r]!="object")throw TypeError(".koinos.protocol.transaction_receipt.events: object expected");Se.events[$r]=ve.koinos.protocol.event_data.fromObject(we.events[$r])}}if(we.logs){if(!Array.isArray(we.logs))throw TypeError(".koinos.protocol.transaction_receipt.logs: array expected");Se.logs=[];for(var $r=0;$r<we.logs.length;++$r)Se.logs[$r]=String(we.logs[$r])}return Se},xe.toObject=function(we,Se){Se||(Se={});var $r={};if((Se.arrays||Se.defaults)&&($r.events=[],$r.logs=[]),Se.defaults){if(Se.bytes===String?$r.id="":($r.id=[],Se.bytes!==Array&&($r.id=be.newBuffer($r.id))),Se.bytes===String?$r.payer="":($r.payer=[],Se.bytes!==Array&&($r.payer=be.newBuffer($r.payer))),be.Long){var Fr=new be.Long(0,0,!0);$r.max_payer_rc=Se.longs===String?Fr.toString():Se.longs===Number?Fr.toNumber():Fr}else $r.max_payer_rc=Se.longs===String?"0":0;if(be.Long){var Fr=new be.Long(0,0,!0);$r.rc_limit=Se.longs===String?Fr.toString():Se.longs===Number?Fr.toNumber():Fr}else $r.rc_limit=Se.longs===String?"0":0;if(be.Long){var Fr=new be.Long(0,0,!0);$r.rc_used=Se.longs===String?Fr.toString():Se.longs===Number?Fr.toNumber():Fr}else $r.rc_used=Se.longs===String?"0":0;if(be.Long){var Fr=new be.Long(0,0,!0);$r.disk_storage_used=Se.longs===String?Fr.toString():Se.longs===Number?Fr.toNumber():Fr}else $r.disk_storage_used=Se.longs===String?"0":0;if(be.Long){var Fr=new be.Long(0,0,!0);$r.network_bandwidth_used=Se.longs===String?Fr.toString():Se.longs===Number?Fr.toNumber():Fr}else $r.network_bandwidth_used=Se.longs===String?"0":0;if(be.Long){var Fr=new be.Long(0,0,!0);$r.compute_bandwidth_used=Se.longs===String?Fr.toString():Se.longs===Number?Fr.toNumber():Fr}else $r.compute_bandwidth_used=Se.longs===String?"0":0;$r.reverted=!1}if(we.id!=null&&we.hasOwnProperty("id")&&($r.id=Se.bytes===String?be.base64.encode(we.id,0,we.id.length):Se.bytes===Array?Array.prototype.slice.call(we.id):we.id),we.payer!=null&&we.hasOwnProperty("payer")&&($r.payer=Se.bytes===String?be.base64.encode(we.payer,0,we.payer.length):Se.bytes===Array?Array.prototype.slice.call(we.payer):we.payer),we.max_payer_rc!=null&&we.hasOwnProperty("max_payer_rc")&&(typeof we.max_payer_rc=="number"?$r.max_payer_rc=Se.longs===String?String(we.max_payer_rc):we.max_payer_rc:$r.max_payer_rc=Se.longs===String?be.Long.prototype.toString.call(we.max_payer_rc):Se.longs===Number?new be.LongBits(we.max_payer_rc.low>>>0,we.max_payer_rc.high>>>0).toNumber(!0):we.max_payer_rc),we.rc_limit!=null&&we.hasOwnProperty("rc_limit")&&(typeof we.rc_limit=="number"?$r.rc_limit=Se.longs===String?String(we.rc_limit):we.rc_limit:$r.rc_limit=Se.longs===String?be.Long.prototype.toString.call(we.rc_limit):Se.longs===Number?new be.LongBits(we.rc_limit.low>>>0,we.rc_limit.high>>>0).toNumber(!0):we.rc_limit),we.rc_used!=null&&we.hasOwnProperty("rc_used")&&(typeof we.rc_used=="number"?$r.rc_used=Se.longs===String?String(we.rc_used):we.rc_used:$r.rc_used=Se.longs===String?be.Long.prototype.toString.call(we.rc_used):Se.longs===Number?new be.LongBits(we.rc_used.low>>>0,we.rc_used.high>>>0).toNumber(!0):we.rc_used),we.disk_storage_used!=null&&we.hasOwnProperty("disk_storage_used")&&(typeof we.disk_storage_used=="number"?$r.disk_storage_used=Se.longs===String?String(we.disk_storage_used):we.disk_storage_used:$r.disk_storage_used=Se.longs===String?be.Long.prototype.toString.call(we.disk_storage_used):Se.longs===Number?new be.LongBits(we.disk_storage_used.low>>>0,we.disk_storage_used.high>>>0).toNumber(!0):we.disk_storage_used),we.network_bandwidth_used!=null&&we.hasOwnProperty("network_bandwidth_used")&&(typeof we.network_bandwidth_used=="number"?$r.network_bandwidth_used=Se.longs===String?String(we.network_bandwidth_used):we.network_bandwidth_used:$r.network_bandwidth_used=Se.longs===String?be.Long.prototype.toString.call(we.network_bandwidth_used):Se.longs===Number?new be.LongBits(we.network_bandwidth_used.low>>>0,we.network_bandwidth_used.high>>>0).toNumber(!0):we.network_bandwidth_used),we.compute_bandwidth_used!=null&&we.hasOwnProperty("compute_bandwidth_used")&&(typeof we.compute_bandwidth_used=="number"?$r.compute_bandwidth_used=Se.longs===String?String(we.compute_bandwidth_used):we.compute_bandwidth_used:$r.compute_bandwidth_used=Se.longs===String?be.Long.prototype.toString.call(we.compute_bandwidth_used):Se.longs===Number?new be.LongBits(we.compute_bandwidth_used.low>>>0,we.compute_bandwidth_used.high>>>0).toNumber(!0):we.compute_bandwidth_used),we.reverted!=null&&we.hasOwnProperty("reverted")&&($r.reverted=we.reverted),we.events&&we.events.length){$r.events=[];for(var Br=0;Br<we.events.length;++Br)$r.events[Br]=ve.koinos.protocol.event_data.toObject(we.events[Br],Se)}if(we.logs&&we.logs.length){$r.logs=[];for(var Br=0;Br<we.logs.length;++Br)$r.logs[Br]=we.logs[Br]}return $r},xe.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},xe.getTypeUrl=function(we){return we===void 0&&(we="type.googleapis.com"),we+"/koinos.protocol.transaction_receipt"},xe}(),Oe.block_header=function(){function xe(gr){if(this.approved_proposals=[],gr)for(var we=Object.keys(gr),Se=0;Se<we.length;++Se)gr[we[Se]]!=null&&(this[we[Se]]=gr[we[Se]])}return xe.prototype.previous=be.newBuffer([]),xe.prototype.height=be.Long?be.Long.fromBits(0,0,!0):0,xe.prototype.timestamp=be.Long?be.Long.fromBits(0,0,!0):0,xe.prototype.previous_state_merkle_root=be.newBuffer([]),xe.prototype.transaction_merkle_root=be.newBuffer([]),xe.prototype.signer=be.newBuffer([]),xe.prototype.approved_proposals=be.emptyArray,xe.create=function(we){return new xe(we)},xe.encode=function(we,Se){if(Se||(Se=me.create()),we.previous!=null&&Object.hasOwnProperty.call(we,"previous")&&Se.uint32(10).bytes(we.previous),we.height!=null&&Object.hasOwnProperty.call(we,"height")&&Se.uint32(16).uint64(we.height),we.timestamp!=null&&Object.hasOwnProperty.call(we,"timestamp")&&Se.uint32(24).uint64(we.timestamp),we.previous_state_merkle_root!=null&&Object.hasOwnProperty.call(we,"previous_state_merkle_root")&&Se.uint32(34).bytes(we.previous_state_merkle_root),we.transaction_merkle_root!=null&&Object.hasOwnProperty.call(we,"transaction_merkle_root")&&Se.uint32(42).bytes(we.transaction_merkle_root),we.signer!=null&&Object.hasOwnProperty.call(we,"signer")&&Se.uint32(50).bytes(we.signer),we.approved_proposals!=null&&we.approved_proposals.length)for(var $r=0;$r<we.approved_proposals.length;++$r)Se.uint32(58).bytes(we.approved_proposals[$r]);return Se},xe.encodeDelimited=function(we,Se){return this.encode(we,Se).ldelim()},xe.decode=function(we,Se){we instanceof ye||(we=ye.create(we));for(var $r=Se===void 0?we.len:we.pos+Se,Fr=new ve.koinos.protocol.block_header;we.pos<$r;){var Br=we.uint32();switch(Br>>>3){case 1:{Fr.previous=we.bytes();break}case 2:{Fr.height=we.uint64();break}case 3:{Fr.timestamp=we.uint64();break}case 4:{Fr.previous_state_merkle_root=we.bytes();break}case 5:{Fr.transaction_merkle_root=we.bytes();break}case 6:{Fr.signer=we.bytes();break}case 7:{Fr.approved_proposals&&Fr.approved_proposals.length||(Fr.approved_proposals=[]),Fr.approved_proposals.push(we.bytes());break}default:we.skipType(Br&7);break}}return Fr},xe.decodeDelimited=function(we){return we instanceof ye||(we=new ye(we)),this.decode(we,we.uint32())},xe.verify=function(we){if(typeof we!="object"||we===null)return"object expected";if(we.previous!=null&&we.hasOwnProperty("previous")&&!(we.previous&&typeof we.previous.length=="number"||be.isString(we.previous)))return"previous: buffer expected";if(we.height!=null&&we.hasOwnProperty("height")&&!be.isInteger(we.height)&&!(we.height&&be.isInteger(we.height.low)&&be.isInteger(we.height.high)))return"height: integer|Long expected";if(we.timestamp!=null&&we.hasOwnProperty("timestamp")&&!be.isInteger(we.timestamp)&&!(we.timestamp&&be.isInteger(we.timestamp.low)&&be.isInteger(we.timestamp.high)))return"timestamp: integer|Long expected";if(we.previous_state_merkle_root!=null&&we.hasOwnProperty("previous_state_merkle_root")&&!(we.previous_state_merkle_root&&typeof we.previous_state_merkle_root.length=="number"||be.isString(we.previous_state_merkle_root)))return"previous_state_merkle_root: buffer expected";if(we.transaction_merkle_root!=null&&we.hasOwnProperty("transaction_merkle_root")&&!(we.transaction_merkle_root&&typeof we.transaction_merkle_root.length=="number"||be.isString(we.transaction_merkle_root)))return"transaction_merkle_root: buffer expected";if(we.signer!=null&&we.hasOwnProperty("signer")&&!(we.signer&&typeof we.signer.length=="number"||be.isString(we.signer)))return"signer: buffer expected";if(we.approved_proposals!=null&&we.hasOwnProperty("approved_proposals")){if(!Array.isArray(we.approved_proposals))return"approved_proposals: array expected";for(var Se=0;Se<we.approved_proposals.length;++Se)if(!(we.approved_proposals[Se]&&typeof we.approved_proposals[Se].length=="number"||be.isString(we.approved_proposals[Se])))return"approved_proposals: buffer[] expected"}return null},xe.fromObject=function(we){if(we instanceof ve.koinos.protocol.block_header)return we;var Se=new ve.koinos.protocol.block_header;if(we.previous!=null&&(typeof we.previous=="string"?be.base64.decode(we.previous,Se.previous=be.newBuffer(be.base64.length(we.previous)),0):we.previous.length>=0&&(Se.previous=we.previous)),we.height!=null&&(be.Long?(Se.height=be.Long.fromValue(we.height)).unsigned=!0:typeof we.height=="string"?Se.height=parseInt(we.height,10):typeof we.height=="number"?Se.height=we.height:typeof we.height=="object"&&(Se.height=new be.LongBits(we.height.low>>>0,we.height.high>>>0).toNumber(!0))),we.timestamp!=null&&(be.Long?(Se.timestamp=be.Long.fromValue(we.timestamp)).unsigned=!0:typeof we.timestamp=="string"?Se.timestamp=parseInt(we.timestamp,10):typeof we.timestamp=="number"?Se.timestamp=we.timestamp:typeof we.timestamp=="object"&&(Se.timestamp=new be.LongBits(we.timestamp.low>>>0,we.timestamp.high>>>0).toNumber(!0))),we.previous_state_merkle_root!=null&&(typeof we.previous_state_merkle_root=="string"?be.base64.decode(we.previous_state_merkle_root,Se.previous_state_merkle_root=be.newBuffer(be.base64.length(we.previous_state_merkle_root)),0):we.previous_state_merkle_root.length>=0&&(Se.previous_state_merkle_root=we.previous_state_merkle_root)),we.transaction_merkle_root!=null&&(typeof we.transaction_merkle_root=="string"?be.base64.decode(we.transaction_merkle_root,Se.transaction_merkle_root=be.newBuffer(be.base64.length(we.transaction_merkle_root)),0):we.transaction_merkle_root.length>=0&&(Se.transaction_merkle_root=we.transaction_merkle_root)),we.signer!=null&&(typeof we.signer=="string"?be.base64.decode(we.signer,Se.signer=be.newBuffer(be.base64.length(we.signer)),0):we.signer.length>=0&&(Se.signer=we.signer)),we.approved_proposals){if(!Array.isArray(we.approved_proposals))throw TypeError(".koinos.protocol.block_header.approved_proposals: array expected");Se.approved_proposals=[];for(var $r=0;$r<we.approved_proposals.length;++$r)typeof we.approved_proposals[$r]=="string"?be.base64.decode(we.approved_proposals[$r],Se.approved_proposals[$r]=be.newBuffer(be.base64.length(we.approved_proposals[$r])),0):we.approved_proposals[$r].length>=0&&(Se.approved_proposals[$r]=we.approved_proposals[$r])}return Se},xe.toObject=function(we,Se){Se||(Se={});var $r={};if((Se.arrays||Se.defaults)&&($r.approved_proposals=[]),Se.defaults){if(Se.bytes===String?$r.previous="":($r.previous=[],Se.bytes!==Array&&($r.previous=be.newBuffer($r.previous))),be.Long){var Fr=new be.Long(0,0,!0);$r.height=Se.longs===String?Fr.toString():Se.longs===Number?Fr.toNumber():Fr}else $r.height=Se.longs===String?"0":0;if(be.Long){var Fr=new be.Long(0,0,!0);$r.timestamp=Se.longs===String?Fr.toString():Se.longs===Number?Fr.toNumber():Fr}else $r.timestamp=Se.longs===String?"0":0;Se.bytes===String?$r.previous_state_merkle_root="":($r.previous_state_merkle_root=[],Se.bytes!==Array&&($r.previous_state_merkle_root=be.newBuffer($r.previous_state_merkle_root))),Se.bytes===String?$r.transaction_merkle_root="":($r.transaction_merkle_root=[],Se.bytes!==Array&&($r.transaction_merkle_root=be.newBuffer($r.transaction_merkle_root))),Se.bytes===String?$r.signer="":($r.signer=[],Se.bytes!==Array&&($r.signer=be.newBuffer($r.signer)))}if(we.previous!=null&&we.hasOwnProperty("previous")&&($r.previous=Se.bytes===String?be.base64.encode(we.previous,0,we.previous.length):Se.bytes===Array?Array.prototype.slice.call(we.previous):we.previous),we.height!=null&&we.hasOwnProperty("height")&&(typeof we.height=="number"?$r.height=Se.longs===String?String(we.height):we.height:$r.height=Se.longs===String?be.Long.prototype.toString.call(we.height):Se.longs===Number?new be.LongBits(we.height.low>>>0,we.height.high>>>0).toNumber(!0):we.height),we.timestamp!=null&&we.hasOwnProperty("timestamp")&&(typeof we.timestamp=="number"?$r.timestamp=Se.longs===String?String(we.timestamp):we.timestamp:$r.timestamp=Se.longs===String?be.Long.prototype.toString.call(we.timestamp):Se.longs===Number?new be.LongBits(we.timestamp.low>>>0,we.timestamp.high>>>0).toNumber(!0):we.timestamp),we.previous_state_merkle_root!=null&&we.hasOwnProperty("previous_state_merkle_root")&&($r.previous_state_merkle_root=Se.bytes===String?be.base64.encode(we.previous_state_merkle_root,0,we.previous_state_merkle_root.length):Se.bytes===Array?Array.prototype.slice.call(we.previous_state_merkle_root):we.previous_state_merkle_root),we.transaction_merkle_root!=null&&we.hasOwnProperty("transaction_merkle_root")&&($r.transaction_merkle_root=Se.bytes===String?be.base64.encode(we.transaction_merkle_root,0,we.transaction_merkle_root.length):Se.bytes===Array?Array.prototype.slice.call(we.transaction_merkle_root):we.transaction_merkle_root),we.signer!=null&&we.hasOwnProperty("signer")&&($r.signer=Se.bytes===String?be.base64.encode(we.signer,0,we.signer.length):Se.bytes===Array?Array.prototype.slice.call(we.signer):we.signer),we.approved_proposals&&we.approved_proposals.length){$r.approved_proposals=[];for(var Br=0;Br<we.approved_proposals.length;++Br)$r.approved_proposals[Br]=Se.bytes===String?be.base64.encode(we.approved_proposals[Br],0,we.approved_proposals[Br].length):Se.bytes===Array?Array.prototype.slice.call(we.approved_proposals[Br]):we.approved_proposals[Br]}return $r},xe.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},xe.getTypeUrl=function(we){return we===void 0&&(we="type.googleapis.com"),we+"/koinos.protocol.block_header"},xe}(),Oe.block=function(){function xe(gr){if(this.transactions=[],gr)for(var we=Object.keys(gr),Se=0;Se<we.length;++Se)gr[we[Se]]!=null&&(this[we[Se]]=gr[we[Se]])}return xe.prototype.id=be.newBuffer([]),xe.prototype.header=null,xe.prototype.transactions=be.emptyArray,xe.prototype.signature=be.newBuffer([]),xe.create=function(we){return new xe(we)},xe.encode=function(we,Se){if(Se||(Se=me.create()),we.id!=null&&Object.hasOwnProperty.call(we,"id")&&Se.uint32(10).bytes(we.id),we.header!=null&&Object.hasOwnProperty.call(we,"header")&&ve.koinos.protocol.block_header.encode(we.header,Se.uint32(18).fork()).ldelim(),we.transactions!=null&&we.transactions.length)for(var $r=0;$r<we.transactions.length;++$r)ve.koinos.protocol.transaction.encode(we.transactions[$r],Se.uint32(26).fork()).ldelim();return we.signature!=null&&Object.hasOwnProperty.call(we,"signature")&&Se.uint32(34).bytes(we.signature),Se},xe.encodeDelimited=function(we,Se){return this.encode(we,Se).ldelim()},xe.decode=function(we,Se){we instanceof ye||(we=ye.create(we));for(var $r=Se===void 0?we.len:we.pos+Se,Fr=new ve.koinos.protocol.block;we.pos<$r;){var Br=we.uint32();switch(Br>>>3){case 1:{Fr.id=we.bytes();break}case 2:{Fr.header=ve.koinos.protocol.block_header.decode(we,we.uint32());break}case 3:{Fr.transactions&&Fr.transactions.length||(Fr.transactions=[]),Fr.transactions.push(ve.koinos.protocol.transaction.decode(we,we.uint32()));break}case 4:{Fr.signature=we.bytes();break}default:we.skipType(Br&7);break}}return Fr},xe.decodeDelimited=function(we){return we instanceof ye||(we=new ye(we)),this.decode(we,we.uint32())},xe.verify=function(we){if(typeof we!="object"||we===null)return"object expected";if(we.id!=null&&we.hasOwnProperty("id")&&!(we.id&&typeof we.id.length=="number"||be.isString(we.id)))return"id: buffer expected";if(we.header!=null&&we.hasOwnProperty("header")){var Se=ve.koinos.protocol.block_header.verify(we.header);if(Se)return"header."+Se}if(we.transactions!=null&&we.hasOwnProperty("transactions")){if(!Array.isArray(we.transactions))return"transactions: array expected";for(var $r=0;$r<we.transactions.length;++$r){var Se=ve.koinos.protocol.transaction.verify(we.transactions[$r]);if(Se)return"transactions."+Se}}return we.signature!=null&&we.hasOwnProperty("signature")&&!(we.signature&&typeof we.signature.length=="number"||be.isString(we.signature))?"signature: buffer expected":null},xe.fromObject=function(we){if(we instanceof ve.koinos.protocol.block)return we;var Se=new ve.koinos.protocol.block;if(we.id!=null&&(typeof we.id=="string"?be.base64.decode(we.id,Se.id=be.newBuffer(be.base64.length(we.id)),0):we.id.length>=0&&(Se.id=we.id)),we.header!=null){if(typeof we.header!="object")throw TypeError(".koinos.protocol.block.header: object expected");Se.header=ve.koinos.protocol.block_header.fromObject(we.header)}if(we.transactions){if(!Array.isArray(we.transactions))throw TypeError(".koinos.protocol.block.transactions: array expected");Se.transactions=[];for(var $r=0;$r<we.transactions.length;++$r){if(typeof we.transactions[$r]!="object")throw TypeError(".koinos.protocol.block.transactions: object expected");Se.transactions[$r]=ve.koinos.protocol.transaction.fromObject(we.transactions[$r])}}return we.signature!=null&&(typeof we.signature=="string"?be.base64.decode(we.signature,Se.signature=be.newBuffer(be.base64.length(we.signature)),0):we.signature.length>=0&&(Se.signature=we.signature)),Se},xe.toObject=function(we,Se){Se||(Se={});var $r={};if((Se.arrays||Se.defaults)&&($r.transactions=[]),Se.defaults&&(Se.bytes===String?$r.id="":($r.id=[],Se.bytes!==Array&&($r.id=be.newBuffer($r.id))),$r.header=null,Se.bytes===String?$r.signature="":($r.signature=[],Se.bytes!==Array&&($r.signature=be.newBuffer($r.signature)))),we.id!=null&&we.hasOwnProperty("id")&&($r.id=Se.bytes===String?be.base64.encode(we.id,0,we.id.length):Se.bytes===Array?Array.prototype.slice.call(we.id):we.id),we.header!=null&&we.hasOwnProperty("header")&&($r.header=ve.koinos.protocol.block_header.toObject(we.header,Se)),we.transactions&&we.transactions.length){$r.transactions=[];for(var Fr=0;Fr<we.transactions.length;++Fr)$r.transactions[Fr]=ve.koinos.protocol.transaction.toObject(we.transactions[Fr],Se)}return we.signature!=null&&we.hasOwnProperty("signature")&&($r.signature=Se.bytes===String?be.base64.encode(we.signature,0,we.signature.length):Se.bytes===Array?Array.prototype.slice.call(we.signature):we.signature),$r},xe.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},xe.getTypeUrl=function(we){return we===void 0&&(we="type.googleapis.com"),we+"/koinos.protocol.block"},xe}(),Oe.block_receipt=function(){function xe(gr){if(this.events=[],this.transaction_receipts=[],this.logs=[],gr)for(var we=Object.keys(gr),Se=0;Se<we.length;++Se)gr[we[Se]]!=null&&(this[we[Se]]=gr[we[Se]])}return xe.prototype.id=be.newBuffer([]),xe.prototype.height=be.Long?be.Long.fromBits(0,0,!0):0,xe.prototype.disk_storage_used=be.Long?be.Long.fromBits(0,0,!0):0,xe.prototype.network_bandwidth_used=be.Long?be.Long.fromBits(0,0,!0):0,xe.prototype.compute_bandwidth_used=be.Long?be.Long.fromBits(0,0,!0):0,xe.prototype.state_merkle_root=be.newBuffer([]),xe.prototype.events=be.emptyArray,xe.prototype.transaction_receipts=be.emptyArray,xe.prototype.logs=be.emptyArray,xe.create=function(we){return new xe(we)},xe.encode=function(we,Se){if(Se||(Se=me.create()),we.id!=null&&Object.hasOwnProperty.call(we,"id")&&Se.uint32(10).bytes(we.id),we.height!=null&&Object.hasOwnProperty.call(we,"height")&&Se.uint32(16).uint64(we.height),we.disk_storage_used!=null&&Object.hasOwnProperty.call(we,"disk_storage_used")&&Se.uint32(24).uint64(we.disk_storage_used),we.network_bandwidth_used!=null&&Object.hasOwnProperty.call(we,"network_bandwidth_used")&&Se.uint32(32).uint64(we.network_bandwidth_used),we.compute_bandwidth_used!=null&&Object.hasOwnProperty.call(we,"compute_bandwidth_used")&&Se.uint32(40).uint64(we.compute_bandwidth_used),we.state_merkle_root!=null&&Object.hasOwnProperty.call(we,"state_merkle_root")&&Se.uint32(50).bytes(we.state_merkle_root),we.events!=null&&we.events.length)for(var $r=0;$r<we.events.length;++$r)ve.koinos.protocol.event_data.encode(we.events[$r],Se.uint32(58).fork()).ldelim();if(we.transaction_receipts!=null&&we.transaction_receipts.length)for(var $r=0;$r<we.transaction_receipts.length;++$r)ve.koinos.protocol.transaction_receipt.encode(we.transaction_receipts[$r],Se.uint32(66).fork()).ldelim();if(we.logs!=null&&we.logs.length)for(var $r=0;$r<we.logs.length;++$r)Se.uint32(74).string(we.logs[$r]);return Se},xe.encodeDelimited=function(we,Se){return this.encode(we,Se).ldelim()},xe.decode=function(we,Se){we instanceof ye||(we=ye.create(we));for(var $r=Se===void 0?we.len:we.pos+Se,Fr=new ve.koinos.protocol.block_receipt;we.pos<$r;){var Br=we.uint32();switch(Br>>>3){case 1:{Fr.id=we.bytes();break}case 2:{Fr.height=we.uint64();break}case 3:{Fr.disk_storage_used=we.uint64();break}case 4:{Fr.network_bandwidth_used=we.uint64();break}case 5:{Fr.compute_bandwidth_used=we.uint64();break}case 6:{Fr.state_merkle_root=we.bytes();break}case 7:{Fr.events&&Fr.events.length||(Fr.events=[]),Fr.events.push(ve.koinos.protocol.event_data.decode(we,we.uint32()));break}case 8:{Fr.transaction_receipts&&Fr.transaction_receipts.length||(Fr.transaction_receipts=[]),Fr.transaction_receipts.push(ve.koinos.protocol.transaction_receipt.decode(we,we.uint32()));break}case 9:{Fr.logs&&Fr.logs.length||(Fr.logs=[]),Fr.logs.push(we.string());break}default:we.skipType(Br&7);break}}return Fr},xe.decodeDelimited=function(we){return we instanceof ye||(we=new ye(we)),this.decode(we,we.uint32())},xe.verify=function(we){if(typeof we!="object"||we===null)return"object expected";if(we.id!=null&&we.hasOwnProperty("id")&&!(we.id&&typeof we.id.length=="number"||be.isString(we.id)))return"id: buffer expected";if(we.height!=null&&we.hasOwnProperty("height")&&!be.isInteger(we.height)&&!(we.height&&be.isInteger(we.height.low)&&be.isInteger(we.height.high)))return"height: integer|Long expected";if(we.disk_storage_used!=null&&we.hasOwnProperty("disk_storage_used")&&!be.isInteger(we.disk_storage_used)&&!(we.disk_storage_used&&be.isInteger(we.disk_storage_used.low)&&be.isInteger(we.disk_storage_used.high)))return"disk_storage_used: integer|Long expected";if(we.network_bandwidth_used!=null&&we.hasOwnProperty("network_bandwidth_used")&&!be.isInteger(we.network_bandwidth_used)&&!(we.network_bandwidth_used&&be.isInteger(we.network_bandwidth_used.low)&&be.isInteger(we.network_bandwidth_used.high)))return"network_bandwidth_used: integer|Long expected";if(we.compute_bandwidth_used!=null&&we.hasOwnProperty("compute_bandwidth_used")&&!be.isInteger(we.compute_bandwidth_used)&&!(we.compute_bandwidth_used&&be.isInteger(we.compute_bandwidth_used.low)&&be.isInteger(we.compute_bandwidth_used.high)))return"compute_bandwidth_used: integer|Long expected";if(we.state_merkle_root!=null&&we.hasOwnProperty("state_merkle_root")&&!(we.state_merkle_root&&typeof we.state_merkle_root.length=="number"||be.isString(we.state_merkle_root)))return"state_merkle_root: buffer expected";if(we.events!=null&&we.hasOwnProperty("events")){if(!Array.isArray(we.events))return"events: array expected";for(var Se=0;Se<we.events.length;++Se){var $r=ve.koinos.protocol.event_data.verify(we.events[Se]);if($r)return"events."+$r}}if(we.transaction_receipts!=null&&we.hasOwnProperty("transaction_receipts")){if(!Array.isArray(we.transaction_receipts))return"transaction_receipts: array expected";for(var Se=0;Se<we.transaction_receipts.length;++Se){var $r=ve.koinos.protocol.transaction_receipt.verify(we.transaction_receipts[Se]);if($r)return"transaction_receipts."+$r}}if(we.logs!=null&&we.hasOwnProperty("logs")){if(!Array.isArray(we.logs))return"logs: array expected";for(var Se=0;Se<we.logs.length;++Se)if(!be.isString(we.logs[Se]))return"logs: string[] expected"}return null},xe.fromObject=function(we){if(we instanceof ve.koinos.protocol.block_receipt)return we;var Se=new ve.koinos.protocol.block_receipt;if(we.id!=null&&(typeof we.id=="string"?be.base64.decode(we.id,Se.id=be.newBuffer(be.base64.length(we.id)),0):we.id.length>=0&&(Se.id=we.id)),we.height!=null&&(be.Long?(Se.height=be.Long.fromValue(we.height)).unsigned=!0:typeof we.height=="string"?Se.height=parseInt(we.height,10):typeof we.height=="number"?Se.height=we.height:typeof we.height=="object"&&(Se.height=new be.LongBits(we.height.low>>>0,we.height.high>>>0).toNumber(!0))),we.disk_storage_used!=null&&(be.Long?(Se.disk_storage_used=be.Long.fromValue(we.disk_storage_used)).unsigned=!0:typeof we.disk_storage_used=="string"?Se.disk_storage_used=parseInt(we.disk_storage_used,10):typeof we.disk_storage_used=="number"?Se.disk_storage_used=we.disk_storage_used:typeof we.disk_storage_used=="object"&&(Se.disk_storage_used=new be.LongBits(we.disk_storage_used.low>>>0,we.disk_storage_used.high>>>0).toNumber(!0))),we.network_bandwidth_used!=null&&(be.Long?(Se.network_bandwidth_used=be.Long.fromValue(we.network_bandwidth_used)).unsigned=!0:typeof we.network_bandwidth_used=="string"?Se.network_bandwidth_used=parseInt(we.network_bandwidth_used,10):typeof we.network_bandwidth_used=="number"?Se.network_bandwidth_used=we.network_bandwidth_used:typeof we.network_bandwidth_used=="object"&&(Se.network_bandwidth_used=new be.LongBits(we.network_bandwidth_used.low>>>0,we.network_bandwidth_used.high>>>0).toNumber(!0))),we.compute_bandwidth_used!=null&&(be.Long?(Se.compute_bandwidth_used=be.Long.fromValue(we.compute_bandwidth_used)).unsigned=!0:typeof we.compute_bandwidth_used=="string"?Se.compute_bandwidth_used=parseInt(we.compute_bandwidth_used,10):typeof we.compute_bandwidth_used=="number"?Se.compute_bandwidth_used=we.compute_bandwidth_used:typeof we.compute_bandwidth_used=="object"&&(Se.compute_bandwidth_used=new be.LongBits(we.compute_bandwidth_used.low>>>0,we.compute_bandwidth_used.high>>>0).toNumber(!0))),we.state_merkle_root!=null&&(typeof we.state_merkle_root=="string"?be.base64.decode(we.state_merkle_root,Se.state_merkle_root=be.newBuffer(be.base64.length(we.state_merkle_root)),0):we.state_merkle_root.length>=0&&(Se.state_merkle_root=we.state_merkle_root)),we.events){if(!Array.isArray(we.events))throw TypeError(".koinos.protocol.block_receipt.events: array expected");Se.events=[];for(var $r=0;$r<we.events.length;++$r){if(typeof we.events[$r]!="object")throw TypeError(".koinos.protocol.block_receipt.events: object expected");Se.events[$r]=ve.koinos.protocol.event_data.fromObject(we.events[$r])}}if(we.transaction_receipts){if(!Array.isArray(we.transaction_receipts))throw TypeError(".koinos.protocol.block_receipt.transaction_receipts: array expected");Se.transaction_receipts=[];for(var $r=0;$r<we.transaction_receipts.length;++$r){if(typeof we.transaction_receipts[$r]!="object")throw TypeError(".koinos.protocol.block_receipt.transaction_receipts: object expected");Se.transaction_receipts[$r]=ve.koinos.protocol.transaction_receipt.fromObject(we.transaction_receipts[$r])}}if(we.logs){if(!Array.isArray(we.logs))throw TypeError(".koinos.protocol.block_receipt.logs: array expected");Se.logs=[];for(var $r=0;$r<we.logs.length;++$r)Se.logs[$r]=String(we.logs[$r])}return Se},xe.toObject=function(we,Se){Se||(Se={});var $r={};if((Se.arrays||Se.defaults)&&($r.events=[],$r.transaction_receipts=[],$r.logs=[]),Se.defaults){if(Se.bytes===String?$r.id="":($r.id=[],Se.bytes!==Array&&($r.id=be.newBuffer($r.id))),be.Long){var Fr=new be.Long(0,0,!0);$r.height=Se.longs===String?Fr.toString():Se.longs===Number?Fr.toNumber():Fr}else $r.height=Se.longs===String?"0":0;if(be.Long){var Fr=new be.Long(0,0,!0);$r.disk_storage_used=Se.longs===String?Fr.toString():Se.longs===Number?Fr.toNumber():Fr}else $r.disk_storage_used=Se.longs===String?"0":0;if(be.Long){var Fr=new be.Long(0,0,!0);$r.network_bandwidth_used=Se.longs===String?Fr.toString():Se.longs===Number?Fr.toNumber():Fr}else $r.network_bandwidth_used=Se.longs===String?"0":0;if(be.Long){var Fr=new be.Long(0,0,!0);$r.compute_bandwidth_used=Se.longs===String?Fr.toString():Se.longs===Number?Fr.toNumber():Fr}else $r.compute_bandwidth_used=Se.longs===String?"0":0;Se.bytes===String?$r.state_merkle_root="":($r.state_merkle_root=[],Se.bytes!==Array&&($r.state_merkle_root=be.newBuffer($r.state_merkle_root)))}if(we.id!=null&&we.hasOwnProperty("id")&&($r.id=Se.bytes===String?be.base64.encode(we.id,0,we.id.length):Se.bytes===Array?Array.prototype.slice.call(we.id):we.id),we.height!=null&&we.hasOwnProperty("height")&&(typeof we.height=="number"?$r.height=Se.longs===String?String(we.height):we.height:$r.height=Se.longs===String?be.Long.prototype.toString.call(we.height):Se.longs===Number?new be.LongBits(we.height.low>>>0,we.height.high>>>0).toNumber(!0):we.height),we.disk_storage_used!=null&&we.hasOwnProperty("disk_storage_used")&&(typeof we.disk_storage_used=="number"?$r.disk_storage_used=Se.longs===String?String(we.disk_storage_used):we.disk_storage_used:$r.disk_storage_used=Se.longs===String?be.Long.prototype.toString.call(we.disk_storage_used):Se.longs===Number?new be.LongBits(we.disk_storage_used.low>>>0,we.disk_storage_used.high>>>0).toNumber(!0):we.disk_storage_used),we.network_bandwidth_used!=null&&we.hasOwnProperty("network_bandwidth_used")&&(typeof we.network_bandwidth_used=="number"?$r.network_bandwidth_used=Se.longs===String?String(we.network_bandwidth_used):we.network_bandwidth_used:$r.network_bandwidth_used=Se.longs===String?be.Long.prototype.toString.call(we.network_bandwidth_used):Se.longs===Number?new be.LongBits(we.network_bandwidth_used.low>>>0,we.network_bandwidth_used.high>>>0).toNumber(!0):we.network_bandwidth_used),we.compute_bandwidth_used!=null&&we.hasOwnProperty("compute_bandwidth_used")&&(typeof we.compute_bandwidth_used=="number"?$r.compute_bandwidth_used=Se.longs===String?String(we.compute_bandwidth_used):we.compute_bandwidth_used:$r.compute_bandwidth_used=Se.longs===String?be.Long.prototype.toString.call(we.compute_bandwidth_used):Se.longs===Number?new be.LongBits(we.compute_bandwidth_used.low>>>0,we.compute_bandwidth_used.high>>>0).toNumber(!0):we.compute_bandwidth_used),we.state_merkle_root!=null&&we.hasOwnProperty("state_merkle_root")&&($r.state_merkle_root=Se.bytes===String?be.base64.encode(we.state_merkle_root,0,we.state_merkle_root.length):Se.bytes===Array?Array.prototype.slice.call(we.state_merkle_root):we.state_merkle_root),we.events&&we.events.length){$r.events=[];for(var Br=0;Br<we.events.length;++Br)$r.events[Br]=ve.koinos.protocol.event_data.toObject(we.events[Br],Se)}if(we.transaction_receipts&&we.transaction_receipts.length){$r.transaction_receipts=[];for(var Br=0;Br<we.transaction_receipts.length;++Br)$r.transaction_receipts[Br]=ve.koinos.protocol.transaction_receipt.toObject(we.transaction_receipts[Br],Se)}if(we.logs&&we.logs.length){$r.logs=[];for(var Br=0;Br<we.logs.length;++Br)$r.logs[Br]=we.logs[Br]}return $r},xe.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},xe.getTypeUrl=function(we){return we===void 0&&(we="type.googleapis.com"),we+"/koinos.protocol.block_receipt"},xe}(),Oe}(),Ee.chain=function(){var Oe={};return Oe.value_type=function(){function xe(we){if(we)for(var Se=Object.keys(we),$r=0;$r<Se.length;++$r)we[Se[$r]]!=null&&(this[Se[$r]]=we[Se[$r]])}xe.prototype.message_value=null,xe.prototype.int32_value=null,xe.prototype.int64_value=null,xe.prototype.uint32_value=null,xe.prototype.uint64_value=null,xe.prototype.sint32_value=null,xe.prototype.sint64_value=null,xe.prototype.fixed32_value=null,xe.prototype.fixed64_value=null,xe.prototype.sfixed32_value=null,xe.prototype.sfixed64_value=null,xe.prototype.bool_value=null,xe.prototype.string_value=null,xe.prototype.bytes_value=null;var gr;return Object.defineProperty(xe.prototype,"kind",{get:be.oneOfGetter(gr=["message_value","int32_value","int64_value","uint32_value","uint64_value","sint32_value","sint64_value","fixed32_value","fixed64_value","sfixed32_value","sfixed64_value","bool_value","string_value","bytes_value"]),set:be.oneOfSetter(gr)}),xe.create=function(Se){return new xe(Se)},xe.encode=function(Se,$r){return $r||($r=me.create()),Se.message_value!=null&&Object.hasOwnProperty.call(Se,"message_value")&&ve.google.protobuf.Any.encode(Se.message_value,$r.uint32(10).fork()).ldelim(),Se.int32_value!=null&&Object.hasOwnProperty.call(Se,"int32_value")&&$r.uint32(16).int32(Se.int32_value),Se.int64_value!=null&&Object.hasOwnProperty.call(Se,"int64_value")&&$r.uint32(24).int64(Se.int64_value),Se.uint32_value!=null&&Object.hasOwnProperty.call(Se,"uint32_value")&&$r.uint32(32).uint32(Se.uint32_value),Se.uint64_value!=null&&Object.hasOwnProperty.call(Se,"uint64_value")&&$r.uint32(40).uint64(Se.uint64_value),Se.sint32_value!=null&&Object.hasOwnProperty.call(Se,"sint32_value")&&$r.uint32(48).sint32(Se.sint32_value),Se.sint64_value!=null&&Object.hasOwnProperty.call(Se,"sint64_value")&&$r.uint32(56).sint64(Se.sint64_value),Se.fixed32_value!=null&&Object.hasOwnProperty.call(Se,"fixed32_value")&&$r.uint32(69).fixed32(Se.fixed32_value),Se.fixed64_value!=null&&Object.hasOwnProperty.call(Se,"fixed64_value")&&$r.uint32(73).fixed64(Se.fixed64_value),Se.sfixed32_value!=null&&Object.hasOwnProperty.call(Se,"sfixed32_value")&&$r.uint32(85).sfixed32(Se.sfixed32_value),Se.sfixed64_value!=null&&Object.hasOwnProperty.call(Se,"sfixed64_value")&&$r.uint32(89).sfixed64(Se.sfixed64_value),Se.bool_value!=null&&Object.hasOwnProperty.call(Se,"bool_value")&&$r.uint32(96).bool(Se.bool_value),Se.string_value!=null&&Object.hasOwnProperty.call(Se,"string_value")&&$r.uint32(106).string(Se.string_value),Se.bytes_value!=null&&Object.hasOwnProperty.call(Se,"bytes_value")&&$r.uint32(114).bytes(Se.bytes_value),$r},xe.encodeDelimited=function(Se,$r){return this.encode(Se,$r).ldelim()},xe.decode=function(Se,$r){Se instanceof ye||(Se=ye.create(Se));for(var Fr=$r===void 0?Se.len:Se.pos+$r,Br=new ve.koinos.chain.value_type;Se.pos<Fr;){var Vr=Se.uint32();switch(Vr>>>3){case 1:{Br.message_value=ve.google.protobuf.Any.decode(Se,Se.uint32());break}case 2:{Br.int32_value=Se.int32();break}case 3:{Br.int64_value=Se.int64();break}case 4:{Br.uint32_value=Se.uint32();break}case 5:{Br.uint64_value=Se.uint64();break}case 6:{Br.sint32_value=Se.sint32();break}case 7:{Br.sint64_value=Se.sint64();break}case 8:{Br.fixed32_value=Se.fixed32();break}case 9:{Br.fixed64_value=Se.fixed64();break}case 10:{Br.sfixed32_value=Se.sfixed32();break}case 11:{Br.sfixed64_value=Se.sfixed64();break}case 12:{Br.bool_value=Se.bool();break}case 13:{Br.string_value=Se.string();break}case 14:{Br.bytes_value=Se.bytes();break}default:Se.skipType(Vr&7);break}}return Br},xe.decodeDelimited=function(Se){return Se instanceof ye||(Se=new ye(Se)),this.decode(Se,Se.uint32())},xe.verify=function(Se){if(typeof Se!="object"||Se===null)return"object expected";var $r={};if(Se.message_value!=null&&Se.hasOwnProperty("message_value")){$r.kind=1;{var Fr=ve.google.protobuf.Any.verify(Se.message_value);if(Fr)return"message_value."+Fr}}if(Se.int32_value!=null&&Se.hasOwnProperty("int32_value")){if($r.kind===1)return"kind: multiple values";if($r.kind=1,!be.isInteger(Se.int32_value))return"int32_value: integer expected"}if(Se.int64_value!=null&&Se.hasOwnProperty("int64_value")){if($r.kind===1)return"kind: multiple values";if($r.kind=1,!be.isInteger(Se.int64_value)&&!(Se.int64_value&&be.isInteger(Se.int64_value.low)&&be.isInteger(Se.int64_value.high)))return"int64_value: integer|Long expected"}if(Se.uint32_value!=null&&Se.hasOwnProperty("uint32_value")){if($r.kind===1)return"kind: multiple values";if($r.kind=1,!be.isInteger(Se.uint32_value))return"uint32_value: integer expected"}if(Se.uint64_value!=null&&Se.hasOwnProperty("uint64_value")){if($r.kind===1)return"kind: multiple values";if($r.kind=1,!be.isInteger(Se.uint64_value)&&!(Se.uint64_value&&be.isInteger(Se.uint64_value.low)&&be.isInteger(Se.uint64_value.high)))return"uint64_value: integer|Long expected"}if(Se.sint32_value!=null&&Se.hasOwnProperty("sint32_value")){if($r.kind===1)return"kind: multiple values";if($r.kind=1,!be.isInteger(Se.sint32_value))return"sint32_value: integer expected"}if(Se.sint64_value!=null&&Se.hasOwnProperty("sint64_value")){if($r.kind===1)return"kind: multiple values";if($r.kind=1,!be.isInteger(Se.sint64_value)&&!(Se.sint64_value&&be.isInteger(Se.sint64_value.low)&&be.isInteger(Se.sint64_value.high)))return"sint64_value: integer|Long expected"}if(Se.fixed32_value!=null&&Se.hasOwnProperty("fixed32_value")){if($r.kind===1)return"kind: multiple values";if($r.kind=1,!be.isInteger(Se.fixed32_value))return"fixed32_value: integer expected"}if(Se.fixed64_value!=null&&Se.hasOwnProperty("fixed64_value")){if($r.kind===1)return"kind: multiple values";if($r.kind=1,!be.isInteger(Se.fixed64_value)&&!(Se.fixed64_value&&be.isInteger(Se.fixed64_value.low)&&be.isInteger(Se.fixed64_value.high)))return"fixed64_value: integer|Long expected"}if(Se.sfixed32_value!=null&&Se.hasOwnProperty("sfixed32_value")){if($r.kind===1)return"kind: multiple values";if($r.kind=1,!be.isInteger(Se.sfixed32_value))return"sfixed32_value: integer expected"}if(Se.sfixed64_value!=null&&Se.hasOwnProperty("sfixed64_value")){if($r.kind===1)return"kind: multiple values";if($r.kind=1,!be.isInteger(Se.sfixed64_value)&&!(Se.sfixed64_value&&be.isInteger(Se.sfixed64_value.low)&&be.isInteger(Se.sfixed64_value.high)))return"sfixed64_value: integer|Long expected"}if(Se.bool_value!=null&&Se.hasOwnProperty("bool_value")){if($r.kind===1)return"kind: multiple values";if($r.kind=1,typeof Se.bool_value!="boolean")return"bool_value: boolean expected"}if(Se.string_value!=null&&Se.hasOwnProperty("string_value")){if($r.kind===1)return"kind: multiple values";if($r.kind=1,!be.isString(Se.string_value))return"string_value: string expected"}if(Se.bytes_value!=null&&Se.hasOwnProperty("bytes_value")){if($r.kind===1)return"kind: multiple values";if($r.kind=1,!(Se.bytes_value&&typeof Se.bytes_value.length=="number"||be.isString(Se.bytes_value)))return"bytes_value: buffer expected"}return null},xe.fromObject=function(Se){if(Se instanceof ve.koinos.chain.value_type)return Se;var $r=new ve.koinos.chain.value_type;if(Se.message_value!=null){if(typeof Se.message_value!="object")throw TypeError(".koinos.chain.value_type.message_value: object expected");$r.message_value=ve.google.protobuf.Any.fromObject(Se.message_value)}return Se.int32_value!=null&&($r.int32_value=Se.int32_value|0),Se.int64_value!=null&&(be.Long?($r.int64_value=be.Long.fromValue(Se.int64_value)).unsigned=!1:typeof Se.int64_value=="string"?$r.int64_value=parseInt(Se.int64_value,10):typeof Se.int64_value=="number"?$r.int64_value=Se.int64_value:typeof Se.int64_value=="object"&&($r.int64_value=new be.LongBits(Se.int64_value.low>>>0,Se.int64_value.high>>>0).toNumber())),Se.uint32_value!=null&&($r.uint32_value=Se.uint32_value>>>0),Se.uint64_value!=null&&(be.Long?($r.uint64_value=be.Long.fromValue(Se.uint64_value)).unsigned=!0:typeof Se.uint64_value=="string"?$r.uint64_value=parseInt(Se.uint64_value,10):typeof Se.uint64_value=="number"?$r.uint64_value=Se.uint64_value:typeof Se.uint64_value=="object"&&($r.uint64_value=new be.LongBits(Se.uint64_value.low>>>0,Se.uint64_value.high>>>0).toNumber(!0))),Se.sint32_value!=null&&($r.sint32_value=Se.sint32_value|0),Se.sint64_value!=null&&(be.Long?($r.sint64_value=be.Long.fromValue(Se.sint64_value)).unsigned=!1:typeof Se.sint64_value=="string"?$r.sint64_value=parseInt(Se.sint64_value,10):typeof Se.sint64_value=="number"?$r.sint64_value=Se.sint64_value:typeof Se.sint64_value=="object"&&($r.sint64_value=new be.LongBits(Se.sint64_value.low>>>0,Se.sint64_value.high>>>0).toNumber())),Se.fixed32_value!=null&&($r.fixed32_value=Se.fixed32_value>>>0),Se.fixed64_value!=null&&(be.Long?($r.fixed64_value=be.Long.fromValue(Se.fixed64_value)).unsigned=!1:typeof Se.fixed64_value=="string"?$r.fixed64_value=parseInt(Se.fixed64_value,10):typeof Se.fixed64_value=="number"?$r.fixed64_value=Se.fixed64_value:typeof Se.fixed64_value=="object"&&($r.fixed64_value=new be.LongBits(Se.fixed64_value.low>>>0,Se.fixed64_value.high>>>0).toNumber())),Se.sfixed32_value!=null&&($r.sfixed32_value=Se.sfixed32_value|0),Se.sfixed64_value!=null&&(be.Long?($r.sfixed64_value=be.Long.fromValue(Se.sfixed64_value)).unsigned=!1:typeof Se.sfixed64_value=="string"?$r.sfixed64_value=parseInt(Se.sfixed64_value,10):typeof Se.sfixed64_value=="number"?$r.sfixed64_value=Se.sfixed64_value:typeof Se.sfixed64_value=="object"&&($r.sfixed64_value=new be.LongBits(Se.sfixed64_value.low>>>0,Se.sfixed64_value.high>>>0).toNumber())),Se.bool_value!=null&&($r.bool_value=!!Se.bool_value),Se.string_value!=null&&($r.string_value=String(Se.string_value)),Se.bytes_value!=null&&(typeof Se.bytes_value=="string"?be.base64.decode(Se.bytes_value,$r.bytes_value=be.newBuffer(be.base64.length(Se.bytes_value)),0):Se.bytes_value.length>=0&&($r.bytes_value=Se.bytes_value)),$r},xe.toObject=function(Se,$r){$r||($r={});var Fr={};return Se.message_value!=null&&Se.hasOwnProperty("message_value")&&(Fr.message_value=ve.google.protobuf.Any.toObject(Se.message_value,$r),$r.oneofs&&(Fr.kind="message_value")),Se.int32_value!=null&&Se.hasOwnProperty("int32_value")&&(Fr.int32_value=Se.int32_value,$r.oneofs&&(Fr.kind="int32_value")),Se.int64_value!=null&&Se.hasOwnProperty("int64_value")&&(typeof Se.int64_value=="number"?Fr.int64_value=$r.longs===String?String(Se.int64_value):Se.int64_value:Fr.int64_value=$r.longs===String?be.Long.prototype.toString.call(Se.int64_value):$r.longs===Number?new be.LongBits(Se.int64_value.low>>>0,Se.int64_value.high>>>0).toNumber():Se.int64_value,$r.oneofs&&(Fr.kind="int64_value")),Se.uint32_value!=null&&Se.hasOwnProperty("uint32_value")&&(Fr.uint32_value=Se.uint32_value,$r.oneofs&&(Fr.kind="uint32_value")),Se.uint64_value!=null&&Se.hasOwnProperty("uint64_value")&&(typeof Se.uint64_value=="number"?Fr.uint64_value=$r.longs===String?String(Se.uint64_value):Se.uint64_value:Fr.uint64_value=$r.longs===String?be.Long.prototype.toString.call(Se.uint64_value):$r.longs===Number?new be.LongBits(Se.uint64_value.low>>>0,Se.uint64_value.high>>>0).toNumber(!0):Se.uint64_value,$r.oneofs&&(Fr.kind="uint64_value")),Se.sint32_value!=null&&Se.hasOwnProperty("sint32_value")&&(Fr.sint32_value=Se.sint32_value,$r.oneofs&&(Fr.kind="sint32_value")),Se.sint64_value!=null&&Se.hasOwnProperty("sint64_value")&&(typeof Se.sint64_value=="number"?Fr.sint64_value=$r.longs===String?String(Se.sint64_value):Se.sint64_value:Fr.sint64_value=$r.longs===String?be.Long.prototype.toString.call(Se.sint64_value):$r.longs===Number?new be.LongBits(Se.sint64_value.low>>>0,Se.sint64_value.high>>>0).toNumber():Se.sint64_value,$r.oneofs&&(Fr.kind="sint64_value")),Se.fixed32_value!=null&&Se.hasOwnProperty("fixed32_value")&&(Fr.fixed32_value=Se.fixed32_value,$r.oneofs&&(Fr.kind="fixed32_value")),Se.fixed64_value!=null&&Se.hasOwnProperty("fixed64_value")&&(typeof Se.fixed64_value=="number"?Fr.fixed64_value=$r.longs===String?String(Se.fixed64_value):Se.fixed64_value:Fr.fixed64_value=$r.longs===String?be.Long.prototype.toString.call(Se.fixed64_value):$r.longs===Number?new be.LongBits(Se.fixed64_value.low>>>0,Se.fixed64_value.high>>>0).toNumber():Se.fixed64_value,$r.oneofs&&(Fr.kind="fixed64_value")),Se.sfixed32_value!=null&&Se.hasOwnProperty("sfixed32_value")&&(Fr.sfixed32_value=Se.sfixed32_value,$r.oneofs&&(Fr.kind="sfixed32_value")),Se.sfixed64_value!=null&&Se.hasOwnProperty("sfixed64_value")&&(typeof Se.sfixed64_value=="number"?Fr.sfixed64_value=$r.longs===String?String(Se.sfixed64_value):Se.sfixed64_value:Fr.sfixed64_value=$r.longs===String?be.Long.prototype.toString.call(Se.sfixed64_value):$r.longs===Number?new be.LongBits(Se.sfixed64_value.low>>>0,Se.sfixed64_value.high>>>0).toNumber():Se.sfixed64_value,$r.oneofs&&(Fr.kind="sfixed64_value")),Se.bool_value!=null&&Se.hasOwnProperty("bool_value")&&(Fr.bool_value=Se.bool_value,$r.oneofs&&(Fr.kind="bool_value")),Se.string_value!=null&&Se.hasOwnProperty("string_value")&&(Fr.string_value=Se.string_value,$r.oneofs&&(Fr.kind="string_value")),Se.bytes_value!=null&&Se.hasOwnProperty("bytes_value")&&(Fr.bytes_value=$r.bytes===String?be.base64.encode(Se.bytes_value,0,Se.bytes_value.length):$r.bytes===Array?Array.prototype.slice.call(Se.bytes_value):Se.bytes_value,$r.oneofs&&(Fr.kind="bytes_value")),Fr},xe.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},xe.getTypeUrl=function(Se){return Se===void 0&&(Se="type.googleapis.com"),Se+"/koinos.chain.value_type"},xe}(),Oe.enum_type=function(){function xe(gr){if(gr)for(var we=Object.keys(gr),Se=0;Se<we.length;++Se)gr[we[Se]]!=null&&(this[we[Se]]=gr[we[Se]])}return xe.prototype.name="",xe.prototype.number=0,xe.create=function(we){return new xe(we)},xe.encode=function(we,Se){return Se||(Se=me.create()),we.name!=null&&Object.hasOwnProperty.call(we,"name")&&Se.uint32(10).string(we.name),we.number!=null&&Object.hasOwnProperty.call(we,"number")&&Se.uint32(16).int32(we.number),Se},xe.encodeDelimited=function(we,Se){return this.encode(we,Se).ldelim()},xe.decode=function(we,Se){we instanceof ye||(we=ye.create(we));for(var $r=Se===void 0?we.len:we.pos+Se,Fr=new ve.koinos.chain.enum_type;we.pos<$r;){var Br=we.uint32();switch(Br>>>3){case 1:{Fr.name=we.string();break}case 2:{Fr.number=we.int32();break}default:we.skipType(Br&7);break}}return Fr},xe.decodeDelimited=function(we){return we instanceof ye||(we=new ye(we)),this.decode(we,we.uint32())},xe.verify=function(we){return typeof we!="object"||we===null?"object expected":we.name!=null&&we.hasOwnProperty("name")&&!be.isString(we.name)?"name: string expected":we.number!=null&&we.hasOwnProperty("number")&&!be.isInteger(we.number)?"number: integer expected":null},xe.fromObject=function(we){if(we instanceof ve.koinos.chain.enum_type)return we;var Se=new ve.koinos.chain.enum_type;return we.name!=null&&(Se.name=String(we.name)),we.number!=null&&(Se.number=we.number|0),Se},xe.toObject=function(we,Se){Se||(Se={});var $r={};return Se.defaults&&($r.name="",$r.number=0),we.name!=null&&we.hasOwnProperty("name")&&($r.name=we.name),we.number!=null&&we.hasOwnProperty("number")&&($r.number=we.number),$r},xe.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},xe.getTypeUrl=function(we){return we===void 0&&(we="type.googleapis.com"),we+"/koinos.chain.enum_type"},xe}(),Oe.list_type=function(){function xe(gr){if(this.values=[],gr)for(var we=Object.keys(gr),Se=0;Se<we.length;++Se)gr[we[Se]]!=null&&(this[we[Se]]=gr[we[Se]])}return xe.prototype.values=be.emptyArray,xe.create=function(we){return new xe(we)},xe.encode=function(we,Se){if(Se||(Se=me.create()),we.values!=null&&we.values.length)for(var $r=0;$r<we.values.length;++$r)ve.koinos.chain.value_type.encode(we.values[$r],Se.uint32(10).fork()).ldelim();return Se},xe.encodeDelimited=function(we,Se){return this.encode(we,Se).ldelim()},xe.decode=function(we,Se){we instanceof ye||(we=ye.create(we));for(var $r=Se===void 0?we.len:we.pos+Se,Fr=new ve.koinos.chain.list_type;we.pos<$r;){var Br=we.uint32();switch(Br>>>3){case 1:{Fr.values&&Fr.values.length||(Fr.values=[]),Fr.values.push(ve.koinos.chain.value_type.decode(we,we.uint32()));break}default:we.skipType(Br&7);break}}return Fr},xe.decodeDelimited=function(we){return we instanceof ye||(we=new ye(we)),this.decode(we,we.uint32())},xe.verify=function(we){if(typeof we!="object"||we===null)return"object expected";if(we.values!=null&&we.hasOwnProperty("values")){if(!Array.isArray(we.values))return"values: array expected";for(var Se=0;Se<we.values.length;++Se){var $r=ve.koinos.chain.value_type.verify(we.values[Se]);if($r)return"values."+$r}}return null},xe.fromObject=function(we){if(we instanceof ve.koinos.chain.list_type)return we;var Se=new ve.koinos.chain.list_type;if(we.values){if(!Array.isArray(we.values))throw TypeError(".koinos.chain.list_type.values: array expected");Se.values=[];for(var $r=0;$r<we.values.length;++$r){if(typeof we.values[$r]!="object")throw TypeError(".koinos.chain.list_type.values: object expected");Se.values[$r]=ve.koinos.chain.value_type.fromObject(we.values[$r])}}return Se},xe.toObject=function(we,Se){Se||(Se={});var $r={};if((Se.arrays||Se.defaults)&&($r.values=[]),we.values&&we.values.length){$r.values=[];for(var Fr=0;Fr<we.values.length;++Fr)$r.values[Fr]=ve.koinos.chain.value_type.toObject(we.values[Fr],Se)}return $r},xe.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},xe.getTypeUrl=function(we){return we===void 0&&(we="type.googleapis.com"),we+"/koinos.chain.list_type"},xe}(),Oe}(),Ee}(),ve.google=function(){var Ee={};return Ee.protobuf=function(){var Oe={};return Oe.Any=function(){function xe(gr){if(gr)for(var we=Object.keys(gr),Se=0;Se<we.length;++Se)gr[we[Se]]!=null&&(this[we[Se]]=gr[we[Se]])}return xe.prototype.type_url="",xe.prototype.value=be.newBuffer([]),xe.create=function(we){return new xe(we)},xe.encode=function(we,Se){return Se||(Se=me.create()),we.type_url!=null&&Object.hasOwnProperty.call(we,"type_url")&&Se.uint32(10).string(we.type_url),we.value!=null&&Object.hasOwnProperty.call(we,"value")&&Se.uint32(18).bytes(we.value),Se},xe.encodeDelimited=function(we,Se){return this.encode(we,Se).ldelim()},xe.decode=function(we,Se){we instanceof ye||(we=ye.create(we));for(var $r=Se===void 0?we.len:we.pos+Se,Fr=new ve.google.protobuf.Any;we.pos<$r;){var Br=we.uint32();switch(Br>>>3){case 1:{Fr.type_url=we.string();break}case 2:{Fr.value=we.bytes();break}default:we.skipType(Br&7);break}}return Fr},xe.decodeDelimited=function(we){return we instanceof ye||(we=new ye(we)),this.decode(we,we.uint32())},xe.verify=function(we){return typeof we!="object"||we===null?"object expected":we.type_url!=null&&we.hasOwnProperty("type_url")&&!be.isString(we.type_url)?"type_url: string expected":we.value!=null&&we.hasOwnProperty("value")&&!(we.value&&typeof we.value.length=="number"||be.isString(we.value))?"value: buffer expected":null},xe.fromObject=function(we){if(we instanceof ve.google.protobuf.Any)return we;var Se=new ve.google.protobuf.Any;return we.type_url!=null&&(Se.type_url=String(we.type_url)),we.value!=null&&(typeof we.value=="string"?be.base64.decode(we.value,Se.value=be.newBuffer(be.base64.length(we.value)),0):we.value.length>=0&&(Se.value=we.value)),Se},xe.toObject=function(we,Se){Se||(Se={});var $r={};return Se.defaults&&($r.type_url="",Se.bytes===String?$r.value="":($r.value=[],Se.bytes!==Array&&($r.value=be.newBuffer($r.value)))),we.type_url!=null&&we.hasOwnProperty("type_url")&&($r.type_url=we.type_url),we.value!=null&&we.hasOwnProperty("value")&&($r.value=Se.bytes===String?be.base64.encode(we.value,0,we.value.length):Se.bytes===Array?Array.prototype.slice.call(we.value):we.value),$r},xe.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},xe.getTypeUrl=function(we){return we===void 0&&(we="type.googleapis.com"),we+"/google.protobuf.Any"},xe}(),Oe}(),Ee}(),ve})})(protocolProto);var protocolProtoExports=protocolProto.exports,__createBinding=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(fe,e,ye,me){me===void 0&&(me=ye);var be=Object.getOwnPropertyDescriptor(e,ye);(!be||("get"in be?!e.__esModule:be.writable||be.configurable))&&(be={enumerable:!0,get:function(){return e[ye]}}),Object.defineProperty(fe,me,be)}:function(fe,e,ye,me){me===void 0&&(me=ye),fe[me]=e[ye]}),__setModuleDefault=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(fe,e){Object.defineProperty(fe,"default",{enumerable:!0,value:e})}:function(fe,e){fe.default=e}),__importStar=commonjsGlobal&&commonjsGlobal.__importStar||function(fe){if(fe&&fe.__esModule)return fe;var e={};if(fe!=null)for(var ye in fe)ye!=="default"&&Object.prototype.hasOwnProperty.call(fe,ye)&&__createBinding(e,fe,ye);return __setModuleDefault(e,fe),e};Object.defineProperty(Signer$1,"__esModule",{value:!0});Signer$1.Signer=void 0;const sha256_1=sha256,secp=__importStar(lib),utils_1$1=utils$1,protocol_proto_js_1$1=protocolProtoExports,btypeBlockHeader={previous:{type:"bytes",btype:"BLOCK_ID"},height:{type:"uint64"},timestamp:{type:"uint64"},previous_state_merkle_root:{type:"bytes"},transaction_merkle_root:{type:"bytes"},signer:{type:"bytes",btype:"ADDRESS"}},btypeTransactionHeader={chain_id:{type:"bytes"},rc_limit:{type:"uint64"},nonce:{type:"bytes"},operation_merkle_root:{type:"bytes"},payer:{type:"bytes",btype:"ADDRESS"},payee:{type:"bytes",btype:"ADDRESS"}},btypesOperation={upload_contract:{type:"object",subtypes:{contract_id:{type:"bytes",btype:"CONTRACT_ID"},bytecode:{type:"bytes"},abi:{type:"string"},authorizes_call_contract:{type:"bool"},authorizes_transaction_application:{type:"bool"},authorizes_upload_contract:{type:"bool"}}},call_contract:{type:"object",subtypes:{contract_id:{type:"bytes",btype:"CONTRACT_ID"},entry_point:{type:"uint32"},args:{type:"bytes"}}},set_system_call:{type:"object",subtypes:{call_id:{type:"uint32"},target:{type:"object",subtypes:{thunk_id:{type:"uint32"},system_call_bundle:{type:"object",subtypes:{contract_id:{type:"bytes",btype:"CONTRACT_ID"},entry_point:{type:"uint32"}}}}}}},set_system_contract:{type:"object",subtypes:{contract_id:{type:"bytes",btype:"CONTRACT_ID"},system_contract:{type:"bool"}}}};class Signer{constructor(e){this.chainId="",this.compressed=typeof e.compressed>"u"?!0:e.compressed,this.privateKey=e.privateKey,this.provider=e.provider,typeof e.privateKey=="string"?(this.publicKey=secp.getPublicKey(e.privateKey,this.compressed),this.address=(0,utils_1$1.bitcoinAddress)(this.publicKey)):(this.publicKey=secp.getPublicKey(e.privateKey,this.compressed),this.address=(0,utils_1$1.bitcoinAddress)(this.publicKey)),e.chainId&&(this.chainId=e.chainId),this.sendOptions={broadcast:!0,...e.sendOptions}}static fromWif(e,ye=!0){const me=ye===void 0?e[0]!=="5":ye,be=(0,utils_1$1.bitcoinDecode)(e);return new Signer({privateKey:(0,utils_1$1.toHexString)(be),compressed:me})}static fromSeed(e,ye=!0){const me=(0,sha256_1.sha256)(e);return new Signer({privateKey:me,compressed:ye})}getAddress(e=!0){if(typeof this.privateKey=="string"){const me=secp.getPublicKey(this.privateKey,e);return(0,utils_1$1.bitcoinAddress)(me)}const ye=secp.getPublicKey(this.privateKey,e);return(0,utils_1$1.bitcoinAddress)(ye)}getPrivateKey(e="hex",ye=!1){let me;this.privateKey instanceof Uint8Array?me=(0,utils_1$1.toHexString)(this.privateKey):typeof this.privateKey=="string"?me=this.privateKey:me=BigInt(this.privateKey).toString(16).padStart(64,"0");const be=ye===void 0?this.compressed:ye;switch(e){case"hex":return me;case"wif":return(0,utils_1$1.bitcoinEncode)((0,utils_1$1.toUint8Array)(me),"private",be);default:throw new Error(`Invalid format ${e}`)}}async signHash(e){const[ye,me]=await secp.sign(e,this.privateKey,{recovered:!0,canonical:!0,der:!1}),be=new Uint8Array(65);return be.set([me+31],0),be.set(ye,1),be}async signMessage(e){return this.signHash((0,sha256_1.sha256)(e))}async signTransaction(e,ye){if(!e.id)throw new Error("Missing transaction id");const me=(0,utils_1$1.toUint8Array)(e.id.slice(6)),be=await this.signHash(me);return e.signatures||(e.signatures=[]),e.signatures.push((0,utils_1$1.encodeBase64url)(be)),e}async signBlock(e){if(!e.id)throw new Error("Missing block id");const ye=(0,utils_1$1.toUint8Array)(e.id.slice(6)),me=await this.signHash(ye);return e.signature=(0,utils_1$1.encodeBase64url)(me),e}async sendTransaction(e,ye){var me;if((!e.signatures||!(!((me=e.signatures)===null||me===void 0)&&me.length))&&(e=await this.signTransaction(e,ye!=null&&ye.sendAbis?ye.abis:void 0)),!this.provider)throw new Error("provider is undefined");const be={...this.sendOptions,...ye};return be.beforeSend&&await be.beforeSend(e,ye),this.provider.sendTransaction(e,be.broadcast)}static recoverPublicKey(e,ye,me=!0){const be=(0,utils_1$1.toHexString)(ye),ve=+`0x${be.slice(0,2)}`-31,Ee=be.slice(2,66),Oe=be.slice(66),xe=BigInt(`0x${Ee}`),gr=BigInt(`0x${Oe}`),we=new secp.Signature(xe,gr),Se=secp.recoverPublicKey((0,utils_1$1.toHexString)(e),we.toHex(),ve);if(!Se)throw new Error("Public key cannot be recovered");return me?secp.Point.fromHex(Se).toHex(!0):(0,utils_1$1.toHexString)(Se)}static recoverAddress(e,ye,me=!0){return(0,utils_1$1.bitcoinAddress)((0,utils_1$1.toUint8Array)(Signer.recoverPublicKey(e,ye,me)))}async recoverPublicKeys(e,ye){let me=!0;ye&&ye.compressed!==void 0&&(me=ye.compressed);let be=[],ve;const Ee=e;if(Ee.signature){if(!Ee.header)throw new Error("Missing block header");if(!Ee.signature)throw new Error("Missing block signature");be=[Ee.signature];const xe=(0,utils_1$1.btypeDecode)(Ee.header,btypeBlockHeader,!1),gr=protocol_proto_js_1$1.koinos.protocol.block_header.create(xe);ve=protocol_proto_js_1$1.koinos.protocol.block_header.encode(gr).finish()}else{const xe=e;if(!xe.header)throw new Error("Missing transaction header");if(!xe.signatures)throw new Error("Missing transaction signatures");be=xe.signatures;const gr=(0,utils_1$1.btypeDecode)(xe.header,btypeTransactionHeader,!1),we=protocol_proto_js_1$1.koinos.protocol.transaction_header.create(gr);ve=protocol_proto_js_1$1.koinos.protocol.transaction_header.encode(we).finish()}const Oe=(0,sha256_1.sha256)(ve);return Promise.all(be.map(async xe=>(ye&&typeof ye.transformSignature=="function"&&(xe=await ye.transformSignature(xe)),Signer.recoverPublicKey(Oe,(0,utils_1$1.decodeBase64url)(xe),me))))}async recoverAddresses(e,ye){return(await this.recoverPublicKeys(e,ye)).map(be=>(0,utils_1$1.bitcoinAddress)((0,utils_1$1.toUint8Array)(be)))}async prepareTransaction(e){var ye,me;e.header||(e.header={});const be=(ye=e.header.payer)!==null&&ye!==void 0?ye:this.address,{payee:ve}=e.header;let Ee;if(e.header.nonce===void 0){if(!this.provider)throw new Error("Cannot get the nonce because provider is undefined. To skip this call set a nonce in the transaction header");Ee=await this.provider.getNextNonce(ve||be)}else Ee=e.header.nonce;let Oe;if(e.header.rc_limit===void 0){if(!this.provider)throw new Error("Cannot get the rc_limit because provider is undefined. To skip this call set a rc_limit in the transaction header");Oe=await this.provider.getAccountRc(be)}else Oe=e.header.rc_limit;let xe=e.header.chain_id||this.chainId;if(!xe){if(!this.provider)throw new Error("Cannot get the chain_id because provider is undefined. To skip this call set a chain_id in the Signer");xe=await this.provider.getChainId(),this.chainId=xe}const gr=[];if(e.operations)for(let Vr=0;Vr<((me=e.operations)===null||me===void 0?void 0:me.length);Vr+=1){const oo=(0,utils_1$1.btypeDecode)(e.operations[Vr],btypesOperation,!1),so=protocol_proto_js_1$1.koinos.protocol.operation.create(oo),kr=protocol_proto_js_1$1.koinos.protocol.operation.encode(so).finish();gr.push((0,sha256_1.sha256)(kr))}const we=(0,utils_1$1.encodeBase64url)(new Uint8Array([18,32,...(0,utils_1$1.calculateMerkleRoot)(gr)]));e.header={chain_id:xe,rc_limit:Oe,nonce:Ee,operation_merkle_root:we,payer:be,...ve&&{payee:ve}};const Se=(0,utils_1$1.btypeDecode)(e.header,btypeTransactionHeader,!1),$r=protocol_proto_js_1$1.koinos.protocol.transaction_header.create(Se),Fr=protocol_proto_js_1$1.koinos.protocol.transaction_header.encode($r).finish(),Br=(0,sha256_1.sha256)(Fr);return e.id=`0x1220${(0,utils_1$1.toHexString)(Br)}`,e}async prepareBlock(e){var ye;e.header||(e.header={});const me=[];if(e.transactions)for(let Se=0;Se<e.transactions.length;Se++){const $r=e.transactions[Se],Fr=(0,utils_1$1.btypeDecode)($r.header,btypeTransactionHeader,!1),Br=protocol_proto_js_1$1.koinos.protocol.transaction_header.create(Fr),Vr=protocol_proto_js_1$1.koinos.protocol.transaction_header.encode(Br).finish();me.push((0,sha256_1.sha256)(Vr));let oo=new Uint8Array;(ye=$r.signatures)===null||ye===void 0||ye.forEach(so=>{oo=new Uint8Array([...oo,...(0,utils_1$1.decodeBase64url)(so)])}),me.push((0,sha256_1.sha256)(oo))}let{height:be,previous:ve,previous_state_merkle_root:Ee}=e.header;if(!be||!ve||!Ee){if(!this.provider)throw new Error("Cannot get the head info because provider is undefined.");const Se=await this.provider.getHeadInfo();be=be||`${Number(Se.head_topology.height)+1}`,ve=ve||Se.head_topology.id,Ee=Ee||Se.head_state_merkle_root}e.header={height:be,previous:ve,previous_state_merkle_root:Ee,timestamp:e.header.timestamp||`${Date.now()}`,transaction_merkle_root:(0,utils_1$1.encodeBase64url)(new Uint8Array([18,32,...(0,utils_1$1.calculateMerkleRoot)(me)])),signer:this.address};const Oe=(0,utils_1$1.btypeDecode)(e.header,btypeBlockHeader,!1),xe=protocol_proto_js_1$1.koinos.protocol.block_header.create(Oe),gr=protocol_proto_js_1$1.koinos.protocol.block_header.encode(xe).finish(),we=(0,sha256_1.sha256)(gr);return e.id=`0x1220${(0,utils_1$1.toHexString)(we)}`,e}}Signer$1.Signer=Signer;Signer$1.default=Signer;var Provider$1={},browserPonyfill={exports:{}};(function(fe,e){var ye=typeof self<"u"?self:commonjsGlobal,me=function(){function ve(){this.fetch=!1,this.DOMException=ye.DOMException}return ve.prototype=ye,new ve}();(function(ve){(function(Ee){var Oe={searchParams:"URLSearchParams"in ve,iterable:"Symbol"in ve&&"iterator"in Symbol,blob:"FileReader"in ve&&"Blob"in ve&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in ve,arrayBuffer:"ArrayBuffer"in ve};function xe(Wr){return Wr&&DataView.prototype.isPrototypeOf(Wr)}if(Oe.arrayBuffer)var gr=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],we=ArrayBuffer.isView||function(Wr){return Wr&&gr.indexOf(Object.prototype.toString.call(Wr))>-1};function Se(Wr){if(typeof Wr!="string"&&(Wr=String(Wr)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(Wr))throw new TypeError("Invalid character in header field name");return Wr.toLowerCase()}function $r(Wr){return typeof Wr!="string"&&(Wr=String(Wr)),Wr}function Fr(Wr){var Jr={next:function(){var fo=Wr.shift();return{done:fo===void 0,value:fo}}};return Oe.iterable&&(Jr[Symbol.iterator]=function(){return Jr}),Jr}function Br(Wr){this.map={},Wr instanceof Br?Wr.forEach(function(Jr,fo){this.append(fo,Jr)},this):Array.isArray(Wr)?Wr.forEach(function(Jr){this.append(Jr[0],Jr[1])},this):Wr&&Object.getOwnPropertyNames(Wr).forEach(function(Jr){this.append(Jr,Wr[Jr])},this)}Br.prototype.append=function(Wr,Jr){Wr=Se(Wr),Jr=$r(Jr);var fo=this.map[Wr];this.map[Wr]=fo?fo+", "+Jr:Jr},Br.prototype.delete=function(Wr){delete this.map[Se(Wr)]},Br.prototype.get=function(Wr){return Wr=Se(Wr),this.has(Wr)?this.map[Wr]:null},Br.prototype.has=function(Wr){return this.map.hasOwnProperty(Se(Wr))},Br.prototype.set=function(Wr,Jr){this.map[Se(Wr)]=$r(Jr)},Br.prototype.forEach=function(Wr,Jr){for(var fo in this.map)this.map.hasOwnProperty(fo)&&Wr.call(Jr,this.map[fo],fo,this)},Br.prototype.keys=function(){var Wr=[];return this.forEach(function(Jr,fo){Wr.push(fo)}),Fr(Wr)},Br.prototype.values=function(){var Wr=[];return this.forEach(function(Jr){Wr.push(Jr)}),Fr(Wr)},Br.prototype.entries=function(){var Wr=[];return this.forEach(function(Jr,fo){Wr.push([fo,Jr])}),Fr(Wr)},Oe.iterable&&(Br.prototype[Symbol.iterator]=Br.prototype.entries);function Vr(Wr){if(Wr.bodyUsed)return Promise.reject(new TypeError("Already read"));Wr.bodyUsed=!0}function oo(Wr){return new Promise(function(Jr,fo){Wr.onload=function(){Jr(Wr.result)},Wr.onerror=function(){fo(Wr.error)}})}function so(Wr){var Jr=new FileReader,fo=oo(Jr);return Jr.readAsArrayBuffer(Wr),fo}function kr(Wr){var Jr=new FileReader,fo=oo(Jr);return Jr.readAsText(Wr),fo}function qr(Wr){for(var Jr=new Uint8Array(Wr),fo=new Array(Jr.length),vo=0;vo<Jr.length;vo++)fo[vo]=String.fromCharCode(Jr[vo]);return fo.join("")}function Hr(Wr){if(Wr.slice)return Wr.slice(0);var Jr=new Uint8Array(Wr.byteLength);return Jr.set(new Uint8Array(Wr)),Jr.buffer}function Yr(){return this.bodyUsed=!1,this._initBody=function(Wr){this._bodyInit=Wr,Wr?typeof Wr=="string"?this._bodyText=Wr:Oe.blob&&Blob.prototype.isPrototypeOf(Wr)?this._bodyBlob=Wr:Oe.formData&&FormData.prototype.isPrototypeOf(Wr)?this._bodyFormData=Wr:Oe.searchParams&&URLSearchParams.prototype.isPrototypeOf(Wr)?this._bodyText=Wr.toString():Oe.arrayBuffer&&Oe.blob&&xe(Wr)?(this._bodyArrayBuffer=Hr(Wr.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):Oe.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(Wr)||we(Wr))?this._bodyArrayBuffer=Hr(Wr):this._bodyText=Wr=Object.prototype.toString.call(Wr):this._bodyText="",this.headers.get("content-type")||(typeof Wr=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):Oe.searchParams&&URLSearchParams.prototype.isPrototypeOf(Wr)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},Oe.blob&&(this.blob=function(){var Wr=Vr(this);if(Wr)return Wr;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?Vr(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(so)}),this.text=function(){var Wr=Vr(this);if(Wr)return Wr;if(this._bodyBlob)return kr(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(qr(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},Oe.formData&&(this.formData=function(){return this.text().then(no)}),this.json=function(){return this.text().then(JSON.parse)},this}var Ur=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function Mr(Wr){var Jr=Wr.toUpperCase();return Ur.indexOf(Jr)>-1?Jr:Wr}function Lr(Wr,Jr){Jr=Jr||{};var fo=Jr.body;if(Wr instanceof Lr){if(Wr.bodyUsed)throw new TypeError("Already read");this.url=Wr.url,this.credentials=Wr.credentials,Jr.headers||(this.headers=new Br(Wr.headers)),this.method=Wr.method,this.mode=Wr.mode,this.signal=Wr.signal,!fo&&Wr._bodyInit!=null&&(fo=Wr._bodyInit,Wr.bodyUsed=!0)}else this.url=String(Wr);if(this.credentials=Jr.credentials||this.credentials||"same-origin",(Jr.headers||!this.headers)&&(this.headers=new Br(Jr.headers)),this.method=Mr(Jr.method||this.method||"GET"),this.mode=Jr.mode||this.mode||null,this.signal=Jr.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&fo)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(fo)}Lr.prototype.clone=function(){return new Lr(this,{body:this._bodyInit})};function no(Wr){var Jr=new FormData;return Wr.trim().split("&").forEach(function(fo){if(fo){var vo=fo.split("="),mo=vo.shift().replace(/\+/g," "),po=vo.join("=").replace(/\+/g," ");Jr.append(decodeURIComponent(mo),decodeURIComponent(po))}}),Jr}function Xr(Wr){var Jr=new Br,fo=Wr.replace(/\r?\n[\t ]+/g," ");return fo.split(/\r?\n/).forEach(function(vo){var mo=vo.split(":"),po=mo.shift().trim();if(po){var yo=mo.join(":").trim();Jr.append(po,yo)}}),Jr}Yr.call(Lr.prototype);function to(Wr,Jr){Jr||(Jr={}),this.type="default",this.status=Jr.status===void 0?200:Jr.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in Jr?Jr.statusText:"OK",this.headers=new Br(Jr.headers),this.url=Jr.url||"",this._initBody(Wr)}Yr.call(to.prototype),to.prototype.clone=function(){return new to(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Br(this.headers),url:this.url})},to.error=function(){var Wr=new to(null,{status:0,statusText:""});return Wr.type="error",Wr};var ao=[301,302,303,307,308];to.redirect=function(Wr,Jr){if(ao.indexOf(Jr)===-1)throw new RangeError("Invalid status code");return new to(null,{status:Jr,headers:{location:Wr}})},Ee.DOMException=ve.DOMException;try{new Ee.DOMException}catch{Ee.DOMException=function(Jr,fo){this.message=Jr,this.name=fo;var vo=Error(Jr);this.stack=vo.stack},Ee.DOMException.prototype=Object.create(Error.prototype),Ee.DOMException.prototype.constructor=Ee.DOMException}function bo(Wr,Jr){return new Promise(function(fo,vo){var mo=new Lr(Wr,Jr);if(mo.signal&&mo.signal.aborted)return vo(new Ee.DOMException("Aborted","AbortError"));var po=new XMLHttpRequest;function yo(){po.abort()}po.onload=function(){var Oo={status:po.status,statusText:po.statusText,headers:Xr(po.getAllResponseHeaders()||"")};Oo.url="responseURL"in po?po.responseURL:Oo.headers.get("X-Request-URL");var Io="response"in po?po.response:po.responseText;fo(new to(Io,Oo))},po.onerror=function(){vo(new TypeError("Network request failed"))},po.ontimeout=function(){vo(new TypeError("Network request failed"))},po.onabort=function(){vo(new Ee.DOMException("Aborted","AbortError"))},po.open(mo.method,mo.url,!0),mo.credentials==="include"?po.withCredentials=!0:mo.credentials==="omit"&&(po.withCredentials=!1),"responseType"in po&&Oe.blob&&(po.responseType="blob"),mo.headers.forEach(function(Oo,Io){po.setRequestHeader(Io,Oo)}),mo.signal&&(mo.signal.addEventListener("abort",yo),po.onreadystatechange=function(){po.readyState===4&&mo.signal.removeEventListener("abort",yo)}),po.send(typeof mo._bodyInit>"u"?null:mo._bodyInit)})}return bo.polyfill=!0,ve.fetch||(ve.fetch=bo,ve.Headers=Br,ve.Request=Lr,ve.Response=to),Ee.Headers=Br,Ee.Request=Lr,Ee.Response=to,Ee.fetch=bo,Object.defineProperty(Ee,"__esModule",{value:!0}),Ee})({})})(me),me.fetch.ponyfill=!0,delete me.fetch.polyfill;var be=me;e=be.fetch,e.default=be.fetch,e.fetch=be.fetch,e.Headers=be.Headers,e.Request=be.Request,e.Response=be.Response,fe.exports=e})(browserPonyfill,browserPonyfill.exports);var browserPonyfillExports=browserPonyfill.exports,__importDefault=commonjsGlobal&&commonjsGlobal.__importDefault||function(fe){return fe&&fe.__esModule?fe:{default:fe}};Object.defineProperty(Provider$1,"__esModule",{value:!0});Provider$1.Provider=void 0;const cross_fetch_1=__importDefault(browserPonyfillExports),protocol_proto_js_1=protocolProtoExports,utils_1=utils$1;async function sleep(fe){return new Promise(e=>setTimeout(e,fe))}class Provider{constructor(e){Array.isArray(e)?this.rpcNodes=e:this.rpcNodes=[e],this.currentNodeId=0,this.onError=()=>!0}async call(e,ye){for(;;)try{const me={id:Math.round(Math.random()*1e3),jsonrpc:"2.0",method:e,params:ye},be=this.rpcNodes[this.currentNodeId],Ee=await(await(0,cross_fetch_1.default)(be,{method:"POST",body:JSON.stringify(me)})).json();if(Ee.result!==void 0)return Ee.result;if(!Ee.error)throw new Error("undefined error");const{message:Oe,data:xe}=Ee.error;if(!xe)throw new Error(Oe);let gr;try{gr=JSON.parse(xe)}catch{gr={data:xe}}throw new Error(JSON.stringify({...Oe&&{error:Oe},...gr}))}catch(me){const be=this.rpcNodes[this.currentNodeId];this.currentNodeId=(this.currentNodeId+1)%this.rpcNodes.length;const ve=this.rpcNodes[this.currentNodeId];if(this.onError(me,be,ve))throw me}}async getNonce(e,ye=!0){const{nonce:me}=await this.call("chain.get_account_nonce",{account:e});if(!ye)return me;const be=(0,utils_1.decodeBase64url)(me),ve=protocol_proto_js_1.koinos.chain.value_type.decode(be),Ee=protocol_proto_js_1.koinos.chain.value_type.toObject(ve,{longs:String,defaults:!0});return Number(Ee.uint64_value)}async getNextNonce(e){const ye=await this.getNonce(e),me=protocol_proto_js_1.koinos.chain.value_type.create({uint64_value:String(ye+1)}),be=protocol_proto_js_1.koinos.chain.value_type.encode(me).finish();return(0,utils_1.encodeBase64url)(be)}async getAccountRc(e){const{rc:ye}=await this.call("chain.get_account_rc",{account:e});return ye||"0"}async getTransactionsById(e){return this.call("transaction_store.get_transactions_by_id",{transaction_ids:e})}async getBlocksById(e){return this.call("block_store.get_blocks_by_id",{block_ids:e,return_block:!0,return_receipt:!1})}async getHeadInfo(){return this.call("chain.get_head_info",{})}async getChainId(){const{chain_id:e}=await this.call("chain.get_chain_id",{});return e}async getBlocks(e,ye=1,me){let be=me;return be||(be=(await this.getHeadInfo()).head_topology.id),(await this.call("block_store.get_blocks_by_height",{head_block_id:be,ancestor_start_height:e,num_blocks:ye,return_block:!0,return_receipt:!1})).block_items}async getBlock(e){return(await this.getBlocks(e,1))[0]}async wait(e,ye="byBlock",me=15e3){const be=Date.now();if(ye==="byTransactionId"){for(;Date.now()<be+me;){await sleep(1e3);const{transactions:gr}=await this.getTransactionsById([e]);if(gr&&gr[0]&&gr[0].containing_blocks)return{blockId:gr[0].containing_blocks[0]}}throw new Error(`Transaction not mined after ${me} ms`)}const ve=async(gr,we,Se)=>{const $r=await this.getBlocks(gr,we,Se);let Fr=0,Br="";$r.forEach(oo=>{if(!oo||!oo.block||!oo.block_id||!oo.block.transactions)return;oo.block.transactions.find(kr=>kr.id===e)&&(Fr=Number(oo.block_height),Br=oo.block_id)});const Vr=$r[$r.length-1].block_id;return[Fr,Br,Vr]};let Ee=0,Oe=0,xe="";for(;Date.now()<be+me;){await sleep(1e3);const{head_topology:gr}=await this.getHeadInfo();if(Ee===0&&(Ee=Number(gr.height),Oe=Ee),Number(gr.height)===Ee-1&&xe&&xe!==gr.id){const[Fr,Br,Vr]=await ve(Oe,Number(gr.height)-Oe+1,gr.id);if(Fr)return{blockId:Br,blockNumber:Fr};xe=Vr,Ee=Number(gr.height)+1}if(Ee>Number(gr.height))continue;const[we,Se,$r]=await ve(Ee,1,gr.id);if(we)return{blockId:Se,blockNumber:we};xe||(xe=$r),Ee+=1}throw new Error(`Transaction not mined after ${me} ms. Blocks checked from ${Oe} to ${Ee}`)}async sendTransaction(e,ye=!0){const me=await this.call("chain.submit_transaction",{transaction:e,broadcast:ye});return e.wait=async(be="byBlock",ve=15e3)=>this.wait(e.id,be,ve),{...me,transaction:e}}async submitBlock(e){return this.call("chain.submit_block",{block:e})}async readContract(e){return this.call("chain.read_contract",e)}}Provider$1.Provider=Provider;Provider$1.default=Provider;var Transaction$1={};Object.defineProperty(Transaction$1,"__esModule",{value:!0});Transaction$1.Transaction=void 0;const Signer_1=Signer$1;class Transaction{constructor(e){var ye,me,be,ve,Ee;this.signer=e==null?void 0:e.signer,this.provider=e==null?void 0:e.provider,this.options={broadcast:!0,sendAbis:!0,...e==null?void 0:e.options},this.transaction={header:{...((ye=e==null?void 0:e.options)===null||ye===void 0?void 0:ye.chainId)&&{chain_id:e.options.chainId},...((me=e==null?void 0:e.options)===null||me===void 0?void 0:me.rcLimit)&&{rc_limit:e.options.rcLimit},...((be=e==null?void 0:e.options)===null||be===void 0?void 0:be.nonce)&&{nonce:e.options.nonce},...((ve=e==null?void 0:e.options)===null||ve===void 0?void 0:ve.payer)&&{payer:e.options.payer},...((Ee=e==null?void 0:e.options)===null||Ee===void 0?void 0:Ee.payee)&&{payee:e.options.payee}},operations:[]}}async pushOperation(e,ye){let me;if(typeof e=="function")me=(await e(ye,{onlyOperation:!0})).operation;else{let be;e instanceof Promise?be=await e:be=e,be.operation?me=be.operation:me=e}this.transaction.operations||(this.transaction.operations=[]),this.transaction.operations.push(me)}async prepare(e){if(e){const ye={...(e==null?void 0:e.chainId)&&{chain_id:e.chainId},...(e==null?void 0:e.rcLimit)&&{rc_limit:e.rcLimit},...(e==null?void 0:e.nonce)&&{nonce:e.nonce},...(e==null?void 0:e.payer)&&{payer:e.payer},...(e==null?void 0:e.payee)&&{payee:e.payee}};this.transaction.header={...this.transaction.header,...ye}}if(this.signer)this.transaction=await this.signer.prepareTransaction(this.transaction);else{if(!this.transaction.header||!this.transaction.header.payer)throw new Error("no payer defined");const ye=Signer_1.Signer.fromSeed("0");ye.provider=this.provider,this.transaction=await ye.prepareTransaction(this.transaction)}return this.transaction}async sign(e){if(!this.signer)throw new Error("no signer defined");return this.transaction.id||await this.prepare(),this.signer.signTransaction(this.transaction,this.options.sendAbis?e:void 0)}async send(e){const ye={...this.options,...e};if(this.transaction.id||await this.prepare(),this.signer&&this.signer.provider){const{transaction:ve,receipt:Ee}=await this.signer.sendTransaction(this.transaction,ye);return this.transaction=ve,this.waitFunction=ve.wait,Ee}if(!this.provider)throw new Error("provider not defined");if(!this.transaction.signatures||!this.transaction.signatures.length)throw new Error("transaction without signatures and no signer defined");ye.beforeSend&&await ye.beforeSend(this.transaction,ye);const{transaction:me,receipt:be}=await this.provider.sendTransaction(this.transaction,ye.broadcast);return this.transaction=me,this.waitFunction=me.wait,be}async wait(e,ye){if(!this.waitFunction)throw new Error("no wait function defined");return this.waitFunction(e,ye)}}Transaction$1.Transaction=Transaction;(function(fe){var e=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(ve,Ee,Oe,xe){xe===void 0&&(xe=Oe);var gr=Object.getOwnPropertyDescriptor(Ee,Oe);(!gr||("get"in gr?!Ee.__esModule:gr.writable||gr.configurable))&&(gr={enumerable:!0,get:function(){return Ee[Oe]}}),Object.defineProperty(ve,xe,gr)}:function(ve,Ee,Oe,xe){xe===void 0&&(xe=Oe),ve[xe]=Ee[Oe]}),ye=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(ve,Ee){Object.defineProperty(ve,"default",{enumerable:!0,value:Ee})}:function(ve,Ee){ve.default=Ee}),me=commonjsGlobal&&commonjsGlobal.__importStar||function(ve){if(ve&&ve.__esModule)return ve;var Ee={};if(ve!=null)for(var Oe in ve)Oe!=="default"&&Object.prototype.hasOwnProperty.call(ve,Oe)&&e(Ee,ve,Oe);return ye(Ee,ve),Ee},be=commonjsGlobal&&commonjsGlobal.__exportStar||function(ve,Ee){for(var Oe in ve)Oe!=="default"&&!Object.prototype.hasOwnProperty.call(Ee,Oe)&&e(Ee,ve,Oe)};Object.defineProperty(fe,"__esModule",{value:!0}),fe.interfaces=fe.utils=void 0;/*! koilib - MIT License (c) Julian Gonzalez (joticajulian@gmail.com) */fe.utils=me(indexUtils),fe.interfaces=me(_interface),be(Contract$1,fe),be(Signer$1,fe),be(Provider$1,fe),be(Transaction$1,fe),be(Serializer$1,fe)})(lib$2);function generateSigner(fe,e,ye,me,be){return{provider:be||generateProvider(e,ye,me),getAddress:()=>fe,getPrivateKey:()=>{throw new Error("not implemented")},signHash:async Ee=>{const Oe=await me.request({chainId:e,topic:ye,request:{method:Methods.SignHash,params:{address:fe,hash:lib$2.utils.encodeBase64(Ee)}}});return lib$2.utils.decodeBase64(Oe)},signMessage:async Ee=>{const Oe=await me.request({chainId:e,topic:ye,request:{method:Methods.SignMessage,params:{address:fe,message:Ee}}});return lib$2.utils.decodeBase64(Oe)},prepareTransaction:async Ee=>{var Oe;if(be){const xe=lib$2.Signer.fromSeed("dummy_signer");return xe.provider=be,(Oe=Ee.header)!=null&&Oe.payer||(Ee.header={...Ee.header,payer:fe}),xe.prepareTransaction(Ee)}else return await me.request({chainId:e,topic:ye,request:{method:Methods.PrepareTransaction,params:{address:fe,transaction:Ee}}})},signTransaction:async(Ee,Oe)=>await me.request({chainId:e,topic:ye,request:{method:Methods.SignTransaction,params:{address:fe,transaction:Ee,options:{abis:Oe}}}}),sendTransaction:async(Ee,Oe)=>{const xe=await me.request({chainId:e,topic:ye,request:{method:Methods.SignAndSendTransaction,params:{address:fe,transaction:Ee,options:Oe}}});return xe.transaction.wait=async(gr="byBlock",we=6e4)=>await me.request({chainId:e,topic:ye,request:{method:Methods.WaitForTransaction,params:{transactionId:xe.transaction.id,type:gr,timeout:we}}}),xe},prepareBlock:()=>{throw new Error("not implemented")},signBlock:()=>{throw new Error("not implemented")}}}class WebWalletConnectKoinos{constructor(e,ye){Ai(this,"web3Modal");Ai(this,"topic","");Ai(this,"chainId");Ai(this,"accounts",[]);Ai(this,"options",{logLevel:LogLevel.none});ye&&(this.options=ye),this.web3Modal=new z$1(e),(ye==null?void 0:ye.autoDisconnect)===!1||this.web3Modal.onSessionDelete(be=>this.onSessionDelete(be))}close(){this.web3Modal.offSessionDelete(e=>this.onSessionDelete(e))}async onSessionDelete(e){this.options.logLevel===LogLevel.debug&&console.log("onSessionDelete",e),this.accounts=[],this.topic="",this.chainId=void 0}async connect(e,ye){var Ee;this.accounts=[];const me=await this.web3Modal.getSessions();let be=me.length?me[me.length-1]:void 0;if(be||(be=await this.web3Modal.connect({requiredNamespaces:{koinos:{methods:ye,chains:e,events:[]}}})),!be)return[];this.topic=be.topic,((Ee=be.namespaces.koinos.chains)==null?void 0:Ee.length)===1&&(this.chainId=be.namespaces.koinos.chains[0]);const ve=be.namespaces.koinos.accounts.reduce((Oe,xe)=>{const[gr,we,Se]=xe.split(":");return Oe.includes(Se)||Oe.push(Se),Oe},[]);return this.accounts=ve,ve}async disconnect(){const e=await this.web3Modal.getSessions();for(const ye of e){try{this.web3Modal.disconnect({topic:ye.topic,reason:U$3("USER_DISCONNECTED")})}catch(me){console.error(me)}if(ye.pairingTopic)try{this.web3Modal.disconnect({topic:ye.pairingTopic,reason:U$3("USER_DISCONNECTED")})}catch(me){console.error(me)}}this.accounts=[],this.topic="",this.chainId=void 0}getAccounts(){return this.accounts}getSigner(e,ye,me){const be=me||this.chainId;if(!be)throw new Error("You must provide a chain id because none or several are present in this session.");return generateSigner(e,be,this.topic,this.web3Modal,ye)}getProvider(e){const ye=e||this.chainId;if(!ye)throw new Error("You must provide a chain id because none or several are present in this session.");return generateProvider(ye,this.topic,this.web3Modal)}}const x="idb-keyval";var z=(fe={})=>{const e=fe.base&&fe.base.length>0?`${fe.base}:`:"",ye=be=>e+be;let me;return fe.dbName&&fe.storeName&&(me=createStore(fe.dbName,fe.storeName)),{name:x,options:fe,async hasItem(be){return!(typeof await get(ye(be),me)>"u")},async getItem(be){return await get(ye(be),me)??null},setItem(be,ve){return set(ye(be),ve,me)},removeItem(be){return del(ye(be),me)},getKeys(){return keys(me)},clear(){return clear(me)}}};const D$3="WALLET_CONNECT_V2_INDEXED_DB",E$1="keyvaluestorage";let _$2=class{constructor(){this.indexedDb=createStorage({driver:z({dbName:D$3,storeName:E$1})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const ye=await this.indexedDb.getItem(e);if(ye!==null)return ye}async setItem(e,ye){await this.indexedDb.setItem(e,safeJsonStringify(ye))}async removeItem(e){await this.indexedDb.removeItem(e)}};var l=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},c={exports:{}};(function(){let fe;function e(){}fe=e,fe.prototype.getItem=function(ye){return this.hasOwnProperty(ye)?String(this[ye]):null},fe.prototype.setItem=function(ye,me){this[ye]=String(me)},fe.prototype.removeItem=function(ye){delete this[ye]},fe.prototype.clear=function(){const ye=this;Object.keys(ye).forEach(function(me){ye[me]=void 0,delete ye[me]})},fe.prototype.key=function(ye){return ye=ye||0,Object.keys(this)[ye]},fe.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof l<"u"&&l.localStorage?c.exports=l.localStorage:typeof window<"u"&&window.localStorage?c.exports=window.localStorage:c.exports=new e})();function k$2(fe){var e;return[fe[0],safeJsonParse((e=fe[1])!=null?e:"")]}class K{constructor(){this.localStorage=c.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(k$2)}async getItem(e){const ye=this.localStorage.getItem(e);if(ye!==null)return safeJsonParse(ye)}async setItem(e,ye){this.localStorage.setItem(e,safeJsonStringify(ye))}async removeItem(e){this.localStorage.removeItem(e)}}const N$2="wc_storage_version",y$1=1,O$2=async(fe,e,ye)=>{const me=N$2,be=await e.getItem(me);if(be&&be>=y$1){ye(e);return}const ve=await fe.getKeys();if(!ve.length){ye(e);return}const Ee=[];for(;ve.length;){const Oe=ve.shift();if(!Oe)continue;const xe=Oe.toLowerCase();if(xe.includes("wc@")||xe.includes("walletconnect")||xe.includes("wc_")||xe.includes("wallet_connect")){const gr=await fe.getItem(Oe);await e.setItem(Oe,gr),Ee.push(Oe)}}await e.setItem(me,y$1),ye(e),j(fe,Ee)},j=async(fe,e)=>{e.length&&e.forEach(async ye=>{await fe.removeItem(ye)})};let h$4=class{constructor(){this.initialized=!1,this.setInitialized=ye=>{this.storage=ye,this.initialized=!0};const e=new K;this.storage=e;try{const ye=new _$2;O$2(e,ye,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,ye){return await this.initialize(),this.storage.setItem(e,ye)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const ye=setInterval(()=>{this.initialized&&(clearInterval(ye),e())},20)})}};class n extends IEvents$1{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}}let h$3=class extends IEvents$1{constructor(e,ye){super(),this.core=e,this.logger=ye,this.records=new Map}},a$1=class{constructor(e,ye){this.logger=e,this.core=ye}};class u extends IEvents$1{constructor(e,ye){super(),this.relayer=e,this.logger=ye}}let g$2=class extends IEvents$1{constructor(e){super()}},p$2=class{constructor(e,ye,me,be){this.core=e,this.logger=ye,this.name=me}};class d extends IEvents$1{constructor(e,ye){super(),this.relayer=e,this.logger=ye}}class E extends IEvents$1{constructor(e,ye){super(),this.core=e,this.logger=ye}}class y{constructor(e,ye){this.projectId=e,this.logger=ye}}const J="base10",p$1="base16",F$2="base64pad",H$2="utf8",Q$2=0,_$1=1,Dn=0,Ie=1,Z$1=12,X$2=32;function kn(){const fe=x25519.generateKeyPair();return{privateKey:toString(fe.secretKey,p$1),publicKey:toString(fe.publicKey,p$1)}}function Vn(){const fe=random.randomBytes(X$2);return toString(fe,p$1)}function Mn(fe,e){const ye=x25519.sharedKey(fromString(fe,p$1),fromString(e,p$1),!0),me=new HKDF_1(sha256$1.SHA256,ye).expand(X$2);return toString(me,p$1)}function Kn(fe){const e=sha256$1.hash(fromString(fe,p$1));return toString(e,p$1)}function Ln$1(fe){const e=sha256$1.hash(fromString(fe,H$2));return toString(e,p$1)}function Pe(fe){return fromString(`${fe}`,J)}function $$1(fe){return Number(toString(fe,J))}function xn(fe){const e=Pe(typeof fe.type<"u"?fe.type:Q$2);if($$1(e)===_$1&&typeof fe.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const ye=typeof fe.senderPublicKey<"u"?fromString(fe.senderPublicKey,p$1):void 0,me=typeof fe.iv<"u"?fromString(fe.iv,p$1):random.randomBytes(Z$1),be=new chacha20poly1305.ChaCha20Poly1305(fromString(fe.symKey,p$1)).seal(me,fromString(fe.message,H$2));return Re({type:e,sealed:be,iv:me,senderPublicKey:ye})}function Fn(fe){const e=new chacha20poly1305.ChaCha20Poly1305(fromString(fe.symKey,p$1)),{sealed:ye,iv:me}=ee$1(fe.encoded),be=e.open(me,ye);if(be===null)throw new Error("Failed to decrypt");return toString(be,H$2)}function Re(fe){if($$1(fe.type)===_$1){if(typeof fe.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return toString(concat$1([fe.type,fe.senderPublicKey,fe.iv,fe.sealed]),F$2)}return toString(concat$1([fe.type,fe.iv,fe.sealed]),F$2)}function ee$1(fe){const e=fromString(fe,F$2),ye=e.slice(Dn,Ie),me=Ie;if($$1(ye)===_$1){const Oe=me+X$2,xe=Oe+Z$1,gr=e.slice(me,Oe),we=e.slice(Oe,xe),Se=e.slice(xe);return{type:ye,sealed:Se,iv:we,senderPublicKey:gr}}const be=me+Z$1,ve=e.slice(me,be),Ee=e.slice(be);return{type:ye,sealed:Ee,iv:ve}}function Hn(fe,e){const ye=ee$1(fe);return Te({type:$$1(ye.type),senderPublicKey:typeof ye.senderPublicKey<"u"?toString(ye.senderPublicKey,p$1):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function Te(fe){const e=(fe==null?void 0:fe.type)||Q$2;if(e===_$1){if(typeof(fe==null?void 0:fe.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(fe==null?void 0:fe.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:fe==null?void 0:fe.senderPublicKey,receiverPublicKey:fe==null?void 0:fe.receiverPublicKey}}function qn(fe){return fe.type===_$1&&typeof fe.senderPublicKey=="string"&&typeof fe.receiverPublicKey=="string"}var Bn=Object.defineProperty,Ae=Object.getOwnPropertySymbols,Gn=Object.prototype.hasOwnProperty,Wn=Object.prototype.propertyIsEnumerable,Ue$1=(fe,e,ye)=>e in fe?Bn(fe,e,{enumerable:!0,configurable:!0,writable:!0,value:ye}):fe[e]=ye,_e=(fe,e)=>{for(var ye in e||(e={}))Gn.call(e,ye)&&Ue$1(fe,ye,e[ye]);if(Ae)for(var ye of Ae(e))Wn.call(e,ye)&&Ue$1(fe,ye,e[ye]);return fe};const Ce$1="ReactNative",m$1={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},$e$1="js";function te$2(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function C$1(){return!getDocument_1()&&!!getNavigator_1()&&navigator.product===Ce$1}function D$2(){return!te$2()&&!!getNavigator_1()}function T$1(){return C$1()?m$1.reactNative:te$2()?m$1.node:D$2()?m$1.browser:m$1.unknown}function Jn(){var fe;try{return C$1()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(fe=global.Application)==null?void 0:fe.applicationId:void 0}catch{return}}function De$1(fe,e){let ye=queryString.parse(fe);return ye=_e(_e({},ye),e),fe=queryString.stringify(ye),fe}function ke$1(){if(T$1()===m$1.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:ye,Version:me}=global.Platform;return[ye,me].join("-")}const fe=detect();if(fe===null)return"unknown";const e=fe.os?fe.os.replace(" ","").toLowerCase():"unknown";return fe.type==="browser"?[e,fe.name,fe.version].join("-"):[e,fe.version].join("-")}function Ve$1(){var fe;const e=T$1();return e===m$1.browser?[e,((fe=getLocation_1())==null?void 0:fe.host)||"unknown"].join(":"):e}function Me$1(fe,e,ye){const me=ke$1(),be=Ve$1();return[[fe,e].join("-"),[$e$1,ye].join("-"),me,be].join("/")}function Xn({protocol:fe,version:e,relayUrl:ye,sdkVersion:me,auth:be,projectId:ve,useOnCloseEvent:Ee,bundleId:Oe}){const xe=ye.split("?"),gr=Me$1(fe,e,me),we={auth:be,ua:gr,projectId:ve,useOnCloseEvent:Ee||void 0,origin:Oe||void 0},Se=De$1(xe[1]||"",we);return xe[0]+"?"+Se}function rt$1(fe){return Object.fromEntries(fe.entries())}function ot$1(fe){return new Map(Object.entries(fe))}function at$2(fe=cjs$4.FIVE_MINUTES,e){const ye=cjs$4.toMiliseconds(fe||cjs$4.FIVE_MINUTES);let me,be,ve;return{resolve:Ee=>{ve&&me&&(clearTimeout(ve),me(Ee))},reject:Ee=>{ve&&be&&(clearTimeout(ve),be(Ee))},done:()=>new Promise((Ee,Oe)=>{ve=setTimeout(()=>{Oe(new Error(e))},ye),me=Ee,be=Oe})}}function ut$1(fe,e,ye){return new Promise(async(me,be)=>{const ve=setTimeout(()=>be(new Error(ye)),e);try{const Ee=await fe;me(Ee)}catch(Ee){be(Ee)}clearTimeout(ve)})}function re(fe,e){if(typeof e=="string"&&e.startsWith(`${fe}:`))return e;if(fe.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(fe.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${fe}`)}function lt$1(fe){return re("topic",fe)}function dt$1(fe){return re("id",fe)}function ft$2(fe){const[e,ye]=fe.split(":"),me={id:void 0,topic:void 0};if(e==="topic"&&typeof ye=="string")me.topic=ye;else if(e==="id"&&Number.isInteger(Number(ye)))me.id=Number(ye);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${ye}`);return me}function pt$2(fe,e){return cjs$4.fromMiliseconds((e||Date.now())+cjs$4.toMiliseconds(fe))}function mt$2(fe){return Date.now()>=cjs$4.toMiliseconds(fe)}function yt$2(fe,e){return`${fe}${e?`:${e}`:""}`}const Fe$1="irn";function vt$1(fe){return(fe==null?void 0:fe.relay)||{protocol:Fe$1}}function Et$1(fe){const e=RELAY_JSONRPC[fe];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${fe}`);return e}var bt$1=Object.defineProperty,He$1=Object.getOwnPropertySymbols,Nt$1=Object.prototype.hasOwnProperty,Ot$1=Object.prototype.propertyIsEnumerable,qe$1=(fe,e,ye)=>e in fe?bt$1(fe,e,{enumerable:!0,configurable:!0,writable:!0,value:ye}):fe[e]=ye,St$1=(fe,e)=>{for(var ye in e||(e={}))Nt$1.call(e,ye)&&qe$1(fe,ye,e[ye]);if(He$1)for(var ye of He$1(e))Ot$1.call(e,ye)&&qe$1(fe,ye,e[ye]);return fe};function Be$1(fe,e="-"){const ye={},me="relay"+e;return Object.keys(fe).forEach(be=>{if(be.startsWith(me)){const ve=be.replace(me,""),Ee=fe[be];ye[ve]=Ee}}),ye}function wt$1(fe){fe=fe.includes("wc://")?fe.replace("wc://",""):fe,fe=fe.includes("wc:")?fe.replace("wc:",""):fe;const e=fe.indexOf(":"),ye=fe.indexOf("?")!==-1?fe.indexOf("?"):void 0,me=fe.substring(0,e),be=fe.substring(e+1,ye).split("@"),ve=typeof ye<"u"?fe.substring(ye):"",Ee=queryString.parse(ve);return{protocol:me,topic:Ge$1(be[0]),version:parseInt(be[1],10),symKey:Ee.symKey,relay:Be$1(Ee)}}function Ge$1(fe){return fe.startsWith("//")?fe.substring(2):fe}function We$1(fe,e="-"){const ye="relay",me={};return Object.keys(fe).forEach(be=>{const ve=ye+e+be;fe[be]&&(me[ve]=fe[be])}),me}function It$1(fe){return`${fe.protocol}:${fe.topic}@${fe.version}?`+queryString.stringify(St$1({symKey:fe.symKey},We$1(fe.relay)))}const en$1={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},nn$1={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function N$1(fe,e){const{message:ye,code:me}=nn$1[fe];return{message:e?`${ye} ${e}`:ye,code:me}}function U$2(fe,e){const{message:ye,code:me}=en$1[fe];return{message:e?`${ye} ${e}`:ye,code:me}}function k$1(fe,e){return Array.isArray(fe)?typeof e<"u"&&fe.length?fe.every(e):!0:!1}function w$3(fe){return typeof fe>"u"}function h$2(fe,e){return e&&w$3(fe)?!0:typeof fe=="string"&&!!fe.trim().length}function kt$1(fe){if(h$2(fe,!1))try{return typeof new URL(fe)<"u"}catch{return!1}return!1}function Vt$1(fe){var e;return(e=fe==null?void 0:fe.proposer)==null?void 0:e.publicKey}function Mt$1(fe){return fe==null?void 0:fe.topic}function Ht$1(fe){return typeof fe<"u"&&typeof fe!==null}function er$1(){const fe=T$1();return new Promise(e=>{switch(fe){case m$1.browser:e(pn());break;case m$1.reactNative:e(mn());break;case m$1.node:e(yn());break;default:e(!0)}})}function pn(){return D$2()&&(navigator==null?void 0:navigator.onLine)}async function mn(){if(C$1()&&typeof global<"u"&&global!=null&&global.NetInfo){const fe=await(global==null?void 0:global.NetInfo.fetch());return fe==null?void 0:fe.isConnected}return!0}function yn(){return!0}function nr$1(fe){switch(T$1()){case m$1.browser:hn(fe);break;case m$1.reactNative:gn(fe);break}}function hn(fe){!C$1()&&D$2()&&(window.addEventListener("online",()=>fe(!0)),window.addEventListener("offline",()=>fe(!1)))}function gn(fe){C$1()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>fe(e==null?void 0:e.isConnected)))}const w$2=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),b$2=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",a=fe=>fe.split("?")[0],h$1=10,S$1=w$2();class f{constructor(e){if(this.url=e,this.events=new c$4.EventEmitter,this.registering=!1,!isWsUrl(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,ye){this.events.on(e,ye)}once(e,ye){this.events.once(e,ye)}off(e,ye){this.events.off(e,ye)}removeListener(e,ye){this.events.removeListener(e,ye)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,ye)=>{if(typeof this.socket>"u"){ye(new Error("Connection already closed"));return}this.socket.onclose=me=>{this.onClose(me),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(safeJsonStringify(e))}catch(ye){this.onError(e.id,ye)}}register(e=this.url){if(!isWsUrl(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const ye=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=ye||this.events.listenerCount("open")>=ye)&&this.events.setMaxListeners(ye+1),new Promise((me,be)=>{this.events.once("register_error",ve=>{this.resetMaxListeners(),be(ve)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return be(new Error("WebSocket connection is missing or invalid"));me(this.socket)})})}return this.url=e,this.registering=!0,new Promise((ye,me)=>{const be=new URLSearchParams(e).get("origin"),ve=cjs.isReactNative()?{headers:{origin:be}}:{rejectUnauthorized:!isLocalhostUrl(e)},Ee=new S$1(e,[],ve);b$2()?Ee.onerror=Oe=>{const xe=Oe;me(this.emitError(xe.error))}:Ee.on("error",Oe=>{me(this.emitError(Oe))}),Ee.onopen=()=>{this.onOpen(Ee),ye(Ee)}})}onOpen(e){e.onmessage=ye=>this.onPayload(ye),e.onclose=ye=>this.onClose(ye),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const ye=typeof e.data=="string"?safeJsonParse(e.data):e.data;this.events.emit("payload",ye)}onError(e,ye){const me=this.parseError(ye),be=me.message||me.toString(),ve=formatJsonRpcError(e,be);this.events.emit("payload",ve)}parseError(e,ye=this.url){return parseConnectionError(e,a(ye),"WS")}resetMaxListeners(){this.events.getMaxListeners()>h$1&&this.events.setMaxListeners(h$1)}emitError(e){const ye=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${a(this.url)}`));return this.events.emit("register_error",ye),ye}}function Vi(fe,e){if(fe.length>=255)throw new TypeError("Alphabet too long");for(var ye=new Uint8Array(256),me=0;me<ye.length;me++)ye[me]=255;for(var be=0;be<fe.length;be++){var ve=fe.charAt(be),Ee=ve.charCodeAt(0);if(ye[Ee]!==255)throw new TypeError(ve+" is ambiguous");ye[Ee]=be}var Oe=fe.length,xe=fe.charAt(0),gr=Math.log(Oe)/Math.log(256),we=Math.log(256)/Math.log(Oe);function Se(Br){if(Br instanceof Uint8Array||(ArrayBuffer.isView(Br)?Br=new Uint8Array(Br.buffer,Br.byteOffset,Br.byteLength):Array.isArray(Br)&&(Br=Uint8Array.from(Br))),!(Br instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(Br.length===0)return"";for(var Vr=0,oo=0,so=0,kr=Br.length;so!==kr&&Br[so]===0;)so++,Vr++;for(var qr=(kr-so)*we+1>>>0,Hr=new Uint8Array(qr);so!==kr;){for(var Yr=Br[so],Ur=0,Mr=qr-1;(Yr!==0||Ur<oo)&&Mr!==-1;Mr--,Ur++)Yr+=256*Hr[Mr]>>>0,Hr[Mr]=Yr%Oe>>>0,Yr=Yr/Oe>>>0;if(Yr!==0)throw new Error("Non-zero carry");oo=Ur,so++}for(var Lr=qr-oo;Lr!==qr&&Hr[Lr]===0;)Lr++;for(var no=xe.repeat(Vr);Lr<qr;++Lr)no+=fe.charAt(Hr[Lr]);return no}function $r(Br){if(typeof Br!="string")throw new TypeError("Expected String");if(Br.length===0)return new Uint8Array;var Vr=0;if(Br[Vr]!==" "){for(var oo=0,so=0;Br[Vr]===xe;)oo++,Vr++;for(var kr=(Br.length-Vr)*gr+1>>>0,qr=new Uint8Array(kr);Br[Vr];){var Hr=ye[Br.charCodeAt(Vr)];if(Hr===255)return;for(var Yr=0,Ur=kr-1;(Hr!==0||Yr<so)&&Ur!==-1;Ur--,Yr++)Hr+=Oe*qr[Ur]>>>0,qr[Ur]=Hr%256>>>0,Hr=Hr/256>>>0;if(Hr!==0)throw new Error("Non-zero carry");so=Yr,Vr++}if(Br[Vr]!==" "){for(var Mr=kr-so;Mr!==kr&&qr[Mr]===0;)Mr++;for(var Lr=new Uint8Array(oo+(kr-Mr)),no=oo;Mr!==kr;)Lr[no++]=qr[Mr++];return Lr}}}function Fr(Br){var Vr=$r(Br);if(Vr)return Vr;throw new Error(`Non-${e} character`)}return{encode:Se,decodeUnsafe:$r,decode:Fr}}var qi=Vi,ji=qi;const Ne=fe=>{if(fe instanceof Uint8Array&&fe.constructor.name==="Uint8Array")return fe;if(fe instanceof ArrayBuffer)return new Uint8Array(fe);if(ArrayBuffer.isView(fe))return new Uint8Array(fe.buffer,fe.byteOffset,fe.byteLength);throw new Error("Unknown type, must be binary type")},Gi=fe=>new TextEncoder().encode(fe),Yi=fe=>new TextDecoder().decode(fe);class Hi{constructor(e,ye,me){this.name=e,this.prefix=ye,this.baseEncode=me}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Ji{constructor(e,ye,me){if(this.name=e,this.prefix=ye,ye.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=ye.codePointAt(0),this.baseDecode=me}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Ue(this,e)}}class Wi{constructor(e){this.decoders=e}or(e){return Ue(this,e)}decode(e){const ye=e[0],me=this.decoders[ye];if(me)return me.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Ue=(fe,e)=>new Wi({...fe.decoders||{[fe.prefix]:fe},...e.decoders||{[e.prefix]:e}});class Xi{constructor(e,ye,me,be){this.name=e,this.prefix=ye,this.baseEncode=me,this.baseDecode=be,this.encoder=new Hi(e,ye,me),this.decoder=new Ji(e,ye,be)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const X$1=({name:fe,prefix:e,encode:ye,decode:me})=>new Xi(fe,e,ye,me),B$1=({prefix:fe,name:e,alphabet:ye})=>{const{encode:me,decode:be}=ji(ye,e);return X$1({prefix:fe,name:e,encode:me,decode:ve=>Ne(be(ve))})},Qi=(fe,e,ye,me)=>{const be={};for(let we=0;we<e.length;++we)be[e[we]]=we;let ve=fe.length;for(;fe[ve-1]==="=";)--ve;const Ee=new Uint8Array(ve*ye/8|0);let Oe=0,xe=0,gr=0;for(let we=0;we<ve;++we){const Se=be[fe[we]];if(Se===void 0)throw new SyntaxError(`Non-${me} character`);xe=xe<<ye|Se,Oe+=ye,Oe>=8&&(Oe-=8,Ee[gr++]=255&xe>>Oe)}if(Oe>=ye||255&xe<<8-Oe)throw new SyntaxError("Unexpected end of data");return Ee},Zi=(fe,e,ye)=>{const me=e[e.length-1]==="=",be=(1<<ye)-1;let ve="",Ee=0,Oe=0;for(let xe=0;xe<fe.length;++xe)for(Oe=Oe<<8|fe[xe],Ee+=8;Ee>ye;)Ee-=ye,ve+=e[be&Oe>>Ee];if(Ee&&(ve+=e[be&Oe<<ye-Ee]),me)for(;ve.length*ye&7;)ve+="=";return ve},g$1=({name:fe,prefix:e,bitsPerChar:ye,alphabet:me})=>X$1({prefix:e,name:fe,encode(be){return Zi(be,me,ye)},decode(be){return Qi(be,me,ye,fe)}}),es=X$1({prefix:"\0",name:"identity",encode:fe=>Yi(fe),decode:fe=>Gi(fe)});var ts=Object.freeze({__proto__:null,identity:es});const is=g$1({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var ss=Object.freeze({__proto__:null,base2:is});const rs=g$1({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var ns=Object.freeze({__proto__:null,base8:rs});const os$1=B$1({prefix:"9",name:"base10",alphabet:"0123456789"});var as$1=Object.freeze({__proto__:null,base10:os$1});const hs$1=g$1({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),cs$1=g$1({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var us$1=Object.freeze({__proto__:null,base16:hs$1,base16upper:cs$1});const ls$1=g$1({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),ds$1=g$1({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),gs$1=g$1({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),ps$1=g$1({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Ds=g$1({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),ys=g$1({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),ms$1=g$1({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),bs=g$1({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),fs=g$1({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Es=Object.freeze({__proto__:null,base32:ls$1,base32upper:ds$1,base32pad:gs$1,base32padupper:ps$1,base32hex:Ds,base32hexupper:ys,base32hexpad:ms$1,base32hexpadupper:bs,base32z:fs});const ws=B$1({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),vs=B$1({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Is=Object.freeze({__proto__:null,base36:ws,base36upper:vs});const Cs=B$1({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Rs=B$1({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var _s=Object.freeze({__proto__:null,base58btc:Cs,base58flickr:Rs});const Ss=g$1({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Ts=g$1({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Ps=g$1({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),xs=g$1({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Os=Object.freeze({__proto__:null,base64:Ss,base64pad:Ts,base64url:Ps,base64urlpad:xs});const Le=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),As=Le.reduce((fe,e,ye)=>(fe[ye]=e,fe),[]),zs=Le.reduce((fe,e,ye)=>(fe[e.codePointAt(0)]=ye,fe),[]);function Ns(fe){return fe.reduce((e,ye)=>(e+=As[ye],e),"")}function Us(fe){const e=[];for(const ye of fe){const me=zs[ye.codePointAt(0)];if(me===void 0)throw new Error(`Non-base256emoji character: ${ye}`);e.push(me)}return new Uint8Array(e)}const Ls=X$1({prefix:"🚀",name:"base256emoji",encode:Ns,decode:Us});var Fs=Object.freeze({__proto__:null,base256emoji:Ls}),$s=$e,Fe=128,Ms=127,ks=~Ms,Ks=Math.pow(2,31);function $e(fe,e,ye){e=e||[],ye=ye||0;for(var me=ye;fe>=Ks;)e[ye++]=fe&255|Fe,fe/=128;for(;fe&ks;)e[ye++]=fe&255|Fe,fe>>>=7;return e[ye]=fe|0,$e.bytes=ye-me+1,e}var Bs=he$1,Vs=128,Me=127;function he$1(fe,me){var ye=0,me=me||0,be=0,ve=me,Ee,Oe=fe.length;do{if(ve>=Oe)throw he$1.bytes=0,new RangeError("Could not decode varint");Ee=fe[ve++],ye+=be<28?(Ee&Me)<<be:(Ee&Me)*Math.pow(2,be),be+=7}while(Ee>=Vs);return he$1.bytes=ve-me,ye}var qs=Math.pow(2,7),js=Math.pow(2,14),Gs=Math.pow(2,21),Ys=Math.pow(2,28),Hs=Math.pow(2,35),Js=Math.pow(2,42),Ws=Math.pow(2,49),Xs=Math.pow(2,56),Qs=Math.pow(2,63),Zs=function(fe){return fe<qs?1:fe<js?2:fe<Gs?3:fe<Ys?4:fe<Hs?5:fe<Js?6:fe<Ws?7:fe<Xs?8:fe<Qs?9:10},er={encode:$s,decode:Bs,encodingLength:Zs},ke=er;const Ke=(fe,e,ye=0)=>(ke.encode(fe,e,ye),e),Be=fe=>ke.encodingLength(fe),ce$2=(fe,e)=>{const ye=e.byteLength,me=Be(fe),be=me+Be(ye),ve=new Uint8Array(be+ye);return Ke(fe,ve,0),Ke(ye,ve,me),ve.set(e,be),new tr$1(fe,ye,e,ve)};let tr$1=class{constructor(e,ye,me,be){this.code=e,this.size=ye,this.digest=me,this.bytes=be}};const Ve=({name:fe,code:e,encode:ye})=>new ir(fe,e,ye);class ir{constructor(e,ye,me){this.name=e,this.code=ye,this.encode=me}digest(e){if(e instanceof Uint8Array){const ye=this.encode(e);return ye instanceof Uint8Array?ce$2(this.code,ye):ye.then(me=>ce$2(this.code,me))}else throw Error("Unknown type, must be binary type")}}const qe=fe=>async e=>new Uint8Array(await crypto.subtle.digest(fe,e)),sr=Ve({name:"sha2-256",code:18,encode:qe("SHA-256")}),rr=Ve({name:"sha2-512",code:19,encode:qe("SHA-512")});var nr=Object.freeze({__proto__:null,sha256:sr,sha512:rr});const je=0,or="identity",Ge=Ne,ar=fe=>ce$2(je,Ge(fe)),hr={code:je,name:or,encode:Ge,digest:ar};var cr=Object.freeze({__proto__:null,identity:hr});new TextEncoder,new TextDecoder;const Ye={...ts,...ss,...ns,...as$1,...us$1,...Es,...Is,..._s,...Os,...Fs};({...nr,...cr});function He(fe){return globalThis.Buffer!=null?new Uint8Array(fe.buffer,fe.byteOffset,fe.byteLength):fe}function ur(fe=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?He(globalThis.Buffer.allocUnsafe(fe)):new Uint8Array(fe)}function Je$1(fe,e,ye,me){return{name:fe,prefix:e,encoder:{name:fe,prefix:e,encode:ye},decoder:{decode:me}}}const We=Je$1("utf8","u",fe=>"u"+new TextDecoder("utf8").decode(fe),fe=>new TextEncoder().encode(fe.substring(1))),ue=Je$1("ascii","a",fe=>{let e="a";for(let ye=0;ye<fe.length;ye++)e+=String.fromCharCode(fe[ye]);return e},fe=>{fe=fe.substring(1);const e=ur(fe.length);for(let ye=0;ye<fe.length;ye++)e[ye]=fe.charCodeAt(ye);return e}),lr={utf8:We,"utf-8":We,hex:Ye.base16,latin1:ue,ascii:ue,binary:ue,...Ye};function dr(fe,e="utf8"){const ye=lr[e];if(!ye)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?He(globalThis.Buffer.from(fe,"utf-8")):ye.decoder.decode(`${ye.prefix}${fe}`)}const le$1="wc",Xe=2,Q$1="core",O$1=`${le$1}@2:${Q$1}:`,Qe$1={name:Q$1,logger:"error"},Ze$1={database:":memory:"},et="crypto",de$1="client_ed25519_seed",tt=cjs$4.ONE_DAY,it="keychain",st="0.3",rt="messages",nt="0.3",ot=cjs$4.SIX_HOURS,at$1="publisher",ht$1="irn",ct="error",ge="wss://relay.walletconnect.com",pe$1="wss://relay.walletconnect.org",ut="relayer",D$1={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},lt="_subscription",P={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},dt=cjs$4.ONE_SECOND,gt$1="2.10.6",pt$1=1e4,Dt$1="0.3",yt$1="WALLETCONNECT_CLIENT_ID",w$1={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},mt$1="subscription",bt="0.3",ft$1=cjs$4.FIVE_SECONDS*1e3,Et="pairing",wt="0.3",F$1={wc_pairingDelete:{req:{ttl:cjs$4.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:cjs$4.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:cjs$4.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:cjs$4.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:cjs$4.ONE_DAY,prompt:!1,tag:0},res:{ttl:cjs$4.ONE_DAY,prompt:!1,tag:0}}},V$2={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},R={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},vt="history",It="0.3",Ct="expirer",v={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},Rt="0.3",Z="verify-api",$="https://verify.walletconnect.com",ee="https://verify.walletconnect.org",_t=[$,ee];class St{constructor(e,ye){this.core=e,this.logger=ye,this.keychain=new Map,this.name=it,this.version=st,this.initialized=!1,this.storagePrefix=O$1,this.init=async()=>{if(!this.initialized){const me=await this.getKeyChain();typeof me<"u"&&(this.keychain=me),this.initialized=!0}},this.has=me=>(this.isInitialized(),this.keychain.has(me)),this.set=async(me,be)=>{this.isInitialized(),this.keychain.set(me,be),await this.persist()},this.get=me=>{this.isInitialized();const be=this.keychain.get(me);if(typeof be>"u"){const{message:ve}=N$1("NO_MATCHING_KEY",`${this.name}: ${me}`);throw new Error(ve)}return be},this.del=async me=>{this.isInitialized(),this.keychain.delete(me),await this.persist()},this.core=e,this.logger=cjs$3.generateChildLogger(ye,this.name)}get context(){return cjs$3.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,rt$1(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?ot$1(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=N$1("NOT_INITIALIZED",this.name);throw new Error(e)}}}class Tt{constructor(e,ye,me){this.core=e,this.logger=ye,this.name=et,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=be=>(this.isInitialized(),this.keychain.has(be)),this.getClientId=async()=>{this.isInitialized();const be=await this.getClientSeed(),ve=generateKeyPair(be);return encodeIss(ve.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const be=kn();return this.setPrivateKey(be.publicKey,be.privateKey)},this.signJWT=async be=>{this.isInitialized();const ve=await this.getClientSeed(),Ee=generateKeyPair(ve),Oe=Vn();return await signJWT(Oe,be,tt,Ee)},this.generateSharedKey=(be,ve,Ee)=>{this.isInitialized();const Oe=this.getPrivateKey(be),xe=Mn(Oe,ve);return this.setSymKey(xe,Ee)},this.setSymKey=async(be,ve)=>{this.isInitialized();const Ee=ve||Kn(be);return await this.keychain.set(Ee,be),Ee},this.deleteKeyPair=async be=>{this.isInitialized(),await this.keychain.del(be)},this.deleteSymKey=async be=>{this.isInitialized(),await this.keychain.del(be)},this.encode=async(be,ve,Ee)=>{this.isInitialized();const Oe=Te(Ee),xe=safeJsonStringify(ve);if(qn(Oe)){const $r=Oe.senderPublicKey,Fr=Oe.receiverPublicKey;be=await this.generateSharedKey($r,Fr)}const gr=this.getSymKey(be),{type:we,senderPublicKey:Se}=Oe;return xn({type:we,symKey:gr,message:xe,senderPublicKey:Se})},this.decode=async(be,ve,Ee)=>{this.isInitialized();const Oe=Hn(ve,Ee);if(qn(Oe)){const xe=Oe.receiverPublicKey,gr=Oe.senderPublicKey;be=await this.generateSharedKey(xe,gr)}try{const xe=this.getSymKey(be),gr=Fn({symKey:xe,encoded:ve});return safeJsonParse(gr)}catch(xe){this.logger.error(`Failed to decode message from topic: '${be}', clientId: '${await this.getClientId()}'`),this.logger.error(xe)}},this.getPayloadType=be=>{const ve=ee$1(be);return $$1(ve.type)},this.getPayloadSenderPublicKey=be=>{const ve=ee$1(be);return ve.senderPublicKey?toString(ve.senderPublicKey,p$1):void 0},this.core=e,this.logger=cjs$3.generateChildLogger(ye,this.name),this.keychain=me||new St(this.core,this.logger)}get context(){return cjs$3.getLoggerContext(this.logger)}async setPrivateKey(e,ye){return await this.keychain.set(e,ye),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(de$1)}catch{e=Vn(),await this.keychain.set(de$1,e)}return dr(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=N$1("NOT_INITIALIZED",this.name);throw new Error(e)}}}class Pt extends a$1{constructor(e,ye){super(e,ye),this.logger=e,this.core=ye,this.messages=new Map,this.name=rt,this.version=nt,this.initialized=!1,this.storagePrefix=O$1,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const me=await this.getRelayerMessages();typeof me<"u"&&(this.messages=me),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(me){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(me)}finally{this.initialized=!0}}},this.set=async(me,be)=>{this.isInitialized();const ve=Ln$1(be);let Ee=this.messages.get(me);return typeof Ee>"u"&&(Ee={}),typeof Ee[ve]<"u"||(Ee[ve]=be,this.messages.set(me,Ee),await this.persist()),ve},this.get=me=>{this.isInitialized();let be=this.messages.get(me);return typeof be>"u"&&(be={}),be},this.has=(me,be)=>{this.isInitialized();const ve=this.get(me),Ee=Ln$1(be);return typeof ve[Ee]<"u"},this.del=async me=>{this.isInitialized(),this.messages.delete(me),await this.persist()},this.logger=cjs$3.generateChildLogger(e,this.name),this.core=ye}get context(){return cjs$3.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,rt$1(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?ot$1(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=N$1("NOT_INITIALIZED",this.name);throw new Error(e)}}}class mr extends u{constructor(e,ye){super(e,ye),this.relayer=e,this.logger=ye,this.events=new c$4.EventEmitter,this.name=at$1,this.queue=new Map,this.publishTimeout=cjs$4.toMiliseconds(cjs$4.TEN_SECONDS),this.needsTransportRestart=!1,this.publish=async(me,be,ve)=>{var Ee;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:me,message:be,opts:ve}});try{const Oe=(ve==null?void 0:ve.ttl)||ot,xe=vt$1(ve),gr=(ve==null?void 0:ve.prompt)||!1,we=(ve==null?void 0:ve.tag)||0,Se=(ve==null?void 0:ve.id)||getBigIntRpcId().toString(),$r={topic:me,message:be,opts:{ttl:Oe,relay:xe,prompt:gr,tag:we,id:Se}},Fr=setTimeout(()=>this.queue.set(Se,$r),this.publishTimeout);try{await await ut$1(this.rpcPublish(me,be,Oe,xe,gr,we,Se),this.publishTimeout,"Failed to publish payload, please try again."),this.removeRequestFromQueue(Se),this.relayer.events.emit(D$1.publish,$r)}catch(Br){if(this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0,(Ee=ve==null?void 0:ve.internal)!=null&&Ee.throwOnFailedPublish)throw this.removeRequestFromQueue(Se),Br;return}finally{clearTimeout(Fr)}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:me,message:be,opts:ve}})}catch(Oe){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(Oe),Oe}},this.on=(me,be)=>{this.events.on(me,be)},this.once=(me,be)=>{this.events.once(me,be)},this.off=(me,be)=>{this.events.off(me,be)},this.removeListener=(me,be)=>{this.events.removeListener(me,be)},this.relayer=e,this.logger=cjs$3.generateChildLogger(ye,this.name),this.registerEventListeners()}get context(){return cjs$3.getLoggerContext(this.logger)}rpcPublish(e,ye,me,be,ve,Ee,Oe){var xe,gr,we,Se;const $r={method:Et$1(be.protocol).publish,params:{topic:e,message:ye,ttl:me,prompt:ve,tag:Ee},id:Oe};return w$3((xe=$r.params)==null?void 0:xe.prompt)&&((gr=$r.params)==null||delete gr.prompt),w$3((we=$r.params)==null?void 0:we.tag)&&((Se=$r.params)==null||delete Se.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:$r}),this.relayer.request($r)}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async e=>{const{topic:ye,message:me,opts:be}=e;await this.publish(ye,me,be)})}registerEventListeners(){this.relayer.core.heartbeat.on(cjs$5.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(D$1.connection_stalled);return}this.checkQueue()}),this.relayer.on(D$1.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}class br{constructor(){this.map=new Map,this.set=(e,ye)=>{const me=this.get(e);this.exists(e,ye)||this.map.set(e,[...me,ye])},this.get=e=>this.map.get(e)||[],this.exists=(e,ye)=>this.get(e).includes(ye),this.delete=(e,ye)=>{if(typeof ye>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const me=this.get(e);if(!this.exists(e,ye))return;const be=me.filter(ve=>ve!==ye);if(!be.length){this.map.delete(e);return}this.map.set(e,be)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var fr=Object.defineProperty,Er=Object.defineProperties,wr=Object.getOwnPropertyDescriptors,xt$1=Object.getOwnPropertySymbols,vr=Object.prototype.hasOwnProperty,Ir=Object.prototype.propertyIsEnumerable,Ot=(fe,e,ye)=>e in fe?fr(fe,e,{enumerable:!0,configurable:!0,writable:!0,value:ye}):fe[e]=ye,q=(fe,e)=>{for(var ye in e||(e={}))vr.call(e,ye)&&Ot(fe,ye,e[ye]);if(xt$1)for(var ye of xt$1(e))Ir.call(e,ye)&&Ot(fe,ye,e[ye]);return fe},De=(fe,e)=>Er(fe,wr(e));class At extends d{constructor(e,ye){super(e,ye),this.relayer=e,this.logger=ye,this.subscriptions=new Map,this.topicMap=new br,this.events=new c$4.EventEmitter,this.name=mt$1,this.version=bt,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=O$1,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(me,be)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:me,opts:be}});try{const ve=vt$1(be),Ee={topic:me,relay:ve};this.pending.set(me,Ee);const Oe=await this.rpcSubscribe(me,ve);return this.onSubscribe(Oe,Ee),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:me,opts:be}}),Oe}catch(ve){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(ve),ve}},this.unsubscribe=async(me,be)=>{await this.restartToComplete(),this.isInitialized(),typeof(be==null?void 0:be.id)<"u"?await this.unsubscribeById(me,be.id,be):await this.unsubscribeByTopic(me,be)},this.isSubscribed=async me=>this.topics.includes(me)?!0:await new Promise((be,ve)=>{const Ee=new cjs$4.Watch;Ee.start(this.pendingSubscriptionWatchLabel);const Oe=setInterval(()=>{!this.pending.has(me)&&this.topics.includes(me)&&(clearInterval(Oe),Ee.stop(this.pendingSubscriptionWatchLabel),be(!0)),Ee.elapsed(this.pendingSubscriptionWatchLabel)>=ft$1&&(clearInterval(Oe),Ee.stop(this.pendingSubscriptionWatchLabel),ve(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1),this.on=(me,be)=>{this.events.on(me,be)},this.once=(me,be)=>{this.events.once(me,be)},this.off=(me,be)=>{this.events.off(me,be)},this.removeListener=(me,be)=>{this.events.removeListener(me,be)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=cjs$3.generateChildLogger(ye,this.name),this.clientId=""}get context(){return cjs$3.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,ye){let me=!1;try{me=this.getSubscription(e).topic===ye}catch{}return me}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,ye){const me=this.topicMap.get(e);await Promise.all(me.map(async be=>await this.unsubscribeById(e,be,ye)))}async unsubscribeById(e,ye,me){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:ye,opts:me}});try{const be=vt$1(me);await this.rpcUnsubscribe(e,ye,be);const ve=U$2("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,ye,ve),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:ye,opts:me}})}catch(be){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(be),be}}async rpcSubscribe(e,ye){const me={method:Et$1(ye.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:me});try{await await ut$1(this.relayer.request(me),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(D$1.connection_stalled)}return Ln$1(e+this.clientId)}async rpcBatchSubscribe(e){if(!e.length)return;const ye=e[0].relay,me={method:Et$1(ye.protocol).batchSubscribe,params:{topics:e.map(be=>be.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:me});try{return await await ut$1(this.relayer.request(me),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(D$1.connection_stalled)}}rpcUnsubscribe(e,ye,me){const be={method:Et$1(me.protocol).unsubscribe,params:{topic:e,id:ye}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:be}),this.relayer.request(be)}onSubscribe(e,ye){this.setSubscription(e,De(q({},ye),{id:e})),this.pending.delete(ye.topic)}onBatchSubscribe(e){e.length&&e.forEach(ye=>{this.setSubscription(ye.id,q({},ye)),this.pending.delete(ye.topic)})}async onUnsubscribe(e,ye,me){this.events.removeAllListeners(ye),this.hasSubscription(ye,e)&&this.deleteSubscription(ye,me),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,ye){this.subscriptions.has(e)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:ye}),this.addSubscription(e,ye))}addSubscription(e,ye){this.subscriptions.set(e,q({},ye)),this.topicMap.set(ye.topic,e),this.events.emit(w$1.created,ye)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const ye=this.subscriptions.get(e);if(!ye){const{message:me}=N$1("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(me)}return ye}deleteSubscription(e,ye){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:ye});const me=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(me.topic,e),this.events.emit(w$1.deleted,De(q({},me),{reason:ye}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(w$1.sync)}async reset(){if(this.cached.length){const e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let ye=0;ye<e;ye++){const me=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(me)}}this.events.emit(w$1.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:ye}=N$1("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(ye),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(ye)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;const ye=await this.rpcBatchSubscribe(e);k$1(ye)&&this.onBatchSubscribe(ye.map((me,be)=>De(q({},e[be]),{id:me})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(!this.initialized||this.relayer.transportExplicitlyClosed)return;const e=[];this.pending.forEach(ye=>{e.push(ye)}),await this.batchSubscribe(e)}registerEventListeners(){this.relayer.core.heartbeat.on(cjs$5.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(D$1.connect,async()=>{await this.onConnect()}),this.relayer.on(D$1.disconnect,()=>{this.onDisconnect()}),this.events.on(w$1.created,async e=>{const ye=w$1.created;this.logger.info(`Emitting ${ye}`),this.logger.debug({type:"event",event:ye,data:e}),await this.persist()}),this.events.on(w$1.deleted,async e=>{const ye=w$1.deleted;this.logger.info(`Emitting ${ye}`),this.logger.debug({type:"event",event:ye,data:e}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=N$1("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){this.restartInProgress&&await new Promise(e=>{const ye=setInterval(()=>{this.restartInProgress||(clearInterval(ye),e())},this.pollingInterval)})}}var Cr=Object.defineProperty,zt$1=Object.getOwnPropertySymbols,Rr=Object.prototype.hasOwnProperty,_r=Object.prototype.propertyIsEnumerable,Nt=(fe,e,ye)=>e in fe?Cr(fe,e,{enumerable:!0,configurable:!0,writable:!0,value:ye}):fe[e]=ye,Sr=(fe,e)=>{for(var ye in e||(e={}))Rr.call(e,ye)&&Nt(fe,ye,e[ye]);if(zt$1)for(var ye of zt$1(e))_r.call(e,ye)&&Nt(fe,ye,e[ye]);return fe};class Ut extends g$2{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new c$4.EventEmitter,this.name=ut,this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.hasExperiencedNetworkDisruption=!1,this.request=async ye=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(ye)}catch(me){throw this.logger.debug("Failed to Publish Request"),this.logger.error(me),me}},this.onPayloadHandler=ye=>{this.onProviderPayload(ye)},this.onConnectHandler=()=>{this.events.emit(D$1.connect)},this.onDisconnectHandler=()=>{this.onProviderDisconnect()},this.onProviderErrorHandler=ye=>{this.logger.error(ye),this.events.emit(D$1.error,ye),this.logger.info("Fatal socket error received, closing transport"),this.transportClose()},this.registerProviderListeners=()=>{this.provider.on(P.payload,this.onPayloadHandler),this.provider.on(P.connect,this.onConnectHandler),this.provider.on(P.disconnect,this.onDisconnectHandler),this.provider.on(P.error,this.onProviderErrorHandler)},this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?cjs$3.generateChildLogger(e.logger,this.name):cjs$3.pino(cjs$3.getDefaultLoggerOptions({level:e.logger||ct})),this.messages=new Pt(this.logger,e.core),this.subscriber=new At(this,this.logger),this.publisher=new mr(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||ge,this.projectId=e.projectId,this.bundleId=Jn(),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${pe$1}...`),await this.restartTransport(pe$1)}this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},pt$1)}get context(){return cjs$3.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(e,ye,me){this.isInitialized(),await this.publisher.publish(e,ye,me),await this.recordMessageEvent({topic:e,message:ye,publishedAt:Date.now()})}async subscribe(e,ye){var me;this.isInitialized();let be=((me=this.subscriber.topicMap.get(e))==null?void 0:me[0])||"";if(be)return be;let ve;const Ee=Oe=>{Oe.topic===e&&(this.subscriber.off(w$1.created,Ee),ve())};return await Promise.all([new Promise(Oe=>{ve=Oe,this.subscriber.on(w$1.created,Ee)}),new Promise(async Oe=>{be=await this.subscriber.subscribe(e,ye),Oe()})]),be}async unsubscribe(e,ye){this.isInitialized(),await this.subscriber.unsubscribe(e,ye)}on(e,ye){this.events.on(e,ye)}once(e,ye){this.events.once(e,ye)}off(e,ye){this.events.off(e,ye)}removeListener(e,ye){this.events.removeListener(e,ye)}async transportClose(){this.transportExplicitlyClosed=!0,this.hasExperiencedNetworkDisruption&&this.connected?await ut$1(this.provider.disconnect(),1e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.connected&&await this.provider.disconnect()}async transportOpen(e){if(this.transportExplicitlyClosed=!1,await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress){e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportClose(),await this.createProvider()),this.connectionAttemptInProgress=!0;try{await Promise.all([new Promise(ye=>{if(!this.initialized)return ye();this.subscriber.once(w$1.resubscribed,()=>{ye()})}),new Promise(async(ye,me)=>{try{await ut$1(this.provider.connect(),1e4,`Socket stalled when trying to connect to ${this.relayUrl}`)}catch(be){me(be);return}ye()})])}catch(ye){this.logger.error(ye);const me=ye;if(!this.isConnectionStalled(me.message))throw ye;this.provider.events.emit(P.disconnect)}finally{this.connectionAttemptInProgress=!1,this.hasExperiencedNetworkDisruption=!1}}}async restartTransport(e){await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.transportClose(),await this.createProvider(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await er$1())throw new Error("No internet connection detected. Please restart your network and try again.")}isConnectionStalled(e){return this.staleConnectionErrors.some(ye=>e.includes(ye))}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new JsonRpcProvider(new f(Xn({sdkVersion:gt$1,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:ye,message:me}=e;await this.messages.set(ye,me)}async shouldIgnoreMessageEvent(e){const{topic:ye,message:me}=e;if(!me||me.length===0)return this.logger.debug(`Ignoring invalid/empty message: ${me}`),!0;if(!await this.subscriber.isSubscribed(ye))return this.logger.debug(`Ignoring message for non-subscribed topic ${ye}`),!0;const be=this.messages.has(ye,me);return be&&this.logger.debug(`Ignoring duplicate message: ${me}`),be}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),isJsonRpcRequest(e)){if(!e.method.endsWith(lt))return;const ye=e.params,{topic:me,message:be,publishedAt:ve}=ye.data,Ee={topic:me,message:be,publishedAt:ve};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(Sr({type:"event",event:ye.id},Ee)),this.events.emit(ye.id,Ee),await this.acknowledgePayload(e),await this.onMessageEvent(Ee)}else isJsonRpcResponse(e)&&this.events.emit(D$1.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(D$1.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const ye=formatJsonRpcResult(e.id,!0);await this.provider.connection.send(ye)}unregisterProviderListeners(){this.provider.off(P.payload,this.onPayloadHandler),this.provider.off(P.connect,this.onConnectHandler),this.provider.off(P.disconnect,this.onDisconnectHandler),this.provider.off(P.error,this.onProviderErrorHandler)}async registerEventListeners(){this.events.on(D$1.connection_stalled,()=>{this.restartTransport().catch(ye=>this.logger.error(ye))});let e=await er$1();nr$1(async ye=>{this.initialized&&e!==ye&&(e=ye,ye?await this.restartTransport().catch(me=>this.logger.error(me)):(this.hasExperiencedNetworkDisruption=!0,await this.transportClose().catch(me=>this.logger.error(me))))})}onProviderDisconnect(){this.events.emit(D$1.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||(this.logger.info("attemptToReconnect called. Connecting..."),setTimeout(async()=>{await this.restartTransport().catch(e=>this.logger.error(e))},cjs$4.toMiliseconds(dt)))}isInitialized(){if(!this.initialized){const{message:e}=N$1("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectionAttemptInProgress)return await new Promise(e=>{const ye=setInterval(()=>{this.connected&&(clearInterval(ye),e())},this.connectionStatusPollingInterval)});await this.restartTransport()}}}var Tr=Object.defineProperty,Lt$1=Object.getOwnPropertySymbols,Pr=Object.prototype.hasOwnProperty,xr=Object.prototype.propertyIsEnumerable,Ft$1=(fe,e,ye)=>e in fe?Tr(fe,e,{enumerable:!0,configurable:!0,writable:!0,value:ye}):fe[e]=ye,$t=(fe,e)=>{for(var ye in e||(e={}))Pr.call(e,ye)&&Ft$1(fe,ye,e[ye]);if(Lt$1)for(var ye of Lt$1(e))xr.call(e,ye)&&Ft$1(fe,ye,e[ye]);return fe};class Mt extends p$2{constructor(e,ye,me,be=O$1,ve=void 0){super(e,ye,me,be),this.core=e,this.logger=ye,this.name=me,this.map=new Map,this.version=Dt$1,this.cached=[],this.initialized=!1,this.storagePrefix=O$1,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(Ee=>{this.getKey&&Ee!==null&&!w$3(Ee)?this.map.set(this.getKey(Ee),Ee):Vt$1(Ee)?this.map.set(Ee.id,Ee):Mt$1(Ee)&&this.map.set(Ee.topic,Ee)}),this.cached=[],this.initialized=!0)},this.set=async(Ee,Oe)=>{this.isInitialized(),this.map.has(Ee)?await this.update(Ee,Oe):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:Ee,value:Oe}),this.map.set(Ee,Oe),await this.persist())},this.get=Ee=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:Ee}),this.getData(Ee)),this.getAll=Ee=>(this.isInitialized(),Ee?this.values.filter(Oe=>Object.keys(Ee).every(xe=>Bi$1(Oe[xe],Ee[xe]))):this.values),this.update=async(Ee,Oe)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:Ee,update:Oe});const xe=$t($t({},this.getData(Ee)),Oe);this.map.set(Ee,xe),await this.persist()},this.delete=async(Ee,Oe)=>{this.isInitialized(),this.map.has(Ee)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:Ee,reason:Oe}),this.map.delete(Ee),await this.persist())},this.logger=cjs$3.generateChildLogger(ye,this.name),this.storagePrefix=be,this.getKey=ve}get context(){return cjs$3.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const ye=this.map.get(e);if(!ye){const{message:me}=N$1("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(me),new Error(me)}return ye}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:ye}=N$1("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(ye),new Error(ye)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=N$1("NOT_INITIALIZED",this.name);throw new Error(e)}}}class kt{constructor(e,ye){this.core=e,this.logger=ye,this.name=Et,this.version=wt,this.events=new c$4,this.initialized=!1,this.storagePrefix=O$1,this.ignoredPayloadTypes=[_$1],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:me})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...me])]},this.create=async()=>{this.isInitialized();const me=Vn(),be=await this.core.crypto.setSymKey(me),ve=pt$2(cjs$4.FIVE_MINUTES),Ee={protocol:ht$1},Oe={topic:be,expiry:ve,relay:Ee,active:!1},xe=It$1({protocol:this.core.protocol,version:this.core.version,topic:be,symKey:me,relay:Ee});return await this.pairings.set(be,Oe),await this.core.relayer.subscribe(be),this.core.expirer.set(be,ve),{topic:be,uri:xe}},this.pair=async me=>{this.isInitialized(),this.isValidPair(me);const{topic:be,symKey:ve,relay:Ee}=wt$1(me.uri);let Oe;if(this.pairings.keys.includes(be)&&(Oe=this.pairings.get(be),Oe.active))throw new Error(`Pairing already exists: ${be}. Please try again with a new connection URI.`);const xe=pt$2(cjs$4.FIVE_MINUTES),gr={topic:be,relay:Ee,expiry:xe,active:!1};return await this.pairings.set(be,gr),this.core.expirer.set(be,xe),me.activatePairing&&await this.activate({topic:be}),this.events.emit(V$2.create,gr),this.core.crypto.keychain.has(be)||(await this.core.crypto.setSymKey(ve,be),await this.core.relayer.subscribe(be,{relay:Ee})),gr},this.activate=async({topic:me})=>{this.isInitialized();const be=pt$2(cjs$4.THIRTY_DAYS);await this.pairings.update(me,{active:!0,expiry:be}),this.core.expirer.set(me,be)},this.ping=async me=>{this.isInitialized(),await this.isValidPing(me);const{topic:be}=me;if(this.pairings.keys.includes(be)){const ve=await this.sendRequest(be,"wc_pairingPing",{}),{done:Ee,resolve:Oe,reject:xe}=at$2();this.events.once(yt$2("pairing_ping",ve),({error:gr})=>{gr?xe(gr):Oe()}),await Ee()}},this.updateExpiry=async({topic:me,expiry:be})=>{this.isInitialized(),await this.pairings.update(me,{expiry:be})},this.updateMetadata=async({topic:me,metadata:be})=>{this.isInitialized(),await this.pairings.update(me,{peerMetadata:be})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async me=>{this.isInitialized(),await this.isValidDisconnect(me);const{topic:be}=me;this.pairings.keys.includes(be)&&(await this.sendRequest(be,"wc_pairingDelete",U$2("USER_DISCONNECTED")),await this.deletePairing(be))},this.sendRequest=async(me,be,ve)=>{const Ee=formatJsonRpcRequest(be,ve),Oe=await this.core.crypto.encode(me,Ee),xe=F$1[be].req;return this.core.history.set(me,Ee),this.core.relayer.publish(me,Oe,xe),Ee.id},this.sendResult=async(me,be,ve)=>{const Ee=formatJsonRpcResult(me,ve),Oe=await this.core.crypto.encode(be,Ee),xe=await this.core.history.get(be,me),gr=F$1[xe.request.method].res;await this.core.relayer.publish(be,Oe,gr),await this.core.history.resolve(Ee)},this.sendError=async(me,be,ve)=>{const Ee=formatJsonRpcError(me,ve),Oe=await this.core.crypto.encode(be,Ee),xe=await this.core.history.get(be,me),gr=F$1[xe.request.method]?F$1[xe.request.method].res:F$1.unregistered_method.res;await this.core.relayer.publish(be,Oe,gr),await this.core.history.resolve(Ee)},this.deletePairing=async(me,be)=>{await this.core.relayer.unsubscribe(me),await Promise.all([this.pairings.delete(me,U$2("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(me),be?Promise.resolve():this.core.expirer.del(me)])},this.cleanup=async()=>{const me=this.pairings.getAll().filter(be=>mt$2(be.expiry));await Promise.all(me.map(be=>this.deletePairing(be.topic)))},this.onRelayEventRequest=me=>{const{topic:be,payload:ve}=me;switch(ve.method){case"wc_pairingPing":return this.onPairingPingRequest(be,ve);case"wc_pairingDelete":return this.onPairingDeleteRequest(be,ve);default:return this.onUnknownRpcMethodRequest(be,ve)}},this.onRelayEventResponse=async me=>{const{topic:be,payload:ve}=me,Ee=(await this.core.history.get(be,ve.id)).request.method;switch(Ee){case"wc_pairingPing":return this.onPairingPingResponse(be,ve);default:return this.onUnknownRpcMethodResponse(Ee)}},this.onPairingPingRequest=async(me,be)=>{const{id:ve}=be;try{this.isValidPing({topic:me}),await this.sendResult(ve,me,!0),this.events.emit(V$2.ping,{id:ve,topic:me})}catch(Ee){await this.sendError(ve,me,Ee),this.logger.error(Ee)}},this.onPairingPingResponse=(me,be)=>{const{id:ve}=be;setTimeout(()=>{isJsonRpcResult(be)?this.events.emit(yt$2("pairing_ping",ve),{}):isJsonRpcError(be)&&this.events.emit(yt$2("pairing_ping",ve),{error:be.error})},500)},this.onPairingDeleteRequest=async(me,be)=>{const{id:ve}=be;try{this.isValidDisconnect({topic:me}),await this.deletePairing(me),this.events.emit(V$2.delete,{id:ve,topic:me})}catch(Ee){await this.sendError(ve,me,Ee),this.logger.error(Ee)}},this.onUnknownRpcMethodRequest=async(me,be)=>{const{id:ve,method:Ee}=be;try{if(this.registeredMethods.includes(Ee))return;const Oe=U$2("WC_METHOD_UNSUPPORTED",Ee);await this.sendError(ve,me,Oe),this.logger.error(Oe)}catch(Oe){await this.sendError(ve,me,Oe),this.logger.error(Oe)}},this.onUnknownRpcMethodResponse=me=>{this.registeredMethods.includes(me)||this.logger.error(U$2("WC_METHOD_UNSUPPORTED",me))},this.isValidPair=me=>{var be;if(!Ht$1(me)){const{message:Ee}=N$1("MISSING_OR_INVALID",`pair() params: ${me}`);throw new Error(Ee)}if(!kt$1(me.uri)){const{message:Ee}=N$1("MISSING_OR_INVALID",`pair() uri: ${me.uri}`);throw new Error(Ee)}const ve=wt$1(me.uri);if(!((be=ve==null?void 0:ve.relay)!=null&&be.protocol)){const{message:Ee}=N$1("MISSING_OR_INVALID","pair() uri#relay-protocol");throw new Error(Ee)}if(!(ve!=null&&ve.symKey)){const{message:Ee}=N$1("MISSING_OR_INVALID","pair() uri#symKey");throw new Error(Ee)}},this.isValidPing=async me=>{if(!Ht$1(me)){const{message:ve}=N$1("MISSING_OR_INVALID",`ping() params: ${me}`);throw new Error(ve)}const{topic:be}=me;await this.isValidPairingTopic(be)},this.isValidDisconnect=async me=>{if(!Ht$1(me)){const{message:ve}=N$1("MISSING_OR_INVALID",`disconnect() params: ${me}`);throw new Error(ve)}const{topic:be}=me;await this.isValidPairingTopic(be)},this.isValidPairingTopic=async me=>{if(!h$2(me,!1)){const{message:be}=N$1("MISSING_OR_INVALID",`pairing topic should be a string: ${me}`);throw new Error(be)}if(!this.pairings.keys.includes(me)){const{message:be}=N$1("NO_MATCHING_KEY",`pairing topic doesn't exist: ${me}`);throw new Error(be)}if(mt$2(this.pairings.get(me).expiry)){await this.deletePairing(me);const{message:be}=N$1("EXPIRED",`pairing topic: ${me}`);throw new Error(be)}},this.core=e,this.logger=cjs$3.generateChildLogger(ye,this.name),this.pairings=new Mt(this.core,this.logger,this.name,this.storagePrefix)}get context(){return cjs$3.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=N$1("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(D$1.message,async e=>{const{topic:ye,message:me}=e;if(!this.pairings.keys.includes(ye)||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(me)))return;const be=await this.core.crypto.decode(ye,me);try{isJsonRpcRequest(be)?(this.core.history.set(ye,be),this.onRelayEventRequest({topic:ye,payload:be})):isJsonRpcResponse(be)&&(await this.core.history.resolve(be),await this.onRelayEventResponse({topic:ye,payload:be}),this.core.history.delete(ye,be.id))}catch(ve){this.logger.error(ve)}})}registerExpirerEvents(){this.core.expirer.on(v.expired,async e=>{const{topic:ye}=ft$2(e.target);ye&&this.pairings.keys.includes(ye)&&(await this.deletePairing(ye,!0),this.events.emit(V$2.expire,{topic:ye}))})}}let Kt$1=class extends h$3{constructor(e,ye){super(e,ye),this.core=e,this.logger=ye,this.records=new Map,this.events=new c$4.EventEmitter,this.name=vt,this.version=It,this.cached=[],this.initialized=!1,this.storagePrefix=O$1,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(me=>this.records.set(me.id,me)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(me,be,ve)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:me,request:be,chainId:ve}),this.records.has(be.id))return;const Ee={id:be.id,topic:me,request:{method:be.method,params:be.params||null},chainId:ve,expiry:pt$2(cjs$4.THIRTY_DAYS)};this.records.set(Ee.id,Ee),this.events.emit(R.created,Ee)},this.resolve=async me=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:me}),!this.records.has(me.id))return;const be=await this.getRecord(me.id);typeof be.response>"u"&&(be.response=isJsonRpcError(me)?{error:me.error}:{result:me.result},this.records.set(be.id,be),this.events.emit(R.updated,be))},this.get=async(me,be)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:me,id:be}),await this.getRecord(be)),this.delete=(me,be)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:be}),this.values.forEach(ve=>{if(ve.topic===me){if(typeof be<"u"&&ve.id!==be)return;this.records.delete(ve.id),this.events.emit(R.deleted,ve)}})},this.exists=async(me,be)=>(this.isInitialized(),this.records.has(be)?(await this.getRecord(be)).topic===me:!1),this.on=(me,be)=>{this.events.on(me,be)},this.once=(me,be)=>{this.events.once(me,be)},this.off=(me,be)=>{this.events.off(me,be)},this.removeListener=(me,be)=>{this.events.removeListener(me,be)},this.logger=cjs$3.generateChildLogger(ye,this.name)}get context(){return cjs$3.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(ye=>{if(typeof ye.response<"u")return;const me={topic:ye.topic,request:formatJsonRpcRequest(ye.request.method,ye.request.params,ye.id),chainId:ye.chainId};return e.push(me)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const ye=this.records.get(e);if(!ye){const{message:me}=N$1("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(me)}return ye}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(R.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:ye}=N$1("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(ye),new Error(ye)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(R.created,e=>{const ye=R.created;this.logger.info(`Emitting ${ye}`),this.logger.debug({type:"event",event:ye,record:e}),this.persist()}),this.events.on(R.updated,e=>{const ye=R.updated;this.logger.info(`Emitting ${ye}`),this.logger.debug({type:"event",event:ye,record:e}),this.persist()}),this.events.on(R.deleted,e=>{const ye=R.deleted;this.logger.info(`Emitting ${ye}`),this.logger.debug({type:"event",event:ye,record:e}),this.persist()}),this.core.heartbeat.on(cjs$5.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.records.forEach(e=>{cjs$4.toMiliseconds(e.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${e.id}`),this.delete(e.topic,e.id))})}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=N$1("NOT_INITIALIZED",this.name);throw new Error(e)}}},Bt$1=class extends E{constructor(e,ye){super(e,ye),this.core=e,this.logger=ye,this.expirations=new Map,this.events=new c$4.EventEmitter,this.name=Ct,this.version=Rt,this.cached=[],this.initialized=!1,this.storagePrefix=O$1,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(me=>this.expirations.set(me.target,me)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=me=>{try{const be=this.formatTarget(me);return typeof this.getExpiration(be)<"u"}catch{return!1}},this.set=(me,be)=>{this.isInitialized();const ve=this.formatTarget(me),Ee={target:ve,expiry:be};this.expirations.set(ve,Ee),this.checkExpiry(ve,Ee),this.events.emit(v.created,{target:ve,expiration:Ee})},this.get=me=>{this.isInitialized();const be=this.formatTarget(me);return this.getExpiration(be)},this.del=me=>{if(this.isInitialized(),this.has(me)){const be=this.formatTarget(me),ve=this.getExpiration(be);this.expirations.delete(be),this.events.emit(v.deleted,{target:be,expiration:ve})}},this.on=(me,be)=>{this.events.on(me,be)},this.once=(me,be)=>{this.events.once(me,be)},this.off=(me,be)=>{this.events.off(me,be)},this.removeListener=(me,be)=>{this.events.removeListener(me,be)},this.logger=cjs$3.generateChildLogger(ye,this.name)}get context(){return cjs$3.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return lt$1(e);if(typeof e=="number")return dt$1(e);const{message:ye}=N$1("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(ye)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(v.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:ye}=N$1("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(ye),new Error(ye)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const ye=this.expirations.get(e);if(!ye){const{message:me}=N$1("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(me),new Error(me)}return ye}checkExpiry(e,ye){const{expiry:me}=ye;cjs$4.toMiliseconds(me)-Date.now()<=0&&this.expire(e,ye)}expire(e,ye){this.expirations.delete(e),this.events.emit(v.expired,{target:e,expiration:ye})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,ye)=>this.checkExpiry(ye,e))}registerEventListeners(){this.core.heartbeat.on(cjs$5.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(v.created,e=>{const ye=v.created;this.logger.info(`Emitting ${ye}`),this.logger.debug({type:"event",event:ye,data:e}),this.persist()}),this.events.on(v.expired,e=>{const ye=v.expired;this.logger.info(`Emitting ${ye}`),this.logger.debug({type:"event",event:ye,data:e}),this.persist()}),this.events.on(v.deleted,e=>{const ye=v.deleted;this.logger.info(`Emitting ${ye}`),this.logger.debug({type:"event",event:ye,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=N$1("NOT_INITIALIZED",this.name);throw new Error(e)}}};class Vt extends y{constructor(e,ye){super(e,ye),this.projectId=e,this.logger=ye,this.name=Z,this.initialized=!1,this.queue=[],this.verifyDisabled=!1,this.init=async me=>{if(this.verifyDisabled||C$1()||!D$2())return;const be=this.getVerifyUrl(me==null?void 0:me.verifyUrl);this.verifyUrl!==be&&this.removeIframe(),this.verifyUrl=be;try{await this.createIframe()}catch(ve){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(ve)}if(!this.initialized){this.removeIframe(),this.verifyUrl=ee;try{await this.createIframe()}catch(ve){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(ve),this.verifyDisabled=!0}}},this.register=async me=>{this.initialized?this.sendPost(me.attestationId):(this.addToQueue(me.attestationId),await this.init())},this.resolve=async me=>{if(this.isDevEnv)return"";const be=this.getVerifyUrl(me==null?void 0:me.verifyUrl);let ve;try{ve=await this.fetchAttestation(me.attestationId,be)}catch(Ee){this.logger.info(`failed to resolve attestation: ${me.attestationId} from url: ${be}`),this.logger.info(Ee),ve=await this.fetchAttestation(me.attestationId,ee)}return ve},this.fetchAttestation=async(me,be)=>{this.logger.info(`resolving attestation: ${me} from url: ${be}`);const ve=this.startAbortTimer(cjs$4.ONE_SECOND*2),Ee=await fetch(`${be}/attestation/${me}`,{signal:this.abortController.signal});return clearTimeout(ve),Ee.status===200?await Ee.json():void 0},this.addToQueue=me=>{this.queue.push(me)},this.processQueue=()=>{this.queue.length!==0&&(this.queue.forEach(me=>this.sendPost(me)),this.queue=[])},this.sendPost=me=>{var be;try{if(!this.iframe)return;(be=this.iframe.contentWindow)==null||be.postMessage(me,"*"),this.logger.info(`postMessage sent: ${me} ${this.verifyUrl}`)}catch{}},this.createIframe=async()=>{let me;const be=ve=>{ve.data==="verify_ready"&&(this.initialized=!0,this.processQueue(),window.removeEventListener("message",be),me())};await Promise.race([new Promise(ve=>{if(document.getElementById(Z))return ve();window.addEventListener("message",be);const Ee=document.createElement("iframe");Ee.id=Z,Ee.src=`${this.verifyUrl}/${this.projectId}`,Ee.style.display="none",document.body.append(Ee),this.iframe=Ee,me=ve}),new Promise((ve,Ee)=>setTimeout(()=>{window.removeEventListener("message",be),Ee("verify iframe load timeout")},cjs$4.toMiliseconds(cjs$4.FIVE_SECONDS)))])},this.removeIframe=()=>{this.iframe&&(this.iframe.remove(),this.iframe=void 0,this.initialized=!1)},this.getVerifyUrl=me=>{let be=me||$;return _t.includes(be)||(this.logger.info(`verify url: ${be}, not included in trusted list, assigning default: ${$}`),be=$),be},this.logger=cjs$3.generateChildLogger(ye,this.name),this.verifyUrl=$,this.abortController=new AbortController,this.isDevEnv=te$2()&&process.env.IS_VITEST}get context(){return cjs$3.getLoggerContext(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),cjs$4.toMiliseconds(e))}}var Or=Object.defineProperty,qt$1=Object.getOwnPropertySymbols,Ar=Object.prototype.hasOwnProperty,zr=Object.prototype.propertyIsEnumerable,jt$1=(fe,e,ye)=>e in fe?Or(fe,e,{enumerable:!0,configurable:!0,writable:!0,value:ye}):fe[e]=ye,Gt$1=(fe,e)=>{for(var ye in e||(e={}))Ar.call(e,ye)&&jt$1(fe,ye,e[ye]);if(qt$1)for(var ye of qt$1(e))zr.call(e,ye)&&jt$1(fe,ye,e[ye]);return fe};let te$1=class ca extends n{constructor(e){super(e),this.protocol=le$1,this.version=Xe,this.name=Q$1,this.events=new c$4.EventEmitter,this.initialized=!1,this.on=(me,be)=>this.events.on(me,be),this.once=(me,be)=>this.events.once(me,be),this.off=(me,be)=>this.events.off(me,be),this.removeListener=(me,be)=>this.events.removeListener(me,be),this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||ge,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const ye=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:cjs$3.pino(cjs$3.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||Qe$1.logger}));this.logger=cjs$3.generateChildLogger(ye,this.name),this.heartbeat=new cjs$5.HeartBeat,this.crypto=new Tt(this,this.logger,e==null?void 0:e.keychain),this.history=new Kt$1(this,this.logger),this.expirer=new Bt$1(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new h$4(Gt$1(Gt$1({},Ze$1),e==null?void 0:e.storageOptions)),this.relayer=new Ut({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new kt(this,this.logger),this.verify=new Vt(this.projectId||"",this.logger)}static async init(e){const ye=new ca(e);await ye.initialize();const me=await ye.crypto.getClientId();return await ye.storage.setItem(yt$1,me),ye}get context(){return cjs$3.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}};const Nr=te$1;let b$1=class{constructor(e){this.opts=e,this.protocol="wc",this.version=2}};class S{constructor(e){this.client=e}}function L(fe,e){return fe.includes(":")?[fe]:e.chains||[]}const p="base16",H$1="utf8",_=1;function Ln(fe){const e=sha256$1.hash(fromString(fe,H$1));return toString(e,p)}const Ce="ReactNative",m={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"};function te(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function C(){return!getDocument_1()&&!!getNavigator_1()&&navigator.product===Ce}function D(){return!te()&&!!getNavigator_1()}function T(){return C()?m.reactNative:te()?m.node:D()?m.browser:m.unknown}function Qn(){return getWindowMetadata_1()||{name:"",description:"",url:"",icons:[""]}}function O(fe,e){return fe.filter(ye=>e.includes(ye)).length===fe.length}function at(fe=cjs$4.FIVE_MINUTES,e){const ye=cjs$4.toMiliseconds(fe||cjs$4.FIVE_MINUTES);let me,be,ve;return{resolve:Ee=>{ve&&me&&(clearTimeout(ve),me(Ee))},reject:Ee=>{ve&&be&&(clearTimeout(ve),be(Ee))},done:()=>new Promise((Ee,Oe)=>{ve=setTimeout(()=>{Oe(new Error(e))},ye),me=Ee,be=Oe})}}function ft(fe){const[e,ye]=fe.split(":"),me={id:void 0,topic:void 0};if(e==="topic"&&typeof ye=="string")me.topic=ye;else if(e==="id"&&Number.isInteger(Number(ye)))me.id=Number(ye);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${ye}`);return me}function pt(fe,e){return cjs$4.fromMiliseconds((e||Date.now())+cjs$4.toMiliseconds(fe))}function mt(fe){return Date.now()>=cjs$4.toMiliseconds(fe)}function yt(fe,e){return`${fe}${e?`:${e}`:""}`}async function ht({id:fe,topic:e,wcDeepLink:ye}){try{if(!ye)return;const me=typeof ye=="string"?JSON.parse(ye):ye;let be=me==null?void 0:me.href;if(typeof be!="string")return;be.endsWith("/")&&(be=be.slice(0,-1));const ve=`${be}/wc?requestId=${fe}&sessionTopic=${e}`,Ee=T();Ee===m.browser?ve.startsWith("https://")?window.open(ve,"_blank","noreferrer noopener"):window.open(ve,"_self","noreferrer noopener"):Ee===m.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(ve)}catch(me){console.error(me)}}async function gt(fe,e){try{return await fe.getItem(e)||(D()?localStorage.getItem(e):void 0)}catch(ye){console.error(ye)}}function A$1(fe){const e=[];return fe.forEach(ye=>{const[me,be]=ye.split(":");e.push(`${me}:${be}`)}),e}function Je(fe){const e=[];return Object.values(fe).forEach(ye=>{e.push(...A$1(ye.accounts))}),e}function Qe(fe,e){const ye=[];return Object.values(fe).forEach(me=>{A$1(me.accounts).includes(e)&&ye.push(...me.methods)}),ye}function Ze(fe,e){const ye=[];return Object.values(fe).forEach(me=>{A$1(me.accounts).includes(e)&&ye.push(...me.events)}),ye}function jt(fe,e){const ye=un(fe,e);if(ye)throw new Error(ye.message);const me={};for(const[be,ve]of Object.entries(fe))me[be]={methods:ve.methods,events:ve.events,chains:ve.accounts.map(Ee=>`${Ee.split(":")[0]}:${Ee.split(":")[1]}`)};return me}const en={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},nn={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function N(fe,e){const{message:ye,code:me}=nn[fe];return{message:e?`${ye} ${e}`:ye,code:me}}function U$1(fe,e){const{message:ye,code:me}=en[fe];return{message:e?`${ye} ${e}`:ye,code:me}}function k(fe,e){return Array.isArray(fe)?typeof e<"u"&&fe.length?fe.every(e):!0:!1}function B(fe){return Object.getPrototypeOf(fe)===Object.prototype&&Object.keys(fe).length}function w(fe){return typeof fe>"u"}function h(fe,e){return e&&w(fe)?!0:typeof fe=="string"&&!!fe.trim().length}function G$1(fe,e){return e&&w(fe)?!0:typeof fe=="number"&&!isNaN(fe)}function Dt(fe,e){const{requiredNamespaces:ye}=e,me=Object.keys(fe.namespaces),be=Object.keys(ye);let ve=!0;return O(be,me)?(me.forEach(Ee=>{const{accounts:Oe,methods:xe,events:gr}=fe.namespaces[Ee],we=A$1(Oe),Se=ye[Ee];(!O(L(Ee,Se),we)||!O(Se.methods,xe)||!O(Se.events,gr))&&(ve=!1)}),ve):!1}function V$1(fe){return h(fe,!1)&&fe.includes(":")?fe.split(":").length===2:!1}function tn(fe){if(h(fe,!1)&&fe.includes(":")){const e=fe.split(":");if(e.length===3){const ye=e[0]+":"+e[1];return!!e[2]&&V$1(ye)}}return!1}function Kt(fe,e){let ye=null;return h(fe==null?void 0:fe.publicKey,!1)||(ye=N("MISSING_OR_INVALID",`${e} controller public key should be a string`)),ye}function ie(fe){let e=!0;return k(fe)?fe.length&&(e=fe.every(ye=>h(ye,!1))):e=!1,e}function rn(fe,e,ye){let me=null;return k(e)&&e.length?e.forEach(be=>{me||V$1(be)||(me=U$1("UNSUPPORTED_CHAINS",`${ye}, chain ${be} should be a string and conform to "namespace:chainId" format`))}):V$1(fe)||(me=U$1("UNSUPPORTED_CHAINS",`${ye}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),me}function on(fe,e,ye){let me=null;return Object.entries(fe).forEach(([be,ve])=>{if(me)return;const Ee=rn(be,L(be,ve),`${e} ${ye}`);Ee&&(me=Ee)}),me}function sn(fe,e){let ye=null;return k(fe)?fe.forEach(me=>{ye||tn(me)||(ye=U$1("UNSUPPORTED_ACCOUNTS",`${e}, account ${me} should be a string and conform to "namespace:chainId:address" format`))}):ye=U$1("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),ye}function cn(fe,e){let ye=null;return Object.values(fe).forEach(me=>{if(ye)return;const be=sn(me==null?void 0:me.accounts,`${e} namespace`);be&&(ye=be)}),ye}function an(fe,e){let ye=null;return ie(fe==null?void 0:fe.methods)?ie(fe==null?void 0:fe.events)||(ye=U$1("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):ye=U$1("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),ye}function ce$1(fe,e){let ye=null;return Object.values(fe).forEach(me=>{if(ye)return;const be=an(me,`${e}, namespace`);be&&(ye=be)}),ye}function Lt(fe,e,ye){let me=null;if(fe&&B(fe)){const be=ce$1(fe,e);be&&(me=be);const ve=on(fe,e,ye);ve&&(me=ve)}else me=N("MISSING_OR_INVALID",`${e}, ${ye} should be an object with data`);return me}function un(fe,e){let ye=null;if(fe&&B(fe)){const me=ce$1(fe,e);me&&(ye=me);const be=cn(fe,e);be&&(ye=be)}else ye=N("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return ye}function ln(fe){return h(fe.protocol,!0)}function xt(fe,e){let ye=!1;return e&&!fe?ye=!0:fe&&k(fe)&&fe.length&&fe.forEach(me=>{ye=ln(me)}),ye}function Ft(fe){return typeof fe=="number"}function Ht(fe){return typeof fe<"u"&&typeof fe!==null}function qt(fe){return!(!fe||typeof fe!="object"||!fe.code||!G$1(fe.code,!1)||!fe.message||!h(fe.message,!1))}function Bt(fe){return!(w(fe)||!h(fe.method,!1))}function Gt(fe){return!(w(fe)||w(fe.result)&&w(fe.error)||!G$1(fe.id,!1)||!h(fe.jsonrpc,!1))}function Wt(fe){return!(w(fe)||!h(fe.name,!1))}function zt(fe,e){return!(!V$1(e)||!Je(fe).includes(e))}function Yt(fe,e,ye){return h(ye,!1)?Qe(fe,e).includes(ye):!1}function Jt(fe,e,ye){return h(ye,!1)?Ze(fe,e).includes(ye):!1}function dn(fe,e,ye){let me=null;const be=Qt(fe),ve=Zt(e),Ee=Object.keys(be),Oe=Object.keys(ve),xe=fn(Object.keys(fe)),gr=fn(Object.keys(e)),we=xe.filter(Se=>!gr.includes(Se));return we.length&&(me=N("NON_CONFORMING_NAMESPACES",`${ye} namespaces keys don't satisfy requiredNamespaces.
      Required: ${we.toString()}
      Received: ${Object.keys(e).toString()}`)),O(Ee,Oe)||(me=N("NON_CONFORMING_NAMESPACES",`${ye} namespaces chains don't satisfy required namespaces.
      Required: ${Ee.toString()}
      Approved: ${Oe.toString()}`)),Object.keys(e).forEach(Se=>{if(!Se.includes(":")||me)return;const $r=A$1(e[Se].accounts);$r.includes(Se)||(me=N("NON_CONFORMING_NAMESPACES",`${ye} namespaces accounts don't satisfy namespace accounts for ${Se}
        Required: ${Se}
        Approved: ${$r.toString()}`))}),Ee.forEach(Se=>{me||(O(be[Se].methods,ve[Se].methods)?O(be[Se].events,ve[Se].events)||(me=N("NON_CONFORMING_NAMESPACES",`${ye} namespaces events don't satisfy namespace events for ${Se}`)):me=N("NON_CONFORMING_NAMESPACES",`${ye} namespaces methods don't satisfy namespace methods for ${Se}`))}),me}function Qt(fe){const e={};return Object.keys(fe).forEach(ye=>{var me;ye.includes(":")?e[ye]=fe[ye]:(me=fe[ye].chains)==null||me.forEach(be=>{e[be]={methods:fe[ye].methods,events:fe[ye].events}})}),e}function fn(fe){return[...new Set(fe.map(e=>e.includes(":")?e.split(":")[0]:e))]}function Zt(fe){const e={};return Object.keys(fe).forEach(ye=>{if(ye.includes(":"))e[ye]=fe[ye];else{const me=A$1(fe[ye].accounts);me==null||me.forEach(be=>{e[be]={accounts:fe[ye].accounts.filter(ve=>ve.includes(`${be}:`)),methods:fe[ye].methods,events:fe[ye].events}})}}),e}function Xt(fe,e){return G$1(fe,!1)&&fe<=e.max&&fe>=e.min}const ae$1={};class tr{static get(e){return ae$1[e]}static set(e,ye){ae$1[e]=ye}static delete(e){delete ae$1[e]}}const X="wc",F=2,H="client",G=`${X}@${F}:${H}:`,M={name:H,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},W="WALLETCONNECT_DEEPLINK_CHOICE",ne="proposal",oe="Proposal expired",ae="session",A=cjs$4.SEVEN_DAYS,ce="engine",V={wc_sessionPropose:{req:{ttl:cjs$4.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:cjs$4.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:cjs$4.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:cjs$4.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:cjs$4.ONE_DAY,prompt:!1,tag:1104},res:{ttl:cjs$4.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:cjs$4.ONE_DAY,prompt:!1,tag:1106},res:{ttl:cjs$4.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:cjs$4.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:cjs$4.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:cjs$4.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:cjs$4.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:cjs$4.ONE_DAY,prompt:!1,tag:1112},res:{ttl:cjs$4.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:cjs$4.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:cjs$4.THIRTY_SECONDS,prompt:!1,tag:1115}}},U={min:cjs$4.FIVE_MINUTES,max:cjs$4.SEVEN_DAYS},I={idle:"IDLE",active:"ACTIVE"},le="request",pe=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var os=Object.defineProperty,as=Object.defineProperties,cs=Object.getOwnPropertyDescriptors,he=Object.getOwnPropertySymbols,ls=Object.prototype.hasOwnProperty,ps=Object.prototype.propertyIsEnumerable,de=(fe,e,ye)=>e in fe?os(fe,e,{enumerable:!0,configurable:!0,writable:!0,value:ye}):fe[e]=ye,g=(fe,e)=>{for(var ye in e||(e={}))ls.call(e,ye)&&de(fe,ye,e[ye]);if(he)for(var ye of he(e))ps.call(e,ye)&&de(fe,ye,e[ye]);return fe},b=(fe,e)=>as(fe,cs(e));class hs extends S{constructor(e){super(e),this.name=ce,this.events=new c$4,this.initialized=!1,this.ignoredPayloadTypes=[_],this.requestQueue={state:I.idle,queue:[]},this.sessionRequestQueue={state:I.idle,queue:[]},this.requestQueueDelay=cjs$4.ONE_SECOND,this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),this.client.core.pairing.register({methods:Object.keys(V)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},cjs$4.toMiliseconds(this.requestQueueDelay)))},this.connect=async ye=>{await this.isInitialized();const me=b(g({},ye),{requiredNamespaces:ye.requiredNamespaces||{},optionalNamespaces:ye.optionalNamespaces||{}});await this.isValidConnect(me);const{pairingTopic:be,requiredNamespaces:ve,optionalNamespaces:Ee,sessionProperties:Oe,relays:xe}=me;let gr=be,we,Se=!1;if(gr&&(Se=this.client.core.pairing.pairings.get(gr).active),!gr||!Se){const{topic:qr,uri:Hr}=await this.client.core.pairing.create();gr=qr,we=Hr}const $r=await this.client.core.crypto.generateKeyPair(),Fr=g({requiredNamespaces:ve,optionalNamespaces:Ee,relays:xe??[{protocol:ht$1}],proposer:{publicKey:$r,metadata:this.client.metadata}},Oe&&{sessionProperties:Oe}),{reject:Br,resolve:Vr,done:oo}=at(cjs$4.FIVE_MINUTES,oe);if(this.events.once(yt("session_connect"),async({error:qr,session:Hr})=>{if(qr)Br(qr);else if(Hr){Hr.self.publicKey=$r;const Yr=b(g({},Hr),{requiredNamespaces:Hr.requiredNamespaces,optionalNamespaces:Hr.optionalNamespaces});await this.client.session.set(Hr.topic,Yr),await this.setExpiry(Hr.topic,Hr.expiry),gr&&await this.client.core.pairing.updateMetadata({topic:gr,metadata:Hr.peer.metadata}),Vr(Yr)}}),!gr){const{message:qr}=N("NO_MATCHING_KEY",`connect() pairing topic: ${gr}`);throw new Error(qr)}const so=await this.sendRequest({topic:gr,method:"wc_sessionPropose",params:Fr}),kr=pt(cjs$4.FIVE_MINUTES);return await this.setProposal(so,g({id:so,expiry:kr},Fr)),{uri:we,approval:oo}},this.pair=async ye=>(await this.isInitialized(),await this.client.core.pairing.pair(ye)),this.approve=async ye=>{await this.isInitialized(),await this.isValidApprove(ye);const{id:me,relayProtocol:be,namespaces:ve,sessionProperties:Ee}=ye,Oe=this.client.proposal.get(me);let{pairingTopic:xe,proposer:gr,requiredNamespaces:we,optionalNamespaces:Se}=Oe;xe=xe||"",B(we)||(we=jt(ve,"approve()"));const $r=await this.client.core.crypto.generateKeyPair(),Fr=gr.publicKey,Br=await this.client.core.crypto.generateSharedKey($r,Fr);xe&&me&&(await this.client.core.pairing.updateMetadata({topic:xe,metadata:gr.metadata}),await this.sendResult({id:me,topic:xe,result:{relay:{protocol:be??"irn"},responderPublicKey:$r}}),await this.client.proposal.delete(me,U$1("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:xe}));const Vr=g({relay:{protocol:be??"irn"},namespaces:ve,requiredNamespaces:we,optionalNamespaces:Se,pairingTopic:xe,controller:{publicKey:$r,metadata:this.client.metadata},expiry:pt(A)},Ee&&{sessionProperties:Ee});await this.client.core.relayer.subscribe(Br),await this.sendRequest({topic:Br,method:"wc_sessionSettle",params:Vr,throwOnFailedPublish:!0});const oo=b(g({},Vr),{topic:Br,pairingTopic:xe,acknowledged:!1,self:Vr.controller,peer:{publicKey:gr.publicKey,metadata:gr.metadata},controller:$r});return await this.client.session.set(Br,oo),await this.setExpiry(Br,pt(A)),{topic:Br,acknowledged:()=>new Promise(so=>setTimeout(()=>so(this.client.session.get(Br)),500))}},this.reject=async ye=>{await this.isInitialized(),await this.isValidReject(ye);const{id:me,reason:be}=ye,{pairingTopic:ve}=this.client.proposal.get(me);ve&&(await this.sendError(me,ve,be),await this.client.proposal.delete(me,U$1("USER_DISCONNECTED")))},this.update=async ye=>{await this.isInitialized(),await this.isValidUpdate(ye);const{topic:me,namespaces:be}=ye,ve=await this.sendRequest({topic:me,method:"wc_sessionUpdate",params:{namespaces:be}}),{done:Ee,resolve:Oe,reject:xe}=at();return this.events.once(yt("session_update",ve),({error:gr})=>{gr?xe(gr):Oe()}),await this.client.session.update(me,{namespaces:be}),{acknowledged:Ee}},this.extend=async ye=>{await this.isInitialized(),await this.isValidExtend(ye);const{topic:me}=ye,be=await this.sendRequest({topic:me,method:"wc_sessionExtend",params:{}}),{done:ve,resolve:Ee,reject:Oe}=at();return this.events.once(yt("session_extend",be),({error:xe})=>{xe?Oe(xe):Ee()}),await this.setExpiry(me,pt(A)),{acknowledged:ve}},this.request=async ye=>{await this.isInitialized(),await this.isValidRequest(ye);const{chainId:me,request:be,topic:ve,expiry:Ee}=ye,Oe=payloadId(),{done:xe,resolve:gr,reject:we}=at(Ee,"Request expired. Please try again.");return this.events.once(yt("session_request",Oe),({error:Se,result:$r})=>{Se?we(Se):gr($r)}),await Promise.all([new Promise(async Se=>{await this.sendRequest({clientRpcId:Oe,topic:ve,method:"wc_sessionRequest",params:{request:be,chainId:me},expiry:Ee,throwOnFailedPublish:!0}).catch($r=>we($r)),this.client.events.emit("session_request_sent",{topic:ve,request:be,chainId:me,id:Oe}),Se()}),new Promise(async Se=>{const $r=await gt(this.client.core.storage,W);ht({id:Oe,topic:ve,wcDeepLink:$r}),Se()}),xe()]).then(Se=>Se[2])},this.respond=async ye=>{await this.isInitialized(),await this.isValidRespond(ye);const{topic:me,response:be}=ye,{id:ve}=be;isJsonRpcResult(be)?await this.sendResult({id:ve,topic:me,result:be.result,throwOnFailedPublish:!0}):isJsonRpcError(be)&&await this.sendError(ve,me,be.error),this.cleanupAfterResponse(ye)},this.ping=async ye=>{await this.isInitialized(),await this.isValidPing(ye);const{topic:me}=ye;if(this.client.session.keys.includes(me)){const be=await this.sendRequest({topic:me,method:"wc_sessionPing",params:{}}),{done:ve,resolve:Ee,reject:Oe}=at();this.events.once(yt("session_ping",be),({error:xe})=>{xe?Oe(xe):Ee()}),await ve()}else this.client.core.pairing.pairings.keys.includes(me)&&await this.client.core.pairing.ping({topic:me})},this.emit=async ye=>{await this.isInitialized(),await this.isValidEmit(ye);const{topic:me,event:be,chainId:ve}=ye;await this.sendRequest({topic:me,method:"wc_sessionEvent",params:{event:be,chainId:ve}})},this.disconnect=async ye=>{await this.isInitialized(),await this.isValidDisconnect(ye);const{topic:me}=ye;this.client.session.keys.includes(me)?(await this.sendRequest({topic:me,method:"wc_sessionDelete",params:U$1("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession(me)):await this.client.core.pairing.disconnect({topic:me})},this.find=ye=>(this.isInitialized(),this.client.session.getAll().filter(me=>Dt(me,ye))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=async ye=>{if(ye.pairingTopic)try{const me=this.client.core.pairing.pairings.get(ye.pairingTopic),be=this.client.core.pairing.pairings.getAll().filter(ve=>{var Ee,Oe;return((Ee=ve.peerMetadata)==null?void 0:Ee.url)&&((Oe=ve.peerMetadata)==null?void 0:Oe.url)===ye.peer.metadata.url&&ve.topic&&ve.topic!==me.topic});if(be.length===0)return;this.client.logger.info(`Cleaning up ${be.length} duplicate pairing(s)`),await Promise.all(be.map(ve=>this.client.core.pairing.disconnect({topic:ve.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(me){this.client.logger.error(me)}},this.deleteSession=async(ye,me)=>{const{self:be}=this.client.session.get(ye);await this.client.core.relayer.unsubscribe(ye),this.client.session.delete(ye,U$1("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(be.publicKey)&&await this.client.core.crypto.deleteKeyPair(be.publicKey),this.client.core.crypto.keychain.has(ye)&&await this.client.core.crypto.deleteSymKey(ye),me||this.client.core.expirer.del(ye),this.client.core.storage.removeItem(W).catch(ve=>this.client.logger.warn(ve))},this.deleteProposal=async(ye,me)=>{await Promise.all([this.client.proposal.delete(ye,U$1("USER_DISCONNECTED")),me?Promise.resolve():this.client.core.expirer.del(ye)])},this.deletePendingSessionRequest=async(ye,me,be=!1)=>{await Promise.all([this.client.pendingRequest.delete(ye,me),be?Promise.resolve():this.client.core.expirer.del(ye)]),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(ve=>ve.id!==ye),be&&(this.sessionRequestQueue.state=I.idle)},this.setExpiry=async(ye,me)=>{this.client.session.keys.includes(ye)&&await this.client.session.update(ye,{expiry:me}),this.client.core.expirer.set(ye,me)},this.setProposal=async(ye,me)=>{await this.client.proposal.set(ye,me),this.client.core.expirer.set(ye,me.expiry)},this.setPendingSessionRequest=async ye=>{const me=V.wc_sessionRequest.req.ttl,{id:be,topic:ve,params:Ee,verifyContext:Oe}=ye;await this.client.pendingRequest.set(be,{id:be,topic:ve,params:Ee,verifyContext:Oe}),me&&this.client.core.expirer.set(be,pt(me))},this.sendRequest=async ye=>{const{topic:me,method:be,params:ve,expiry:Ee,relayRpcId:Oe,clientRpcId:xe,throwOnFailedPublish:gr}=ye,we=formatJsonRpcRequest(be,ve,xe);if(D()&&pe.includes(be)){const Fr=Ln(JSON.stringify(we));this.client.core.verify.register({attestationId:Fr})}const Se=await this.client.core.crypto.encode(me,we),$r=V[be].req;return Ee&&($r.ttl=Ee),Oe&&($r.id=Oe),this.client.core.history.set(me,we),gr?($r.internal=b(g({},$r.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(me,Se,$r)):this.client.core.relayer.publish(me,Se,$r).catch(Fr=>this.client.logger.error(Fr)),we.id},this.sendResult=async ye=>{const{id:me,topic:be,result:ve,throwOnFailedPublish:Ee}=ye,Oe=formatJsonRpcResult(me,ve),xe=await this.client.core.crypto.encode(be,Oe),gr=await this.client.core.history.get(be,me),we=V[gr.request.method].res;Ee?(we.internal=b(g({},we.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(be,xe,we)):this.client.core.relayer.publish(be,xe,we).catch(Se=>this.client.logger.error(Se)),await this.client.core.history.resolve(Oe)},this.sendError=async(ye,me,be)=>{const ve=formatJsonRpcError(ye,be),Ee=await this.client.core.crypto.encode(me,ve),Oe=await this.client.core.history.get(me,ye),xe=V[Oe.request.method].res;this.client.core.relayer.publish(me,Ee,xe),await this.client.core.history.resolve(ve)},this.cleanup=async()=>{const ye=[],me=[];this.client.session.getAll().forEach(be=>{mt(be.expiry)&&ye.push(be.topic)}),this.client.proposal.getAll().forEach(be=>{mt(be.expiry)&&me.push(be.id)}),await Promise.all([...ye.map(be=>this.deleteSession(be)),...me.map(be=>this.deleteProposal(be))])},this.onRelayEventRequest=async ye=>{this.requestQueue.queue.push(ye),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state===I.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=I.active;const ye=this.requestQueue.queue.shift();if(ye)try{this.processRequest(ye),await new Promise(me=>setTimeout(me,300))}catch(me){this.client.logger.warn(me)}}this.requestQueue.state=I.idle},this.processRequest=ye=>{const{topic:me,payload:be}=ye,ve=be.method;switch(ve){case"wc_sessionPropose":return this.onSessionProposeRequest(me,be);case"wc_sessionSettle":return this.onSessionSettleRequest(me,be);case"wc_sessionUpdate":return this.onSessionUpdateRequest(me,be);case"wc_sessionExtend":return this.onSessionExtendRequest(me,be);case"wc_sessionPing":return this.onSessionPingRequest(me,be);case"wc_sessionDelete":return this.onSessionDeleteRequest(me,be);case"wc_sessionRequest":return this.onSessionRequest(me,be);case"wc_sessionEvent":return this.onSessionEventRequest(me,be);default:return this.client.logger.info(`Unsupported request method ${ve}`)}},this.onRelayEventResponse=async ye=>{const{topic:me,payload:be}=ye,ve=(await this.client.core.history.get(me,be.id)).request.method;switch(ve){case"wc_sessionPropose":return this.onSessionProposeResponse(me,be);case"wc_sessionSettle":return this.onSessionSettleResponse(me,be);case"wc_sessionUpdate":return this.onSessionUpdateResponse(me,be);case"wc_sessionExtend":return this.onSessionExtendResponse(me,be);case"wc_sessionPing":return this.onSessionPingResponse(me,be);case"wc_sessionRequest":return this.onSessionRequestResponse(me,be);default:return this.client.logger.info(`Unsupported response method ${ve}`)}},this.onRelayEventUnknownPayload=ye=>{const{topic:me}=ye,{message:be}=N("MISSING_OR_INVALID",`Decoded payload on topic ${me} is not identifiable as a JSON-RPC request or a response.`);throw new Error(be)},this.onSessionProposeRequest=async(ye,me)=>{const{params:be,id:ve}=me;try{this.isValidConnect(g({},me.params));const Ee=pt(cjs$4.FIVE_MINUTES),Oe=g({id:ve,pairingTopic:ye,expiry:Ee},be);await this.setProposal(ve,Oe);const xe=Ln(JSON.stringify(me)),gr=await this.getVerifyContext(xe,Oe.proposer.metadata);this.client.events.emit("session_proposal",{id:ve,params:Oe,verifyContext:gr})}catch(Ee){await this.sendError(ve,ye,Ee),this.client.logger.error(Ee)}},this.onSessionProposeResponse=async(ye,me)=>{const{id:be}=me;if(isJsonRpcResult(me)){const{result:ve}=me;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:ve});const Ee=this.client.proposal.get(be);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:Ee});const Oe=Ee.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:Oe});const xe=ve.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:xe});const gr=await this.client.core.crypto.generateSharedKey(Oe,xe);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:gr});const we=await this.client.core.relayer.subscribe(gr);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:we}),await this.client.core.pairing.activate({topic:ye})}else isJsonRpcError(me)&&(await this.client.proposal.delete(be,U$1("USER_DISCONNECTED")),this.events.emit(yt("session_connect"),{error:me.error}))},this.onSessionSettleRequest=async(ye,me)=>{const{id:be,params:ve}=me;try{this.isValidSessionSettleRequest(ve);const{relay:Ee,controller:Oe,expiry:xe,namespaces:gr,requiredNamespaces:we,optionalNamespaces:Se,sessionProperties:$r,pairingTopic:Fr}=me.params,Br=g({topic:ye,relay:Ee,expiry:xe,namespaces:gr,acknowledged:!0,pairingTopic:Fr,requiredNamespaces:we,optionalNamespaces:Se,controller:Oe.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:Oe.publicKey,metadata:Oe.metadata}},$r&&{sessionProperties:$r});await this.sendResult({id:me.id,topic:ye,result:!0}),this.events.emit(yt("session_connect"),{session:Br}),this.cleanupDuplicatePairings(Br)}catch(Ee){await this.sendError(be,ye,Ee),this.client.logger.error(Ee)}},this.onSessionSettleResponse=async(ye,me)=>{const{id:be}=me;isJsonRpcResult(me)?(await this.client.session.update(ye,{acknowledged:!0}),this.events.emit(yt("session_approve",be),{})):isJsonRpcError(me)&&(await this.client.session.delete(ye,U$1("USER_DISCONNECTED")),this.events.emit(yt("session_approve",be),{error:me.error}))},this.onSessionUpdateRequest=async(ye,me)=>{const{params:be,id:ve}=me;try{const Ee=`${ye}_session_update`,Oe=tr.get(Ee);if(Oe&&this.isRequestOutOfSync(Oe,ve)){this.client.logger.info(`Discarding out of sync request - ${ve}`);return}this.isValidUpdate(g({topic:ye},be)),await this.client.session.update(ye,{namespaces:be.namespaces}),await this.sendResult({id:ve,topic:ye,result:!0}),this.client.events.emit("session_update",{id:ve,topic:ye,params:be}),tr.set(Ee,ve)}catch(Ee){await this.sendError(ve,ye,Ee),this.client.logger.error(Ee)}},this.isRequestOutOfSync=(ye,me)=>parseInt(me.toString().slice(0,-3))<=parseInt(ye.toString().slice(0,-3)),this.onSessionUpdateResponse=(ye,me)=>{const{id:be}=me;isJsonRpcResult(me)?this.events.emit(yt("session_update",be),{}):isJsonRpcError(me)&&this.events.emit(yt("session_update",be),{error:me.error})},this.onSessionExtendRequest=async(ye,me)=>{const{id:be}=me;try{this.isValidExtend({topic:ye}),await this.setExpiry(ye,pt(A)),await this.sendResult({id:be,topic:ye,result:!0}),this.client.events.emit("session_extend",{id:be,topic:ye})}catch(ve){await this.sendError(be,ye,ve),this.client.logger.error(ve)}},this.onSessionExtendResponse=(ye,me)=>{const{id:be}=me;isJsonRpcResult(me)?this.events.emit(yt("session_extend",be),{}):isJsonRpcError(me)&&this.events.emit(yt("session_extend",be),{error:me.error})},this.onSessionPingRequest=async(ye,me)=>{const{id:be}=me;try{this.isValidPing({topic:ye}),await this.sendResult({id:be,topic:ye,result:!0}),this.client.events.emit("session_ping",{id:be,topic:ye})}catch(ve){await this.sendError(be,ye,ve),this.client.logger.error(ve)}},this.onSessionPingResponse=(ye,me)=>{const{id:be}=me;setTimeout(()=>{isJsonRpcResult(me)?this.events.emit(yt("session_ping",be),{}):isJsonRpcError(me)&&this.events.emit(yt("session_ping",be),{error:me.error})},500)},this.onSessionDeleteRequest=async(ye,me)=>{const{id:be}=me;try{this.isValidDisconnect({topic:ye,reason:me.params}),await Promise.all([new Promise(ve=>{this.client.core.relayer.once(D$1.publish,async()=>{ve(await this.deleteSession(ye))})}),this.sendResult({id:be,topic:ye,result:!0})]),this.client.events.emit("session_delete",{id:be,topic:ye})}catch(ve){this.client.logger.error(ve)}},this.onSessionRequest=async(ye,me)=>{const{id:be,params:ve}=me;try{this.isValidRequest(g({topic:ye},ve));const Ee=Ln(JSON.stringify(formatJsonRpcRequest("wc_sessionRequest",ve,be))),Oe=this.client.session.get(ye),xe=await this.getVerifyContext(Ee,Oe.peer.metadata),gr={id:be,topic:ye,params:ve,verifyContext:xe};await this.setPendingSessionRequest(gr),this.addSessionRequestToSessionRequestQueue(gr),this.processSessionRequestQueue()}catch(Ee){await this.sendError(be,ye,Ee),this.client.logger.error(Ee)}},this.onSessionRequestResponse=(ye,me)=>{const{id:be}=me;isJsonRpcResult(me)?this.events.emit(yt("session_request",be),{result:me.result}):isJsonRpcError(me)&&this.events.emit(yt("session_request",be),{error:me.error})},this.onSessionEventRequest=async(ye,me)=>{const{id:be,params:ve}=me;try{const Ee=`${ye}_session_event_${ve.event.name}`,Oe=tr.get(Ee);if(Oe&&this.isRequestOutOfSync(Oe,be)){this.client.logger.info(`Discarding out of sync request - ${be}`);return}this.isValidEmit(g({topic:ye},ve)),this.client.events.emit("session_event",{id:be,topic:ye,params:ve}),tr.set(Ee,be)}catch(Ee){await this.sendError(be,ye,Ee),this.client.logger.error(Ee)}},this.addSessionRequestToSessionRequestQueue=ye=>{this.sessionRequestQueue.queue.push(ye)},this.cleanupAfterResponse=ye=>{this.deletePendingSessionRequest(ye.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=I.idle,this.processSessionRequestQueue()},cjs$4.toMiliseconds(this.requestQueueDelay))},this.processSessionRequestQueue=()=>{if(this.sessionRequestQueue.state===I.active){this.client.logger.info("session request queue is already active.");return}const ye=this.sessionRequestQueue.queue[0];if(!ye){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=I.active,this.client.events.emit("session_request",ye)}catch(me){this.client.logger.error(me)}},this.onPairingCreated=ye=>{if(ye.active)return;const me=this.client.proposal.getAll().find(be=>be.pairingTopic===ye.topic);me&&this.onSessionProposeRequest(ye.topic,formatJsonRpcRequest("wc_sessionPropose",{requiredNamespaces:me.requiredNamespaces,optionalNamespaces:me.optionalNamespaces,relays:me.relays,proposer:me.proposer,sessionProperties:me.sessionProperties},me.id))},this.isValidConnect=async ye=>{if(!Ht(ye)){const{message:xe}=N("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(ye)}`);throw new Error(xe)}const{pairingTopic:me,requiredNamespaces:be,optionalNamespaces:ve,sessionProperties:Ee,relays:Oe}=ye;if(w(me)||await this.isValidPairingTopic(me),!xt(Oe,!0)){const{message:xe}=N("MISSING_OR_INVALID",`connect() relays: ${Oe}`);throw new Error(xe)}!w(be)&&B(be)!==0&&this.validateNamespaces(be,"requiredNamespaces"),!w(ve)&&B(ve)!==0&&this.validateNamespaces(ve,"optionalNamespaces"),w(Ee)||this.validateSessionProps(Ee,"sessionProperties")},this.validateNamespaces=(ye,me)=>{const be=Lt(ye,"connect()",me);if(be)throw new Error(be.message)},this.isValidApprove=async ye=>{if(!Ht(ye))throw new Error(N("MISSING_OR_INVALID",`approve() params: ${ye}`).message);const{id:me,namespaces:be,relayProtocol:ve,sessionProperties:Ee}=ye;await this.isValidProposalId(me);const Oe=this.client.proposal.get(me),xe=un(be,"approve()");if(xe)throw new Error(xe.message);const gr=dn(Oe.requiredNamespaces,be,"approve()");if(gr)throw new Error(gr.message);if(!h(ve,!0)){const{message:we}=N("MISSING_OR_INVALID",`approve() relayProtocol: ${ve}`);throw new Error(we)}w(Ee)||this.validateSessionProps(Ee,"sessionProperties")},this.isValidReject=async ye=>{if(!Ht(ye)){const{message:ve}=N("MISSING_OR_INVALID",`reject() params: ${ye}`);throw new Error(ve)}const{id:me,reason:be}=ye;if(await this.isValidProposalId(me),!qt(be)){const{message:ve}=N("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(be)}`);throw new Error(ve)}},this.isValidSessionSettleRequest=ye=>{if(!Ht(ye)){const{message:gr}=N("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${ye}`);throw new Error(gr)}const{relay:me,controller:be,namespaces:ve,expiry:Ee}=ye;if(!ln(me)){const{message:gr}=N("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(gr)}const Oe=Kt(be,"onSessionSettleRequest()");if(Oe)throw new Error(Oe.message);const xe=un(ve,"onSessionSettleRequest()");if(xe)throw new Error(xe.message);if(mt(Ee)){const{message:gr}=N("EXPIRED","onSessionSettleRequest()");throw new Error(gr)}},this.isValidUpdate=async ye=>{if(!Ht(ye)){const{message:xe}=N("MISSING_OR_INVALID",`update() params: ${ye}`);throw new Error(xe)}const{topic:me,namespaces:be}=ye;await this.isValidSessionTopic(me);const ve=this.client.session.get(me),Ee=un(be,"update()");if(Ee)throw new Error(Ee.message);const Oe=dn(ve.requiredNamespaces,be,"update()");if(Oe)throw new Error(Oe.message)},this.isValidExtend=async ye=>{if(!Ht(ye)){const{message:be}=N("MISSING_OR_INVALID",`extend() params: ${ye}`);throw new Error(be)}const{topic:me}=ye;await this.isValidSessionTopic(me)},this.isValidRequest=async ye=>{if(!Ht(ye)){const{message:xe}=N("MISSING_OR_INVALID",`request() params: ${ye}`);throw new Error(xe)}const{topic:me,request:be,chainId:ve,expiry:Ee}=ye;await this.isValidSessionTopic(me);const{namespaces:Oe}=this.client.session.get(me);if(!zt(Oe,ve)){const{message:xe}=N("MISSING_OR_INVALID",`request() chainId: ${ve}`);throw new Error(xe)}if(!Bt(be)){const{message:xe}=N("MISSING_OR_INVALID",`request() ${JSON.stringify(be)}`);throw new Error(xe)}if(!Yt(Oe,ve,be.method)){const{message:xe}=N("MISSING_OR_INVALID",`request() method: ${be.method}`);throw new Error(xe)}if(Ee&&!Xt(Ee,U)){const{message:xe}=N("MISSING_OR_INVALID",`request() expiry: ${Ee}. Expiry must be a number (in seconds) between ${U.min} and ${U.max}`);throw new Error(xe)}},this.isValidRespond=async ye=>{if(!Ht(ye)){const{message:ve}=N("MISSING_OR_INVALID",`respond() params: ${ye}`);throw new Error(ve)}const{topic:me,response:be}=ye;if(await this.isValidSessionTopic(me),!Gt(be)){const{message:ve}=N("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(be)}`);throw new Error(ve)}},this.isValidPing=async ye=>{if(!Ht(ye)){const{message:be}=N("MISSING_OR_INVALID",`ping() params: ${ye}`);throw new Error(be)}const{topic:me}=ye;await this.isValidSessionOrPairingTopic(me)},this.isValidEmit=async ye=>{if(!Ht(ye)){const{message:Oe}=N("MISSING_OR_INVALID",`emit() params: ${ye}`);throw new Error(Oe)}const{topic:me,event:be,chainId:ve}=ye;await this.isValidSessionTopic(me);const{namespaces:Ee}=this.client.session.get(me);if(!zt(Ee,ve)){const{message:Oe}=N("MISSING_OR_INVALID",`emit() chainId: ${ve}`);throw new Error(Oe)}if(!Wt(be)){const{message:Oe}=N("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(be)}`);throw new Error(Oe)}if(!Jt(Ee,ve,be.name)){const{message:Oe}=N("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(be)}`);throw new Error(Oe)}},this.isValidDisconnect=async ye=>{if(!Ht(ye)){const{message:be}=N("MISSING_OR_INVALID",`disconnect() params: ${ye}`);throw new Error(be)}const{topic:me}=ye;await this.isValidSessionOrPairingTopic(me)},this.getVerifyContext=async(ye,me)=>{const be={verified:{verifyUrl:me.verifyUrl||$,validation:"UNKNOWN",origin:me.url||""}};try{const ve=await this.client.core.verify.resolve({attestationId:ye,verifyUrl:me.verifyUrl});ve&&(be.verified.origin=ve.origin,be.verified.isScam=ve.isScam,be.verified.validation=ve.origin===new URL(me.url).origin?"VALID":"INVALID")}catch(ve){this.client.logger.info(ve)}return this.client.logger.info(`Verify context: ${JSON.stringify(be)}`),be},this.validateSessionProps=(ye,me)=>{Object.values(ye).forEach(be=>{if(!h(be,!1)){const{message:ve}=N("MISSING_OR_INVALID",`${me} must be in Record<string, string> format. Received: ${JSON.stringify(be)}`);throw new Error(ve)}})}}async isInitialized(){if(!this.initialized){const{message:e}=N("NOT_INITIALIZED",this.name);throw new Error(e)}await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(D$1.message,async e=>{const{topic:ye,message:me}=e;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(me)))return;const be=await this.client.core.crypto.decode(ye,me);try{isJsonRpcRequest(be)?(this.client.core.history.set(ye,be),this.onRelayEventRequest({topic:ye,payload:be})):isJsonRpcResponse(be)?(await this.client.core.history.resolve(be),await this.onRelayEventResponse({topic:ye,payload:be}),this.client.core.history.delete(ye,be.id)):this.onRelayEventUnknownPayload({topic:ye,payload:be})}catch(ve){this.client.logger.error(ve)}})}registerExpirerEvents(){this.client.core.expirer.on(v.expired,async e=>{const{topic:ye,id:me}=ft(e.target);if(me&&this.client.pendingRequest.keys.includes(me))return await this.deletePendingSessionRequest(me,N("EXPIRED"),!0);ye?this.client.session.keys.includes(ye)&&(await this.deleteSession(ye,!0),this.client.events.emit("session_expire",{topic:ye})):me&&(await this.deleteProposal(me,!0),this.client.events.emit("proposal_expire",{id:me}))})}registerPairingEvents(){this.client.core.pairing.events.on(V$2.create,e=>this.onPairingCreated(e))}isValidPairingTopic(e){if(!h(e,!1)){const{message:ye}=N("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(ye)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:ye}=N("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(ye)}if(mt(this.client.core.pairing.pairings.get(e).expiry)){const{message:ye}=N("EXPIRED",`pairing topic: ${e}`);throw new Error(ye)}}async isValidSessionTopic(e){if(!h(e,!1)){const{message:ye}=N("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(ye)}if(!this.client.session.keys.includes(e)){const{message:ye}=N("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(ye)}if(mt(this.client.session.get(e).expiry)){await this.deleteSession(e);const{message:ye}=N("EXPIRED",`session topic: ${e}`);throw new Error(ye)}}async isValidSessionOrPairingTopic(e){if(this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(h(e,!1)){const{message:ye}=N("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(ye)}else{const{message:ye}=N("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(ye)}}async isValidProposalId(e){if(!Ft(e)){const{message:ye}=N("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(ye)}if(!this.client.proposal.keys.includes(e)){const{message:ye}=N("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(ye)}if(mt(this.client.proposal.get(e).expiry)){await this.deleteProposal(e);const{message:ye}=N("EXPIRED",`proposal id: ${e}`);throw new Error(ye)}}}class ds extends Mt{constructor(e,ye){super(e,ye,ne,G),this.core=e,this.logger=ye}}class us extends Mt{constructor(e,ye){super(e,ye,ae,G),this.core=e,this.logger=ye}}class gs extends Mt{constructor(e,ye){super(e,ye,le,G,me=>me.id),this.core=e,this.logger=ye}}class Q extends b$1{constructor(e){super(e),this.protocol=X,this.version=F,this.name=M.name,this.events=new c$4.EventEmitter,this.on=(me,be)=>this.events.on(me,be),this.once=(me,be)=>this.events.once(me,be),this.off=(me,be)=>this.events.off(me,be),this.removeListener=(me,be)=>this.events.removeListener(me,be),this.removeAllListeners=me=>this.events.removeAllListeners(me),this.connect=async me=>{try{return await this.engine.connect(me)}catch(be){throw this.logger.error(be.message),be}},this.pair=async me=>{try{return await this.engine.pair(me)}catch(be){throw this.logger.error(be.message),be}},this.approve=async me=>{try{return await this.engine.approve(me)}catch(be){throw this.logger.error(be.message),be}},this.reject=async me=>{try{return await this.engine.reject(me)}catch(be){throw this.logger.error(be.message),be}},this.update=async me=>{try{return await this.engine.update(me)}catch(be){throw this.logger.error(be.message),be}},this.extend=async me=>{try{return await this.engine.extend(me)}catch(be){throw this.logger.error(be.message),be}},this.request=async me=>{try{return await this.engine.request(me)}catch(be){throw this.logger.error(be.message),be}},this.respond=async me=>{try{return await this.engine.respond(me)}catch(be){throw this.logger.error(be.message),be}},this.ping=async me=>{try{return await this.engine.ping(me)}catch(be){throw this.logger.error(be.message),be}},this.emit=async me=>{try{return await this.engine.emit(me)}catch(be){throw this.logger.error(be.message),be}},this.disconnect=async me=>{try{return await this.engine.disconnect(me)}catch(be){throw this.logger.error(be.message),be}},this.find=me=>{try{return this.engine.find(me)}catch(be){throw this.logger.error(be.message),be}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(me){throw this.logger.error(me.message),me}},this.name=(e==null?void 0:e.name)||M.name,this.metadata=(e==null?void 0:e.metadata)||Qn();const ye=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:cjs$3.pino(cjs$3.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||M.logger}));this.core=(e==null?void 0:e.core)||new Nr(e),this.logger=cjs$3.generateChildLogger(ye,this.name),this.session=new us(this.core,this.logger),this.proposal=new ds(this.core,this.logger),this.pendingRequest=new gs(this.core,this.logger),this.engine=new hs(this)}static async init(e){const ye=new Q(e);return await ye.initialize(),ye}get context(){return cjs$3.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}}const ms=Q;class NodeWalletConnectKoinos{constructor(){Ai(this,"signClient");Ai(this,"topic","");Ai(this,"chainId");Ai(this,"accounts",[]);Ai(this,"options",{logLevel:LogLevel.none})}async init(e,ye){ye&&(this.options=ye);const me=await ms.init({projectId:e.projectId,metadata:{...e.metadata},...(ye==null?void 0:ye.nodeStorage)&&{storage:ye==null?void 0:ye.nodeStorage}});(ye==null?void 0:ye.autoDisconnect)===!1||me.on("session_delete",ve=>this.onSessionDelete(ve)),this.signClient=me}async close(){var e,ye,me,be,ve,Ee,Oe,xe,gr;(e=this.signClient)==null||e.core.events.removeAllListeners(),(ye=this.signClient)==null||ye.core.relayer.events.removeAllListeners(),(me=this.signClient)==null||me.core.heartbeat.stop(),(be=this.signClient)==null||be.core.relayer.provider.events.removeAllListeners(),(ve=this.signClient)==null||ve.core.relayer.subscriber.events.removeAllListeners(),(Ee=this.signClient)==null||Ee.core.relayer.provider.connection.events.removeAllListeners(),(Oe=this.signClient)==null||Oe.events.removeAllListeners("session_delete"),(xe=this.signClient)!=null&&xe.core.relayer.connected&&await((gr=this.signClient)==null?void 0:gr.core.relayer.transportClose()),this.signClient=void 0}async onSessionDelete(e){this.options.logLevel===LogLevel.debug&&console.log("onSessionDelete",e),this.accounts=[],this.topic="",this.chainId=void 0}checkIfInitialized(){if(!this.signClient)throw new Error("Please call init(...) first")}async connect(e,ye){var Ee;this.checkIfInitialized(),this.accounts=[];const me=this.signClient.session.getAll();let be=me.length?me[me.length-1]:void 0;if(!be){const{uri:Oe,approval:xe}=await this.signClient.connect({requiredNamespaces:{koinos:{methods:ye,chains:e,events:[]}}});if(!Oe)throw new Error("Could not generate WalletConnect URI");console.log("Please copy the following WalletConnect Pairing URI into your wallet:"),console.log(Oe),be=await xe()}if(!be)return[];this.topic=be.topic,((Ee=be.namespaces.koinos.chains)==null?void 0:Ee.length)===1&&(this.chainId=be.namespaces.koinos.chains[0]);const ve=be.namespaces.koinos.accounts.reduce((Oe,xe)=>{const[gr,we,Se]=xe.split(":");return Oe.includes(Se)||Oe.push(Se),Oe},[]);return this.accounts=ve,ve}async disconnect(){this.checkIfInitialized();const e=await this.signClient.session.getAll();for(const ye of e){try{this.signClient.disconnect({topic:ye.topic,reason:U$3("USER_DISCONNECTED")})}catch(me){console.error(me)}if(ye.pairingTopic)try{this.signClient.disconnect({topic:ye.pairingTopic,reason:U$3("USER_DISCONNECTED")})}catch(me){console.error(me)}}this.accounts=[],this.topic="",this.chainId=void 0}getAccounts(){return this.accounts}getSigner(e,ye,me){const be=me||this.chainId;if(!be)throw new Error("You must provide a chain id because none or several are present in this session.");return generateSigner(e,be,this.topic,this.signClient,ye)}getProvider(e){const ye=e||this.chainId;if(!ye)throw new Error("You must provide a chain id because none or several are present in this session.");return generateProvider(ye,this.topic,this.signClient)}}var ChainIds=(fe=>(fe.Mainnet="koinos:EiBZK_GGVP0H_fXVAM3j6EAuz3-B-l3e",fe.Harbinger="koinos:EiBncD4pKRIQWco_WRqo5Q-xnXR7JuO3",fe))(ChainIds||{}),Methods=(fe=>(fe.SignMessage="koinos_signMessage",fe.SignHash="koinos_signHash",fe.SignTransaction="koinos_signTransaction",fe.SignAndSendTransaction="koinos_signAndSendTransaction",fe.PrepareTransaction="koinos_prepareTransaction",fe.WaitForTransaction="koinos_waitForTransaction",fe.JsonRpcCall="koinos_JsonRpcCall",fe.GetNonce="koinos_getNonce",fe.GetNextNonce="koinos_getNextNonce",fe.GetAccountRc="koinos_getAccountRc",fe.GetTransactionsById="koinos_getTransactionsById",fe.GetBlocksById="koinos_getBlocksById",fe.GetHeadInfo="koinos_getHeadInfo",fe.GetChainId="koinos_getChainId",fe.GetBlocks="koinos_getBlocks",fe.GetBlock="koinos_getBlock",fe.SendTransaction="koinos_sendTransaction",fe.ReadContract="koinos_readContract",fe.SubmitBlock="koinos_submitBlock",fe))(Methods||{}),LogLevel=(fe=>(fe[fe.none=0]="none",fe[fe.debug=1]="debug",fe))(LogLevel||{});exports.ChainIds=ChainIds;exports.LogLevel=LogLevel;exports.Methods=Methods;exports.NodeWalletConnectKoinos=NodeWalletConnectKoinos;exports.R=R$3;exports.T=T$3;exports.WebWalletConnectKoinos=WebWalletConnectKoinos;exports.a=a$4;exports.ne=ne$2;exports.oe=oe$3;exports.p=p$6;exports.se=se;exports.te=te$4;exports.y=y$5;
